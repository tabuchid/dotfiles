"use strict";var hs=Object.create;var Fr=Object.defineProperty;var ms=Object.getOwnPropertyDescriptor;var bs=Object.getOwnPropertyNames;var ps=Object.getPrototypeOf,ys=Object.prototype.hasOwnProperty;var xt=(o,r)=>()=>(o&&(r=o(o=0)),r);var wn=(o,r)=>()=>(r||o((r={exports:{}}).exports,r),r.exports),Qo=(o,r)=>{for(var a in r)Fr(o,a,{get:r[a],enumerable:!0})},Go=(o,r,a,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of bs(r))!ys.call(o,s)&&s!==a&&Fr(o,s,{get:()=>r[s],enumerable:!(i=ms(r,s))||i.enumerable});return o};var je=(o,r,a)=>(a=o!=null?hs(ps(o)):{},Go(r||!o||!o.__esModule?Fr(a,"default",{value:o,enumerable:!0}):a,o)),gs=o=>Go(Fr({},"__esModule",{value:!0}),o);var Jo=wn((qr,Zo)=>{(function(o,r){typeof qr=="object"&&typeof Zo<"u"?r(qr):typeof define=="function"&&define.amd?define(["exports"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o.WebStreamsPolyfill={}))})(qr,(function(o){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function a(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let d=a,_=Promise,b=Promise.prototype.then,c=Promise.resolve.bind(_),p=Promise.reject.bind(_);function S(e){return new _(e)}function w(e){return c(e)}function y(e){return p(e)}function g(e,t,n){return b.call(e,t,n)}function C(e,t,n){g(g(e,t,n),void 0,d)}function E(e,t){C(e,t)}function B(e,t){C(e,void 0,t)}function R(e,t,n){return g(e,t,n)}function U(e){g(e,void 0,d)}let A=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=w(void 0);return n=>g(t,n)})();function M(e,t,n){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function W(e,t,n){try{return w(M(e,t,n))}catch(u){return y(u)}}let Z=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let n=this._back,u=n;n._elements.length===Z-1&&(u={_elements:[],_next:void 0}),n._elements.push(t),u!==n&&(this._back=u,n._next=u),++this._size}shift(){let t=this._front,n=t,u=this._cursor,f=u+1,h=t._elements,m=h[u];return f===Z&&(n=t._next,f=0),--this._size,this._cursor=f,t!==n&&(this._front=n),h[u]=void 0,m}forEach(t){let n=this._cursor,u=this._front,f=u._elements;for(;(n!==f.length||u._next!==void 0)&&!(n===f.length&&(u=u._next,f=u._elements,n=0,f.length===0));)t(f[n]),++n}peek(){let t=this._front,n=this._cursor;return t._elements[n]}}function Ct(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?lt(e):t._state==="closed"?me(e):er(e,t._storedError)}function ut(e,t){let n=e._ownerReadableStream;return pe(n,t)}function L(e){e._ownerReadableStream._state==="readable"?Ce(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):tr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function _e(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function lt(e){e._closedPromise=S((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n})}function er(e,t){lt(e),Ce(e,t)}function me(e){lt(e),rr(e)}function Ce(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function tr(e,t){er(e,t)}function rr(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ft=r("[[AbortSteps]]"),ct=r("[[ErrorSteps]]"),Se=r("[[CancelSteps]]"),He=r("[[PullSteps]]"),Ve=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Ae=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Kr(e){return typeof e=="object"||typeof e=="function"}function j(e,t){if(e!==void 0&&!Kr(e))throw new TypeError(`${t} is not an object.`)}function $(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function J(e){return typeof e=="object"&&e!==null||typeof e=="function"}function X(e,t){if(!J(e))throw new TypeError(`${t} is not an object.`)}function Q(e,t,n){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${n}'.`)}function Pe(e,t,n){if(e===void 0)throw new TypeError(`${t} is required in '${n}'.`)}function ee(e){return Number(e)}function N(e){return e===0?0:e}function we(e){return N(Ae(e))}function oe(e,t){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=N(f),!Ve(f))throw new TypeError(`${t} is not a finite number`);if(f=we(f),f<0||f>u)throw new TypeError(`${t} is outside the accepted range of 0 to ${u}, inclusive`);return!Ve(f)||f===0?0:f}function Ye(e,t){if(!$e(e))throw new TypeError(`${t} is not a ReadableStream.`)}function fe(e){return new At(e)}function dt(e,t){e._reader._readRequests.push(t)}function Be(e,t,n){let f=e._reader._readRequests.shift();n?f._closeSteps():f._chunkSteps(t)}function Qe(e){return e._reader._readRequests.length}function xn(e){let t=e._reader;return!(t===void 0||!Le(t))}class At{constructor(t){if(Q(t,1,"ReadableStreamDefaultReader"),Ye(t,"First parameter"),Ue(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ct(this,t),this._readRequests=new V}get closed(){return Le(this)?this._closedPromise:y(nr("closed"))}cancel(t=void 0){return Le(this)?this._ownerReadableStream===void 0?y(_e("cancel")):ut(this,t):y(nr("cancel"))}read(){if(!Le(this))return y(nr("read"));if(this._ownerReadableStream===void 0)return y(_e("read from"));let t,n,u=S((h,m)=>{t=h,n=m});return Pt(this,{_chunkSteps:h=>t({value:h,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:h=>n(h)}),u}releaseLock(){if(!Le(this))throw nr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");L(this)}}}Object.defineProperties(At.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(At.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Le(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof At}function Pt(e,t){let n=e._ownerReadableStream;n._disturbed=!0,n._state==="closed"?t._closeSteps():n._state==="errored"?t._errorSteps(n._storedError):n._readableStreamController[He](t)}function nr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let jn=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Nn{constructor(t,n){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=n}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?R(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let n=()=>this._returnSteps(t);return this._ongoingPromise?R(this._ongoingPromise,n,n):n()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return y(_e("iterate"));let n,u,f=S((m,T)=>{n=m,u=T});return Pt(t,{_chunkSteps:m=>{this._ongoingPromise=void 0,A(()=>n({value:m,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,L(t),n({value:void 0,done:!0})},_errorSteps:m=>{this._ongoingPromise=void 0,this._isFinished=!0,L(t),u(m)}}),f}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let n=this._reader;if(n._ownerReadableStream===void 0)return y(_e("finish iterating"));if(!this._preventCancel){let u=ut(n,t);return L(n),R(u,()=>({value:t,done:!0}))}return L(n),w({value:t,done:!0})}}let Hn={next(){return Vn(this)?this._asyncIteratorImpl.next():y(Yn("next"))},return(e){return Vn(this)?this._asyncIteratorImpl.return(e):y(Yn("return"))}};jn!==void 0&&Object.setPrototypeOf(Hn,jn);function Qa(e,t){let n=fe(e),u=new Nn(n,t),f=Object.create(Hn);return f._asyncIteratorImpl=u,f}function Vn(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Nn}catch{return!1}}function Yn(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Qn=Number.isNaN||function(e){return e!==e};function Bt(e){return e.slice()}function Gn(e,t,n,u,f){new Uint8Array(e).set(new Uint8Array(n,u,f),t)}function du(e){return e}function or(e){return!1}function Kn(e,t,n){if(e.slice)return e.slice(t,n);let u=n-t,f=new ArrayBuffer(u);return Gn(f,0,e,t,u),f}function Ga(e){return!(typeof e!="number"||Qn(e)||e<0)}function Zn(e){let t=Kn(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Zr(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Jr(e,t,n){if(!Ga(n)||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function Ka(e){return e._queue.peek().value}function Ie(e){e._queue=new V,e._queueTotalSize=0}class Ot{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Xr(this))throw nn("view");return this._view}respond(t){if(!Xr(this))throw nn("respond");if(Q(t,1,"respond"),t=oe(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");or(this._view.buffer),lr(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!Xr(this))throw nn("respondWithNewView");if(Q(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");or(t.buffer),fr(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Ot.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ht{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ge(this))throw Wt("byobRequest");return rn(this)}get desiredSize(){if(!Ge(this))throw Wt("desiredSize");return ao(this)}close(){if(!Ge(this))throw Wt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);kt(this)}enqueue(t){if(!Ge(this))throw Wt("enqueue");if(Q(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be enqueued to`);ur(this,t)}error(t=void 0){if(!Ge(this))throw Wt("error");be(this,t)}[Se](t){Jn(this),Ie(this);let n=this._cancelAlgorithm(t);return sr(this),n}[He](t){let n=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,ro(this);let h=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);t._chunkSteps(h);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(m){t._errorSteps(m);return}let h={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}dt(n,t),Ke(this)}}Object.defineProperties(ht.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ht.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ge(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ht}function Xr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Ot}function Ke(e){if(!ei(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let n=e._pullAlgorithm();C(n,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ke(e))},u=>{be(e,u)})}function Jn(e){tn(e),e._pendingPullIntos=new V}function en(e,t){let n=!1;e._state==="closed"&&(n=!0);let u=Xn(t);t.readerType==="default"?Be(e,u,n):ni(e,u,n)}function Xn(e){let t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function ar(e,t,n,u){e._queue.push({buffer:t,byteOffset:n,byteLength:u}),e._queueTotalSize+=u}function eo(e,t){let n=t.elementSize,u=t.bytesFilled-t.bytesFilled%n,f=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),h=t.bytesFilled+f,m=h-h%n,T=f,P=!1;m>u&&(T=m-t.bytesFilled,P=!0);let k=e._queue;for(;T>0;){let D=k.peek(),F=Math.min(T,D.byteLength),x=t.byteOffset+t.bytesFilled;Gn(t.buffer,x,D.buffer,D.byteOffset,F),D.byteLength===F?k.shift():(D.byteOffset+=F,D.byteLength-=F),e._queueTotalSize-=F,to(e,F,t),T-=F}return P}function to(e,t,n){n.bytesFilled+=t}function ro(e){e._queueTotalSize===0&&e._closeRequested?(sr(e),$t(e._controlledReadableByteStream)):Ke(e)}function tn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function no(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();eo(e,t)&&(ir(e),en(e._controlledReadableByteStream,t))}}function Za(e,t,n){let u=e._controlledReadableByteStream,f=1;t.constructor!==DataView&&(f=t.constructor.BYTES_PER_ELEMENT);let h=t.constructor,m=t.buffer,T={buffer:m,bufferByteLength:m.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:f,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(T),uo(u,n);return}if(u._state==="closed"){let P=new h(T.buffer,T.byteOffset,0);n._closeSteps(P);return}if(e._queueTotalSize>0){if(eo(e,T)){let P=Xn(T);ro(e),n._chunkSteps(P);return}if(e._closeRequested){let P=new TypeError("Insufficient bytes to fill elements in the given buffer");be(e,P),n._errorSteps(P);return}}e._pendingPullIntos.push(T),uo(u,n),Ke(e)}function Ja(e,t){let n=e._controlledReadableByteStream;if(on(n))for(;lo(n)>0;){let u=ir(e);en(n,u)}}function Xa(e,t,n){if(to(e,t,n),n.bytesFilled<n.elementSize)return;ir(e);let u=n.bytesFilled%n.elementSize;if(u>0){let f=n.byteOffset+n.bytesFilled,h=Kn(n.buffer,f-u,f);ar(e,h,0,h.byteLength)}n.bytesFilled-=u,en(e._controlledReadableByteStream,n),no(e)}function oo(e,t){let n=e._pendingPullIntos.peek();tn(e),e._controlledReadableByteStream._state==="closed"?Ja(e):Xa(e,t,n),Ke(e)}function ir(e){return e._pendingPullIntos.shift()}function ei(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(xn(t)&&Qe(t)>0||on(t)&&lo(t)>0||ao(e)>0)}function sr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function kt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw be(e,u),u}sr(e),$t(t)}}function ur(e,t){let n=e._controlledReadableByteStream;if(e._closeRequested||n._state!=="readable")return;let u=t.buffer,f=t.byteOffset,h=t.byteLength,m=u;if(e._pendingPullIntos.length>0){let T=e._pendingPullIntos.peek();or(T.buffer),T.buffer=T.buffer}if(tn(e),xn(n))if(Qe(n)===0)ar(e,m,f,h);else{e._pendingPullIntos.length>0&&ir(e);let T=new Uint8Array(m,f,h);Be(n,T,!1)}else on(n)?(ar(e,m,f,h),no(e)):ar(e,m,f,h);Ke(e)}function be(e,t){let n=e._controlledReadableByteStream;n._state==="readable"&&(Jn(e),Ie(e),sr(e),Fo(n,t))}function rn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(Ot.prototype);ri(u,e,n),e._byobRequest=u}return e._byobRequest}function ao(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function lr(e,t){let n=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,oo(e,t)}function fr(e,t){let n=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=t.byteLength;n.buffer=t.buffer,oo(e,f)}function io(e,t,n,u,f,h,m){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ie(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=h,t._pullAlgorithm=u,t._cancelAlgorithm=f,t._autoAllocateChunkSize=m,t._pendingPullIntos=new V,e._readableStreamController=t;let T=n();C(w(T),()=>{t._started=!0,Ke(t)},P=>{be(t,P)})}function ti(e,t,n){let u=Object.create(ht.prototype),f=()=>{},h=()=>w(void 0),m=()=>w(void 0);t.start!==void 0&&(f=()=>t.start(u)),t.pull!==void 0&&(h=()=>t.pull(u)),t.cancel!==void 0&&(m=P=>t.cancel(P));let T=t.autoAllocateChunkSize;if(T===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");io(e,u,f,h,m,n,T)}function ri(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}function nn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Wt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function so(e){return new Dt(e)}function uo(e,t){e._reader._readIntoRequests.push(t)}function ni(e,t,n){let f=e._reader._readIntoRequests.shift();n?f._closeSteps(t):f._chunkSteps(t)}function lo(e){return e._reader._readIntoRequests.length}function on(e){let t=e._reader;return!(t===void 0||!Ze(t))}class Dt{constructor(t){if(Q(t,1,"ReadableStreamBYOBReader"),Ye(t,"First parameter"),Ue(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ge(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ct(this,t),this._readIntoRequests=new V}get closed(){return Ze(this)?this._closedPromise:y(cr("closed"))}cancel(t=void 0){return Ze(this)?this._ownerReadableStream===void 0?y(_e("cancel")):ut(this,t):y(cr("cancel"))}read(t){if(!Ze(this))return y(cr("read"));if(!ArrayBuffer.isView(t))return y(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return y(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return y(new TypeError("view's buffer must have non-zero byteLength"));if(or(t.buffer),this._ownerReadableStream===void 0)return y(_e("read from"));let n,u,f=S((m,T)=>{n=m,u=T});return fo(this,t,{_chunkSteps:m=>n({value:m,done:!1}),_closeSteps:m=>n({value:m,done:!0}),_errorSteps:m=>u(m)}),f}releaseLock(){if(!Ze(this))throw cr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");L(this)}}}Object.defineProperties(Dt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ze(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Dt}function fo(e,t,n){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?n._errorSteps(u._storedError):Za(u._readableStreamController,t,n)}function cr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ft(e,t){let{highWaterMark:n}=e;if(n===void 0)return t;if(Qn(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function dr(e){let{size:t}=e;return t||(()=>1)}function hr(e,t){j(e,t);let n=e?.highWaterMark,u=e?.size;return{highWaterMark:n===void 0?void 0:ee(n),size:u===void 0?void 0:oi(u,`${t} has member 'size' that`)}}function oi(e,t){return $(e,t),n=>ee(e(n))}function ai(e,t){j(e,t);let n=e?.abort,u=e?.close,f=e?.start,h=e?.type,m=e?.write;return{abort:n===void 0?void 0:ii(n,e,`${t} has member 'abort' that`),close:u===void 0?void 0:si(u,e,`${t} has member 'close' that`),start:f===void 0?void 0:ui(f,e,`${t} has member 'start' that`),write:m===void 0?void 0:li(m,e,`${t} has member 'write' that`),type:h}}function ii(e,t,n){return $(e,n),u=>W(e,t,[u])}function si(e,t,n){return $(e,n),()=>W(e,t,[])}function ui(e,t,n){return $(e,n),u=>M(e,t,[u])}function li(e,t,n){return $(e,n),(u,f)=>W(e,t,[u,f])}function co(e,t){if(!mt(e))throw new TypeError(`${t} is not a WritableStream.`)}function fi(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let ci=typeof AbortController=="function";function di(){if(ci)return new AbortController}class qt{constructor(t={},n={}){t===void 0?t=null:X(t,"First parameter");let u=hr(n,"Second parameter"),f=ai(t,"First parameter");if(mo(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let m=dr(u),T=Ft(u,1);Ci(this,f,T,m)}get locked(){if(!mt(this))throw gr("locked");return bt(this)}abort(t=void 0){return mt(this)?bt(this)?y(new TypeError("Cannot abort a stream that already has a writer")):mr(this,t):y(gr("abort"))}close(){return mt(this)?bt(this)?y(new TypeError("Cannot close a stream that already has a writer")):Re(this)?y(new TypeError("Cannot close an already-closing stream")):bo(this):y(gr("close"))}getWriter(){if(!mt(this))throw gr("getWriter");return ho(this)}}Object.defineProperties(qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function ho(e){return new Lt(e)}function hi(e,t,n,u,f=1,h=()=>1){let m=Object.create(qt.prototype);mo(m);let T=Object.create(pt.prototype);return wo(m,T,e,t,n,u,f,h),m}function mo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function mt(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof qt}function bt(e){return e._writer!==void 0}function mr(e,t){var n;if(e._state==="closed"||e._state==="errored")return w(void 0);e._writableStreamController._abortReason=t,(n=e._writableStreamController._abortController)===null||n===void 0||n.abort();let u=e._state;if(u==="closed"||u==="errored")return w(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,t=void 0);let h=S((m,T)=>{e._pendingAbortRequest={_promise:void 0,_resolve:m,_reject:T,_reason:t,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=h,f||sn(e,t),h}function bo(e){let t=e._state;if(t==="closed"||t==="errored")return y(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let n=S((f,h)=>{let m={_resolve:f,_reject:h};e._closeRequest=m}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&pn(u),Ai(e._writableStreamController),n}function mi(e){return S((n,u)=>{let f={_resolve:n,_reject:u};e._writeRequests.push(f)})}function an(e,t){if(e._state==="writable"){sn(e,t);return}un(e)}function sn(e,t){let n=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&yo(u,t),!_i(e)&&n._started&&un(e)}function un(e){e._state="errored",e._writableStreamController[ct]();let t=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(t)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){br(e);return}let n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring){n._reject(t),br(e);return}let u=e._writableStreamController[ft](n._reason);C(u,()=>{n._resolve(),br(e)},f=>{n._reject(f),br(e)})}function bi(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function pi(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,an(e,t)}function yi(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let n=e._writer;n!==void 0&&Eo(n)}function gi(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),an(e,t)}function Re(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function _i(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Si(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function wi(e){e._inFlightWriteRequest=e._writeRequests.shift()}function br(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&mn(t,e._storedError)}function ln(e,t){let n=e._writer;n!==void 0&&t!==e._backpressure&&(t?Fi(n):pn(n)),e._backpressure=t}class Lt{constructor(t){if(Q(t,1,"WritableStreamDefaultWriter"),co(t,"First parameter"),bt(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let n=t._state;if(n==="writable")!Re(t)&&t._backpressure?Sr(this):Co(this),_r(this);else if(n==="erroring")bn(this,t._storedError),_r(this);else if(n==="closed")Co(this),Wi(this);else{let u=t._storedError;bn(this,u),vo(this,u)}}get closed(){return Je(this)?this._closedPromise:y(Xe("closed"))}get desiredSize(){if(!Je(this))throw Xe("desiredSize");if(this._ownerWritableStream===void 0)throw It("desiredSize");return Ei(this)}get ready(){return Je(this)?this._readyPromise:y(Xe("ready"))}abort(t=void 0){return Je(this)?this._ownerWritableStream===void 0?y(It("abort")):Ri(this,t):y(Xe("abort"))}close(){if(!Je(this))return y(Xe("close"));let t=this._ownerWritableStream;return t===void 0?y(It("close")):Re(t)?y(new TypeError("Cannot close an already-closing stream")):po(this)}releaseLock(){if(!Je(this))throw Xe("releaseLock");this._ownerWritableStream!==void 0&&go(this)}write(t=void 0){return Je(this)?this._ownerWritableStream===void 0?y(It("write to")):_o(this,t):y(Xe("write"))}}Object.defineProperties(Lt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Je(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Lt}function Ri(e,t){let n=e._ownerWritableStream;return mr(n,t)}function po(e){let t=e._ownerWritableStream;return bo(t)}function Ti(e){let t=e._ownerWritableStream,n=t._state;return Re(t)||n==="closed"?w(void 0):n==="errored"?y(t._storedError):po(e)}function vi(e,t){e._closedPromiseState==="pending"?mn(e,t):Di(e,t)}function yo(e,t){e._readyPromiseState==="pending"?Ao(e,t):qi(e,t)}function Ei(e){let t=e._ownerWritableStream,n=t._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:Ro(t._writableStreamController)}function go(e){let t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");yo(e,n),vi(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function _o(e,t){let n=e._ownerWritableStream,u=n._writableStreamController,f=Pi(u,t);if(n!==e._ownerWritableStream)return y(It("write to"));let h=n._state;if(h==="errored")return y(n._storedError);if(Re(n)||h==="closed")return y(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return y(n._storedError);let m=mi(n);return Bi(u,t,f),m}let So={};class pt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!fn(this))throw hn("abortReason");return this._abortReason}get signal(){if(!fn(this))throw hn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!fn(this))throw hn("error");this._controlledWritableStream._state==="writable"&&To(this,t)}[ft](t){let n=this._abortAlgorithm(t);return pr(this),n}[ct](){Ie(this)}}Object.defineProperties(pt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function fn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof pt}function wo(e,t,n,u,f,h,m,T){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ie(t),t._abortReason=void 0,t._abortController=di(),t._started=!1,t._strategySizeAlgorithm=T,t._strategyHWM=m,t._writeAlgorithm=u,t._closeAlgorithm=f,t._abortAlgorithm=h;let P=dn(t);ln(e,P);let k=n(),D=w(k);C(D,()=>{t._started=!0,yr(t)},F=>{t._started=!0,an(e,F)})}function Ci(e,t,n,u){let f=Object.create(pt.prototype),h=()=>{},m=()=>w(void 0),T=()=>w(void 0),P=()=>w(void 0);t.start!==void 0&&(h=()=>t.start(f)),t.write!==void 0&&(m=k=>t.write(k,f)),t.close!==void 0&&(T=()=>t.close()),t.abort!==void 0&&(P=k=>t.abort(k)),wo(e,f,h,m,T,P,n,u)}function pr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ai(e){Jr(e,So,0),yr(e)}function Pi(e,t){try{return e._strategySizeAlgorithm(t)}catch(n){return cn(e,n),1}}function Ro(e){return e._strategyHWM-e._queueTotalSize}function Bi(e,t,n){try{Jr(e,t,n)}catch(f){cn(e,f);return}let u=e._controlledWritableStream;if(!Re(u)&&u._state==="writable"){let f=dn(e);ln(u,f)}yr(e)}function yr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){un(t);return}if(e._queue.length===0)return;let u=Ka(e);u===So?Oi(e):ki(e,u)}function cn(e,t){e._controlledWritableStream._state==="writable"&&To(e,t)}function Oi(e){let t=e._controlledWritableStream;Si(t),Zr(e);let n=e._closeAlgorithm();pr(e),C(n,()=>{yi(t)},u=>{gi(t,u)})}function ki(e,t){let n=e._controlledWritableStream;wi(n);let u=e._writeAlgorithm(t);C(u,()=>{bi(n);let f=n._state;if(Zr(e),!Re(n)&&f==="writable"){let h=dn(e);ln(n,h)}yr(e)},f=>{n._state==="writable"&&pr(e),pi(n,f)})}function dn(e){return Ro(e)<=0}function To(e,t){let n=e._controlledWritableStream;pr(e),sn(n,t)}function gr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function hn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Xe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function It(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function _r(e){e._closedPromise=S((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"})}function vo(e,t){_r(e),mn(e,t)}function Wi(e){_r(e),Eo(e)}function mn(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Di(e,t){vo(e,t)}function Eo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Sr(e){e._readyPromise=S((t,n)=>{e._readyPromise_resolve=t,e._readyPromise_reject=n}),e._readyPromiseState="pending"}function bn(e,t){Sr(e),Ao(e,t)}function Co(e){Sr(e),pn(e)}function Ao(e,t){e._readyPromise_reject!==void 0&&(U(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Fi(e){Sr(e)}function qi(e,t){bn(e,t)}function pn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Po=typeof DOMException<"u"?DOMException:void 0;function Li(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Ii(){let e=function(n,u){this.message=n||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let zi=Li(Po)?Po:Ii();function Bo(e,t,n,u,f,h){let m=fe(e),T=ho(t);e._disturbed=!0;let P=!1,k=w(void 0);return S((D,F)=>{let x;if(h!==void 0){if(x=()=>{let v=new zi("Aborted","AbortError"),O=[];u||O.push(()=>t._state==="writable"?mr(t,v):w(void 0)),f||O.push(()=>e._state==="readable"?pe(e,v):w(void 0)),te(()=>Promise.all(O.map(I=>I())),!0,v)},h.aborted){x();return}h.addEventListener("abort",x)}function ye(){return S((v,O)=>{function I(ae){ae?v():g(_t(),I,O)}I(!1)})}function _t(){return P?w(!0):g(T._readyPromise,()=>S((v,O)=>{Pt(m,{_chunkSteps:I=>{k=g(_o(T,I),void 0,a),v(!1)},_closeSteps:()=>v(!0),_errorSteps:O})}))}if(Oe(e,m._closedPromise,v=>{u?ce(!0,v):te(()=>mr(t,v),!0,v)}),Oe(t,T._closedPromise,v=>{f?ce(!0,v):te(()=>pe(e,v),!0,v)}),G(e,m._closedPromise,()=>{n?ce():te(()=>Ti(T))}),Re(t)||t._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");f?ce(!0,v):te(()=>pe(e,v),!0,v)}U(ye());function xe(){let v=k;return g(k,()=>v!==k?xe():void 0)}function Oe(v,O,I){v._state==="errored"?I(v._storedError):B(O,I)}function G(v,O,I){v._state==="closed"?I():E(O,I)}function te(v,O,I){if(P)return;P=!0,t._state==="writable"&&!Re(t)?E(xe(),ae):ae();function ae(){C(v(),()=>ke(O,I),St=>ke(!0,St))}}function ce(v,O){P||(P=!0,t._state==="writable"&&!Re(t)?E(xe(),()=>ke(v,O)):ke(v,O))}function ke(v,O){go(T),L(m),h!==void 0&&h.removeEventListener("abort",x),v?F(O):D(void 0)}})}class yt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!wr(this))throw vr("desiredSize");return yn(this)}close(){if(!wr(this))throw vr("close");if(!gt(this))throw new TypeError("The stream is not in a state that permits close");Mt(this)}enqueue(t=void 0){if(!wr(this))throw vr("enqueue");if(!gt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Tr(this,t)}error(t=void 0){if(!wr(this))throw vr("error");ze(this,t)}[Se](t){Ie(this);let n=this._cancelAlgorithm(t);return Rr(this),n}[He](t){let n=this._controlledReadableStream;if(this._queue.length>0){let u=Zr(this);this._closeRequested&&this._queue.length===0?(Rr(this),$t(n)):zt(this),t._chunkSteps(u)}else dt(n,t),zt(this)}}Object.defineProperties(yt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(yt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function wr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof yt}function zt(e){if(!Oo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let n=e._pullAlgorithm();C(n,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,zt(e))},u=>{ze(e,u)})}function Oo(e){let t=e._controlledReadableStream;return!gt(e)||!e._started?!1:!!(Ue(t)&&Qe(t)>0||yn(e)>0)}function Rr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Mt(e){if(!gt(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Rr(e),$t(t))}function Tr(e,t){if(!gt(e))return;let n=e._controlledReadableStream;if(Ue(n)&&Qe(n)>0)Be(n,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(f){throw ze(e,f),f}try{Jr(e,t,u)}catch(f){throw ze(e,f),f}}zt(e)}function ze(e,t){let n=e._controlledReadableStream;n._state==="readable"&&(Ie(e),Rr(e),Fo(n,t))}function yn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Mi(e){return!Oo(e)}function gt(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function ko(e,t,n,u,f,h,m){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ie(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=m,t._strategyHWM=h,t._pullAlgorithm=u,t._cancelAlgorithm=f,e._readableStreamController=t;let T=n();C(w(T),()=>{t._started=!0,zt(t)},P=>{ze(t,P)})}function $i(e,t,n,u){let f=Object.create(yt.prototype),h=()=>{},m=()=>w(void 0),T=()=>w(void 0);t.start!==void 0&&(h=()=>t.start(f)),t.pull!==void 0&&(m=()=>t.pull(f)),t.cancel!==void 0&&(T=P=>t.cancel(P)),ko(e,f,h,m,T,n,u)}function vr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ui(e,t){return Ge(e._readableStreamController)?ji(e):xi(e)}function xi(e,t){let n=fe(e),u=!1,f=!1,h=!1,m=!1,T,P,k,D,F,x=S(G=>{F=G});function ye(){return u?(f=!0,w(void 0)):(u=!0,Pt(n,{_chunkSteps:te=>{A(()=>{f=!1;let ce=te,ke=te;h||Tr(k._readableStreamController,ce),m||Tr(D._readableStreamController,ke),u=!1,f&&ye()})},_closeSteps:()=>{u=!1,h||Mt(k._readableStreamController),m||Mt(D._readableStreamController),(!h||!m)&&F(void 0)},_errorSteps:()=>{u=!1}}),w(void 0))}function _t(G){if(h=!0,T=G,m){let te=Bt([T,P]),ce=pe(e,te);F(ce)}return x}function xe(G){if(m=!0,P=G,h){let te=Bt([T,P]),ce=pe(e,te);F(ce)}return x}function Oe(){}return k=gn(Oe,ye,_t),D=gn(Oe,ye,xe),B(n._closedPromise,G=>{ze(k._readableStreamController,G),ze(D._readableStreamController,G),(!h||!m)&&F(void 0)}),[k,D]}function ji(e){let t=fe(e),n=!1,u=!1,f=!1,h=!1,m=!1,T,P,k,D,F,x=S(v=>{F=v});function ye(v){B(v._closedPromise,O=>{v===t&&(be(k._readableStreamController,O),be(D._readableStreamController,O),(!h||!m)&&F(void 0))})}function _t(){Ze(t)&&(L(t),t=fe(e),ye(t)),Pt(t,{_chunkSteps:O=>{A(()=>{u=!1,f=!1;let I=O,ae=O;if(!h&&!m)try{ae=Zn(O)}catch(St){be(k._readableStreamController,St),be(D._readableStreamController,St),F(pe(e,St));return}h||ur(k._readableStreamController,I),m||ur(D._readableStreamController,ae),n=!1,u?Oe():f&&G()})},_closeSteps:()=>{n=!1,h||kt(k._readableStreamController),m||kt(D._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&lr(k._readableStreamController,0),D._readableStreamController._pendingPullIntos.length>0&&lr(D._readableStreamController,0),(!h||!m)&&F(void 0)},_errorSteps:()=>{n=!1}})}function xe(v,O){Le(t)&&(L(t),t=so(e),ye(t));let I=O?D:k,ae=O?k:D;fo(t,v,{_chunkSteps:wt=>{A(()=>{u=!1,f=!1;let Rt=O?m:h;if(O?h:m)Rt||fr(I._readableStreamController,wt);else{let Yo;try{Yo=Zn(wt)}catch(Sn){be(I._readableStreamController,Sn),be(ae._readableStreamController,Sn),F(pe(e,Sn));return}Rt||fr(I._readableStreamController,wt),ur(ae._readableStreamController,Yo)}n=!1,u?Oe():f&&G()})},_closeSteps:wt=>{n=!1;let Rt=O?m:h,Dr=O?h:m;Rt||kt(I._readableStreamController),Dr||kt(ae._readableStreamController),wt!==void 0&&(Rt||fr(I._readableStreamController,wt),!Dr&&ae._readableStreamController._pendingPullIntos.length>0&&lr(ae._readableStreamController,0)),(!Rt||!Dr)&&F(void 0)},_errorSteps:()=>{n=!1}})}function Oe(){if(n)return u=!0,w(void 0);n=!0;let v=rn(k._readableStreamController);return v===null?_t():xe(v._view,!1),w(void 0)}function G(){if(n)return f=!0,w(void 0);n=!0;let v=rn(D._readableStreamController);return v===null?_t():xe(v._view,!0),w(void 0)}function te(v){if(h=!0,T=v,m){let O=Bt([T,P]),I=pe(e,O);F(I)}return x}function ce(v){if(m=!0,P=v,h){let O=Bt([T,P]),I=pe(e,O);F(I)}return x}function ke(){}return k=Do(ke,Oe,te),D=Do(ke,G,ce),ye(t),[k,D]}function Ni(e,t){j(e,t);let n=e,u=n?.autoAllocateChunkSize,f=n?.cancel,h=n?.pull,m=n?.start,T=n?.type;return{autoAllocateChunkSize:u===void 0?void 0:oe(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:Hi(f,n,`${t} has member 'cancel' that`),pull:h===void 0?void 0:Vi(h,n,`${t} has member 'pull' that`),start:m===void 0?void 0:Yi(m,n,`${t} has member 'start' that`),type:T===void 0?void 0:Qi(T,`${t} has member 'type' that`)}}function Hi(e,t,n){return $(e,n),u=>W(e,t,[u])}function Vi(e,t,n){return $(e,n),u=>W(e,t,[u])}function Yi(e,t,n){return $(e,n),u=>M(e,t,[u])}function Qi(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Gi(e,t){j(e,t);let n=e?.mode;return{mode:n===void 0?void 0:Ki(n,`${t} has member 'mode' that`)}}function Ki(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Zi(e,t){return j(e,t),{preventCancel:!!e?.preventCancel}}function Wo(e,t){j(e,t);let n=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,h=e?.signal;return h!==void 0&&Ji(h,`${t} has member 'signal' that`),{preventAbort:!!n,preventCancel:!!u,preventClose:!!f,signal:h}}function Ji(e,t){if(!fi(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Xi(e,t){j(e,t);let n=e?.readable;Pe(n,"readable","ReadableWritablePair"),Ye(n,`${t} has member 'readable' that`);let u=e?.writable;return Pe(u,"writable","ReadableWritablePair"),co(u,`${t} has member 'writable' that`),{readable:n,writable:u}}class Me{constructor(t={},n={}){t===void 0?t=null:X(t,"First parameter");let u=hr(n,"Second parameter"),f=Ni(t,"First parameter");if(_n(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=Ft(u,0);ti(this,f,h)}else{let h=dr(u),m=Ft(u,1);$i(this,f,m,h)}}get locked(){if(!$e(this))throw et("locked");return Ue(this)}cancel(t=void 0){return $e(this)?Ue(this)?y(new TypeError("Cannot cancel a stream that already has a reader")):pe(this,t):y(et("cancel"))}getReader(t=void 0){if(!$e(this))throw et("getReader");return Gi(t,"First parameter").mode===void 0?fe(this):so(this)}pipeThrough(t,n={}){if(!$e(this))throw et("pipeThrough");Q(t,1,"pipeThrough");let u=Xi(t,"First parameter"),f=Wo(n,"Second parameter");if(Ue(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(bt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=Bo(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return U(h),u.readable}pipeTo(t,n={}){if(!$e(this))return y(et("pipeTo"));if(t===void 0)return y("Parameter 1 is required in 'pipeTo'.");if(!mt(t))return y(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Wo(n,"Second parameter")}catch(f){return y(f)}return Ue(this)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):bt(t)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Bo(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!$e(this))throw et("tee");let t=Ui(this);return Bt(t)}values(t=void 0){if(!$e(this))throw et("values");let n=Zi(t,"First parameter");return Qa(this,n.preventCancel)}}Object.defineProperties(Me.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Me.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Me.prototype,r.asyncIterator,{value:Me.prototype.values,writable:!0,configurable:!0});function gn(e,t,n,u=1,f=()=>1){let h=Object.create(Me.prototype);_n(h);let m=Object.create(yt.prototype);return ko(h,m,e,t,n,u,f),h}function Do(e,t,n){let u=Object.create(Me.prototype);_n(u);let f=Object.create(ht.prototype);return io(u,f,e,t,n,0,void 0),u}function _n(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function $e(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Me}function Ue(e){return e._reader!==void 0}function pe(e,t){if(e._disturbed=!0,e._state==="closed")return w(void 0);if(e._state==="errored")return y(e._storedError);$t(e);let n=e._reader;n!==void 0&&Ze(n)&&(n._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),n._readIntoRequests=new V);let u=e._readableStreamController[Se](t);return R(u,a)}function $t(e){e._state="closed";let t=e._reader;t!==void 0&&(rr(t),Le(t)&&(t._readRequests.forEach(n=>{n._closeSteps()}),t._readRequests=new V))}function Fo(e,t){e._state="errored",e._storedError=t;let n=e._reader;n!==void 0&&(Ce(n,t),Le(n)?(n._readRequests.forEach(u=>{u._errorSteps(t)}),n._readRequests=new V):(n._readIntoRequests.forEach(u=>{u._errorSteps(t)}),n._readIntoRequests=new V))}function et(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function qo(e,t){j(e,t);let n=e?.highWaterMark;return Pe(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ee(n)}}let Lo=e=>e.byteLength;Object.defineProperty(Lo,"name",{value:"size",configurable:!0});class Er{constructor(t){Q(t,1,"ByteLengthQueuingStrategy"),t=qo(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!zo(this))throw Io("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!zo(this))throw Io("size");return Lo}}Object.defineProperties(Er.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Er.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Io(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function zo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Er}let Mo=()=>1;Object.defineProperty(Mo,"name",{value:"size",configurable:!0});class Cr{constructor(t){Q(t,1,"CountQueuingStrategy"),t=qo(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Uo(this))throw $o("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Uo(this))throw $o("size");return Mo}}Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function $o(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Uo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Cr}function es(e,t){j(e,t);let n=e?.flush,u=e?.readableType,f=e?.start,h=e?.transform,m=e?.writableType;return{flush:n===void 0?void 0:ts(n,e,`${t} has member 'flush' that`),readableType:u,start:f===void 0?void 0:rs(f,e,`${t} has member 'start' that`),transform:h===void 0?void 0:ns(h,e,`${t} has member 'transform' that`),writableType:m}}function ts(e,t,n){return $(e,n),u=>W(e,t,[u])}function rs(e,t,n){return $(e,n),u=>M(e,t,[u])}function ns(e,t,n){return $(e,n),(u,f)=>W(e,t,[u,f])}class Ar{constructor(t={},n={},u={}){t===void 0&&(t=null);let f=hr(n,"Second parameter"),h=hr(u,"Third parameter"),m=es(t,"First parameter");if(m.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(m.writableType!==void 0)throw new RangeError("Invalid writableType specified");let T=Ft(h,0),P=dr(h),k=Ft(f,1),D=dr(f),F,x=S(ye=>{F=ye});os(this,x,k,D,T,P),is(this,m),m.start!==void 0?F(m.start(this._transformStreamController)):F(void 0)}get readable(){if(!xo(this))throw Vo("readable");return this._readable}get writable(){if(!xo(this))throw Vo("writable");return this._writable}}Object.defineProperties(Ar.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ar.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function os(e,t,n,u,f,h){function m(){return t}function T(x){return ls(e,x)}function P(x){return fs(e,x)}function k(){return cs(e)}e._writable=hi(m,T,k,P,n,u);function D(){return ds(e)}function F(x){return Br(e,x),w(void 0)}e._readable=gn(m,D,F,f,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Or(e,!0),e._transformStreamController=void 0}function xo(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ar}function Pr(e,t){ze(e._readable._readableStreamController,t),Br(e,t)}function Br(e,t){jo(e._transformStreamController),cn(e._writable._writableStreamController,t),e._backpressure&&Or(e,!1)}function Or(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=S(n=>{e._backpressureChangePromise_resolve=n}),e._backpressure=t}class Ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!kr(this))throw Wr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return yn(t)}enqueue(t=void 0){if(!kr(this))throw Wr("enqueue");No(this,t)}error(t=void 0){if(!kr(this))throw Wr("error");ss(this,t)}terminate(){if(!kr(this))throw Wr("terminate");us(this)}}Object.defineProperties(Ut.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function kr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ut}function as(e,t,n,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=u}function is(e,t){let n=Object.create(Ut.prototype),u=h=>{try{return No(n,h),w(void 0)}catch(m){return y(m)}},f=()=>w(void 0);t.transform!==void 0&&(u=h=>t.transform(h,n)),t.flush!==void 0&&(f=()=>t.flush(n)),as(e,n,u,f)}function jo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function No(e,t){let n=e._controlledTransformStream,u=n._readable._readableStreamController;if(!gt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Tr(u,t)}catch(h){throw Br(n,h),n._readable._storedError}Mi(u)!==n._backpressure&&Or(n,!0)}function ss(e,t){Pr(e._controlledTransformStream,t)}function Ho(e,t){let n=e._transformAlgorithm(t);return R(n,void 0,u=>{throw Pr(e._controlledTransformStream,u),u})}function us(e){let t=e._controlledTransformStream,n=t._readable._readableStreamController;Mt(n);let u=new TypeError("TransformStream terminated");Br(t,u)}function ls(e,t){let n=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return R(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Ho(n,t)})}return Ho(n,t)}function fs(e,t){return Pr(e,t),w(void 0)}function cs(e){let t=e._readable,n=e._transformStreamController,u=n._flushAlgorithm();return jo(n),R(u,()=>{if(t._state==="errored")throw t._storedError;Mt(t._readableStreamController)},f=>{throw Pr(e,f),t._storedError})}function ds(e){return Or(e,!1),e._backpressureChangePromise}function Wr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Vo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}o.ByteLengthQueuingStrategy=Er,o.CountQueuingStrategy=Cr,o.ReadableByteStreamController=ht,o.ReadableStream=Me,o.ReadableStreamBYOBReader=Dt,o.ReadableStreamBYOBRequest=Ot,o.ReadableStreamDefaultController=yt,o.ReadableStreamDefaultReader=At,o.TransformStream=Ar,o.TransformStreamDefaultController=Ut,o.WritableStream=qt,o.WritableStreamDefaultController=pt,o.WritableStreamDefaultWriter=Lt,Object.defineProperty(o,"__esModule",{value:!0})}))});var Xo=wn(()=>{if(!globalThis.ReadableStream)try{let o=require("node:process"),{emitWarning:r}=o;try{o.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),o.emitWarning=r}catch(a){throw o.emitWarning=r,a}}catch{Object.assign(globalThis,Jo())}try{let{Blob:o}=require("buffer");o&&!o.prototype.stream&&(o.prototype.stream=function(a){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let _=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=_.byteLength,l.enqueue(new Uint8Array(_)),i===s.size&&l.close()}})})}catch{}});async function*Rn(o,r=!0){for(let a of o)if("stream"in a)yield*a.stream();else if(ArrayBuffer.isView(a))if(r){let i=a.byteOffset,s=a.byteOffset+a.byteLength;for(;i!==s;){let l=Math.min(s-i,ea),d=a.buffer.slice(i,i+l);i+=d.byteLength,yield new Uint8Array(d)}}else yield a;else{let i=0,s=a;for(;i!==s.size;){let d=await s.slice(i,Math.min(s.size,i+ea)).arrayBuffer();i+=d.byteLength,yield new Uint8Array(d)}}}var yu,ea,ta,Ss,We,jt=xt(()=>{yu=je(Xo(),1);ea=65536;ta=class Tn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],a={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof a!="object"&&typeof a!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");a===null&&(a={});let i=new TextEncoder;for(let l of r){let d;ArrayBuffer.isView(l)?d=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?d=new Uint8Array(l.slice(0)):l instanceof Tn?d=l:d=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(d)?d.byteLength:d.size,this.#e.push(d)}this.#n=`${a.endings===void 0?"transparent":a.endings}`;let s=a.type===void 0?"":String(a.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,a="";for await(let i of Rn(this.#e,!1))a+=r.decode(i,{stream:!0});return a+=r.decode(),a}async arrayBuffer(){let r=new Uint8Array(this.size),a=0;for await(let i of Rn(this.#e,!1))r.set(i,a),a+=i.length;return r.buffer}stream(){let r=Rn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(a){let i=await r.next();i.done?a.close():a.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,a=this.size,i=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),d=a<0?Math.max(s+a,0):Math.min(a,s),_=Math.max(d-l,0),b=this.#e,c=[],p=0;for(let w of b){if(p>=_)break;let y=ArrayBuffer.isView(w)?w.byteLength:w.size;if(l&&y<=l)l-=y,d-=y;else{let g;ArrayBuffer.isView(w)?(g=w.subarray(l,Math.min(y,d)),p+=g.byteLength):(g=w.slice(l,Math.min(y,d)),p+=g.size),d-=y,c.push(g),l=0}}let S=new Tn([],{type:String(i).toLowerCase()});return S.#r=_,S.#e=c,S}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(ta.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Ss=ta,We=Ss});var ws,Rs,Tt,vn=xt(()=>{jt();ws=class extends We{#e=0;#t="";constructor(r,a,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(a)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof We&&/^(File)$/.test(r[Symbol.toStringTag])}},Rs=ws,Tt=Rs});function oa(o,r=We){var a=`${ra()}${ra()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${a}\r
Content-Disposition: form-data; name="`;return o.forEach((l,d)=>typeof l=="string"?i.push(s+En(d)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+En(d)+`"; filename="${En(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${a}--`),new r(i,{type:"multipart/form-data; boundary="+a})}var Nt,Ts,vs,ra,Es,na,En,tt,rt,Lr=xt(()=>{jt();vn();({toStringTag:Nt,iterator:Ts,hasInstance:vs}=Symbol),ra=Math.random,Es="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),na=(o,r,a)=>(o+="",/^(Blob|File)$/.test(r&&r[Nt])?[(a=a!==void 0?a+"":r[Nt]=="File"?r.name:"blob",o),r.name!==a||r[Nt]=="blob"?new Tt([r],a,r):r]:[o,r+""]),En=(o,r)=>(r?o:o.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),tt=(o,r,a)=>{if(r.length<a)throw new TypeError(`Failed to execute '${o}' on 'FormData': ${a} arguments required, but only ${r.length} present.`)},rt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nt](){return"FormData"}[Ts](){return this.entries()}static[vs](r){return r&&typeof r=="object"&&r[Nt]==="FormData"&&!Es.some(a=>typeof r[a]!="function")}append(...r){tt("append",arguments,2),this.#e.push(na(...r))}delete(r){tt("delete",arguments,1),r+="",this.#e=this.#e.filter(([a])=>a!==r)}get(r){tt("get",arguments,1),r+="";for(var a=this.#e,i=a.length,s=0;s<i;s++)if(a[s][0]===r)return a[s][1];return null}getAll(r,a){return tt("getAll",arguments,1),a=[],r+="",this.#e.forEach(i=>i[0]===r&&a.push(i[1])),a}has(r){return tt("has",arguments,1),r+="",this.#e.some(a=>a[0]===r)}forEach(r,a){tt("forEach",arguments,1);for(var[i,s]of this)r.call(a,s,i,this)}set(...r){tt("set",arguments,2);var a=[],i=!0;r=na(...r),this.#e.forEach(s=>{s[0]===r[0]?i&&(i=!a.push(r)):a.push(s)}),i&&a.push(r),this.#e=a}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var la=wn((Ou,ua)=>{if(!globalThis.DOMException)try{let{MessageChannel:o}=require("worker_threads"),r=new o().port1,a=new ArrayBuffer;r.postMessage(a,[a,a])}catch(o){o.constructor.name==="DOMException"&&(globalThis.DOMException=o.constructor)}ua.exports=globalThis.DOMException});var zr,Cs,Du,An=xt(()=>{zr=require("node:fs"),Cs=je(la(),1);vn();jt();({stat:Du}=zr.promises)});var ca={};Qo(ca,{toFormData:()=>Ds});function Ws(o){let r=o.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let a=r[2]||r[3]||"",i=a.slice(a.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function Ds(o,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let a=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!a)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Pn(a[1]||a[2]),s,l,d,_,b,c,p=[],S=new rt,w=B=>{d+=E.decode(B,{stream:!0})},y=B=>{p.push(B)},g=()=>{let B=new Tt(p,c,{type:b});S.append(_,B)},C=()=>{S.append(_,d)},E=new TextDecoder("utf-8");E.decode(),i.onPartBegin=function(){i.onPartData=w,i.onPartEnd=C,s="",l="",d="",_="",b="",c=null,p.length=0},i.onHeaderField=function(B){s+=E.decode(B,{stream:!0})},i.onHeaderValue=function(B){l+=E.decode(B,{stream:!0})},i.onHeaderEnd=function(){if(l+=E.decode(),s=s.toLowerCase(),s==="content-disposition"){let B=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);B&&(_=B[2]||B[3]||""),c=Ws(l),c&&(i.onPartData=y,i.onPartEnd=g)}else s==="content-type"&&(b=l);l="",s=""};for await(let B of o)i.write(B);return i.end(),S}var Te,z,fa,Ne,Mr,$r,As,Vt,Ps,Bs,Os,ks,nt,Pn,da=xt(()=>{An();Lr();Te=0,z={START_BOUNDARY:Te++,HEADER_FIELD_START:Te++,HEADER_FIELD:Te++,HEADER_VALUE_START:Te++,HEADER_VALUE:Te++,HEADER_VALUE_ALMOST_DONE:Te++,HEADERS_ALMOST_DONE:Te++,PART_DATA_START:Te++,PART_DATA:Te++,END:Te++},fa=1,Ne={PART_BOUNDARY:fa,LAST_BOUNDARY:fa*=2},Mr=10,$r=13,As=32,Vt=45,Ps=58,Bs=97,Os=122,ks=o=>o|32,nt=()=>{},Pn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=nt,this.onHeaderField=nt,this.onHeadersEnd=nt,this.onHeaderValue=nt,this.onPartBegin=nt,this.onPartData=nt,this.onPartEnd=nt,this.boundaryChars={},r=`\r
--`+r;let a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i),this.boundaryChars[a[i]]=!0;this.boundary=a,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let a=0,i=r.length,s=this.index,{lookbehind:l,boundary:d,boundaryChars:_,index:b,state:c,flags:p}=this,S=this.boundary.length,w=S-1,y=r.length,g,C,E=A=>{this[A+"Mark"]=a},B=A=>{delete this[A+"Mark"]},R=(A,M,W,Z)=>{(M===void 0||M!==W)&&this[A](Z&&Z.subarray(M,W))},U=(A,M)=>{let W=A+"Mark";W in this&&(M?(R(A,this[W],a,r),delete this[W]):(R(A,this[W],r.length,r),this[W]=0))};for(a=0;a<i;a++)switch(g=r[a],c){case z.START_BOUNDARY:if(b===d.length-2){if(g===Vt)p|=Ne.LAST_BOUNDARY;else if(g!==$r)return;b++;break}else if(b-1===d.length-2){if(p&Ne.LAST_BOUNDARY&&g===Vt)c=z.END,p=0;else if(!(p&Ne.LAST_BOUNDARY)&&g===Mr)b=0,R("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}g!==d[b+2]&&(b=-2),g===d[b+2]&&b++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,E("onHeaderField"),b=0;case z.HEADER_FIELD:if(g===$r){B("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(b++,g===Vt)break;if(g===Ps){if(b===1)return;U("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(C=ks(g),C<Bs||C>Os)return;break;case z.HEADER_VALUE_START:if(g===As)break;E("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:g===$r&&(U("onHeaderValue",!0),R("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(g!==Mr)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(g!==Mr)return;R("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,E("onPartData");case z.PART_DATA:if(s=b,b===0){for(a+=w;a<y&&!(r[a]in _);)a+=S;a-=w,g=r[a]}if(b<d.length)d[b]===g?(b===0&&U("onPartData",!0),b++):b=0;else if(b===d.length)b++,g===$r?p|=Ne.PART_BOUNDARY:g===Vt?p|=Ne.LAST_BOUNDARY:b=0;else if(b-1===d.length)if(p&Ne.PART_BOUNDARY){if(b=0,g===Mr){p&=~Ne.PART_BOUNDARY,R("onPartEnd"),R("onPartBegin"),c=z.HEADER_FIELD_START;break}}else p&Ne.LAST_BOUNDARY&&g===Vt?(R("onPartEnd"),c=z.END,p=0):b=0;if(b>0)l[b-1]=g;else if(s>0){let A=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);R("onPartData",0,s,A),s=0,E("onPartData"),a--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=b,this.state=c,this.flags=p}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var cu={};Qo(cu,{default:()=>fu});module.exports=gs(cu);var Y=require("@raycast/api");var Gr=require("react");var Aa=je(require("node:http"),1),Pa=je(require("node:https"),1),at=je(require("node:zlib"),1),ue=je(require("node:stream"),1),Gt=require("node:buffer");function _s(o){if(!/^data:/i.test(o))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');o=o.replace(/\r?\n/g,"");let r=o.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let a=o.substring(5,r).split(";"),i="",s=!1,l=a[0]||"text/plain",d=l;for(let p=1;p<a.length;p++)a[p]==="base64"?s=!0:(d+=`;${a[p]}`,a[p].indexOf("charset=")===0&&(i=a[p].substring(8)));!a[0]&&!i.length&&(d+=";charset=US-ASCII",i="US-ASCII");let _=s?"base64":"ascii",b=unescape(o.substring(r+1)),c=Buffer.from(b,_);return c.type=l,c.typeFull=d,c.charset=i,c}var Ko=_s;var de=je(require("node:stream"),1),Fe=require("node:util"),ie=require("node:buffer");jt();Lr();var De=class extends Error{constructor(r,a){super(r),Error.captureStackTrace(this,this.constructor),this.type=a}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var re=class extends De{constructor(r,a,i){super(r,a),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Ir=Symbol.toStringTag,Cn=o=>typeof o=="object"&&typeof o.append=="function"&&typeof o.delete=="function"&&typeof o.get=="function"&&typeof o.getAll=="function"&&typeof o.has=="function"&&typeof o.set=="function"&&typeof o.sort=="function"&&o[Ir]==="URLSearchParams",Ht=o=>o&&typeof o=="object"&&typeof o.arrayBuffer=="function"&&typeof o.type=="string"&&typeof o.stream=="function"&&typeof o.constructor=="function"&&/^(Blob|File)$/.test(o[Ir]),aa=o=>typeof o=="object"&&(o[Ir]==="AbortSignal"||o[Ir]==="EventTarget"),ia=(o,r)=>{let a=new URL(r).hostname,i=new URL(o).hostname;return a===i||a.endsWith(`.${i}`)},sa=(o,r)=>{let a=new URL(r).protocol,i=new URL(o).protocol;return a===i};var Fs=(0,Fe.promisify)(de.default.pipeline),ne=Symbol("Body internals"),ve=class{constructor(r,{size:a=0}={}){let i=null;r===null?r=null:Cn(r)?r=ie.Buffer.from(r.toString()):Ht(r)||ie.Buffer.isBuffer(r)||(Fe.types.isAnyArrayBuffer(r)?r=ie.Buffer.from(r):ArrayBuffer.isView(r)?r=ie.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof de.default||(r instanceof rt?(r=oa(r),i=r.type.split("=")[1]):r=ie.Buffer.from(String(r))));let s=r;ie.Buffer.isBuffer(r)?s=de.default.Readable.from(r):Ht(r)&&(s=de.default.Readable.from(r.stream())),this[ne]={body:r,stream:s,boundary:i,disturbed:!1,error:null},this.size=a,r instanceof de.default&&r.on("error",l=>{let d=l instanceof De?l:new re(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ne].error=d})}get body(){return this[ne].stream}get bodyUsed(){return this[ne].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:a,byteLength:i}=await Bn(this);return r.slice(a,a+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new rt,s=new URLSearchParams(await this.text());for(let[l,d]of s)i.append(l,d);return i}let{toFormData:a}=await Promise.resolve().then(()=>(da(),ca));return a(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[ne].body&&this[ne].body.type||"",a=await this.arrayBuffer();return new We([a],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Bn(this);return new TextDecoder().decode(r)}buffer(){return Bn(this)}};ve.prototype.buffer=(0,Fe.deprecate)(ve.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ve.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Fe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Bn(o){if(o[ne].disturbed)throw new TypeError(`body used already for: ${o.url}`);if(o[ne].disturbed=!0,o[ne].error)throw o[ne].error;let{body:r}=o;if(r===null)return ie.Buffer.alloc(0);if(!(r instanceof de.default))return ie.Buffer.alloc(0);let a=[],i=0;try{for await(let s of r){if(o.size>0&&i+s.length>o.size){let l=new re(`content size at ${o.url} over limit: ${o.size}`,"max-size");throw r.destroy(l),l}i+=s.length,a.push(s)}}catch(s){throw s instanceof De?s:new re(`Invalid response body while trying to fetch ${o.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return a.every(s=>typeof s=="string")?ie.Buffer.from(a.join("")):ie.Buffer.concat(a,i)}catch(s){throw new re(`Could not create Buffer from response body for ${o.url}: ${s.message}`,"system",s)}else throw new re(`Premature close of server response while trying to fetch ${o.url}`)}var vt=(o,r)=>{let a,i,{body:s}=o[ne];if(o.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof de.default&&typeof s.getBoundary!="function"&&(a=new de.PassThrough({highWaterMark:r}),i=new de.PassThrough({highWaterMark:r}),s.pipe(a),s.pipe(i),o[ne].stream=a,s=i),s},qs=(0,Fe.deprecate)(o=>o.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Ur=(o,r)=>o===null?null:typeof o=="string"?"text/plain;charset=UTF-8":Cn(o)?"application/x-www-form-urlencoded;charset=UTF-8":Ht(o)?o.type||null:ie.Buffer.isBuffer(o)||Fe.types.isAnyArrayBuffer(o)||ArrayBuffer.isView(o)?null:o instanceof rt?`multipart/form-data; boundary=${r[ne].boundary}`:o&&typeof o.getBoundary=="function"?`multipart/form-data;boundary=${qs(o)}`:o instanceof de.default?null:"text/plain;charset=UTF-8",ha=o=>{let{body:r}=o[ne];return r===null?0:Ht(r)?r.size:ie.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},ma=async(o,{body:r})=>{r===null?o.end():await Fs(r,o)};var On=require("node:util"),Yt=je(require("node:http"),1),xr=typeof Yt.default.validateHeaderName=="function"?Yt.default.validateHeaderName:o=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(o)){let r=new TypeError(`Header name must be a valid HTTP token [${o}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},kn=typeof Yt.default.validateHeaderValue=="function"?Yt.default.validateHeaderValue:(o,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let a=new TypeError(`Invalid character in header content ["${o}"]`);throw Object.defineProperty(a,"code",{value:"ERR_INVALID_CHAR"}),a}},se=class o extends URLSearchParams{constructor(r){let a=[];if(r instanceof o){let i=r.raw();for(let[s,l]of Object.entries(i))a.push(...l.map(d=>[s,d]))}else if(r!=null)if(typeof r=="object"&&!On.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)a.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");a=[...r].map(s=>{if(typeof s!="object"||On.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return a=a.length>0?a.map(([i,s])=>(xr(i),kn(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(a),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(d,_)=>(xr(d),kn(d,String(_)),URLSearchParams.prototype[s].call(i,String(d).toLowerCase(),String(_)));case"delete":case"has":case"getAll":return d=>(xr(d),URLSearchParams.prototype[s].call(i,String(d).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let a=this.getAll(r);if(a.length===0)return null;let i=a.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,a=void 0){for(let i of this.keys())Reflect.apply(r,a,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,a)=>(r[a]=this.getAll(a),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,a)=>{let i=this.getAll(a);return a==="host"?r[a]=i[0]:r[a]=i.length>1?i:i[0],r},{})}};Object.defineProperties(se.prototype,["get","entries","forEach","values"].reduce((o,r)=>(o[r]={enumerable:!0},o),{}));function ba(o=[]){return new se(o.reduce((r,a,i,s)=>(i%2===0&&r.push(s.slice(i,i+2)),r),[]).filter(([r,a])=>{try{return xr(r),kn(r,String(a)),!0}catch{return!1}}))}var Ls=new Set([301,302,303,307,308]),jr=o=>Ls.has(o);var ge=Symbol("Response internals"),he=class o extends ve{constructor(r=null,a={}){super(r,a);let i=a.status!=null?a.status:200,s=new se(a.headers);if(r!==null&&!s.has("Content-Type")){let l=Ur(r,this);l&&s.append("Content-Type",l)}this[ge]={type:"default",url:a.url,status:i,statusText:a.statusText||"",headers:s,counter:a.counter,highWaterMark:a.highWaterMark}}get type(){return this[ge].type}get url(){return this[ge].url||""}get status(){return this[ge].status}get ok(){return this[ge].status>=200&&this[ge].status<300}get redirected(){return this[ge].counter>0}get statusText(){return this[ge].statusText}get headers(){return this[ge].headers}get highWaterMark(){return this[ge].highWaterMark}clone(){return new o(vt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,a=302){if(!jr(a))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new o(null,{headers:{location:new URL(r).toString()},status:a})}static error(){let r=new o(null,{status:0,statusText:""});return r[ge].type="error",r}static json(r=void 0,a={}){let i=JSON.stringify(r);if(i===void 0)throw new TypeError("data is not JSON serializable");let s=new se(a&&a.headers);return s.has("content-type")||s.set("content-type","application/json"),new o(i,{...a,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(he.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var va=require("node:url"),Ea=require("node:util");var pa=o=>{if(o.search)return o.search;let r=o.href.length-1,a=o.hash||(o.href[r]==="#"?"#":"");return o.href[r-a.length]==="?"?"?":""};var ga=require("node:net");function ya(o,r=!1){return o==null||(o=new URL(o),/^(about|blob|data):$/.test(o.protocol))?"no-referrer":(o.username="",o.password="",o.hash="",r&&(o.pathname="",o.search=""),o)}var _a=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Sa="strict-origin-when-cross-origin";function wa(o){if(!_a.has(o))throw new TypeError(`Invalid referrerPolicy: ${o}`);return o}function Is(o){if(/^(http|ws)s:$/.test(o.protocol))return!0;let r=o.host.replace(/(^\[)|(]$)/g,""),a=(0,ga.isIP)(r);return a===4&&/^127\./.test(r)||a===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:o.host==="localhost"||o.host.endsWith(".localhost")?!1:o.protocol==="file:"}function Et(o){return/^about:(blank|srcdoc)$/.test(o)||o.protocol==="data:"||/^(blob|filesystem):$/.test(o.protocol)?!0:Is(o)}function Ra(o,{referrerURLCallback:r,referrerOriginCallback:a}={}){if(o.referrer==="no-referrer"||o.referrerPolicy==="")return null;let i=o.referrerPolicy;if(o.referrer==="about:client")return"no-referrer";let s=o.referrer,l=ya(s),d=ya(s,!0);l.toString().length>4096&&(l=d),r&&(l=r(l)),a&&(d=a(d));let _=new URL(o.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return d;case"unsafe-url":return l;case"strict-origin":return Et(l)&&!Et(_)?"no-referrer":d.toString();case"strict-origin-when-cross-origin":return l.origin===_.origin?l:Et(l)&&!Et(_)?"no-referrer":d;case"same-origin":return l.origin===_.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===_.origin?l:d;case"no-referrer-when-downgrade":return Et(l)&&!Et(_)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Ta(o){let r=(o.get("referrer-policy")||"").split(/[,\s]+/),a="";for(let i of r)i&&_a.has(i)&&(a=i);return a}var H=Symbol("Request internals"),Qt=o=>typeof o=="object"&&typeof o[H]=="object",zs=(0,Ea.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ot=class o extends ve{constructor(r,a={}){let i;if(Qt(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=a.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Qt(a)&&"data"in a&&zs(),(a.body!=null||Qt(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=a.body?a.body:Qt(r)&&r.body!==null?vt(r):null;super(l,{size:a.size||r.size||0});let d=new se(a.headers||r.headers||{});if(l!==null&&!d.has("Content-Type")){let c=Ur(l,this);c&&d.set("Content-Type",c)}let _=Qt(r)?r.signal:null;if("signal"in a&&(_=a.signal),_!=null&&!aa(_))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=a.referrer==null?r.referrer:a.referrer;if(b==="")b="no-referrer";else if(b){let c=new URL(b);b=/^about:(\/\/)?client$/.test(c)?"client":c}else b=void 0;this[H]={method:s,redirect:a.redirect||r.redirect||"follow",headers:d,parsedURL:i,signal:_,referrer:b},this.follow=a.follow===void 0?r.follow===void 0?20:r.follow:a.follow,this.compress=a.compress===void 0?r.compress===void 0?!0:r.compress:a.compress,this.counter=a.counter||r.counter||0,this.agent=a.agent||r.agent,this.highWaterMark=a.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=a.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=a.referrerPolicy||r.referrerPolicy||""}get method(){return this[H].method}get url(){return(0,va.format)(this[H].parsedURL)}get headers(){return this[H].headers}get redirect(){return this[H].redirect}get signal(){return this[H].signal}get referrer(){if(this[H].referrer==="no-referrer")return"";if(this[H].referrer==="client")return"about:client";if(this[H].referrer)return this[H].referrer.toString()}get referrerPolicy(){return this[H].referrerPolicy}set referrerPolicy(r){this[H].referrerPolicy=wa(r)}clone(){return new o(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ot.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ca=o=>{let{parsedURL:r}=o[H],a=new se(o[H].headers);a.has("Accept")||a.set("Accept","*/*");let i=null;if(o.body===null&&/^(post|put)$/i.test(o.method)&&(i="0"),o.body!==null){let _=ha(o);typeof _=="number"&&!Number.isNaN(_)&&(i=String(_))}i&&a.set("Content-Length",i),o.referrerPolicy===""&&(o.referrerPolicy=Sa),o.referrer&&o.referrer!=="no-referrer"?o[H].referrer=Ra(o):o[H].referrer="no-referrer",o[H].referrer instanceof URL&&a.set("Referer",o.referrer),a.has("User-Agent")||a.set("User-Agent","node-fetch"),o.compress&&!a.has("Accept-Encoding")&&a.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=o;typeof s=="function"&&(s=s(r));let l=pa(r),d={path:r.pathname+l,method:o.method,headers:a[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:o.insecureHTTPParser,agent:s};return{parsedURL:r,options:d}};var Nr=class extends De{constructor(r,a="aborted"){super(r,a)}};Lr();An();var Ms=new Set(["data:","http:","https:"]);async function Hr(o,r){return new Promise((a,i)=>{let s=new ot(o,r),{parsedURL:l,options:d}=Ca(s);if(!Ms.has(l.protocol))throw new TypeError(`node-fetch cannot load ${o}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let g=Ko(s.url),C=new he(g,{headers:{"Content-Type":g.typeFull}});a(C);return}let _=(l.protocol==="https:"?Pa.default:Aa.default).request,{signal:b}=s,c=null,p=()=>{let g=new Nr("The operation was aborted.");i(g),s.body&&s.body instanceof ue.default.Readable&&s.body.destroy(g),!(!c||!c.body)&&c.body.emit("error",g)};if(b&&b.aborted){p();return}let S=()=>{p(),y()},w=_(l.toString(),d);b&&b.addEventListener("abort",S);let y=()=>{w.abort(),b&&b.removeEventListener("abort",S)};w.on("error",g=>{i(new re(`request to ${s.url} failed, reason: ${g.message}`,"system",g)),y()}),$s(w,g=>{c&&c.body&&c.body.destroy(g)}),process.version<"v14"&&w.on("socket",g=>{let C;g.prependListener("end",()=>{C=g._eventsCount}),g.prependListener("close",E=>{if(c&&C<g._eventsCount&&!E){let B=new Error("Premature close");B.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",B)}})}),w.on("response",g=>{w.setTimeout(0);let C=ba(g.rawHeaders);if(jr(g.statusCode)){let A=C.get("Location"),M=null;try{M=A===null?null:new URL(A,s.url)}catch{if(s.redirect!=="manual"){i(new re(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),y();return}}switch(s.redirect){case"error":i(new re(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),y();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){i(new re(`maximum redirect reached at: ${s.url}`,"max-redirect")),y();return}let W={headers:new se(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:vt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!ia(s.url,M)||!sa(s.url,M))for(let V of["authorization","www-authenticate","cookie","cookie2"])W.headers.delete(V);if(g.statusCode!==303&&s.body&&r.body instanceof ue.default.Readable){i(new re("Cannot follow redirect with body being a readable stream","unsupported-redirect")),y();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&s.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length"));let Z=Ta(C);Z&&(W.referrerPolicy=Z),a(Hr(new ot(M,W))),y();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}b&&g.once("end",()=>{b.removeEventListener("abort",S)});let E=(0,ue.pipeline)(g,new ue.PassThrough,A=>{A&&i(A)});process.version<"v12.10"&&g.on("aborted",S);let B={url:s.url,status:g.statusCode,statusText:g.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},R=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||R===null||g.statusCode===204||g.statusCode===304){c=new he(E,B),a(c);return}let U={flush:at.default.Z_SYNC_FLUSH,finishFlush:at.default.Z_SYNC_FLUSH};if(R==="gzip"||R==="x-gzip"){E=(0,ue.pipeline)(E,at.default.createGunzip(U),A=>{A&&i(A)}),c=new he(E,B),a(c);return}if(R==="deflate"||R==="x-deflate"){let A=(0,ue.pipeline)(g,new ue.PassThrough,M=>{M&&i(M)});A.once("data",M=>{(M[0]&15)===8?E=(0,ue.pipeline)(E,at.default.createInflate(),W=>{W&&i(W)}):E=(0,ue.pipeline)(E,at.default.createInflateRaw(),W=>{W&&i(W)}),c=new he(E,B),a(c)}),A.once("end",()=>{c||(c=new he(E,B),a(c))});return}if(R==="br"){E=(0,ue.pipeline)(E,at.default.createBrotliDecompress(),A=>{A&&i(A)}),c=new he(E,B),a(c);return}c=new he(E,B),a(c)}),ma(w,s).catch(i)})}function $s(o,r){let a=Gt.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;o.on("response",d=>{let{headers:_}=d;i=_["transfer-encoding"]==="chunked"&&!_["content-length"]}),o.on("socket",d=>{let _=()=>{if(i&&!s){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",r(c)}},b=c=>{s=Gt.Buffer.compare(c.slice(-5),a)===0,!s&&l&&(s=Gt.Buffer.compare(l.slice(-3),a.slice(0,3))===0&&Gt.Buffer.compare(c.slice(-2),a.slice(3))===0),l=c};d.prependListener("close",_),d.on("data",b),o.on("close",()=>{d.removeListener("close",_),d.removeListener("data",b)})})}var q=require("react");function Wa(o,r,a,i){function s(l){return l instanceof a?l:new a(function(d){d(l)})}return new(a||(a=Promise))(function(l,d){function _(p){try{c(i.next(p))}catch(S){d(S)}}function b(p){try{c(i.throw(p))}catch(S){d(S)}}function c(p){p.done?l(p.value):s(p.value).then(_,b)}c((i=i.apply(o,r||[])).next())})}function Da(o,r){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,s,l,d;return d={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function _(c){return function(p){return b([c,p])}}function b(c){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(l=c[0]&2?s.return:c[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,c[1])).done)return l;switch(s=0,l&&(c=[c[0]&2,l.value]),c[0]){case 0:case 1:l=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,s=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!l||c[1]>l[0]&&c[1]<l[3])){a.label=c[1];break}if(c[0]===6&&a.label<l[1]){a.label=l[1],l=c;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(c);break}l[2]&&a.ops.pop(),a.trys.pop();continue}c=r.call(o,a)}catch(p){c=[6,p],s=0}finally{i=l=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ee=function(){},K=Ee(),Kt=Object,le=function(o){return o===K},Jt=function(o){return typeof o=="function"},st=function(o,r){return Kt.assign({},o,r)},Mn="undefined",$n=function(){return typeof window!=Mn},Us=function(){return typeof document!=Mn},xs=function(){return $n()&&typeof window.requestAnimationFrame!=Mn},Vr=new WeakMap,js=0,Xt=function(o){var r=typeof o,a=o&&o.constructor,i=a==Date,s,l;if(Kt(o)===o&&!i&&a!=RegExp){if(s=Vr.get(o),s)return s;if(s=++js+"~",Vr.set(o,s),a==Array){for(s="@",l=0;l<o.length;l++)s+=Xt(o[l])+",";Vr.set(o,s)}if(a==Kt){s="#";for(var d=Kt.keys(o).sort();!le(l=d.pop());)le(o[l])||(s+=l+":"+Xt(o[l])+",");Vr.set(o,s)}}else s=i?o.toJSON():r=="symbol"?o.toString():r=="string"?JSON.stringify(o):""+o;return s},Fn=!0,Ns=function(){return Fn},Fa=$n(),Un=Us(),qn=Fa&&window.addEventListener?window.addEventListener.bind(window):Ee,Hs=Un?document.addEventListener.bind(document):Ee,Ln=Fa&&window.removeEventListener?window.removeEventListener.bind(window):Ee,Vs=Un?document.removeEventListener.bind(document):Ee,Ys=function(){var o=Un&&document.visibilityState;return le(o)||o!=="hidden"},Qs=function(o){return Hs("visibilitychange",o),qn("focus",o),function(){Vs("visibilitychange",o),Ln("focus",o)}},Gs=function(o){var r=function(){Fn=!0,o()},a=function(){Fn=!1};return qn("online",r),qn("offline",a),function(){Ln("online",r),Ln("offline",a)}},Ks={isOnline:Ns,isVisible:Ys},Zs={initFocus:Qs,initReconnect:Gs},Qr=!$n()||"Deno"in window,Js=function(o){return xs()?window.requestAnimationFrame(o):setTimeout(o,1)},Zt=Qr?q.useEffect:q.useLayoutEffect,Wn=typeof navigator<"u"&&navigator.connection,Ba=!Qr&&Wn&&(["slow-2g","2g"].includes(Wn.effectiveType)||Wn.saveData),qa=function(o){if(Jt(o))try{o=o()}catch{o=""}var r=[].concat(o);o=typeof o=="string"?o:(Array.isArray(o)?o.length:o)?Xt(o):"";var a=o?"$err$"+o:"",i=o?"$req$"+o:"";return[o,r,a,i]},it=new WeakMap,La=0,Ia=1,za=2,Yr=function(o,r,a,i,s,l,d){d===void 0&&(d=!0);var _=it.get(o),b=_[0],c=_[1],p=_[4],S=b[r],w=c[r]||[];if(d&&w)for(var y=0;y<w.length;++y)w[y](a,i,s);return l&&(delete p[r],S&&S[0])?S[0](za).then(function(){return o.get(r)}):o.get(r)},Xs=0,In=function(){return++Xs},Ma=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return Wa(void 0,void 0,void 0,function(){var a,i,s,l,d,_,b,c,p,S,w,y,g,C,E,B,R;return Da(this,function(U){switch(U.label){case 0:if(a=o[0],i=o[1],s=o[2],l=o[3],d=typeof l=="boolean"?{revalidate:l}:l||{},_=d.revalidate!==!1,b=d.populateCache!==!1,c=qa(i),p=c[0],S=c[2],!p)return[2];if(w=it.get(a),y=w[2],g=w[3],o.length<3)return[2,Yr(a,p,a.get(p),a.get(S),K,_,b)];if(C=s,B=y[p]=In(),g[p]=0,Jt(C))try{C=C(a.get(p))}catch(A){E=A}return C&&Jt(C.then)?[4,C.catch(function(A){E=A})]:[3,2];case 1:if(C=U.sent(),B!==y[p]){if(E)throw E;return[2,C]}U.label=2;case 2:return b&&(E||a.set(p,C),a.set(S,E)),g[p]=In(),[4,Yr(a,p,C,E,K,_,b)];case 3:if(R=U.sent(),E)throw E;return[2,b?R:C]}})})},Oa=function(o,r){for(var a in o)o[a][0]&&o[a][0](r)},$a=function(o,r){if(!it.has(o)){var a=st(Zs,r),i={},s=Ma.bind(K,o),l=Ee;if(it.set(o,[i,{},{},{},{},s]),!Qr){var d=a.initFocus(setTimeout.bind(K,Oa.bind(K,i,La))),_=a.initReconnect(setTimeout.bind(K,Oa.bind(K,i,Ia)));l=function(){d&&d(),_&&_(),it.delete(o)}}return[o,s,l]}return[o,it.get(o)[5]]},eu=function(o,r,a,i,s){var l=a.errorRetryCount,d=s.retryCount,_=~~((Math.random()+.5)*(1<<(d<8?d:8)))*a.errorRetryInterval;!le(l)&&d>l||setTimeout(i,_,s)},Ua=$a(new Map),xa=Ua[0],tu=Ua[1],ja=st({onLoadingSlow:Ee,onSuccess:Ee,onError:Ee,onErrorRetry:eu,onDiscarded:Ee,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ba?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ba?5e3:3e3,compare:function(o,r){return Xt(o)==Xt(r)},isPaused:function(){return!1},cache:xa,mutate:tu,fallback:{}},Ks),Na=function(o,r){var a=st(o,r);if(r){var i=o.use,s=o.fallback,l=r.use,d=r.fallback;i&&l&&(a.use=i.concat(l)),s&&d&&(a.fallback=st(s,d))}return a},zn=(0,q.createContext)({}),ru=function(o){var r=o.value,a=Na((0,q.useContext)(zn),r),i=r&&r.provider,s=(0,q.useState)(function(){return i?$a(i(a.cache||xa),r):K})[0];return s&&(a.cache=s[0],a.mutate=s[1]),Zt(function(){return s?s[2]:K},[]),(0,q.createElement)(zn.Provider,st(o,{value:a}))},nu=function(o,r){var a=(0,q.useState)({})[1],i=(0,q.useRef)(o),s=(0,q.useRef)({data:!1,error:!1,isValidating:!1}),l=(0,q.useCallback)(function(d){var _=!1,b=i.current;for(var c in d){var p=c;b[p]!==d[p]&&(b[p]=d[p],s.current[p]&&(_=!0))}_&&!r.current&&a({})},[]);return Zt(function(){i.current=o}),[i,s.current,l]},ou=function(o){return Jt(o[1])?[o[0],o[1],o[2]||{}]:[o[0],null,(o[1]===null?o[2]:o[1])||{}]},au=function(){return st(ja,(0,q.useContext)(zn))},iu=function(o){return(function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=au(),s=ou(r),l=s[0],d=s[1],_=s[2],b=Na(i,_),c=o,p=b.use;if(p)for(var S=p.length;S-- >0;)c=p[S](c);return c(l,d||b.fetcher,b)})},ka=function(o,r,a){var i=r[o]||(r[o]=[]);return i.push(a),function(){var s=i.indexOf(a);s>=0&&(i[s]=i[i.length-1],i.pop())}},Dn={dedupe:!0},su=function(o,r,a){var i=a.cache,s=a.compare,l=a.fallbackData,d=a.suspense,_=a.revalidateOnMount,b=a.refreshInterval,c=a.refreshWhenHidden,p=a.refreshWhenOffline,S=it.get(i),w=S[0],y=S[1],g=S[2],C=S[3],E=S[4],B=qa(o),R=B[0],U=B[1],A=B[2],M=B[3],W=(0,q.useRef)(!1),Z=(0,q.useRef)(!1),V=(0,q.useRef)(R),Ct=(0,q.useRef)(r),ut=(0,q.useRef)(a),L=function(){return ut.current},_e=function(){return L().isVisible()&&L().isOnline()},lt=i.get(R),er=le(l)?a.fallback[R]:l,me=le(lt)?er:lt,Ce=i.get(A),tr=function(){return le(_)?L().isPaused()?!1:d?!le(me):le(me)||a.revalidateIfStale:_},rr=function(){return!R||!r?!1:i.get(M)?!0:!W.current&&tr()},ft=rr(),ct=nu({data:me,error:Ce,isValidating:ft},Z),Se=ct[0],He=ct[1],Ve=ct[2],Ae=(0,q.useCallback)(function(j){return Wa(void 0,void 0,void 0,function(){var $,J,X,Q,Pe,ee,N,we,oe,Ye,fe,dt;return Da(this,function(Be){switch(Be.label){case 0:if($=Ct.current,!R||!$||Z.current||L().isPaused())return[2,!1];Q=!0,Pe=j||{},ee=!E[R]||!Pe.dedupe,N=function(){return!Z.current&&R===V.current&&W.current},we=function(){var Qe=E[R];Qe&&Qe[1]===X&&delete E[R]},oe={isValidating:!1},Ye=function(){i.set(M,!1),N()&&Ve(oe)},i.set(M,!0),Ve({isValidating:!0}),Be.label=1;case 1:return Be.trys.push([1,3,,4]),ee&&(Yr(i,R,Se.current.data,Se.current.error,!0),a.loadingTimeout&&!i.get(R)&&setTimeout(function(){Q&&N()&&L().onLoadingSlow(R,a)},a.loadingTimeout),E[R]=[$.apply(void 0,U),In()]),dt=E[R],J=dt[0],X=dt[1],[4,J];case 2:return J=Be.sent(),ee&&setTimeout(we,a.dedupingInterval),!E[R]||E[R][1]!==X?(ee&&N()&&L().onDiscarded(R),[2,!1]):(i.set(A,K),oe.error=K,!le(g[R])&&(X<=g[R]||X<=C[R]||C[R]===0)?(Ye(),ee&&N()&&L().onDiscarded(R),[2,!1]):(s(Se.current.data,J)?oe.data=Se.current.data:oe.data=J,s(i.get(R),J)||i.set(R,J),ee&&N()&&L().onSuccess(J,R,a),[3,4]));case 3:return fe=Be.sent(),we(),L().isPaused()||(i.set(A,fe),oe.error=fe,ee&&N()&&(L().onError(fe,R,a),a.shouldRetryOnError&&_e()&&L().onErrorRetry(fe,R,a,Ae,{retryCount:(Pe.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Q=!1,Ye(),N()&&ee&&Yr(i,R,oe.data,oe.error,!1),[2,!0]}})})},[R]),Kr=(0,q.useCallback)(Ma.bind(K,i,function(){return V.current}),[]);if(Zt(function(){Ct.current=r,ut.current=a}),Zt(function(){if(R){var j=W.current,$=Ae.bind(K,Dn),J=function(N,we,oe){Ve(st({error:we,isValidating:oe},s(Se.current.data,N)?K:{data:N}))},X=0,Q=function(N){if(N==La){var we=Date.now();L().revalidateOnFocus&&we>X&&_e()&&(X=we+L().focusThrottleInterval,$())}else if(N==Ia)L().revalidateOnReconnect&&_e()&&$();else if(N==za)return Ae()},Pe=ka(R,y,J),ee=ka(R,w,Q);return Z.current=!1,V.current=R,W.current=!0,j&&Ve({data:me,error:Ce,isValidating:ft}),tr()&&(le(me)||Qr?$():Js($)),function(){Z.current=!0,Pe(),ee()}}},[R,Ae]),Zt(function(){var j;function $(){var X=Jt(b)?b(me):b;X&&j!==-1&&(j=setTimeout(J,X))}function J(){!Se.current.error&&(c||L().isVisible())&&(p||L().isOnline())?Ae(Dn).then($):$()}return $(),function(){j&&(clearTimeout(j),j=-1)}},[b,c,p,Ae]),(0,q.useDebugValue)(me),d&&le(me)&&R)throw le(Ce)?Ae(Dn):Ce;return{mutate:Kr,get data(){return He.data=!0,me},get error(){return He.error=!0,Ce},get isValidating(){return He.isValidating=!0,ft}}},Rl=Kt.defineProperty(ru,"default",{value:ja});var Ha=iu(su);var Va=o=>{switch(o){case 6:return"User not found.";case 10:return"Invalid API key.";case 29:return"Rate limit exceeded. Please wait a while.";default:return"Unknown error."}};var uu=o=>{try{let r=o.method==="top"?"gettoptracks":"getrecenttracks",[a,i]=(0,Gr.useState)([]),[s,l]=(0,Gr.useState)(!0),[d,_]=(0,Gr.useState)(null),b=p=>{_(p),l(!1)},c=p=>Hr(p).then(S=>S.json());return Ha(`https://ws.audioscrobbler.com/2.0/?method=user.${r}&user=${o.username}&api_key=${o.apikey}&format=json&period=${o.period}&limit=${o.limit||24}`,c,{onSuccess:p=>{if(p.error){let S=Va(p.error);b(new Error(S))}else{let S=p.recenttracks?.track||p.toptracks?.track||[];i(S),l(!1)}},onError:b}),{loading:s,error:d?.message||null,songs:a}}catch(r){return{loading:!1,error:r?.mesage||null,songs:[]}}},Ya=uu;var qe=require("react/jsx-runtime"),lu=()=>{let{username:o,apikey:r,period:a,limit:i}=(0,Y.getPreferenceValues)(),{loading:s,error:l,songs:d}=Ya({username:o,apikey:r,period:a,limit:i,method:"recent"});return l!==null&&(0,Y.showToast)(Y.ToastStyle.Failure,"Something went wrong.",String(l)),(0,qe.jsx)(Y.List,{isLoading:s,searchBarPlaceholder:"Search songs...",children:(0,qe.jsx)(Y.List.Section,{title:"Results",children:d.map((_,b)=>{let c=_,p=c.image.find(y=>y.size==="large")?.["#text"],S=c.artist?.["#text"],w=c["@attr"]?.nowplaying||!1;return(0,qe.jsx)(Y.List.Item,{icon:p,title:c.name,subtitle:S?`by ${S}`:void 0,accessoryTitle:w?"Now Playing":void 0,actions:(0,qe.jsxs)(Y.ActionPanel,{children:[(0,qe.jsx)(Y.OpenInBrowserAction,{url:c.url,title:"Open on Last.fm"}),(0,qe.jsx)(Y.CopyToClipboardAction,{title:"Copy URL to Clipboard",content:c.url}),(0,qe.jsx)(Y.CopyToClipboardAction,{title:"Copy Name and Artist",content:`${c.name} - ${S}`})]})},`${c.name}-${b}`)})})})},fu=lu;
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

swr/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
