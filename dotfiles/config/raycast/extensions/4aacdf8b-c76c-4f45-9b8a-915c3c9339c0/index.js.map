{
  "version": 3,
  "sources": ["../src/index.tsx", "../src/config.ts"],
  "sourcesContent": ["import { Clipboard, getPreferenceValues, showToast, Toast, getSelectedText } from \"@raycast/api\";\nimport { Bitlink, ErrorResult } from \"./types\";\nimport { API_HEADERS, API_URL } from \"./config\";\n\nexport default async function () {\n  const toast = await showToast(Toast.Style.Animated, \"Shortening\");\n  try {\n    const { pasteAfterShortening } = getPreferenceValues<Preferences>();\n\n    // If no text is selected, fall back to the clipboard\n    let urlToShorten;\n    try {\n      urlToShorten = await getSelectedText();\n    } catch {\n      urlToShorten = await Clipboard.readText();\n    }\n\n    if (!urlToShorten) throw new Error(\"No text selected and clipboard is empty\");\n    // Validate the URL or error out early\n    new URL(urlToShorten);\n\n    const response = await fetch(`${API_URL}/shorten`, {\n      headers: API_HEADERS,\n      method: \"post\",\n      body: JSON.stringify({\n        long_url: urlToShorten,\n      }),\n    });\n\n    const result = await response.json();\n    if (!response.ok) {\n      const { message, errors } = result as ErrorResult;\n      throw new Error(`Bitly API Error - ${errors ? JSON.stringify(errors) : message}, URL - ${urlToShorten}`);\n    }\n    const { link } = result as Bitlink;\n\n    await Clipboard.copy(link);\n\n    toast.style = Toast.Style.Success;\n    toast.title = \"Success\";\n    toast.message = \"Copied shortened URL to clipboard\";\n\n    if (pasteAfterShortening) {\n      await Clipboard.paste(link);\n    }\n  } catch (error) {\n    toast.style = Toast.Style.Failure;\n    toast.title = \"Error\";\n    toast.message = `${error}`;\n  }\n}\n", "import { getPreferenceValues } from \"@raycast/api\";\n\nconst { accessToken } = getPreferenceValues<Preferences>();\nexport const API_URL = \"https://api-ssl.bitly.com/v4\";\nexport const API_HEADERS = {\n  Authorization: `Bearer ${accessToken}`,\n  \"Content-Type\": \"application/json\",\n};\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAkF,wBCAlF,IAAAC,EAAoC,wBAE9B,CAAE,YAAAC,CAAY,KAAI,uBAAiC,EAC5CC,EAAU,+BACVC,EAAc,CACzB,cAAe,UAAUF,CAAW,GACpC,eAAgB,kBAClB,EDHA,eAAOG,GAA0B,CAC/B,IAAMC,EAAQ,QAAM,aAAU,QAAM,MAAM,SAAU,YAAY,EAChE,GAAI,CACF,GAAM,CAAE,qBAAAC,CAAqB,KAAI,uBAAiC,EAG9DC,EACJ,GAAI,CACFA,EAAe,QAAM,mBAAgB,CACvC,MAAQ,CACNA,EAAe,MAAM,YAAU,SAAS,CAC1C,CAEA,GAAI,CAACA,EAAc,MAAM,IAAI,MAAM,yCAAyC,EAE5E,IAAI,IAAIA,CAAY,EAEpB,IAAMC,EAAW,MAAM,MAAM,GAAGC,CAAO,WAAY,CACjD,QAASC,EACT,OAAQ,OACR,KAAM,KAAK,UAAU,CACnB,SAAUH,CACZ,CAAC,CACH,CAAC,EAEKI,EAAS,MAAMH,EAAS,KAAK,EACnC,GAAI,CAACA,EAAS,GAAI,CAChB,GAAM,CAAE,QAAAI,EAAS,OAAAC,CAAO,EAAIF,EAC5B,MAAM,IAAI,MAAM,qBAAqBE,EAAS,KAAK,UAAUA,CAAM,EAAID,CAAO,WAAWL,CAAY,EAAE,CACzG,CACA,GAAM,CAAE,KAAAO,CAAK,EAAIH,EAEjB,MAAM,YAAU,KAAKG,CAAI,EAEzBT,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,UACdA,EAAM,QAAU,oCAEZC,GACF,MAAM,YAAU,MAAMQ,CAAI,CAE9B,OAASC,EAAO,CACdV,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,QACdA,EAAM,QAAU,GAAGU,CAAK,EAC1B,CACF",
  "names": ["index_exports", "__export", "index_default", "__toCommonJS", "import_api", "import_api", "accessToken", "API_URL", "API_HEADERS", "index_default", "toast", "pasteAfterShortening", "urlToShorten", "response", "API_URL", "API_HEADERS", "result", "message", "errors", "link", "error"]
}
