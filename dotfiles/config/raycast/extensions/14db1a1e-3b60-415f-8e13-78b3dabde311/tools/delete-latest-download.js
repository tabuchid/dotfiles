"use strict";var U=Object.create;var h=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var L=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},w=(e,t,n,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of O(t))!M.call(e,i)&&i!==n&&h(e,i,{get:()=>t[i],enumerable:!(c=I(t,i))||c.enumerable});return e};var p=(e,t,n)=>(n=e!=null?U(D(e)):{},w(t||!e||!e.__esModule?h(n,"default",{value:e,enumerable:!0}):n,e)),F=e=>w(h({},"__esModule",{value:!0}),e);var j={};L(j,{confirmation:()=>N,default:()=>C});module.exports=F(j);var _=require("@raycast/api");var a=require("@raycast/api");var l=p(require("react")),r=require("@raycast/api");var u=p(require("node:fs")),m=p(require("node:path"));var x=require("react/jsx-runtime");function g(e,t){let n=e instanceof Error?e.message:String(e);return(0,r.showToast)({style:r.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??n,primaryAction:t?.primaryAction??k(e),secondaryAction:t?.primaryAction?k(e):void 0})}var k=e=>{let t=!0,n="[Extension Name]...",c="";try{let s=JSON.parse((0,u.readFileSync)((0,m.join)(r.environment.assetsPath,"..","package.json"),"utf8"));n=`[${s.title}]...`,c=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let i=r.environment.isDevelopment||t,y=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:i?"Copy Logs":"Report Error",onAction(s){s.hide(),i?r.Clipboard.copy(y):(0,r.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(c)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${y}
\`\`\`
`)}`)}}};var E=require("fs/promises"),A=require("path"),T=require("child_process"),R=require("os");var $=p(require("node:os"),1),f,b;function d(e){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);if(f===void 0&&(f=$.default.homedir()),f&&/^~(?=$|\/|\\)/.test(e))return e.replace(/^~/,f);let t=e.match(/^~([^/\\]+)(.*)/);if(t&&(b===void 0&&(b=$.default.userInfo().username),b)){let n=t[1],c=t[2];if(n===b)return f+c}return e}var W=require("react/jsx-runtime"),v=new a.Cache,S="customDownloadsFolder",o=(0,a.getPreferenceValues)();function z(){if(o.downloadsFolder&&o.downloadsFolder.trim())return d(o.downloadsFolder);let e=v.get(S);if(e&&typeof e=="string")return e;let t=V();return v.set(S,t),t}var X=z(),Q=o.showHiddenFiles,ee=o.fileOrder,te=o.lastestDownloadOrder,re=o.downloadsLayout??"list";function V(){if(process.platform==="darwin")return d("~/Downloads");if(process.platform==="win32")try{return(0,T.execSync)(`powershell -Command "(New-Object -ComObject Shell.Application).NameSpace('shell:Downloads').Self.Path"`,{encoding:"utf-8"}).trim()}catch(e){return console.error("Failed to get Downloads folder from registry:",e),(0,A.join)((0,R.homedir)(),"Downloads")}return d("~/Downloads")}async function P(e){if(o.deletionBehavior==="trash"){try{await(0,a.trash)(e),await(0,a.showToast)({style:a.Toast.Style.Success,title:"Item Moved to Trash"})}catch(n){await g(n,{title:"Move to Trash Failed"})}return}if(!await(0,a.confirmAlert)({title:"Delete Item?",message:`Are you sure you want to permanently delete:
${e}?`,primaryAction:{title:"Delete"}})){await(0,a.showToast)({style:a.Toast.Style.Animated,title:"Cancelled"});return}try{await(0,E.rm)(e,{recursive:!0,force:!0}),await(0,a.showToast)({style:a.Toast.Style.Success,title:"Item Deleted"})}catch(n){n instanceof Error&&await g(n,{title:"Deletion Failed"})}}var N=async e=>({message:`Are you sure you want to delete ${e.latestDownloadPath}?`,style:_.Action.Style.Destructive});async function C(e){try{return await P(e.latestDownloadPath),"Deleted lastest download"}catch{throw new Error("Deletion Failed")}}0&&(module.exports={confirmation});
