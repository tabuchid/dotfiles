"use strict";var U=Object.create;var d=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),j=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},C=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of X(t))!H.call(e,n)&&n!==r&&d(e,n,{get:()=>t[n],enumerable:!(a=Q(t,n))||a.enumerable});return e};var Y=(e,t,r)=>(r=e!=null?U(z(e)):{},C(t||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),J=e=>C(d({},"__esModule",{value:!0}),e);var P=m((de,O)=>{"use strict";var S=require("fs"),x;function V(){try{return S.statSync("/.dockerenv"),!0}catch{return!1}}function Z(){try{return S.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}O.exports=()=>(x===void 0&&(x=V()||Z()),x)});var R=m((me,_)=>{"use strict";var ee=require("os"),te=require("fs"),b=P(),N=()=>{if(process.platform!=="linux")return!1;if(ee.release().toLowerCase().includes("microsoft"))return!b();try{return te.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!b():!1}catch{return!1}};process.env.__IS_WSL_TEST__?_.exports=N:_.exports=N()});var I=m((he,F)=>{"use strict";F.exports=(e,t,r)=>{let a=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r();return a(n),n},set(n){a(n)}}),e}});var G=m((Ae,M)=>{var re=require("path"),ne=require("child_process"),{promises:A,constants:B}=require("fs"),h=R(),ae=P(),y=I(),L=re.join(__dirname,"xdg-open"),{platform:l,arch:q}=process,se=()=>{try{return A.statSync("/run/.containerenv"),!0}catch{return!1}},E;function ie(){return E===void 0&&(E=se()||ae()),E}var oe=(()=>{let e="/mnt/",t;return async function(){if(t)return t;let r="/etc/wsl.conf",a=!1;try{await A.access(r,B.F_OK),a=!0}catch{}if(!a)return e;let n=await A.readFile(r,{encoding:"utf8"}),c=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return c?(t=c.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),W=async(e,t)=>{let r;for(let a of e)try{return await t(a)}catch(n){r=n}throw r},g=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return W(e.app,i=>g({...e,app:i}));let{name:t,arguments:r=[]}=e.app||{};if(r=[...r],Array.isArray(t))return W(t,i=>g({...e,app:{name:i,arguments:r}}));let a,n=[],c={};if(l==="darwin")a="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),t&&n.push("-a",t);else if(l==="win32"||h&&!ie()&&!t){let i=await oe();a=h?`${i}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),h||(c.windowsVerbatimArguments=!0);let s=["Start"];e.wait&&s.push("-Wait"),t?(s.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&r.unshift(e.target)):e.target&&s.push(`"${e.target}"`),r.length>0&&(r=r.map(p=>`"\`"${p}\`""`),s.push(r.join(","))),e.target=Buffer.from(s.join(" "),"utf16le").toString("base64")}else{if(t)a=t;else{let i=!__dirname||__dirname==="/",s=!1;try{await A.access(L,B.X_OK),s=!0}catch{}a=process.versions.electron||l==="android"||i||!s?"xdg-open":L}r.length>0&&n.push(...r),e.wait||(c.stdio="ignore",c.detached=!0)}e.target&&n.push(e.target),l==="darwin"&&r.length>0&&n.push("--args",...r);let f=ne.spawn(a,n,c);return e.wait?new Promise((i,s)=>{f.once("error",s),f.once("close",p=>{if(!e.allowNonzeroExitCode&&p>0){s(new Error(`Exited with code ${p}`));return}i(f)})}):(f.unref(),f)},T=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return g({...t,target:e})},ce=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=t||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return g({...t,app:{name:e,arguments:r}})};function v(e){if(typeof e=="string"||Array.isArray(e))return e;let{[q]:t}=e;if(!t)throw new Error(`${q} is not supported`);return t}function k({[l]:e},{wsl:t}){if(t&&h)return v(t);if(!e)throw new Error(`${l} is not supported`);return v(e)}var w={};y(w,"chrome",()=>k({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));y(w,"firefox",()=>k({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));y(w,"edge",()=>k({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));T.apps=w;T.openApp=ce;M.exports=T});var fe={};j(fe,{default:()=>ue});module.exports=J(fe);var D=require("@raycast/api"),$=Y(G());var o=require("@raycast/api");var u={APP_NAME:"Drafts",APP_BUNDLE_ID:"com.agiletortoise.Drafts-OSX",APP_DOWNLOAD_LINK:"https://getdrafts.com"};async function le(){return(await(0,o.getApplications)()).some(({bundleId:t})=>t===u.APP_BUNDLE_ID)}async function K(){if(!await le()){let e={style:o.Toast.Style.Failure,title:u.APP_NAME+" is not installed.",message:"Install it from: "+u.APP_DOWNLOAD_LINK,primaryAction:{title:"Open "+u.APP_DOWNLOAD_LINK,onAction:t=>{(0,o.open)(u.APP_DOWNLOAD_LINK),t.hide()}}};return await(0,o.showToast)(e),!1}return!0}var ue=async()=>{await K()&&((0,$.default)("drafts://create?text="),await(0,D.popToRoot)({clearSearchBar:!0}),await(0,D.closeMainWindow)())};
