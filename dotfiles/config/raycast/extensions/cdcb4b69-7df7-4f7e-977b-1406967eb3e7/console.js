"use strict";var or=Object.create;var X=Object.defineProperty;var ir=Object.getOwnPropertyDescriptor;var cr=Object.getOwnPropertyNames;var lr=Object.getPrototypeOf,ur=Object.prototype.hasOwnProperty;var fr=(t,r)=>()=>(t&&(r=t(t=0)),r);var k=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),He=(t,r)=>{for(var e in r)X(t,e,{get:r[e],enumerable:!0})},Je=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of cr(r))!ur.call(t,a)&&a!==e&&X(t,a,{get:()=>r[a],enumerable:!(n=ir(r,a))||n.enumerable});return t};var N=(t,r,e)=>(e=t!=null?or(lr(t)):{},Je(r||!t||!t.__esModule?X(e,"default",{value:t,enumerable:!0}):e,t)),ve=t=>Je(X({},"__esModule",{value:!0}),t);var je={};He(je,{__addDisposableResource:()=>Lt,__assign:()=>se,__asyncDelegator:()=>Tt,__asyncGenerator:()=>Ot,__asyncValues:()=>Rt,__await:()=>Z,__awaiter:()=>kt,__classPrivateFieldGet:()=>Wt,__classPrivateFieldIn:()=>jt,__classPrivateFieldSet:()=>Ft,__createBinding:()=>ie,__decorate:()=>gt,__disposeResources:()=>Dt,__esDecorate:()=>yt,__exportStar:()=>xt,__extends:()=>ht,__generator:()=>vt,__importDefault:()=>It,__importStar:()=>Ut,__makeTemplateObject:()=>Ct,__metadata:()=>_t,__param:()=>bt,__propKey:()=>wt,__read:()=>Fe,__rest:()=>mt,__rewriteRelativeImportExtension:()=>Mt,__runInitializers:()=>$t,__setFunctionName:()=>St,__spread:()=>At,__spreadArray:()=>Pt,__spreadArrays:()=>Et,__values:()=>oe,default:()=>Lr});function ht(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ie(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function mt(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]]);return e}function gt(t,r,e,n){var a=arguments.length,s=a<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,r,e,n);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(s=(a<3?o(s):a>3?o(r,e,s):o(r,e))||s);return a>3&&s&&Object.defineProperty(r,e,s),s}function bt(t,r){return function(e,n){r(e,n,t)}}function yt(t,r,e,n,a,s){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var i=n.kind,l=i==="getter"?"get":i==="setter"?"set":"value",c=!r&&t?n.static?t:t.prototype:null,u=r||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),f,g=!1,d=e.length-1;d>=0;d--){var b={};for(var h in n)b[h]=h==="access"?{}:n[h];for(var h in n.access)b.access[h]=n.access[h];b.addInitializer=function(_){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(_||null))};var w=(0,e[d])(i==="accessor"?{get:u.get,set:u.set}:u[l],b);if(i==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=o(w.get))&&(u.get=f),(f=o(w.set))&&(u.set=f),(f=o(w.init))&&a.unshift(f)}else(f=o(w))&&(i==="field"?a.unshift(f):u[l]=f)}c&&Object.defineProperty(c,n.name,u),g=!0}function $t(t,r,e){for(var n=arguments.length>2,a=0;a<r.length;a++)e=n?r[a].call(t,e):r[a].call(t);return n?e:void 0}function wt(t){return typeof t=="symbol"?t:"".concat(t)}function St(t,r,e){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:e?"".concat(e," ",r):r})}function _t(t,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,r)}function kt(t,r,e,n){function a(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function i(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):a(u.value).then(i,l)}c((n=n.apply(t,r||[])).next())})}function vt(t,r){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=i(0),o.throw=i(1),o.return=i(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,a&&(s=c[0]&2?a.return:c[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,c[1])).done)return s;switch(a=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,a=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){e.label=c[1];break}if(c[0]===6&&e.label<s[1]){e.label=s[1],s=c;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(c);break}s[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(t,e)}catch(u){c=[6,u],a=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function xt(t,r){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&ie(r,t,e)}function oe(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),a,s=[],o;try{for(;(r===void 0||r-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(i){o={error:i}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return s}function At(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(Fe(arguments[r]));return t}function Et(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),a=0,r=0;r<e;r++)for(var s=arguments[r],o=0,i=s.length;o<i;o++,a++)n[a]=s[o];return n}function Pt(t,r,e){if(e||arguments.length===2)for(var n=0,a=r.length,s;n<a;n++)(s||!(n in r))&&(s||(s=Array.prototype.slice.call(r,0,n)),s[n]=r[n]);return t.concat(s||Array.prototype.slice.call(r))}function Z(t){return this instanceof Z?(this.v=t,this):new Z(t)}function Ot(t,r,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(t,r||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(d){return function(b){return Promise.resolve(b).then(d,f)}}function i(d,b){n[d]&&(a[d]=function(h){return new Promise(function(w,_){s.push([d,h,w,_])>1||l(d,h)})},b&&(a[d]=b(a[d])))}function l(d,b){try{c(n[d](b))}catch(h){g(s[0][3],h)}}function c(d){d.value instanceof Z?Promise.resolve(d.value.v).then(u,f):g(s[0][2],d)}function u(d){l("next",d)}function f(d){l("throw",d)}function g(d,b){d(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Tt(t){var r,e;return r={},n("next"),n("throw",function(a){throw a}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(a,s){r[a]=t[a]?function(o){return(e=!e)?{value:Z(t[a](o)),done:!1}:s?s(o):o}:s}}function Rt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],e;return r?r.call(t):(t=typeof oe=="function"?oe(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=t[s]&&function(o){return new Promise(function(i,l){o=t[s](o),a(i,l,o.done,o.value)})}}function a(s,o,i,l){Promise.resolve(l).then(function(c){s({value:c,done:i})},o)}}function Ct(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t}function Ut(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e=We(t),n=0;n<e.length;n++)e[n]!=="default"&&ie(r,t,e[n]);return Fr(r,t),r}function It(t){return t&&t.__esModule?t:{default:t}}function Wt(t,r,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?t!==r||!n:!r.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(t):n?n.value:r.get(t)}function Ft(t,r,e,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?t!==r||!a:!r.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,e):a?a.value=e:r.set(t,e),e}function jt(t,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?r===t:t.has(r)}function Lt(t,r,e){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var n,a;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=r[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=r[Symbol.dispose],e&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:r,dispose:n,async:e})}else e&&t.stack.push({async:!0});return r}function Dt(t){function r(s){t.error=t.hasError?new jr(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var e,n=0;function a(){for(;e=t.stack.pop();)try{if(!e.async&&n===1)return n=0,t.stack.push(e),Promise.resolve().then(a);if(e.dispose){var s=e.dispose.call(e.value);if(e.async)return n|=2,Promise.resolve(s).then(a,function(o){return r(o),a()})}else n|=1}catch(o){r(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Mt(t,r){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,a,s,o){return n?r?".jsx":".js":a&&(!s||!o)?e:a+s+"."+o.toLowerCase()+"js"}):t}var Ie,se,ie,Fr,We,jr,Lr,Le=fr(()=>{Ie=function(t,r){return Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])},Ie(t,r)};se=function(){return se=Object.assign||function(r){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},se.apply(this,arguments)};ie=Object.create?(function(t,r,e,n){n===void 0&&(n=e);var a=Object.getOwnPropertyDescriptor(r,e);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,a)}):(function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]});Fr=Object.create?(function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}):function(t,r){t.default=r},We=function(t){return We=Object.getOwnPropertyNames||function(r){var e=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[e.length]=n);return e},We(t)};jr=typeof SuppressedError=="function"?SuppressedError:function(t,r,e){var n=new Error(e);return n.name="SuppressedError",n.error=t,n.suppressed=r,n};Lr={__extends:ht,__assign:se,__rest:mt,__decorate:gt,__param:bt,__esDecorate:yt,__runInitializers:$t,__propKey:wt,__setFunctionName:St,__metadata:_t,__awaiter:kt,__generator:vt,__createBinding:ie,__exportStar:xt,__values:oe,__read:Fe,__spread:At,__spreadArrays:Et,__spreadArray:Pt,__await:Z,__asyncGenerator:Ot,__asyncDelegator:Tt,__asyncValues:Rt,__makeTemplateObject:Ct,__importStar:Ut,__importDefault:It,__classPrivateFieldGet:Wt,__classPrivateFieldSet:Ft,__classPrivateFieldIn:jt,__addDisposableResource:Lt,__disposeResources:Dt,__rewriteRelativeImportExtension:Mt}});var Q=k(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.getHomeDir=void 0;var Dr=require("os"),Mr=require("path"),Nr=()=>{let{HOME:t,USERPROFILE:r,HOMEPATH:e,HOMEDRIVE:n=`C:${Mr.sep}`}=process.env;return t||r||(e?`${n}${e}`:(0,Dr.homedir)())};ce.getHomeDir=Nr});var Nt=k(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.getProfileName=T.DEFAULT_PROFILE=T.ENV_PROFILE=void 0;T.ENV_PROFILE="AWS_PROFILE";T.DEFAULT_PROFILE="default";var Vr=t=>t.profile||process.env[T.ENV_PROFILE]||T.DEFAULT_PROFILE;T.getProfileName=Vr});var De=k(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.getSSOTokenFilepath=void 0;var zr=require("crypto"),Br=require("path"),Gr=Q(),Kr=t=>{let e=(0,zr.createHash)("sha1").update(t).digest("hex");return(0,Br.join)((0,Gr.getHomeDir)(),".aws","sso","cache",`${e}.json`)};le.getSSOTokenFilepath=Kr});var Vt=k(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.getSSOTokenFromFile=void 0;var qr=require("fs"),Hr=De(),{readFile:Jr}=qr.promises,Zr=async t=>{let r=(0,Hr.getSSOTokenFilepath)(t),e=await Jr(r,"utf8");return JSON.parse(e)};ue.getSSOTokenFromFile=Zr});var Me=k(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.getConfigFilepath=z.ENV_CONFIG_PATH=void 0;var Yr=require("path"),Qr=Q();z.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var Xr=()=>process.env[z.ENV_CONFIG_PATH]||(0,Yr.join)((0,Qr.getHomeDir)(),".aws","config");z.getConfigFilepath=Xr});var zt=k(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.getCredentialsFilepath=B.ENV_CREDENTIALS_PATH=void 0;var en=require("path"),tn=Q();B.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var rn=()=>process.env[B.ENV_CREDENTIALS_PATH]||(0,en.join)((0,tn.getHomeDir)(),".aws","credentials");B.getCredentialsFilepath=rn});var Gt=k(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.getProfileData=void 0;var Bt=/^profile\s(["'])?([^\1]+)\1$/,nn=t=>Object.entries(t).filter(([r])=>Bt.test(r)).reduce((r,[e,n])=>({...r,[Bt.exec(e)[2]]:n}),{...t.default&&{default:t.default}});fe.getProfileData=nn});var Ne=k(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.parseIni=void 0;var an=["__proto__","profile __proto__"],sn=t=>{let r={},e;for(let n of t.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(e=n.substring(1,n.length-1),an.includes(e))throw new Error(`Found invalid profile name "${e}"`)}else if(e){let s=n.indexOf("="),o=0,i=n.length-1;if(s!==-1&&s!==o&&s!==i){let[c,u]=[n.substring(0,s).trim(),n.substring(s+1).trim()];r[e]=r[e]||{},r[e][c]=u}}return r};de.parseIni=sn});var ze=k(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.slurpFile=void 0;var on=require("fs"),{readFile:cn}=on.promises,Ve={},ln=(t,r)=>((!Ve[t]||r?.ignoreCache)&&(Ve[t]=cn(t,"utf8")),Ve[t]);pe.slurpFile=ln});var Be=k(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.loadSharedConfigFiles=void 0;var un=Me(),fn=zt(),dn=Gt(),Kt=Ne(),qt=ze(),Ht=()=>({}),pn=async(t={})=>{let{filepath:r=(0,fn.getCredentialsFilepath)(),configFilepath:e=(0,un.getConfigFilepath)()}=t,n=await Promise.all([(0,qt.slurpFile)(e,{ignoreCache:t.ignoreCache}).then(Kt.parseIni).then(dn.getProfileData).catch(Ht),(0,qt.slurpFile)(r,{ignoreCache:t.ignoreCache}).then(Kt.parseIni).catch(Ht)]);return{configFile:n[0],credentialsFile:n[1]}};he.loadSharedConfigFiles=pn});var Zt=k(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.getSsoSessionData=void 0;var Jt=/^sso-session\s(["'])?([^\1]+)\1$/,hn=t=>Object.entries(t).filter(([r])=>Jt.test(r)).reduce((r,[e,n])=>({...r,[Jt.exec(e)[2]]:n}),{});me.getSsoSessionData=hn});var Yt=k(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.loadSsoSessionData=void 0;var mn=Me(),gn=Zt(),bn=Ne(),yn=ze(),$n=()=>({}),wn=async(t={})=>{var r;return(0,yn.slurpFile)((r=t.configFilepath)!==null&&r!==void 0?r:(0,mn.getConfigFilepath)()).then(bn.parseIni).then(gn.getSsoSessionData).catch($n)};ge.loadSsoSessionData=wn});var Qt=k(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.mergeConfigFiles=void 0;var Sn=(...t)=>{let r={};for(let e of t)for(let[n,a]of Object.entries(e))r[n]!==void 0?Object.assign(r[n],a):r[n]=a;return r};be.mergeConfigFiles=Sn});var Xt=k(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.parseKnownFiles=void 0;var _n=Be(),kn=Qt(),vn=async t=>{let r=await(0,_n.loadSharedConfigFiles)(t);return(0,kn.mergeConfigFiles)(r.configFile,r.credentialsFile)};ye.parseKnownFiles=vn});var tr=k(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0})});var rr=k(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var L=(Le(),ve(je));L.__exportStar(Q(),R);L.__exportStar(Nt(),R);L.__exportStar(De(),R);L.__exportStar(Vt(),R);L.__exportStar(Be(),R);L.__exportStar(Yt(),R);L.__exportStar(Xt(),R);L.__exportStar(tr(),R)});var nr=k(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});var xn=(Le(),ve(je));xn.__exportStar(rr(),Ge)});var Rn={};He(Rn,{default:()=>sr});module.exports=ve(Rn);var P=require("@raycast/api");var p=N(require("react")),y=require("@raycast/api");var Ze=Object.prototype.hasOwnProperty;function ee(t,r){var e,n;if(t===r)return!0;if(t&&r&&(e=t.constructor)===r.constructor){if(e===Date)return t.getTime()===r.getTime();if(e===RegExp)return t.toString()===r.toString();if(e===Array){if((n=t.length)===r.length)for(;n--&&ee(t[n],r[n]););return n===-1}if(!e||typeof t=="object"){n=0;for(e in t)if(Ze.call(t,e)&&++n&&!Ze.call(r,e)||!(e in r)||!ee(t[e],r[e]))return!1;return Object.keys(r).length===n}}return t!==t&&r!==r}var V=N(require("node:fs")),re=N(require("node:path")),st=N(require("node:crypto")),ot=N(require("node:child_process")),it=require("node:buffer"),H=N(require("node:stream")),ct=require("node:util");var lt=require("react/jsx-runtime");var xe=globalThis;function dr(t){let r=(0,p.useRef)(t),e=(0,p.useRef)(0);return ee(t,r.current)||(r.current=t,e.current+=1),(0,p.useMemo)(()=>r.current,[e.current])}function x(t){let r=(0,p.useRef)(t);return r.current=t,r}function pr(t,r){let e=t instanceof Error?t.message:String(t);return(0,y.showToast)({style:y.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??e,primaryAction:r?.primaryAction??Ye(t),secondaryAction:r?.primaryAction?Ye(t):void 0})}var Ye=t=>{let r=!0,e="[Extension Name]...",n="";try{let o=JSON.parse((0,V.readFileSync)((0,re.join)(y.environment.assetsPath,"..","package.json"),"utf8"));e=`[${o.title}]...`,n=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(r=!1)}catch{}let a=y.environment.isDevelopment||r,s=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(o){o.hide(),a?y.Clipboard.copy(s):(0,y.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(e)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function hr(t,r,e){let n=(0,p.useRef)(0),[a,s]=(0,p.useState)({isLoading:!0}),o=x(t),i=x(e?.abortable),l=x(r||[]),c=x(e?.onError),u=x(e?.onData),f=x(e?.onWillExecute),g=x(e?.failureToastOptions),d=x(a.data),b=(0,p.useRef)(null),h=(0,p.useRef)({page:0}),w=(0,p.useRef)(!1),_=(0,p.useRef)(!0),G=(0,p.useRef)(50),S=(0,p.useCallback)(()=>(i.current&&(i.current.current?.abort(),i.current.current=new AbortController),++n.current),[i]),$=(0,p.useCallback)((...O)=>{let v=S();f.current?.(O),s(m=>({...m,isLoading:!0}));let F=mr(o.current)(...O);function j(m){return m.name=="AbortError"||v===n.current&&(c.current?c.current(m):y.environment.launchType!==y.LaunchType.Background&&pr(m,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(U){U.hide(),b.current?.(...l.current||[])}},...g.current}),s({error:m,isLoading:!1})),m}return typeof F=="function"?(w.current=!0,F(h.current).then(({data:m,hasMore:U,cursor:_e})=>(v===n.current&&(h.current&&(h.current.cursor=_e,h.current.lastItem=m?.[m.length-1]),u.current&&u.current(m,h.current),U&&(G.current=m.length),_.current=U,s(ke=>h.current.page===0?{data:m,isLoading:!1}:{data:(ke.data||[])?.concat(m),isLoading:!1})),m),m=>(_.current=!1,j(m)))):(w.current=!1,F.then(m=>(v===n.current&&(u.current&&u.current(m),s({data:m,isLoading:!1})),m),j))},[u,c,l,o,s,b,f,h,g,S]);b.current=$;let E=(0,p.useCallback)(()=>{h.current={page:0};let O=l.current||[];return $(...O)},[$,l]),C=(0,p.useCallback)(async(O,v)=>{let F;try{if(v?.optimisticUpdate){S(),typeof v?.rollbackOnError!="function"&&v?.rollbackOnError!==!1&&(F=structuredClone(d.current?.value));let j=v.optimisticUpdate;s(m=>({...m,data:j(m.data)}))}return await O}catch(j){if(typeof v?.rollbackOnError=="function"){let m=v.rollbackOnError;s(U=>({...U,data:m(U.data)}))}else v?.optimisticUpdate&&v?.rollbackOnError!==!1&&s(m=>({...m,data:F}));throw j}finally{v?.shouldRevalidateAfter!==!1&&(y.environment.launchType===y.LaunchType.Background||y.environment.commandMode==="menu-bar"?await E():E())}},[E,d,s,S]),K=(0,p.useCallback)(()=>{h.current.page+=1;let O=l.current||[];$(...O)},[h,l,$]);(0,p.useEffect)(()=>{h.current={page:0},e?.execute!==!1?$(...r||[]):S()},[dr([r,e?.execute,$]),i,h]),(0,p.useEffect)(()=>()=>{S()},[S]);let W=e?.execute!==!1?a.isLoading:!1,Y={...a,isLoading:W},Se=w.current?{pageSize:G.current,hasMore:_.current,onLoadMore:K}:void 0;return{...Y,revalidate:E,mutate:C,pagination:Se}}function mr(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function Qe(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function gr(t){return t instanceof URLSearchParams?t.toString():t}function ut(t,r=[]){function e(n){return"update"in t?t.update(n,"utf8"):t.write(n)}return{dispatch:function(n){n=gr(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),o=a.exec(s)?.[1]??"unknown:["+s+"]";o=o.toLowerCase();let i=null;if((i=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+i+"]");return}else r.push(n);if(Buffer.isBuffer(n))return e("buffer:"),e(n.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](n);else throw new Error('Unknown object type "'+o+'"');else{let l=Object.keys(n);l=l.sort(),Qe(n)||l.splice(0,0,"prototype","__proto__","constructor"),e("object:"+l.length+":");let c=this;return l.forEach(function(u){c.dispatch(u),e(":"),c.dispatch(n[u]),e(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let s=this;if(e("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(l){s.dispatch(l)});return}let o=[],i=n.map(function(l){let c=br(),u=r.slice();return ut(c,u).dispatch(l),o=o.concat(u.slice(r.length)),c.read().toString()});r=r.concat(o),i.sort(),this._array(i,!1)},_date:function(n){e("date:"+n.toJSON())},_symbol:function(n){e("symbol:"+n.toString())},_error:function(n){e("error:"+n.toString())},_boolean:function(n){e("bool:"+n.toString())},_string:function(n){e("string:"+n.length+":"),e(n.toString())},_function:function(n){e("fn:"),Qe(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){e("number:"+n.toString())},_xml:function(n){e("xml:"+n.toString())},_null:function(){e("Null")},_undefined:function(){e("Undefined")},_regexp:function(n){e("regex:"+n.toString())},_uint8array:function(n){e("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){e("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){e("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){e("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){e("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){e("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){e("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){e("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){e("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){e("url:"+n.toString())},_map:function(n){e("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){e("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){e("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){e("domwindow")},_bigint:function(n){e("bigint:"+n.toString())},_process:function(){e("process")},_timer:function(){e("timer")},_pipe:function(){e("pipe")},_tcp:function(){e("tcp")},_udp:function(){e("udp")},_tty:function(){e("tty")},_statwatcher:function(){e("statwatcher")},_securecontext:function(){e("securecontext")},_connection:function(){e("connection")},_zlib:function(){e("zlib")},_context:function(){e("context")},_nodescript:function(){e("nodescript")},_httpparser:function(){e("httpparser")},_dataview:function(){e("dataview")},_signal:function(){e("signal")},_fsevent:function(){e("fsevent")},_tlswrap:function(){e("tlswrap")}}}function br(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function yr(t,r){let e=this[t];return e instanceof Date?`__raycast_cached_date__${e.toString()}`:Buffer.isBuffer(e)?`__raycast_cached_buffer__${e.toString("base64")}`:r}function $r(t,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Xe(t){let r=st.default.createHash("sha1");return ut(r).dispatch(t),r.digest("hex")}var wr=Symbol("cache without namespace"),et=new Map;function ne(t,r,e){let n=e?.cacheNamespace||wr,a=et.get(n)||et.set(n,new y.Cache({namespace:e?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let s=x(t),o=x(r),i=(0,p.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(s.current)}catch(f){console.error("Could not get Cache data:",f);return}}),l=(0,p.useMemo)(()=>{if(typeof i<"u"){if(i==="undefined")return;try{return JSON.parse(i,$r)}catch(f){return console.warn("The cached data is corrupted",f),o.current}}else return o.current},[i,o]),c=x(l),u=(0,p.useCallback)(f=>{let g=typeof f=="function"?f(c.current):f;if(typeof g>"u")a.set(s.current,"undefined");else{let d=JSON.stringify(g,yr);a.set(s.current,d)}return g},[a,s,c]);return[l,u]}var q=Symbol();function J(t,r,e){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:s,...o}=e||{},i=(0,p.useRef)(null),[l,c]=ne(Xe(r||[])+s,q,{cacheNamespace:Xe(t)}),u=(0,p.useRef)(l!==q?l:n),f=(0,p.useRef)(void 0),{mutate:g,revalidate:d,...b}=hr(t,r||[],{...o,onData(S,$){f.current=$,o.onData&&o.onData(S,$),!($&&$.page>0)&&(i.current="promise",u.current=S,c(S))}}),h,w=b.pagination;f.current&&f.current.page>0&&b.data?h=b.data:i.current==="promise"?h=u.current:a&&l!==q?(h=l,w&&(w.hasMore=!0,w.pageSize=l.length)):a&&l===q?h=u.current:l!==q?(h=l,w&&(w.hasMore=!0,w.pageSize=l.length)):h=n;let _=x(h),G=(0,p.useCallback)(async(S,$)=>{let E;try{if($?.optimisticUpdate){typeof $?.rollbackOnError!="function"&&$?.rollbackOnError!==!1&&(E=structuredClone(_.current));let C=$.optimisticUpdate(_.current);i.current="cache",u.current=C,c(C)}return await g(S,{shouldRevalidateAfter:$?.shouldRevalidateAfter})}catch(C){if(typeof $?.rollbackOnError=="function"){let K=$.rollbackOnError(_.current);i.current="cache",u.current=K,c(K)}else $?.optimisticUpdate&&$?.rollbackOnError!==!1&&(i.current="cache",u.current=E,c(E));throw C}},[c,g,_,u,i]);return(0,p.useEffect)(()=>{l!==q&&(i.current="cache",u.current=l)},[l]),{data:h,isLoading:b.isLoading,error:b.error,mutate:f.current&&f.current.page>0?g:G,pagination:w,revalidate:d}}var te=t=>!!t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function",Ae=Symbol.for("signal-exit emitter"),Pe=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),xe[Ae])return xe[Ae];Object.defineProperty(xe,Ae,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,e){this.listeners[r].push(e)}removeListener(r,e){let n=this.listeners[r],a=n.indexOf(e);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,e,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let s of this.listeners[r])a=s(e,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",e,n)||a),a}},Oe=class{onExit(){return()=>{}}load(){}unload(){}},Te=class{#i;#t;#e;#s;#o;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new Pe,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let e of this.#r)this.#a[e]=()=>{let n=this.#e.listeners(e),{count:a}=this.#t,s=r;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(a+=s.__signal_exit_emitter__.count),n.length===a){this.unload();let o=this.#t.emit("exit",null,e),i=e==="SIGHUP"?this.#i:e;o||r.kill(r.pid,i)}};this.#o=r.reallyExit,this.#s=r.emit}onExit(r,e){if(!te(this.#e))return()=>{};this.#n===!1&&this.load();let n=e?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let e=this.#a[r];e&&this.#e.on(r,e)}catch{}this.#e.emit=(r,...e)=>this.#l(r,...e),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let e=this.#a[r];if(!e)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,e)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(r){return te(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#l(r,...e){let n=this.#s;if(r==="exit"&&te(this.#e)){typeof e[0]=="number"&&(this.#e.exitCode=e[0]);let a=n.call(this.#e,r,...e);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...e)}},Ee=null,Sr=(t,r)=>(Ee||(Ee=te(process)?new Te(process):new Oe),Ee.onExit(t,r));function _r(t,{timeout:r}={}){let e=new Promise((i,l)=>{t.on("exit",(c,u)=>{i({exitCode:c,signal:u,timedOut:!1})}),t.on("error",c=>{l(c)}),t.stdin&&t.stdin.on("error",c=>{l(c)})}),n=Sr(()=>{t.kill()});if(r===0||r===void 0)return e.finally(()=>n());let a,s=new Promise((i,l)=>{a=setTimeout(()=>{t.kill("SIGTERM"),l(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),o=e.finally(()=>{clearTimeout(a)});return Promise.race([s,o]).finally(()=>n())}var Re=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function kr(t){let{encoding:r}=t,e=r==="buffer",n=new H.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,s=[];return n.on("data",o=>{s.push(o),a+=o.length}),n.getBufferedValue=()=>e?Buffer.concat(s,a):s.join(""),n.getBufferedLength=()=>a,n}async function tt(t,r){let e=kr(r);return await new Promise((n,a)=>{let s=o=>{o&&e.getBufferedLength()<=it.constants.MAX_LENGTH&&(o.bufferedData=e.getBufferedValue()),a(o)};(async()=>{try{await(0,ct.promisify)(H.default.pipeline)(t,e),n()}catch(o){s(o)}})(),e.on("data",()=>{e.getBufferedLength()>8e7&&s(new Re)})}),e.getBufferedValue()}async function rt(t,r){t.destroy();try{return await r}catch(e){return e.bufferedData}}async function vr({stdout:t,stderr:r},{encoding:e},n){let a=tt(t,{encoding:e}),s=tt(r,{encoding:e});try{return await Promise.all([n,a,s])}catch(o){return Promise.all([{error:o,exitCode:null,signal:o.signal,timedOut:o.timedOut||!1},rt(t,a),rt(r,s)])}}function xr(t){let r=typeof t=="string"?`
`:10,e=typeof t=="string"?"\r":13;return t[t.length-1]===r&&(t=t.slice(0,-1)),t[t.length-1]===e&&(t=t.slice(0,-1)),t}function nt(t,r){return t.stripFinalNewline?xr(r):r}function Ar({timedOut:t,timeout:r,signal:e,exitCode:n}){return t?`timed out after ${r} milliseconds`:e!=null?`was killed with ${e}`:n!=null?`failed with exit code ${n}`:"failed"}function Er({stdout:t,stderr:r,error:e,signal:n,exitCode:a,command:s,timedOut:o,options:i,parentError:l}){let u=`Command ${Ar({timedOut:o,timeout:i?.timeout,signal:n,exitCode:a})}: ${s}`,f=e?`${u}
${e.message}`:u,g=[f,r,t].filter(Boolean).join(`
`);return e?e.originalMessage=e.message:e=l,e.message=g,e.shortMessage=f,e.command=s,e.exitCode=a,e.signal=n,e.stdout=t,e.stderr=r,"bufferedData"in e&&delete e.bufferedData,e}function Pr({stdout:t,stderr:r,error:e,exitCode:n,signal:a,timedOut:s,command:o,options:i,parentError:l}){if(e||n!==0||a!==null)throw Er({error:e,exitCode:n,signal:a,stdout:t,stderr:r,command:o,timedOut:s,options:i,parentError:l});return t}var Or=/ +/g;function Tr(t,r){if(r)return[t,...r];let e=[];for(let n of t.trim().split(Or)){let a=e[e.length-1];a&&a.endsWith("\\")?e[e.length-1]=`${a.slice(0,-1)} ${n}`:e.push(n)}return e}function Ce(t,r,e){let{parseOutput:n,input:a,onData:s,onWillExecute:o,initialData:i,execute:l,keepPreviousData:c,onError:u,failureToastOptions:f,...g}=Array.isArray(r)?e||{}:r||{},d={initialData:i,execute:l,keepPreviousData:c,onError:u,onData:s,onWillExecute:o,failureToastOptions:f},b=(0,p.useRef)(null),h=x(n||Pr),w=(0,p.useCallback)(async(_,G,S,$)=>{let[E,...C]=Tr(_,G),K=[E,...C].join(" "),W={stripFinalNewline:!0,...S,timeout:S?.timeout||1e4,signal:b.current?.signal,encoding:S?.encoding===null?"buffer":S?.encoding||"utf8",env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",...process.env,...S?.env}},Y=ot.default.spawn(E,C,W),Se=_r(Y,W);$&&Y.stdin.end($);let[{error:O,exitCode:v,signal:F,timedOut:j},m,U]=await vr(Y,W,Se),_e=nt(W,m),ke=nt(W,U);return h.current({stdout:_e,stderr:ke,error:O,exitCode:v,signal:F,timedOut:j,command:K,options:W,parentError:new Error})},[h]);return J(w,[t,Array.isArray(r)?r:[],g,a],{...d,abortable:b})}var Rr=10,at=864e5,Cr={Default:100,Embed:0,Bookmark:140};function Ur(t){let r=Date.now(),e=t?t.lastVisited:0,n=t?t.frecency:0,a=(r-e)/at,s=Math.log(2)/(Rr*at),o=Cr.Default*Math.exp(-s*a),i=n+o;return{lastVisited:r,frecency:i}}var Ir=t=>{if(process.env.NODE_ENV!=="production"&&(typeof t!="object"||!t||!("id"in t)||typeof t.id!="string"))throw new Error("Specify a key function or make sure your items have an 'id' property");return t.id};function ft(t,r){let e=x(r?.key||Ir),n=x(r?.sortUnvisited),[a,s]=ne(`raycast_frecency_${r?.namespace}`,{}),o=(0,p.useCallback)(async function(u){let f=e.current(u);s(g=>{let d=g[f],b=Ur(d);return{...g,[f]:b}})},[e,s]),i=(0,p.useCallback)(async function(u){let f=e.current(u);s(g=>{let d={...g};return delete d[f],d})},[e,s]);return{data:(0,p.useMemo)(()=>t?t.sort((c,u)=>{let f=a[e.current(c)],g=a[e.current(u)];return f&&!g?-1:!f&&g?1:f&&g?g.frecency-f.frecency:n.current?n.current(c,u):0}):[],[a,t,e,n]),visitItem:o,resetRanking:i}}var ar=require("fs/promises");var A=require("@raycast/api");var Ue="https://console.aws.amazon.com";var Wr=t=>Object.keys(t).filter(r=>isNaN(Number(r))),dt=(t,r)=>Wr(t).filter(e=>t[e]!==r);var I=require("react/jsx-runtime"),ae=class{static Console=({url:r,onAction:e})=>(0,I.jsxs)(A.ActionPanel.Section,{title:"Console",children:[(0,I.jsx)(A.Action.OpenInBrowser,{title:"Open in Browser",url:pt(r),onOpen:()=>e?.()},"openConsoleLink"),(0,I.jsx)(A.Action.CopyToClipboard,{title:"Copy Link",content:pt(r),shortcut:A.Keyboard.Shortcut.Common.Copy,onCopy:()=>e?.()},"copyConsoleLink")]});static ExportResponse=({response:r})=>(0,I.jsx)(A.Action.CopyToClipboard,{title:"Copy Service Response",content:JSON.stringify(r,null,2),shortcut:{modifiers:["opt"],key:"e"}});static SwitchResourceType({setResourceType:r,current:e,enumType:n}){let a=dt(n,e);return(0,I.jsx)(A.ActionPanel.Section,{children:(0,I.jsx)(A.ActionPanel.Submenu,{title:"Switch Resource Type",shortcut:{modifiers:["cmd","shift"],key:"r"},filtering:!0,icon:A.Icon.Box,children:a.map(s=>(0,I.jsx)(A.Action,{title:`Show ${s.toString()}`,onAction:()=>r(n[s]),icon:A.Icon.Box},s.toString()))})})}};function pt(t){let r="";if(process.env.AWS_SSO_ACCOUNT_ID&&process.env.AWS_SSO_ROLE_NAME&&process.env.AWS_SSO_START_URL){if(process.env.AWS_SSO_START_URL.endsWith("start"))r=process.env.AWS_SSO_START_URL+"/#";else if(process.env.AWS_SSO_START_URL.endsWith("start/"))r=process.env.AWS_SSO_START_URL+"#";else if(process.env.AWS_SSO_START_URL.endsWith("start/#"))r=process.env.AWS_SSO_START_URL;else return t;return`${r}/console?account_id=${encodeURI(process.env.AWS_SSO_ACCOUNT_ID)}&role_name=${encodeURI(process.env.AWS_SSO_ROLE_NAME)}&destination=${encodeURIComponent(t)}`}return t}var D=require("@raycast/api"),$e=require("react"),we=N(nr());var Ke=require("react/jsx-runtime");function qe({onProfileSelected:t}){let r=(0,D.getPreferenceValues)(),[e,n]=ne("aws_profile"),a=Pn();(0,$e.useEffect)(()=>{let i=e&&!a.some(l=>l.name===e);(!e||i)&&n(a[0]?.name)},[a]);let{isUsingAwsVault:s,vaultSessions:o}=En({shouldUseAwsVault:r.useAWSVault,selectedProfile:e,profileOptions:a,onProfileSelected:t});return(0,$e.useEffect)(()=>{if(e&&!s?process.env.AWS_PROFILE=e:delete process.env.AWS_PROFILE,e){let i=a.find(l=>l.name===e);i?.region&&(process.env.AWS_REGION=i.region),i?.sso_start_url&&(process.env.AWS_SSO_START_URL=i.sso_start_url),i?.sso_account_id&&(process.env.AWS_SSO_ACCOUNT_ID=i.sso_account_id),i?.sso_role_name&&(process.env.AWS_SSO_ROLE_NAME=i.sso_role_name)}o?.includes(e||"")||delete process.env.AWS_VAULT,t?.()},[e,s]),!a||a.length<2?null:(0,Ke.jsx)(D.List.Dropdown,{tooltip:"Select AWS Profile",value:e,onChange:n,children:a.map(i=>(0,Ke.jsx)(D.List.Dropdown.Item,{value:i.name,title:i.name,icon:s?o?.some(l=>l===i.name)?D.Icon.LockUnlocked:D.Icon.LockDisabled:void 0},i.name))})}var An=t=>{let{data:r}=Ce("aws-vault",["list"],{env:{PATH:"/opt/homebrew/bin"},onError:()=>{}}),e=r?.split(/\r?\n/).filter(On).map(a=>a.split(" ")[0]),n=t.filter(a=>a.source_profile&&e?.includes(a.source_profile)).map(a=>a.name);return e&&[...e,...n]},En=({shouldUseAwsVault:t,selectedProfile:r,profileOptions:e,onProfileSelected:n})=>{if(!t)return{isUsingAwsVault:!1,vaultSessions:void 0};let a=An(e),s=!!a,o=s&&a?.includes(r||"")?r:void 0,{revalidate:i}=Ce("aws-vault",["exec",o,"--json"],{execute:!!o,env:{PATH:"/opt/homebrew/bin"},onError:()=>{},onData:l=>{if(l){let{AccessKeyId:c,SecretAccessKey:u,SessionToken:f}=JSON.parse(l);process.env.AWS_VAULT=o,process.env.AWS_ACCESS_KEY_ID=c,process.env.AWS_SECRET_ACCESS_KEY=u,process.env.AWS_SESSION_TOKEN=f,n?.()}}});return(0,$e.useEffect)(()=>{delete process.env.AWS_VAULT,i()},[o]),{isUsingAwsVault:s,vaultSessions:a}},Pn=()=>{let{data:t={configFile:{},credentialsFile:{}}}=J(we.loadSharedConfigFiles),{data:r={}}=J(we.loadSsoSessionData),{configFile:e,credentialsFile:n}=t;return(Object.keys(e).length>0?Object.entries(e):Object.entries(n)).map(([s,o])=>{let i=e[s]?.include_profile,l=e[s]?.region||i&&e[i]?.region,c=e[s]?.sso_start_url||e[s]?.sso_session&&r[e[s].sso_session]?.sso_start_url,u=e[s]?.sso_account_id||i&&e[i]?.sso_account_id,f=e[s]?.sso_role_name||i&&e[i]?.sso_role_name;return{...o,region:l,name:s,sso_start_url:c,sso_account_id:u,sso_role_name:f}})},On=t=>t.includes("sts.AssumeRole:")&&!t.includes("sts.AssumeRole:-")||t.includes("sts.GetSessionToken:")&&!t.includes("sts.GetSessionToken:-");var M=require("react/jsx-runtime");function sr(){let{data:t,isLoading:r,revalidate:e}=J(Tn),{data:n,visitItem:a,resetRanking:s}=ft(t,{namespace:"aws-console",sortUnvisited:(i,l)=>i.title.localeCompare(l.title)}),o=i=>{try{return new URL(i),!0}catch{return!1}};return(0,M.jsx)(P.List,{isLoading:r,searchBarPlaceholder:"Filter services by name...",searchBarAccessory:(0,M.jsx)(qe,{onProfileSelected:e}),children:n?.map(i=>{let l=o(i.arg)?i.arg:`${Ue}${i.arg}`;return(0,M.jsx)(P.List.Item,{title:i.title,subtitle:i.subtitle,icon:{source:i.icon.path,mask:P.Image.Mask.RoundedRectangle},keywords:i.match.split(" "),actions:(0,M.jsxs)(P.ActionPanel,{children:[(0,M.jsx)(ae.Console,{url:l,onAction:()=>a(i)}),(0,M.jsx)(P.Action,{title:"Reset Ranking",icon:P.Icon.ArrowCounterClockwise,onAction:()=>s(i)})]})},i.id)})})}async function Tn(){let t=await(0,ar.readFile)(`${__dirname}/assets/aws-services.json`,"utf8");return JSON.parse(t).items.filter(r=>!!r.title&&!!r.id)}
