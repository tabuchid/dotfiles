"use strict";var xl=Object.create;var Ur=Object.defineProperty;var Ul=Object.getOwnPropertyDescriptor;var kl=Object.getOwnPropertyNames;var Wl=Object.getPrototypeOf,ql=Object.prototype.hasOwnProperty;var Vt=(n,r)=>()=>(n&&(r=n(n=0)),r);var te=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),gi=(n,r)=>{for(var i in r)Ur(n,i,{get:r[i],enumerable:!0})},_i=(n,r,i,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of kl(r))!ql.call(n,a)&&a!==i&&Ur(n,a,{get:()=>r[a],enumerable:!(s=Ul(r,a))||s.enumerable});return n};var _e=(n,r,i)=>(i=n!=null?xl(Wl(n)):{},_i(r||!n||!n.__esModule?Ur(i,"default",{value:n,enumerable:!0}):i,n)),zl=n=>_i(Ur({},"__esModule",{value:!0}),n);var Ci=te((Wr,Ri)=>{(function(n,r){typeof Wr=="object"&&typeof Ri<"u"?r(Wr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(Wr,(function(n){"use strict";function r(){}function i(e){return typeof e=="object"&&e!==null||typeof e=="function"}let s=r;function a(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:!0})}catch{}}let l=Promise,d=Promise.prototype.then,A=Promise.reject.bind(l);function w(e){return new l(e)}function p(e){return w(t=>t(e))}function E(e){return A(e)}function I(e,t,o){return d.call(e,t,o)}function F(e,t,o){I(I(e,t,o),void 0,s)}function m(e,t){F(e,t)}function h(e,t){F(e,void 0,t)}function R(e,t,o){return I(e,t,o)}function b(e){I(e,void 0,s)}let y=e=>{if(typeof queueMicrotask=="function")y=queueMicrotask;else{let t=p(void 0);y=o=>I(t,o)}return y(e)};function T(e,t,o){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,o)}function f(e,t,o){try{return p(T(e,t,o))}catch(u){return E(u)}}let g=16384;class S{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let o=this._back,u=o;o._elements.length===g-1&&(u={_elements:[],_next:void 0}),o._elements.push(t),u!==o&&(this._back=u,o._next=u),++this._size}shift(){let t=this._front,o=t,u=this._cursor,c=u+1,_=t._elements,C=_[u];return c===g&&(o=t._next,c=0),--this._size,this._cursor=c,t!==o&&(this._front=o),_[u]=void 0,C}forEach(t){let o=this._cursor,u=this._front,c=u._elements;for(;(o!==c.length||u._next!==void 0)&&!(o===c.length&&(u=u._next,c=u._elements,o=0,c.length===0));)t(c[o]),++o}peek(){let t=this._front,o=this._cursor;return t._elements[o]}}let P=Symbol("[[AbortSteps]]"),D=Symbol("[[ErrorSteps]]"),z=Symbol("[[CancelSteps]]"),M=Symbol("[[PullSteps]]"),Q=Symbol("[[ReleaseSteps]]");function H(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?gt(e):t._state==="closed"?Gs(e):_t(e,t._storedError)}function ce(e,t){let o=e._ownerReadableStream;return Ce(o,t)}function X(e){let t=e._ownerReadableStream;t._state==="readable"?nn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Zs(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._readableStreamController[Q](),t._reader=void 0,e._ownerReadableStream=void 0}function Fe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function gt(e){e._closedPromise=w((t,o)=>{e._closedPromise_resolve=t,e._closedPromise_reject=o})}function _t(e,t){gt(e),nn(e,t)}function Gs(e){gt(e),no(e)}function nn(e,t){e._closedPromise_reject!==void 0&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Zs(e,t){_t(e,t)}function no(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let oo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Vs=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ys(e){return typeof e=="object"||typeof e=="function"}function Pe(e,t){if(e!==void 0&&!Ys(e))throw new TypeError(`${t} is not an object.`)}function ye(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function Qs(e){return typeof e=="object"&&e!==null||typeof e=="function"}function io(e,t){if(!Qs(e))throw new TypeError(`${t} is not an object.`)}function Oe(e,t,o){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${o}'.`)}function on(e,t,o){if(e===void 0)throw new TypeError(`${t} is required in '${o}'.`)}function sn(e){return Number(e)}function so(e){return e===0?0:e}function Xs(e){return so(Vs(e))}function an(e,t){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=so(c),!oo(c))throw new TypeError(`${t} is not a finite number`);if(c=Xs(c),c<0||c>u)throw new TypeError(`${t} is outside the accepted range of 0 to ${u}, inclusive`);return!oo(c)||c===0?0:c}function ln(e,t){if(!Ke(e))throw new TypeError(`${t} is not a ReadableStream.`)}function St(e){return new Ge(e)}function ao(e,t){e._reader._readRequests.push(t)}function un(e,t,o){let c=e._reader._readRequests.shift();o?c._closeSteps():c._chunkSteps(t)}function lr(e){return e._reader._readRequests.length}function lo(e){let t=e._reader;return!(t===void 0||!Ze(t))}class Ge{constructor(t){if(Oe(t,1,"ReadableStreamDefaultReader"),ln(t,"First parameter"),Je(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");H(this,t),this._readRequests=new S}get closed(){return Ze(this)?this._closedPromise:E(ur("closed"))}cancel(t=void 0){return Ze(this)?this._ownerReadableStream===void 0?E(Fe("cancel")):ce(this,t):E(ur("cancel"))}read(){if(!Ze(this))return E(ur("read"));if(this._ownerReadableStream===void 0)return E(Fe("read from"));let t,o,u=w((_,C)=>{t=_,o=C});return kt(this,{_chunkSteps:_=>t({value:_,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:_=>o(_)}),u}releaseLock(){if(!Ze(this))throw ur("releaseLock");this._ownerReadableStream!==void 0&&Ks(this)}}Object.defineProperties(Ge.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(Ge.prototype.cancel,"cancel"),a(Ge.prototype.read,"read"),a(Ge.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ge.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ze(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Ge}function kt(e,t){let o=e._ownerReadableStream;o._disturbed=!0,o._state==="closed"?t._closeSteps():o._state==="errored"?t._errorSteps(o._storedError):o._readableStreamController[M](t)}function Ks(e){X(e);let t=new TypeError("Reader was released");uo(e,t)}function uo(e,t){let o=e._readRequests;e._readRequests=new S,o.forEach(u=>{u._errorSteps(t)})}function ur(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Js=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class fo{constructor(t,o){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=o}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?R(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let o=()=>this._returnSteps(t);return this._ongoingPromise?R(this._ongoingPromise,o,o):o()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader,o,u,c=w((C,L)=>{o=C,u=L});return kt(t,{_chunkSteps:C=>{this._ongoingPromise=void 0,y(()=>o({value:C,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,X(t),o({value:void 0,done:!0})},_errorSteps:C=>{this._ongoingPromise=void 0,this._isFinished=!0,X(t),u(C)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let o=this._reader;if(!this._preventCancel){let u=ce(o,t);return X(o),R(u,()=>({value:t,done:!0}))}return X(o),p({value:t,done:!0})}}let co={next(){return ho(this)?this._asyncIteratorImpl.next():E(mo("next"))},return(e){return ho(this)?this._asyncIteratorImpl.return(e):E(mo("return"))}};Object.setPrototypeOf(co,Js);function ea(e,t){let o=St(e),u=new fo(o,t),c=Object.create(co);return c._asyncIteratorImpl=u,c}function ho(e){if(!i(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof fo}catch{return!1}}function mo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let po=Number.isNaN||function(e){return e!==e};var fn,cn,dn;function Wt(e){return e.slice()}function yo(e,t,o,u,c){new Uint8Array(e).set(new Uint8Array(o,u,c),t)}let Ne=e=>(typeof e.transfer=="function"?Ne=t=>t.transfer():typeof structuredClone=="function"?Ne=t=>structuredClone(t,{transfer:[t]}):Ne=t=>t,Ne(e)),Ve=e=>(typeof e.detached=="boolean"?Ve=t=>t.detached:Ve=t=>t.byteLength===0,Ve(e));function bo(e,t,o){if(e.slice)return e.slice(t,o);let u=o-t,c=new ArrayBuffer(u);return yo(c,0,e,t,u),c}function fr(e,t){let o=e[t];if(o!=null){if(typeof o!="function")throw new TypeError(`${String(t)} is not a function`);return o}}function ta(e){let t={[Symbol.iterator]:()=>e.iterator},o=(async function*(){return yield*t})(),u=o.next;return{iterator:o,nextMethod:u,done:!1}}let hn=(dn=(fn=Symbol.asyncIterator)!==null&&fn!==void 0?fn:(cn=Symbol.for)===null||cn===void 0?void 0:cn.call(Symbol,"Symbol.asyncIterator"))!==null&&dn!==void 0?dn:"@@asyncIterator";function go(e,t="sync",o){if(o===void 0)if(t==="async"){if(o=fr(e,hn),o===void 0){let _=fr(e,Symbol.iterator),C=go(e,"sync",_);return ta(C)}}else o=fr(e,Symbol.iterator);if(o===void 0)throw new TypeError("The object is not iterable");let u=T(o,e,[]);if(!i(u))throw new TypeError("The iterator method must return an object");let c=u.next;return{iterator:u,nextMethod:c,done:!1}}function ra(e){let t=T(e.nextMethod,e.iterator,[]);if(!i(t))throw new TypeError("The iterator.next() method must return an object");return t}function na(e){return!!e.done}function oa(e){return e.value}function ia(e){return!(typeof e!="number"||po(e)||e<0)}function _o(e){let t=bo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function mn(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function pn(e,t,o){if(!ia(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:o}),e._queueTotalSize+=o}function sa(e){return e._queue.peek().value}function Ye(e){e._queue=new S,e._queueTotalSize=0}function So(e){return e===DataView}function aa(e){return So(e.constructor)}function la(e){return So(e)?1:e.BYTES_PER_ELEMENT}class ot{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!yn(this))throw En("view");return this._view}respond(t){if(!yn(this))throw En("respond");if(Oe(t,1,"respond"),t=an(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ve(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");mr(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!yn(this))throw En("respondWithNewView");if(Oe(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ve(t.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");pr(this._associatedReadableByteStreamController,t)}}Object.defineProperties(ot.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),a(ot.prototype.respond,"respond"),a(ot.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ot.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Be{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!it(this))throw zt("byobRequest");return Sn(this)}get desiredSize(){if(!it(this))throw zt("desiredSize");return Lo(this)}close(){if(!it(this))throw zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);qt(this)}enqueue(t){if(!it(this))throw zt("enqueue");if(Oe(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);hr(this,t)}error(t=void 0){if(!it(this))throw zt("error");be(this,t)}[z](t){Eo(this),Ye(this);let o=this._cancelAlgorithm(t);return dr(this),o}[M](t){let o=this._controlledReadableByteStream;if(this._queueTotalSize>0){Do(this,t);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(C){t._errorSteps(C);return}let _={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(_)}ao(o,t),st(this)}[Q](){if(this._pendingPullIntos.length>0){let t=this._pendingPullIntos.peek();t.readerType="none",this._pendingPullIntos=new S,this._pendingPullIntos.push(t)}}}Object.defineProperties(Be.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),a(Be.prototype.close,"close"),a(Be.prototype.enqueue,"enqueue"),a(Be.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function it(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Be}function yn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof ot}function st(e){if(!ha(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();F(o,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,st(e)),null),u=>(be(e,u),null))}function Eo(e){gn(e),e._pendingPullIntos=new S}function bn(e,t){let o=!1;e._state==="closed"&&(o=!0);let u=wo(t);t.readerType==="default"?un(e,u,o):_a(e,u,o)}function wo(e){let t=e.bytesFilled,o=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/o)}function cr(e,t,o,u){e._queue.push({buffer:t,byteOffset:o,byteLength:u}),e._queueTotalSize+=u}function Ro(e,t,o,u){let c;try{c=bo(t,o,o+u)}catch(_){throw be(e,_),_}cr(e,c,0,u)}function Co(e,t){t.bytesFilled>0&&Ro(e,t.buffer,t.byteOffset,t.bytesFilled),Et(e)}function To(e,t){let o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),u=t.bytesFilled+o,c=o,_=!1,C=u%t.elementSize,L=u-C;L>=t.minimumFill&&(c=L-t.bytesFilled,_=!0);let B=e._queue;for(;c>0;){let O=B.peek(),x=Math.min(c,O.byteLength),k=t.byteOffset+t.bytesFilled;yo(t.buffer,k,O.buffer,O.byteOffset,x),O.byteLength===x?B.shift():(O.byteOffset+=x,O.byteLength-=x),e._queueTotalSize-=x,Ao(e,x,t),c-=x}return _}function Ao(e,t,o){o.bytesFilled+=t}function Po(e){e._queueTotalSize===0&&e._closeRequested?(dr(e),Zt(e._controlledReadableByteStream)):st(e)}function gn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function _n(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();To(e,t)&&(Et(e),bn(e._controlledReadableByteStream,t))}}function ua(e){let t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(e._queueTotalSize===0)return;let o=t._readRequests.shift();Do(e,o)}}function fa(e,t,o,u){let c=e._controlledReadableByteStream,_=t.constructor,C=la(_),{byteOffset:L,byteLength:B}=t,O=o*C,x;try{x=Ne(t.buffer)}catch($){u._errorSteps($);return}let k={buffer:x,bufferByteLength:x.byteLength,byteOffset:L,byteLength:B,bytesFilled:0,minimumFill:O,elementSize:C,viewConstructor:_,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(k),Oo(c,u);return}if(c._state==="closed"){let $=new _(k.buffer,k.byteOffset,0);u._closeSteps($);return}if(e._queueTotalSize>0){if(To(e,k)){let $=wo(k);Po(e),u._chunkSteps($);return}if(e._closeRequested){let $=new TypeError("Insufficient bytes to fill elements in the given buffer");be(e,$),u._errorSteps($);return}}e._pendingPullIntos.push(k),Oo(c,u),st(e)}function ca(e,t){t.readerType==="none"&&Et(e);let o=e._controlledReadableByteStream;if(wn(o))for(;No(o)>0;){let u=Et(e);bn(o,u)}}function da(e,t,o){if(Ao(e,t,o),o.readerType==="none"){Co(e,o),_n(e);return}if(o.bytesFilled<o.minimumFill)return;Et(e);let u=o.bytesFilled%o.elementSize;if(u>0){let c=o.byteOffset+o.bytesFilled;Ro(e,o.buffer,c-u,u)}o.bytesFilled-=u,bn(e._controlledReadableByteStream,o),_n(e)}function Io(e,t){let o=e._pendingPullIntos.peek();gn(e),e._controlledReadableByteStream._state==="closed"?ca(e,o):da(e,t,o),st(e)}function Et(e){return e._pendingPullIntos.shift()}function ha(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(lo(t)&&lr(t)>0||wn(t)&&No(t)>0||Lo(e)>0)}function dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function qt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){let o=e._pendingPullIntos.peek();if(o.bytesFilled%o.elementSize!==0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw be(e,u),u}}dr(e),Zt(t)}}function hr(e,t){let o=e._controlledReadableByteStream;if(e._closeRequested||o._state!=="readable")return;let{buffer:u,byteOffset:c,byteLength:_}=t;if(Ve(u))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let C=Ne(u);if(e._pendingPullIntos.length>0){let L=e._pendingPullIntos.peek();if(Ve(L.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");gn(e),L.buffer=Ne(L.buffer),L.readerType==="none"&&Co(e,L)}if(lo(o))if(ua(e),lr(o)===0)cr(e,C,c,_);else{e._pendingPullIntos.length>0&&Et(e);let L=new Uint8Array(C,c,_);un(o,L,!1)}else wn(o)?(cr(e,C,c,_),_n(e)):cr(e,C,c,_);st(e)}function be(e,t){let o=e._controlledReadableByteStream;o._state==="readable"&&(Eo(e),Ye(e),dr(e),oi(o,t))}function Do(e,t){let o=e._queue.shift();e._queueTotalSize-=o.byteLength,Po(e);let u=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);t._chunkSteps(u)}function Sn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),o=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(ot.prototype);pa(u,e,o),e._byobRequest=u}return e._byobRequest}function Lo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function mr(e,t){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+t>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=Ne(o.buffer),Io(e,t)}function pr(e,t){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+t.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;o.buffer=Ne(t.buffer),Io(e,c)}function vo(e,t,o,u,c,_,C){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ye(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=_,t._pullAlgorithm=u,t._cancelAlgorithm=c,t._autoAllocateChunkSize=C,t._pendingPullIntos=new S,e._readableStreamController=t;let L=o();F(p(L),()=>(t._started=!0,st(t),null),B=>(be(t,B),null))}function ma(e,t,o){let u=Object.create(Be.prototype),c,_,C;t.start!==void 0?c=()=>t.start(u):c=()=>{},t.pull!==void 0?_=()=>t.pull(u):_=()=>p(void 0),t.cancel!==void 0?C=B=>t.cancel(B):C=()=>p(void 0);let L=t.autoAllocateChunkSize;if(L===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");vo(e,u,c,_,C,o,L)}function pa(e,t,o){e._associatedReadableByteStreamController=t,e._view=o}function En(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function zt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ya(e,t){Pe(e,t);let o=e?.mode;return{mode:o===void 0?void 0:ba(o,`${t} has member 'mode' that`)}}function ba(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function ga(e,t){var o;Pe(e,t);let u=(o=e?.min)!==null&&o!==void 0?o:1;return{min:an(u,`${t} has member 'min' that`)}}function Fo(e){return new Qe(e)}function Oo(e,t){e._reader._readIntoRequests.push(t)}function _a(e,t,o){let c=e._reader._readIntoRequests.shift();o?c._closeSteps(t):c._chunkSteps(t)}function No(e){return e._reader._readIntoRequests.length}function wn(e){let t=e._reader;return!(t===void 0||!at(t))}class Qe{constructor(t){if(Oe(t,1,"ReadableStreamBYOBReader"),ln(t,"First parameter"),Je(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!it(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");H(this,t),this._readIntoRequests=new S}get closed(){return at(this)?this._closedPromise:E(yr("closed"))}cancel(t=void 0){return at(this)?this._ownerReadableStream===void 0?E(Fe("cancel")):ce(this,t):E(yr("cancel"))}read(t,o={}){if(!at(this))return E(yr("read"));if(!ArrayBuffer.isView(t))return E(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return E(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return E(new TypeError("view's buffer must have non-zero byteLength"));if(Ve(t.buffer))return E(new TypeError("view's buffer has been detached"));let u;try{u=ga(o,"options")}catch(O){return E(O)}let c=u.min;if(c===0)return E(new TypeError("options.min must be greater than 0"));if(aa(t)){if(c>t.byteLength)return E(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(c>t.length)return E(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return E(Fe("read from"));let _,C,L=w((O,x)=>{_=O,C=x});return Bo(this,t,c,{_chunkSteps:O=>_({value:O,done:!1}),_closeSteps:O=>_({value:O,done:!0}),_errorSteps:O=>C(O)}),L}releaseLock(){if(!at(this))throw yr("releaseLock");this._ownerReadableStream!==void 0&&Sa(this)}}Object.defineProperties(Qe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(Qe.prototype.cancel,"cancel"),a(Qe.prototype.read,"read"),a(Qe.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function at(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Qe}function Bo(e,t,o,u){let c=e._ownerReadableStream;c._disturbed=!0,c._state==="errored"?u._errorSteps(c._storedError):fa(c._readableStreamController,t,o,u)}function Sa(e){X(e);let t=new TypeError("Reader was released");xo(e,t)}function xo(e,t){let o=e._readIntoRequests;e._readIntoRequests=new S,o.forEach(u=>{u._errorSteps(t)})}function yr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Mt(e,t){let{highWaterMark:o}=e;if(o===void 0)return t;if(po(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function br(e){let{size:t}=e;return t||(()=>1)}function gr(e,t){Pe(e,t);let o=e?.highWaterMark,u=e?.size;return{highWaterMark:o===void 0?void 0:sn(o),size:u===void 0?void 0:Ea(u,`${t} has member 'size' that`)}}function Ea(e,t){return ye(e,t),o=>sn(e(o))}function wa(e,t){Pe(e,t);let o=e?.abort,u=e?.close,c=e?.start,_=e?.type,C=e?.write;return{abort:o===void 0?void 0:Ra(o,e,`${t} has member 'abort' that`),close:u===void 0?void 0:Ca(u,e,`${t} has member 'close' that`),start:c===void 0?void 0:Ta(c,e,`${t} has member 'start' that`),write:C===void 0?void 0:Aa(C,e,`${t} has member 'write' that`),type:_}}function Ra(e,t,o){return ye(e,o),u=>f(e,t,[u])}function Ca(e,t,o){return ye(e,o),()=>f(e,t,[])}function Ta(e,t,o){return ye(e,o),u=>T(e,t,[u])}function Aa(e,t,o){return ye(e,o),(u,c)=>f(e,t,[u,c])}function Uo(e,t){if(!wt(e))throw new TypeError(`${t} is not a WritableStream.`)}function Pa(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Ia=typeof AbortController=="function";function Da(){if(Ia)return new AbortController}class Xe{constructor(t={},o={}){t===void 0?t=null:io(t,"First parameter");let u=gr(o,"Second parameter"),c=wa(t,"First parameter");if(Wo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let C=br(u),L=Mt(u,1);Ha(this,c,L,C)}get locked(){if(!wt(this))throw Rr("locked");return Rt(this)}abort(t=void 0){return wt(this)?Rt(this)?E(new TypeError("Cannot abort a stream that already has a writer")):_r(this,t):E(Rr("abort"))}close(){return wt(this)?Rt(this)?E(new TypeError("Cannot close a stream that already has a writer")):Ie(this)?E(new TypeError("Cannot close an already-closing stream")):qo(this):E(Rr("close"))}getWriter(){if(!wt(this))throw Rr("getWriter");return ko(this)}}Object.defineProperties(Xe.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),a(Xe.prototype.abort,"abort"),a(Xe.prototype.close,"close"),a(Xe.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function ko(e){return new xe(e)}function La(e,t,o,u,c=1,_=()=>1){let C=Object.create(Xe.prototype);Wo(C);let L=Object.create(Ct.prototype);return Go(C,L,e,t,o,u,c,_),C}function Wo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new S,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function wt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Xe}function Rt(e){return e._writer!==void 0}function _r(e,t){var o;if(e._state==="closed"||e._state==="errored")return p(void 0);e._writableStreamController._abortReason=t,(o=e._writableStreamController._abortController)===null||o===void 0||o.abort(t);let u=e._state;if(u==="closed"||u==="errored")return p(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,t=void 0);let _=w((C,L)=>{e._pendingAbortRequest={_promise:void 0,_resolve:C,_reject:L,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=_,c||Cn(e,t),_}function qo(e){let t=e._state;if(t==="closed"||t==="errored")return E(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let o=w((c,_)=>{let C={_resolve:c,_reject:_};e._closeRequest=C}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&Fn(u),ja(e._writableStreamController),o}function va(e){return w((o,u)=>{let c={_resolve:o,_reject:u};e._writeRequests.push(c)})}function Rn(e,t){if(e._state==="writable"){Cn(e,t);return}Tn(e)}function Cn(e,t){let o=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&Mo(u,t),!xa(e)&&o._started&&Tn(e)}function Tn(e){e._state="errored",e._writableStreamController[D]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new S,e._pendingAbortRequest===void 0){Sr(e);return}let o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,o._wasAlreadyErroring){o._reject(t),Sr(e);return}let u=e._writableStreamController[P](o._reason);F(u,()=>(o._resolve(),Sr(e),null),c=>(o._reject(c),Sr(e),null))}function Fa(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Oa(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Rn(e,t)}function Na(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let o=e._writer;o!==void 0&&Qo(o)}function Ba(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Rn(e,t)}function Ie(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function xa(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ua(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function ka(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Sr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&Ln(t,e._storedError)}function An(e,t){let o=e._writer;o!==void 0&&t!==e._backpressure&&(t?Xa(o):Fn(o)),e._backpressure=t}class xe{constructor(t){if(Oe(t,1,"WritableStreamDefaultWriter"),Uo(t,"First parameter"),Rt(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let o=t._state;if(o==="writable")!Ie(t)&&t._backpressure?Tr(this):Xo(this),Cr(this);else if(o==="erroring")vn(this,t._storedError),Cr(this);else if(o==="closed")Xo(this),Ya(this);else{let u=t._storedError;vn(this,u),Yo(this,u)}}get closed(){return lt(this)?this._closedPromise:E(ut("closed"))}get desiredSize(){if(!lt(this))throw ut("desiredSize");if(this._ownerWritableStream===void 0)throw jt("desiredSize");return Ma(this)}get ready(){return lt(this)?this._readyPromise:E(ut("ready"))}abort(t=void 0){return lt(this)?this._ownerWritableStream===void 0?E(jt("abort")):Wa(this,t):E(ut("abort"))}close(){if(!lt(this))return E(ut("close"));let t=this._ownerWritableStream;return t===void 0?E(jt("close")):Ie(t)?E(new TypeError("Cannot close an already-closing stream")):zo(this)}releaseLock(){if(!lt(this))throw ut("releaseLock");this._ownerWritableStream!==void 0&&Ho(this)}write(t=void 0){return lt(this)?this._ownerWritableStream===void 0?E(jt("write to")):jo(this,t):E(ut("write"))}}Object.defineProperties(xe.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),a(xe.prototype.abort,"abort"),a(xe.prototype.close,"close"),a(xe.prototype.releaseLock,"releaseLock"),a(xe.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(xe.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function lt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof xe}function Wa(e,t){let o=e._ownerWritableStream;return _r(o,t)}function zo(e){let t=e._ownerWritableStream;return qo(t)}function qa(e){let t=e._ownerWritableStream,o=t._state;return Ie(t)||o==="closed"?p(void 0):o==="errored"?E(t._storedError):zo(e)}function za(e,t){e._closedPromiseState==="pending"?Ln(e,t):Qa(e,t)}function Mo(e,t){e._readyPromiseState==="pending"?Ko(e,t):Ka(e,t)}function Ma(e){let t=e._ownerWritableStream,o=t._state;return o==="errored"||o==="erroring"?null:o==="closed"?0:Zo(t._writableStreamController)}function Ho(e){let t=e._ownerWritableStream,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Mo(e,o),za(e,o),t._writer=void 0,e._ownerWritableStream=void 0}function jo(e,t){let o=e._ownerWritableStream,u=o._writableStreamController,c=$a(u,t);if(o!==e._ownerWritableStream)return E(jt("write to"));let _=o._state;if(_==="errored")return E(o._storedError);if(Ie(o)||_==="closed")return E(new TypeError("The stream is closing or closed and cannot be written to"));if(_==="erroring")return E(o._storedError);let C=va(o);return Ga(u,t,c),C}let $o={};class Ct{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Pn(this))throw Dn("abortReason");return this._abortReason}get signal(){if(!Pn(this))throw Dn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Pn(this))throw Dn("error");this._controlledWritableStream._state==="writable"&&Vo(this,t)}[P](t){let o=this._abortAlgorithm(t);return Er(this),o}[D](){Ye(this)}}Object.defineProperties(Ct.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Pn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ct}function Go(e,t,o,u,c,_,C,L){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ye(t),t._abortReason=void 0,t._abortController=Da(),t._started=!1,t._strategySizeAlgorithm=L,t._strategyHWM=C,t._writeAlgorithm=u,t._closeAlgorithm=c,t._abortAlgorithm=_;let B=In(t);An(e,B);let O=o(),x=p(O);F(x,()=>(t._started=!0,wr(t),null),k=>(t._started=!0,Rn(e,k),null))}function Ha(e,t,o,u){let c=Object.create(Ct.prototype),_,C,L,B;t.start!==void 0?_=()=>t.start(c):_=()=>{},t.write!==void 0?C=O=>t.write(O,c):C=()=>p(void 0),t.close!==void 0?L=()=>t.close():L=()=>p(void 0),t.abort!==void 0?B=O=>t.abort(O):B=()=>p(void 0),Go(e,c,_,C,L,B,o,u)}function Er(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ja(e){pn(e,$o,0),wr(e)}function $a(e,t){try{return e._strategySizeAlgorithm(t)}catch(o){return Ht(e,o),1}}function Zo(e){return e._strategyHWM-e._queueTotalSize}function Ga(e,t,o){try{pn(e,t,o)}catch(c){Ht(e,c);return}let u=e._controlledWritableStream;if(!Ie(u)&&u._state==="writable"){let c=In(e);An(u,c)}wr(e)}function wr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){Tn(t);return}if(e._queue.length===0)return;let u=sa(e);u===$o?Za(e):Va(e,u)}function Ht(e,t){e._controlledWritableStream._state==="writable"&&Vo(e,t)}function Za(e){let t=e._controlledWritableStream;Ua(t),mn(e);let o=e._closeAlgorithm();Er(e),F(o,()=>(Na(t),null),u=>(Ba(t,u),null))}function Va(e,t){let o=e._controlledWritableStream;ka(o);let u=e._writeAlgorithm(t);F(u,()=>{Fa(o);let c=o._state;if(mn(e),!Ie(o)&&c==="writable"){let _=In(e);An(o,_)}return wr(e),null},c=>(o._state==="writable"&&Er(e),Oa(o,c),null))}function In(e){return Zo(e)<=0}function Vo(e,t){let o=e._controlledWritableStream;Er(e),Cn(o,t)}function Rr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Dn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function ut(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function jt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Cr(e){e._closedPromise=w((t,o)=>{e._closedPromise_resolve=t,e._closedPromise_reject=o,e._closedPromiseState="pending"})}function Yo(e,t){Cr(e),Ln(e,t)}function Ya(e){Cr(e),Qo(e)}function Ln(e,t){e._closedPromise_reject!==void 0&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Qa(e,t){Yo(e,t)}function Qo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Tr(e){e._readyPromise=w((t,o)=>{e._readyPromise_resolve=t,e._readyPromise_reject=o}),e._readyPromiseState="pending"}function vn(e,t){Tr(e),Ko(e,t)}function Xo(e){Tr(e),Fn(e)}function Ko(e,t){e._readyPromise_reject!==void 0&&(b(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Xa(e){Tr(e)}function Ka(e,t){vn(e,t)}function Fn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function Ja(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let On=Ja();function el(e){if(!(typeof e=="function"||typeof e=="object")||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}}function tl(){let e=On?.DOMException;return el(e)?e:void 0}function rl(){let e=function(o,u){this.message=o||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return a(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let nl=tl()||rl();function Jo(e,t,o,u,c,_){let C=St(e),L=ko(t);e._disturbed=!0;let B=!1,O=p(void 0);return w((x,k)=>{let $;if(_!==void 0){if($=()=>{let N=_.reason!==void 0?_.reason:new nl("Aborted","AbortError"),W=[];u||W.push(()=>t._state==="writable"?_r(t,N):p(void 0)),c||W.push(()=>e._state==="readable"?Ce(e,N):p(void 0)),ue(()=>Promise.all(W.map(G=>G())),!0,N)},_.aborted){$();return}_.addEventListener("abort",$)}function Te(){return w((N,W)=>{function G(de){de?N():I(It(),G,W)}G(!1)})}function It(){return B?p(!0):I(L._readyPromise,()=>w((N,W)=>{kt(C,{_chunkSteps:G=>{O=I(jo(L,G),void 0,r),N(!1)},_closeSteps:()=>N(!0),_errorSteps:W})}))}if(ke(e,C._closedPromise,N=>(u?ge(!0,N):ue(()=>_r(t,N),!0,N),null)),ke(t,L._closedPromise,N=>(c?ge(!0,N):ue(()=>Ce(e,N),!0,N),null)),le(e,C._closedPromise,()=>(o?ge():ue(()=>qa(L)),null)),Ie(t)||t._state==="closed"){let N=new TypeError("the destination writable stream closed before all data could be piped to it");c?ge(!0,N):ue(()=>Ce(e,N),!0,N)}b(Te());function tt(){let N=O;return I(O,()=>N!==O?tt():void 0)}function ke(N,W,G){N._state==="errored"?G(N._storedError):h(W,G)}function le(N,W,G){N._state==="closed"?G():m(W,G)}function ue(N,W,G){if(B)return;B=!0,t._state==="writable"&&!Ie(t)?m(tt(),de):de();function de(){return F(N(),()=>We(W,G),Dt=>We(!0,Dt)),null}}function ge(N,W){B||(B=!0,t._state==="writable"&&!Ie(t)?m(tt(),()=>We(N,W)):We(N,W))}function We(N,W){return Ho(L),X(C),_!==void 0&&_.removeEventListener("abort",$),N?k(W):x(void 0),null}})}class Ue{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ar(this))throw Ir("desiredSize");return Nn(this)}close(){if(!Ar(this))throw Ir("close");if(!At(this))throw new TypeError("The stream is not in a state that permits close");ft(this)}enqueue(t=void 0){if(!Ar(this))throw Ir("enqueue");if(!At(this))throw new TypeError("The stream is not in a state that permits enqueue");return Tt(this,t)}error(t=void 0){if(!Ar(this))throw Ir("error");Re(this,t)}[z](t){Ye(this);let o=this._cancelAlgorithm(t);return Pr(this),o}[M](t){let o=this._controlledReadableStream;if(this._queue.length>0){let u=mn(this);this._closeRequested&&this._queue.length===0?(Pr(this),Zt(o)):$t(this),t._chunkSteps(u)}else ao(o,t),$t(this)}[Q](){}}Object.defineProperties(Ue.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),a(Ue.prototype.close,"close"),a(Ue.prototype.enqueue,"enqueue"),a(Ue.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ue.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ar(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Ue}function $t(e){if(!ei(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();F(o,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,$t(e)),null),u=>(Re(e,u),null))}function ei(e){let t=e._controlledReadableStream;return!At(e)||!e._started?!1:!!(Je(t)&&lr(t)>0||Nn(e)>0)}function Pr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ft(e){if(!At(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Pr(e),Zt(t))}function Tt(e,t){if(!At(e))return;let o=e._controlledReadableStream;if(Je(o)&&lr(o)>0)un(o,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(c){throw Re(e,c),c}try{pn(e,t,u)}catch(c){throw Re(e,c),c}}$t(e)}function Re(e,t){let o=e._controlledReadableStream;o._state==="readable"&&(Ye(e),Pr(e),oi(o,t))}function Nn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ol(e){return!ei(e)}function At(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function ti(e,t,o,u,c,_,C){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ye(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=C,t._strategyHWM=_,t._pullAlgorithm=u,t._cancelAlgorithm=c,e._readableStreamController=t;let L=o();F(p(L),()=>(t._started=!0,$t(t),null),B=>(Re(t,B),null))}function il(e,t,o,u){let c=Object.create(Ue.prototype),_,C,L;t.start!==void 0?_=()=>t.start(c):_=()=>{},t.pull!==void 0?C=()=>t.pull(c):C=()=>p(void 0),t.cancel!==void 0?L=B=>t.cancel(B):L=()=>p(void 0),ti(e,c,_,C,L,o,u)}function Ir(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function sl(e,t){return it(e._readableStreamController)?ll(e):al(e)}function al(e,t){let o=St(e),u=!1,c=!1,_=!1,C=!1,L,B,O,x,k,$=w(le=>{k=le});function Te(){return u?(c=!0,p(void 0)):(u=!0,kt(o,{_chunkSteps:ue=>{y(()=>{c=!1;let ge=ue,We=ue;_||Tt(O._readableStreamController,ge),C||Tt(x._readableStreamController,We),u=!1,c&&Te()})},_closeSteps:()=>{u=!1,_||ft(O._readableStreamController),C||ft(x._readableStreamController),(!_||!C)&&k(void 0)},_errorSteps:()=>{u=!1}}),p(void 0))}function It(le){if(_=!0,L=le,C){let ue=Wt([L,B]),ge=Ce(e,ue);k(ge)}return $}function tt(le){if(C=!0,B=le,_){let ue=Wt([L,B]),ge=Ce(e,ue);k(ge)}return $}function ke(){}return O=Gt(ke,Te,It),x=Gt(ke,Te,tt),h(o._closedPromise,le=>(Re(O._readableStreamController,le),Re(x._readableStreamController,le),(!_||!C)&&k(void 0),null)),[O,x]}function ll(e){let t=St(e),o=!1,u=!1,c=!1,_=!1,C=!1,L,B,O,x,k,$=w(N=>{k=N});function Te(N){h(N._closedPromise,W=>(N!==t||(be(O._readableStreamController,W),be(x._readableStreamController,W),(!_||!C)&&k(void 0)),null))}function It(){at(t)&&(X(t),t=St(e),Te(t)),kt(t,{_chunkSteps:W=>{y(()=>{u=!1,c=!1;let G=W,de=W;if(!_&&!C)try{de=_o(W)}catch(Dt){be(O._readableStreamController,Dt),be(x._readableStreamController,Dt),k(Ce(e,Dt));return}_||hr(O._readableStreamController,G),C||hr(x._readableStreamController,de),o=!1,u?ke():c&&le()})},_closeSteps:()=>{o=!1,_||qt(O._readableStreamController),C||qt(x._readableStreamController),O._readableStreamController._pendingPullIntos.length>0&&mr(O._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&mr(x._readableStreamController,0),(!_||!C)&&k(void 0)},_errorSteps:()=>{o=!1}})}function tt(N,W){Ze(t)&&(X(t),t=Fo(e),Te(t));let G=W?x:O,de=W?O:x;Bo(t,N,1,{_chunkSteps:Lt=>{y(()=>{u=!1,c=!1;let vt=W?C:_;if(W?_:C)vt||pr(G._readableStreamController,Lt);else{let bi;try{bi=_o(Lt)}catch(Wn){be(G._readableStreamController,Wn),be(de._readableStreamController,Wn),k(Ce(e,Wn));return}vt||pr(G._readableStreamController,Lt),hr(de._readableStreamController,bi)}o=!1,u?ke():c&&le()})},_closeSteps:Lt=>{o=!1;let vt=W?C:_,xr=W?_:C;vt||qt(G._readableStreamController),xr||qt(de._readableStreamController),Lt!==void 0&&(vt||pr(G._readableStreamController,Lt),!xr&&de._readableStreamController._pendingPullIntos.length>0&&mr(de._readableStreamController,0)),(!vt||!xr)&&k(void 0)},_errorSteps:()=>{o=!1}})}function ke(){if(o)return u=!0,p(void 0);o=!0;let N=Sn(O._readableStreamController);return N===null?It():tt(N._view,!1),p(void 0)}function le(){if(o)return c=!0,p(void 0);o=!0;let N=Sn(x._readableStreamController);return N===null?It():tt(N._view,!0),p(void 0)}function ue(N){if(_=!0,L=N,C){let W=Wt([L,B]),G=Ce(e,W);k(G)}return $}function ge(N){if(C=!0,B=N,_){let W=Wt([L,B]),G=Ce(e,W);k(G)}return $}function We(){}return O=ni(We,ke,ue),x=ni(We,le,ge),Te(t),[O,x]}function ul(e){return i(e)&&typeof e.getReader<"u"}function fl(e){return ul(e)?dl(e.getReader()):cl(e)}function cl(e){let t,o=go(e,"async"),u=r;function c(){let C;try{C=ra(o)}catch(B){return E(B)}let L=p(C);return R(L,B=>{if(!i(B))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(na(B))ft(t._readableStreamController);else{let x=oa(B);Tt(t._readableStreamController,x)}})}function _(C){let L=o.iterator,B;try{B=fr(L,"return")}catch(k){return E(k)}if(B===void 0)return p(void 0);let O;try{O=T(B,L,[C])}catch(k){return E(k)}let x=p(O);return R(x,k=>{if(!i(k))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return t=Gt(u,c,_,0),t}function dl(e){let t,o=r;function u(){let _;try{_=e.read()}catch(C){return E(C)}return R(_,C=>{if(!i(C))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(C.done)ft(t._readableStreamController);else{let L=C.value;Tt(t._readableStreamController,L)}})}function c(_){try{return p(e.cancel(_))}catch(C){return E(C)}}return t=Gt(o,u,c,0),t}function hl(e,t){Pe(e,t);let o=e,u=o?.autoAllocateChunkSize,c=o?.cancel,_=o?.pull,C=o?.start,L=o?.type;return{autoAllocateChunkSize:u===void 0?void 0:an(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:ml(c,o,`${t} has member 'cancel' that`),pull:_===void 0?void 0:pl(_,o,`${t} has member 'pull' that`),start:C===void 0?void 0:yl(C,o,`${t} has member 'start' that`),type:L===void 0?void 0:bl(L,`${t} has member 'type' that`)}}function ml(e,t,o){return ye(e,o),u=>f(e,t,[u])}function pl(e,t,o){return ye(e,o),u=>f(e,t,[u])}function yl(e,t,o){return ye(e,o),u=>T(e,t,[u])}function bl(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function gl(e,t){return Pe(e,t),{preventCancel:!!e?.preventCancel}}function ri(e,t){Pe(e,t);let o=e?.preventAbort,u=e?.preventCancel,c=e?.preventClose,_=e?.signal;return _!==void 0&&_l(_,`${t} has member 'signal' that`),{preventAbort:!!o,preventCancel:!!u,preventClose:!!c,signal:_}}function _l(e,t){if(!Pa(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Sl(e,t){Pe(e,t);let o=e?.readable;on(o,"readable","ReadableWritablePair"),ln(o,`${t} has member 'readable' that`);let u=e?.writable;return on(u,"writable","ReadableWritablePair"),Uo(u,`${t} has member 'writable' that`),{readable:o,writable:u}}class se{constructor(t={},o={}){t===void 0?t=null:io(t,"First parameter");let u=gr(o,"Second parameter"),c=hl(t,"First parameter");if(Bn(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let _=Mt(u,0);ma(this,c,_)}else{let _=br(u),C=Mt(u,1);il(this,c,C,_)}}get locked(){if(!Ke(this))throw ct("locked");return Je(this)}cancel(t=void 0){return Ke(this)?Je(this)?E(new TypeError("Cannot cancel a stream that already has a reader")):Ce(this,t):E(ct("cancel"))}getReader(t=void 0){if(!Ke(this))throw ct("getReader");return ya(t,"First parameter").mode===void 0?St(this):Fo(this)}pipeThrough(t,o={}){if(!Ke(this))throw ct("pipeThrough");Oe(t,1,"pipeThrough");let u=Sl(t,"First parameter"),c=ri(o,"Second parameter");if(Je(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Rt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let _=Jo(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return b(_),u.readable}pipeTo(t,o={}){if(!Ke(this))return E(ct("pipeTo"));if(t===void 0)return E("Parameter 1 is required in 'pipeTo'.");if(!wt(t))return E(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=ri(o,"Second parameter")}catch(c){return E(c)}return Je(this)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Rt(t)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Jo(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ke(this))throw ct("tee");let t=sl(this);return Wt(t)}values(t=void 0){if(!Ke(this))throw ct("values");let o=gl(t,"First parameter");return ea(this,o.preventCancel)}[hn](t){return this.values(t)}static from(t){return fl(t)}}Object.defineProperties(se,{from:{enumerable:!0}}),Object.defineProperties(se.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),a(se.from,"from"),a(se.prototype.cancel,"cancel"),a(se.prototype.getReader,"getReader"),a(se.prototype.pipeThrough,"pipeThrough"),a(se.prototype.pipeTo,"pipeTo"),a(se.prototype.tee,"tee"),a(se.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(se.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(se.prototype,hn,{value:se.prototype.values,writable:!0,configurable:!0});function Gt(e,t,o,u=1,c=()=>1){let _=Object.create(se.prototype);Bn(_);let C=Object.create(Ue.prototype);return ti(_,C,e,t,o,u,c),_}function ni(e,t,o){let u=Object.create(se.prototype);Bn(u);let c=Object.create(Be.prototype);return vo(u,c,e,t,o,0,void 0),u}function Bn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ke(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof se}function Je(e){return e._reader!==void 0}function Ce(e,t){if(e._disturbed=!0,e._state==="closed")return p(void 0);if(e._state==="errored")return E(e._storedError);Zt(e);let o=e._reader;if(o!==void 0&&at(o)){let c=o._readIntoRequests;o._readIntoRequests=new S,c.forEach(_=>{_._closeSteps(void 0)})}let u=e._readableStreamController[z](t);return R(u,r)}function Zt(e){e._state="closed";let t=e._reader;if(t!==void 0&&(no(t),Ze(t))){let o=t._readRequests;t._readRequests=new S,o.forEach(u=>{u._closeSteps()})}}function oi(e,t){e._state="errored",e._storedError=t;let o=e._reader;o!==void 0&&(nn(o,t),Ze(o)?uo(o,t):xo(o,t))}function ct(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function ii(e,t){Pe(e,t);let o=e?.highWaterMark;return on(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:sn(o)}}let si=e=>e.byteLength;a(si,"size");class Dr{constructor(t){Oe(t,1,"ByteLengthQueuingStrategy"),t=ii(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!li(this))throw ai("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!li(this))throw ai("size");return si}}Object.defineProperties(Dr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Dr.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ai(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function li(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Dr}let ui=()=>1;a(ui,"size");class Lr{constructor(t){Oe(t,1,"CountQueuingStrategy"),t=ii(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!ci(this))throw fi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ci(this))throw fi("size");return ui}}Object.defineProperties(Lr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Lr.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function fi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function ci(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Lr}function El(e,t){Pe(e,t);let o=e?.cancel,u=e?.flush,c=e?.readableType,_=e?.start,C=e?.transform,L=e?.writableType;return{cancel:o===void 0?void 0:Tl(o,e,`${t} has member 'cancel' that`),flush:u===void 0?void 0:wl(u,e,`${t} has member 'flush' that`),readableType:c,start:_===void 0?void 0:Rl(_,e,`${t} has member 'start' that`),transform:C===void 0?void 0:Cl(C,e,`${t} has member 'transform' that`),writableType:L}}function wl(e,t,o){return ye(e,o),u=>f(e,t,[u])}function Rl(e,t,o){return ye(e,o),u=>T(e,t,[u])}function Cl(e,t,o){return ye(e,o),(u,c)=>f(e,t,[u,c])}function Tl(e,t,o){return ye(e,o),u=>f(e,t,[u])}class vr{constructor(t={},o={},u={}){t===void 0&&(t=null);let c=gr(o,"Second parameter"),_=gr(u,"Third parameter"),C=El(t,"First parameter");if(C.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(C.writableType!==void 0)throw new RangeError("Invalid writableType specified");let L=Mt(_,0),B=br(_),O=Mt(c,1),x=br(c),k,$=w(Te=>{k=Te});Al(this,$,O,x,L,B),Il(this,C),C.start!==void 0?k(C.start(this._transformStreamController)):k(void 0)}get readable(){if(!di(this))throw yi("readable");return this._readable}get writable(){if(!di(this))throw yi("writable");return this._writable}}Object.defineProperties(vr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(vr.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Al(e,t,o,u,c,_){function C(){return t}function L($){return vl(e,$)}function B($){return Fl(e,$)}function O(){return Ol(e)}e._writable=La(C,L,O,B,o,u);function x(){return Nl(e)}function k($){return Bl(e,$)}e._readable=Gt(C,x,k,c,_),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Fr(e,!0),e._transformStreamController=void 0}function di(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof vr}function hi(e,t){Re(e._readable._readableStreamController,t),xn(e,t)}function xn(e,t){Nr(e._transformStreamController),Ht(e._writable._writableStreamController,t),Un(e)}function Un(e){e._backpressure&&Fr(e,!1)}function Fr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=w(o=>{e._backpressureChangePromise_resolve=o}),e._backpressure=t}class et{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Or(this))throw Br("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return Nn(t)}enqueue(t=void 0){if(!Or(this))throw Br("enqueue");mi(this,t)}error(t=void 0){if(!Or(this))throw Br("error");Dl(this,t)}terminate(){if(!Or(this))throw Br("terminate");Ll(this)}}Object.defineProperties(et.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),a(et.prototype.enqueue,"enqueue"),a(et.prototype.error,"error"),a(et.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(et.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Or(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof et}function Pl(e,t,o,u,c){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=o,t._flushAlgorithm=u,t._cancelAlgorithm=c,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}function Il(e,t){let o=Object.create(et.prototype),u,c,_;t.transform!==void 0?u=C=>t.transform(C,o):u=C=>{try{return mi(o,C),p(void 0)}catch(L){return E(L)}},t.flush!==void 0?c=()=>t.flush(o):c=()=>p(void 0),t.cancel!==void 0?_=C=>t.cancel(C):_=()=>p(void 0),Pl(e,o,u,c,_)}function Nr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function mi(e,t){let o=e._controlledTransformStream,u=o._readable._readableStreamController;if(!At(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Tt(u,t)}catch(_){throw xn(o,_),o._readable._storedError}ol(u)!==o._backpressure&&Fr(o,!0)}function Dl(e,t){hi(e._controlledTransformStream,t)}function pi(e,t){let o=e._transformAlgorithm(t);return R(o,void 0,u=>{throw hi(e._controlledTransformStream,u),u})}function Ll(e){let t=e._controlledTransformStream,o=t._readable._readableStreamController;ft(o);let u=new TypeError("TransformStream terminated");xn(t,u)}function vl(e,t){let o=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return R(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return pi(o,t)})}return pi(o,t)}function Fl(e,t){let o=e._transformStreamController;if(o._finishPromise!==void 0)return o._finishPromise;let u=e._readable;o._finishPromise=w((_,C)=>{o._finishPromise_resolve=_,o._finishPromise_reject=C});let c=o._cancelAlgorithm(t);return Nr(o),F(c,()=>(u._state==="errored"?Pt(o,u._storedError):(Re(u._readableStreamController,t),kn(o)),null),_=>(Re(u._readableStreamController,_),Pt(o,_),null)),o._finishPromise}function Ol(e){let t=e._transformStreamController;if(t._finishPromise!==void 0)return t._finishPromise;let o=e._readable;t._finishPromise=w((c,_)=>{t._finishPromise_resolve=c,t._finishPromise_reject=_});let u=t._flushAlgorithm();return Nr(t),F(u,()=>(o._state==="errored"?Pt(t,o._storedError):(ft(o._readableStreamController),kn(t)),null),c=>(Re(o._readableStreamController,c),Pt(t,c),null)),t._finishPromise}function Nl(e){return Fr(e,!1),e._backpressureChangePromise}function Bl(e,t){let o=e._transformStreamController;if(o._finishPromise!==void 0)return o._finishPromise;let u=e._writable;o._finishPromise=w((_,C)=>{o._finishPromise_resolve=_,o._finishPromise_reject=C});let c=o._cancelAlgorithm(t);return Nr(o),F(c,()=>(u._state==="errored"?Pt(o,u._storedError):(Ht(u._writableStreamController,t),Un(e),kn(o)),null),_=>(Ht(u._writableStreamController,_),Un(e),Pt(o,_),null)),o._finishPromise}function Br(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function kn(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Pt(e,t){e._finishPromise_reject!==void 0&&(b(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function yi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=Dr,n.CountQueuingStrategy=Lr,n.ReadableByteStreamController=Be,n.ReadableStream=se,n.ReadableStreamBYOBReader=Qe,n.ReadableStreamBYOBRequest=ot,n.ReadableStreamDefaultController=Ue,n.ReadableStreamDefaultReader=Ge,n.TransformStream=vr,n.TransformStreamDefaultController=et,n.WritableStream=Xe,n.WritableStreamDefaultController=Ct,n.WritableStreamDefaultWriter=xe}))});var Ti=te(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(i){throw n.emitWarning=r,i}}catch{Object.assign(globalThis,Ci())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(i){let s=0,a=this;return new ReadableStream({type:"bytes",async pull(l){let A=await a.slice(s,Math.min(a.size,s+65536)).arrayBuffer();s+=A.byteLength,l.enqueue(new Uint8Array(A)),s===a.size&&l.close()}})})}catch{}});async function*qn(n,r=!0){for(let i of n)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(r){let s=i.byteOffset,a=i.byteOffset+i.byteLength;for(;s!==a;){let l=Math.min(a-s,Ai),d=i.buffer.slice(s,s+l);s+=d.byteLength,yield new Uint8Array(d)}}else yield i;else{let s=0,a=i;for(;s!==a.size;){let d=await a.slice(s,Math.min(a.size,s+Ai)).arrayBuffer();s+=d.byteLength,yield new Uint8Array(d)}}}var zu,Ai,Pi,Hl,ze,Qt=Vt(()=>{zu=_e(Ti(),1);Ai=65536;Pi=class zn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],i={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof i!="object"&&typeof i!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");i===null&&(i={});let s=new TextEncoder;for(let l of r){let d;ArrayBuffer.isView(l)?d=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?d=new Uint8Array(l.slice(0)):l instanceof zn?d=l:d=s.encode(`${l}`),this.#r+=ArrayBuffer.isView(d)?d.byteLength:d.size,this.#e.push(d)}this.#n=`${i.endings===void 0?"transparent":i.endings}`;let a=i.type===void 0?"":String(i.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,i="";for await(let s of qn(this.#e,!1))i+=r.decode(s,{stream:!0});return i+=r.decode(),i}async arrayBuffer(){let r=new Uint8Array(this.size),i=0;for await(let s of qn(this.#e,!1))r.set(s,i),i+=s.length;return r.buffer}stream(){let r=qn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(i){let s=await r.next();s.done?i.close():i.enqueue(s.value)},async cancel(){await r.return()}})}slice(r=0,i=this.size,s=""){let{size:a}=this,l=r<0?Math.max(a+r,0):Math.min(r,a),d=i<0?Math.max(a+i,0):Math.min(i,a),A=Math.max(d-l,0),w=this.#e,p=[],E=0;for(let F of w){if(E>=A)break;let m=ArrayBuffer.isView(F)?F.byteLength:F.size;if(l&&m<=l)l-=m,d-=m;else{let h;ArrayBuffer.isView(F)?(h=F.subarray(l,Math.min(m,d)),E+=h.byteLength):(h=F.slice(l,Math.min(m,d)),E+=h.size),d-=m,p.push(h),l=0}}let I=new zn([],{type:String(s).toLowerCase()});return I.#r=A,I.#e=p,I}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Pi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Hl=Pi,ze=Hl});var jl,$l,Ft,Mn=Vt(()=>{Qt();jl=class extends ze{#e=0;#t="";constructor(r,i,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,s),s===null&&(s={});let a=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(i)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof ze&&/^(File)$/.test(r[Symbol.toStringTag])}},$l=jl,Ft=$l});function Li(n,r=ze){var i=`${Ii()}${Ii()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],a=`--${i}\r
Content-Disposition: form-data; name="`;return n.forEach((l,d)=>typeof l=="string"?s.push(a+Hn(d)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(a+Hn(d)+`"; filename="${Hn(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),s.push(`--${i}--`),new r(s,{type:"multipart/form-data; boundary="+i})}var Xt,Gl,Zl,Ii,Vl,Di,Hn,dt,ht,qr=Vt(()=>{Qt();Mn();({toStringTag:Xt,iterator:Gl,hasInstance:Zl}=Symbol),Ii=Math.random,Vl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Di=(n,r,i)=>(n+="",/^(Blob|File)$/.test(r&&r[Xt])?[(i=i!==void 0?i+"":r[Xt]=="File"?r.name:"blob",n),r.name!==i||r[Xt]=="blob"?new Ft([r],i,r):r]:[n,r+""]),Hn=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),dt=(n,r,i)=>{if(r.length<i)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${i} arguments required, but only ${r.length} present.`)},ht=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Xt](){return"FormData"}[Gl](){return this.entries()}static[Zl](r){return r&&typeof r=="object"&&r[Xt]==="FormData"&&!Vl.some(i=>typeof r[i]!="function")}append(...r){dt("append",arguments,2),this.#e.push(Di(...r))}delete(r){dt("delete",arguments,1),r+="",this.#e=this.#e.filter(([i])=>i!==r)}get(r){dt("get",arguments,1),r+="";for(var i=this.#e,s=i.length,a=0;a<s;a++)if(i[a][0]===r)return i[a][1];return null}getAll(r,i){return dt("getAll",arguments,1),i=[],r+="",this.#e.forEach(s=>s[0]===r&&i.push(s[1])),i}has(r){return dt("has",arguments,1),r+="",this.#e.some(i=>i[0]===r)}forEach(r,i){dt("forEach",arguments,1);for(var[s,a]of this)r.call(i,a,s,this)}set(...r){dt("set",arguments,2);var i=[],s=!0;r=Di(...r),this.#e.forEach(a=>{a[0]===r[0]?s&&(s=!i.push(r)):i.push(a)}),s&&i.push(r),this.#e=i}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Bi=te((ef,Ni)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,i=new ArrayBuffer;r.postMessage(i,[i,i])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}Ni.exports=globalThis.DOMException});var Mr,Yl,nf,$n=Vt(()=>{Mr=require("node:fs"),Yl=_e(Bi(),1);Mn();Qt();({stat:nf}=Mr.promises)});var Ui={};gi(Ui,{toFormData:()=>ru});function tu(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let i=r[2]||r[3]||"",s=i.slice(i.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(a,l)=>String.fromCharCode(l)),s}async function ru(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let i=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!i)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new Gn(i[1]||i[2]),a,l,d,A,w,p,E=[],I=new ht,F=y=>{d+=b.decode(y,{stream:!0})},m=y=>{E.push(y)},h=()=>{let y=new Ft(E,p,{type:w});I.append(A,y)},R=()=>{I.append(A,d)},b=new TextDecoder("utf-8");b.decode(),s.onPartBegin=function(){s.onPartData=F,s.onPartEnd=R,a="",l="",d="",A="",w="",p=null,E.length=0},s.onHeaderField=function(y){a+=b.decode(y,{stream:!0})},s.onHeaderValue=function(y){l+=b.decode(y,{stream:!0})},s.onHeaderEnd=function(){if(l+=b.decode(),a=a.toLowerCase(),a==="content-disposition"){let y=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);y&&(A=y[2]||y[3]||""),p=tu(l),p&&(s.onPartData=m,s.onPartEnd=h)}else a==="content-type"&&(w=l);l="",a=""};for await(let y of n)s.write(y);return s.end(),I}var De,Z,xi,rt,Hr,jr,Ql,Jt,Xl,Kl,Jl,eu,mt,Gn,ki=Vt(()=>{$n();qr();De=0,Z={START_BOUNDARY:De++,HEADER_FIELD_START:De++,HEADER_FIELD:De++,HEADER_VALUE_START:De++,HEADER_VALUE:De++,HEADER_VALUE_ALMOST_DONE:De++,HEADERS_ALMOST_DONE:De++,PART_DATA_START:De++,PART_DATA:De++,END:De++},xi=1,rt={PART_BOUNDARY:xi,LAST_BOUNDARY:xi*=2},Hr=10,jr=13,Ql=32,Jt=45,Xl=58,Kl=97,Jl=122,eu=n=>n|32,mt=()=>{},Gn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=mt,this.onHeaderField=mt,this.onHeadersEnd=mt,this.onHeaderValue=mt,this.onPartBegin=mt,this.onPartData=mt,this.onPartEnd=mt,this.boundaryChars={},r=`\r
--`+r;let i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s),this.boundaryChars[i[s]]=!0;this.boundary=i,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Z.START_BOUNDARY}write(r){let i=0,s=r.length,a=this.index,{lookbehind:l,boundary:d,boundaryChars:A,index:w,state:p,flags:E}=this,I=this.boundary.length,F=I-1,m=r.length,h,R,b=g=>{this[g+"Mark"]=i},y=g=>{delete this[g+"Mark"]},T=(g,S,P,D)=>{(S===void 0||S!==P)&&this[g](D&&D.subarray(S,P))},f=(g,S)=>{let P=g+"Mark";P in this&&(S?(T(g,this[P],i,r),delete this[P]):(T(g,this[P],r.length,r),this[P]=0))};for(i=0;i<s;i++)switch(h=r[i],p){case Z.START_BOUNDARY:if(w===d.length-2){if(h===Jt)E|=rt.LAST_BOUNDARY;else if(h!==jr)return;w++;break}else if(w-1===d.length-2){if(E&rt.LAST_BOUNDARY&&h===Jt)p=Z.END,E=0;else if(!(E&rt.LAST_BOUNDARY)&&h===Hr)w=0,T("onPartBegin"),p=Z.HEADER_FIELD_START;else return;break}h!==d[w+2]&&(w=-2),h===d[w+2]&&w++;break;case Z.HEADER_FIELD_START:p=Z.HEADER_FIELD,b("onHeaderField"),w=0;case Z.HEADER_FIELD:if(h===jr){y("onHeaderField"),p=Z.HEADERS_ALMOST_DONE;break}if(w++,h===Jt)break;if(h===Xl){if(w===1)return;f("onHeaderField",!0),p=Z.HEADER_VALUE_START;break}if(R=eu(h),R<Kl||R>Jl)return;break;case Z.HEADER_VALUE_START:if(h===Ql)break;b("onHeaderValue"),p=Z.HEADER_VALUE;case Z.HEADER_VALUE:h===jr&&(f("onHeaderValue",!0),T("onHeaderEnd"),p=Z.HEADER_VALUE_ALMOST_DONE);break;case Z.HEADER_VALUE_ALMOST_DONE:if(h!==Hr)return;p=Z.HEADER_FIELD_START;break;case Z.HEADERS_ALMOST_DONE:if(h!==Hr)return;T("onHeadersEnd"),p=Z.PART_DATA_START;break;case Z.PART_DATA_START:p=Z.PART_DATA,b("onPartData");case Z.PART_DATA:if(a=w,w===0){for(i+=F;i<m&&!(r[i]in A);)i+=I;i-=F,h=r[i]}if(w<d.length)d[w]===h?(w===0&&f("onPartData",!0),w++):w=0;else if(w===d.length)w++,h===jr?E|=rt.PART_BOUNDARY:h===Jt?E|=rt.LAST_BOUNDARY:w=0;else if(w-1===d.length)if(E&rt.PART_BOUNDARY){if(w=0,h===Hr){E&=~rt.PART_BOUNDARY,T("onPartEnd"),T("onPartBegin"),p=Z.HEADER_FIELD_START;break}}else E&rt.LAST_BOUNDARY&&h===Jt?(T("onPartEnd"),p=Z.END,E=0):w=0;if(w>0)l[w-1]=h;else if(a>0){let g=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);T("onPartData",0,a,g),a=0,b("onPartData"),i--}break;case Z.END:break;default:throw new Error(`Unexpected state entered: ${p}`)}f("onHeaderField"),f("onHeaderValue"),f("onPartData"),this.index=w,this.state=p,this.flags=E}end(){if(this.state===Z.HEADER_FIELD_START&&this.index===0||this.state===Z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Qn=te((Zf,ts)=>{ts.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var Qr=te(ns=>{var rs={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function fu(n){return function(...r){return r.length&&(n=n.replace(/\{(\d)\}/g,(i,s)=>r[s]||"")),new Error("ADM-ZIP: "+n)}}for(let n of Object.keys(rs))ns[n]=fu(rs[n])});var ls=te((Yf,as)=>{var cu=require("fs"),re=require("path"),os=Qn(),du=Qr(),hu=typeof process=="object"&&process.platform==="win32",is=n=>typeof n=="object"&&n!==null,ss=new Uint32Array(256).map((n,r)=>{for(let i=0;i<8;i++)(r&1)!==0?r=3988292384^r>>>1:r>>>=1;return r>>>0});function K(n){this.sep=re.sep,this.fs=cu,is(n)&&is(n.fs)&&typeof n.fs.statSync=="function"&&(this.fs=n.fs)}as.exports=K;K.prototype.makeDir=function(n){let r=this;function i(s){let a=s.split(r.sep)[0];s.split(r.sep).forEach(function(l){if(!(!l||l.substr(-1,1)===":")){a+=r.sep+l;var d;try{d=r.fs.statSync(a)}catch{r.fs.mkdirSync(a)}if(d&&d.isFile())throw du.FILE_IN_THE_WAY(`"${a}"`)}})}i(n)};K.prototype.writeFileTo=function(n,r,i,s){let a=this;if(a.fs.existsSync(n)){if(!i)return!1;var l=a.fs.statSync(n);if(l.isDirectory())return!1}var d=re.dirname(n);a.fs.existsSync(d)||a.makeDir(d);var A;try{A=a.fs.openSync(n,"w",438)}catch{a.fs.chmodSync(n,438),A=a.fs.openSync(n,"w",438)}if(A)try{a.fs.writeSync(A,r,0,r.length,0)}finally{a.fs.closeSync(A)}return a.fs.chmodSync(n,s||438),!0};K.prototype.writeFileToAsync=function(n,r,i,s,a){typeof s=="function"&&(a=s,s=void 0);let l=this;l.fs.exists(n,function(d){if(d&&!i)return a(!1);l.fs.stat(n,function(A,w){if(d&&w.isDirectory())return a(!1);var p=re.dirname(n);l.fs.exists(p,function(E){E||l.makeDir(p),l.fs.open(n,"w",438,function(I,F){I?l.fs.chmod(n,438,function(){l.fs.open(n,"w",438,function(m,h){l.fs.write(h,r,0,r.length,0,function(){l.fs.close(h,function(){l.fs.chmod(n,s||438,function(){a(!0)})})})})}):F?l.fs.write(F,r,0,r.length,0,function(){l.fs.close(F,function(){l.fs.chmod(n,s||438,function(){a(!0)})})}):l.fs.chmod(n,s||438,function(){a(!0)})})})})})};K.prototype.findFiles=function(n){let r=this;function i(s,a,l){typeof a=="boolean"&&(l=a,a=void 0);let d=[];return r.fs.readdirSync(s).forEach(function(A){let w=re.join(s,A),p=r.fs.statSync(w);(!a||a.test(w))&&d.push(re.normalize(w)+(p.isDirectory()?r.sep:"")),p.isDirectory()&&l&&(d=d.concat(i(w,a,l)))}),d}return i(n,void 0,!0)};K.prototype.findFilesAsync=function(n,r){let i=this,s=[];i.fs.readdir(n,function(a,l){if(a)return r(a);let d=l.length;if(!d)return r(null,s);l.forEach(function(A){A=re.join(n,A),i.fs.stat(A,function(w,p){if(w)return r(w);p&&(s.push(re.normalize(A)+(p.isDirectory()?i.sep:"")),p.isDirectory()?i.findFilesAsync(A,function(E,I){if(E)return r(E);s=s.concat(I),--d||r(null,s)}):--d||r(null,s))})})})};K.prototype.getAttributes=function(){};K.prototype.setAttributes=function(){};K.crc32update=function(n,r){return ss[(n^r)&255]^n>>>8};K.crc32=function(n){typeof n=="string"&&(n=Buffer.from(n,"utf8"));let r=n.length,i=-1;for(let s=0;s<r;)i=K.crc32update(i,n[s++]);return~i>>>0};K.methodToString=function(n){switch(n){case os.STORED:return"STORED ("+n+")";case os.DEFLATED:return"DEFLATED ("+n+")";default:return"UNSUPPORTED ("+n+")"}};K.canonical=function(n){if(!n)return"";let r=re.posix.normalize("/"+n.split("\\").join("/"));return re.join(".",r)};K.zipnamefix=function(n){if(!n)return"";let r=re.posix.normalize("/"+n.split("\\").join("/"));return re.posix.join(".",r)};K.findLast=function(n,r){if(!Array.isArray(n))throw new TypeError("arr is not array");let i=n.length>>>0;for(let s=i-1;s>=0;s--)if(r(n[s],s,n))return n[s]};K.sanitize=function(n,r){n=re.resolve(re.normalize(n));for(var i=r.split("/"),s=0,a=i.length;s<a;s++){var l=re.normalize(re.join(n,i.slice(s,a).join(re.sep)));if(l.indexOf(n)===0)return l}return re.normalize(re.join(n,re.basename(r)))};K.toBuffer=function(r,i){return Buffer.isBuffer(r)?r:r instanceof Uint8Array?Buffer.from(r):typeof r=="string"?i(r):Buffer.alloc(0)};K.readBigUInt64LE=function(n,r){var i=Buffer.from(n.slice(r,r+8));return i.swap64(),parseInt(`0x${i.toString("hex")}`)};K.fromDOS2Date=function(n){return new Date((n>>25&127)+1980,Math.max((n>>21&15)-1,0),Math.max(n>>16&31,1),n>>11&31,n>>5&63,(n&31)<<1)};K.fromDate2DOS=function(n){let r=0,i=0;return n.getFullYear()>1979&&(r=(n.getFullYear()-1980&127)<<9|n.getMonth()+1<<5|n.getDate(),i=n.getHours()<<11|n.getMinutes()<<5|n.getSeconds()>>1),r<<16|i};K.isWin=hu;K.crcTable=ss});var fs=te((Qf,us)=>{var mu=require("path");us.exports=function(n,{fs:r}){var i=n||"",s=l(),a=null;function l(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return i&&r.existsSync(i)?(a=r.statSync(i),s.directory=a.isDirectory(),s.mtime=a.mtime,s.atime=a.atime,s.executable=(73&a.mode)!==0,s.readonly=(128&a.mode)===0,s.hidden=mu.basename(i)[0]==="."):console.warn("Invalid path: "+i),{get directory(){return s.directory},get readOnly(){return s.readonly},get hidden(){return s.hidden},get mtime(){return s.mtime},get atime(){return s.atime},get executable(){return s.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:i,isDirectory:s.directory,isReadOnly:s.readonly,isHidden:s.hidden,isExecutable:s.executable,mTime:s.mtime,aTime:s.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ds=te((Xf,cs)=>{cs.exports={efs:!0,encode:n=>Buffer.from(n,"utf8"),decode:n=>n.toString("utf8")}});var xt=te((Kf,Bt)=>{Bt.exports=ls();Bt.exports.Constants=Qn();Bt.exports.Errors=Qr();Bt.exports.FileAttr=fs();Bt.exports.decoder=ds()});var ms=te((Jf,hs)=>{var nt=xt(),v=nt.Constants;hs.exports=function(){var n=20,r=10,i=0,s=0,a=0,l=0,d=0,A=0,w=0,p=0,E=0,I=0,F=0,m=0,h=0;n|=nt.isWin?2560:768,i|=v.FLG_EFS;let R={extraLen:0},b=f=>Math.max(0,f)>>>0,y=f=>Math.max(0,f)&65535,T=f=>Math.max(0,f)&255;return a=nt.fromDate2DOS(new Date),{get made(){return n},set made(f){n=f},get version(){return r},set version(f){r=f},get flags(){return i},set flags(f){i=f},get flags_efs(){return(i&v.FLG_EFS)>0},set flags_efs(f){f?i|=v.FLG_EFS:i&=~v.FLG_EFS},get flags_desc(){return(i&v.FLG_DESC)>0},set flags_desc(f){f?i|=v.FLG_DESC:i&=~v.FLG_DESC},get method(){return s},set method(f){switch(f){case v.STORED:this.version=10;case v.DEFLATED:default:this.version=20}s=f},get time(){return nt.fromDOS2Date(this.timeval)},set time(f){this.timeval=nt.fromDate2DOS(f)},get timeval(){return a},set timeval(f){a=b(f)},get timeHighByte(){return T(a>>>8)},get crc(){return l},set crc(f){l=b(f)},get compressedSize(){return d},set compressedSize(f){d=b(f)},get size(){return A},set size(f){A=b(f)},get fileNameLength(){return w},set fileNameLength(f){w=f},get extraLength(){return p},set extraLength(f){p=f},get extraLocalLength(){return R.extraLen},set extraLocalLength(f){R.extraLen=f},get commentLength(){return E},set commentLength(f){E=f},get diskNumStart(){return I},set diskNumStart(f){I=b(f)},get inAttr(){return F},set inAttr(f){F=b(f)},get attr(){return m},set attr(f){m=b(f)},get fileAttr(){return(m||0)>>16&4095},get offset(){return h},set offset(f){h=b(f)},get encrypted(){return(i&v.FLG_ENC)===v.FLG_ENC},get centralHeaderSize(){return v.CENHDR+w+p+E},get realDataOffset(){return h+v.LOCHDR+R.fnameLen+R.extraLen},get localHeader(){return R},loadLocalHeaderFromBinary:function(f){var g=f.slice(h,h+v.LOCHDR);if(g.readUInt32LE(0)!==v.LOCSIG)throw nt.Errors.INVALID_LOC();R.version=g.readUInt16LE(v.LOCVER),R.flags=g.readUInt16LE(v.LOCFLG),R.method=g.readUInt16LE(v.LOCHOW),R.time=g.readUInt32LE(v.LOCTIM),R.crc=g.readUInt32LE(v.LOCCRC),R.compressedSize=g.readUInt32LE(v.LOCSIZ),R.size=g.readUInt32LE(v.LOCLEN),R.fnameLen=g.readUInt16LE(v.LOCNAM),R.extraLen=g.readUInt16LE(v.LOCEXT);let S=h+v.LOCHDR+R.fnameLen,P=S+R.extraLen;return f.slice(S,P)},loadFromBinary:function(f){if(f.length!==v.CENHDR||f.readUInt32LE(0)!==v.CENSIG)throw nt.Errors.INVALID_CEN();n=f.readUInt16LE(v.CENVEM),r=f.readUInt16LE(v.CENVER),i=f.readUInt16LE(v.CENFLG),s=f.readUInt16LE(v.CENHOW),a=f.readUInt32LE(v.CENTIM),l=f.readUInt32LE(v.CENCRC),d=f.readUInt32LE(v.CENSIZ),A=f.readUInt32LE(v.CENLEN),w=f.readUInt16LE(v.CENNAM),p=f.readUInt16LE(v.CENEXT),E=f.readUInt16LE(v.CENCOM),I=f.readUInt16LE(v.CENDSK),F=f.readUInt16LE(v.CENATT),m=f.readUInt32LE(v.CENATX),h=f.readUInt32LE(v.CENOFF)},localHeaderToBinary:function(){var f=Buffer.alloc(v.LOCHDR);return f.writeUInt32LE(v.LOCSIG,0),f.writeUInt16LE(r,v.LOCVER),f.writeUInt16LE(i,v.LOCFLG),f.writeUInt16LE(s,v.LOCHOW),f.writeUInt32LE(a,v.LOCTIM),f.writeUInt32LE(l,v.LOCCRC),f.writeUInt32LE(d,v.LOCSIZ),f.writeUInt32LE(A,v.LOCLEN),f.writeUInt16LE(w,v.LOCNAM),f.writeUInt16LE(R.extraLen,v.LOCEXT),f},centralHeaderToBinary:function(){var f=Buffer.alloc(v.CENHDR+w+p+E);return f.writeUInt32LE(v.CENSIG,0),f.writeUInt16LE(n,v.CENVEM),f.writeUInt16LE(r,v.CENVER),f.writeUInt16LE(i,v.CENFLG),f.writeUInt16LE(s,v.CENHOW),f.writeUInt32LE(a,v.CENTIM),f.writeUInt32LE(l,v.CENCRC),f.writeUInt32LE(d,v.CENSIZ),f.writeUInt32LE(A,v.CENLEN),f.writeUInt16LE(w,v.CENNAM),f.writeUInt16LE(p,v.CENEXT),f.writeUInt16LE(E,v.CENCOM),f.writeUInt16LE(I,v.CENDSK),f.writeUInt16LE(F,v.CENATT),f.writeUInt32LE(m,v.CENATX),f.writeUInt32LE(h,v.CENOFF),f},toJSON:function(){let f=function(g){return g+" bytes"};return{made:n,version:r,flags:i,method:nt.methodToString(s),time:this.time,crc:"0x"+l.toString(16).toUpperCase(),compressedSize:f(d),size:f(A),fileNameLength:f(w),extraLength:f(p),commentLength:f(E),diskNumStart:I,inAttr:F,attr:m,offset:h,centralHeaderSize:f(v.CENHDR+w+p+E)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ys=te((ec,ps)=>{var Ut=xt(),V=Ut.Constants;ps.exports=function(){var n=0,r=0,i=0,s=0,a=0;return{get diskEntries(){return n},set diskEntries(l){n=r=l},get totalEntries(){return r},set totalEntries(l){r=n=l},get size(){return i},set size(l){i=l},get offset(){return s},set offset(l){s=l},get commentLength(){return a},set commentLength(l){a=l},get mainHeaderSize(){return V.ENDHDR+a},loadFromBinary:function(l){if((l.length!==V.ENDHDR||l.readUInt32LE(0)!==V.ENDSIG)&&(l.length<V.ZIP64HDR||l.readUInt32LE(0)!==V.ZIP64SIG))throw Ut.Errors.INVALID_END();l.readUInt32LE(0)===V.ENDSIG?(n=l.readUInt16LE(V.ENDSUB),r=l.readUInt16LE(V.ENDTOT),i=l.readUInt32LE(V.ENDSIZ),s=l.readUInt32LE(V.ENDOFF),a=l.readUInt16LE(V.ENDCOM)):(n=Ut.readBigUInt64LE(l,V.ZIP64SUB),r=Ut.readBigUInt64LE(l,V.ZIP64TOT),i=Ut.readBigUInt64LE(l,V.ZIP64SIZE),s=Ut.readBigUInt64LE(l,V.ZIP64OFF),a=0)},toBinary:function(){var l=Buffer.alloc(V.ENDHDR+a);return l.writeUInt32LE(V.ENDSIG,0),l.writeUInt32LE(0,4),l.writeUInt16LE(n,V.ENDSUB),l.writeUInt16LE(r,V.ENDTOT),l.writeUInt32LE(i,V.ENDSIZ),l.writeUInt32LE(s,V.ENDOFF),l.writeUInt16LE(a,V.ENDCOM),l.fill(" ",V.ENDHDR),l},toJSON:function(){let l=function(d,A){let w=d.toString(16).toUpperCase();for(;w.length<A;)w="0"+w;return"0x"+w};return{diskEntries:n,totalEntries:r,size:i+" bytes",offset:l(s,4),commentLength:a}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Kn=te(Xn=>{Xn.EntryHeader=ms();Xn.MainHeader=ys()});var gs=te((rc,bs)=>{bs.exports=function(n){var r=require("zlib"),i={chunkSize:(parseInt(n.length/1024)+1)*1024};return{deflate:function(){return r.deflateRawSync(n,i)},deflateAsync:function(s){var a=r.createDeflateRaw(i),l=[],d=0;a.on("data",function(A){l.push(A),d+=A.length}),a.on("end",function(){var A=Buffer.alloc(d),w=0;A.fill(0);for(var p=0;p<l.length;p++){var E=l[p];E.copy(A,w),w+=E.length}s&&s(A)}),a.end(n)}}}});var Ss=te((nc,_s)=>{var pu=+(process.versions?process.versions.node:"").split(".")[0]||0;_s.exports=function(n,r){var i=require("zlib");let s=pu>=15&&r>0?{maxOutputLength:r}:{};return{inflate:function(){return i.inflateRawSync(n,s)},inflateAsync:function(a){var l=i.createInflateRaw(s),d=[],A=0;l.on("data",function(w){d.push(w),A+=w.length}),l.on("end",function(){var w=Buffer.alloc(A),p=0;w.fill(0);for(var E=0;E<d.length;E++){var I=d[E];I.copy(w,p),p+=I.length}a&&a(w)}),l.end(n)}}}});var Ts=te((oc,Cs)=>{"use strict";var{randomFillSync:Es}=require("crypto"),yu=Qr(),bu=new Uint32Array(256).map((n,r)=>{for(let i=0;i<8;i++)(r&1)!==0?r=r>>>1^3988292384:r>>>=1;return r>>>0}),Rs=(n,r)=>Math.imul(n,r)>>>0,ws=(n,r)=>bu[(n^r)&255]^n>>>8,nr=()=>typeof Es=="function"?Es(Buffer.alloc(12)):nr.node();nr.node=()=>{let n=Buffer.alloc(12),r=n.length;for(let i=0;i<r;i++)n[i]=Math.random()*256&255;return n};var Xr={genSalt:nr};function Kr(n){let r=Buffer.isBuffer(n)?n:Buffer.from(n);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let i=0;i<r.length;i++)this.updateKeys(r[i])}Kr.prototype.updateKeys=function(n){let r=this.keys;return r[0]=ws(r[0],n),r[1]+=r[0]&255,r[1]=Rs(r[1],134775813)+1,r[2]=ws(r[2],r[1]>>>24),n};Kr.prototype.next=function(){let n=(this.keys[2]|2)>>>0;return Rs(n,n^1)>>8&255};function gu(n){let r=new Kr(n);return function(i){let s=Buffer.alloc(i.length),a=0;for(let l of i)s[a++]=r.updateKeys(l^r.next());return s}}function _u(n){let r=new Kr(n);return function(i,s,a=0){s||(s=Buffer.alloc(i.length));for(let l of i){let d=r.next();s[a++]=l^d,r.updateKeys(l)}return s}}function Su(n,r,i){if(!n||!Buffer.isBuffer(n)||n.length<12)return Buffer.alloc(0);let s=gu(i),a=s(n.slice(0,12)),l=(r.flags&8)===8?r.timeHighByte:r.crc>>>24;if(a[11]!==l)throw yu.WRONG_PASSWORD();return s(n.slice(12))}function Eu(n){Buffer.isBuffer(n)&&n.length>=12?Xr.genSalt=function(){return n.slice(0,12)}:n==="node"?Xr.genSalt=nr.node:Xr.genSalt=nr}function wu(n,r,i,s=!1){n==null&&(n=Buffer.alloc(0)),Buffer.isBuffer(n)||(n=Buffer.from(n.toString()));let a=_u(i),l=Xr.genSalt();l[11]=r.crc>>>24&255,s&&(l[10]=r.crc>>>16&255);let d=Buffer.alloc(n.length+12);return a(l,d),a(n,d,12)}Cs.exports={decrypt:Su,encrypt:wu,_salter:Eu}});var As=te(Jr=>{Jr.Deflater=gs();Jr.Inflater=Ss();Jr.ZipCrypto=Ts()});var eo=te((sc,Ps)=>{var j=xt(),Ru=Kn(),J=j.Constants,Jn=As();Ps.exports=function(n,r){var i=new Ru.EntryHeader,s=Buffer.alloc(0),a=Buffer.alloc(0),l=!1,d=null,A=Buffer.alloc(0),w=Buffer.alloc(0),p=!0;let E=n,I=typeof E.decoder=="object"?E.decoder:j.decoder;p=I.hasOwnProperty("efs")?I.efs:!1;function F(){return!r||!(r instanceof Uint8Array)?Buffer.alloc(0):(w=i.loadLocalHeaderFromBinary(r),r.slice(i.realDataOffset,i.realDataOffset+i.compressedSize))}function m(f){if(i.flags_desc){let g={},S=i.realDataOffset+i.compressedSize;if(r.readUInt32LE(S)==J.LOCSIG||r.readUInt32LE(S)==J.CENSIG)throw j.Errors.DESCRIPTOR_NOT_EXIST();if(r.readUInt32LE(S)==J.EXTSIG)g.crc=r.readUInt32LE(S+J.EXTCRC),g.compressedSize=r.readUInt32LE(S+J.EXTSIZ),g.size=r.readUInt32LE(S+J.EXTLEN);else if(r.readUInt16LE(S+12)===19280)g.crc=r.readUInt32LE(S+J.EXTCRC-4),g.compressedSize=r.readUInt32LE(S+J.EXTSIZ-4),g.size=r.readUInt32LE(S+J.EXTLEN-4);else throw j.Errors.DESCRIPTOR_UNKNOWN();if(g.compressedSize!==i.compressedSize||g.size!==i.size||g.crc!==i.crc)throw j.Errors.DESCRIPTOR_FAULTY();if(j.crc32(f)!==g.crc)return!1}else if(j.crc32(f)!==i.localHeader.crc)return!1;return!0}function h(f,g,S){if(typeof g>"u"&&typeof f=="string"&&(S=f,f=void 0),l)return f&&g&&g(Buffer.alloc(0),j.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var P=F();if(P.length===0)return f&&g&&g(P),P;if(i.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw j.Errors.INVALID_PASS_PARAM();P=Jn.ZipCrypto.decrypt(P,i,S)}var D=Buffer.alloc(i.size);switch(i.method){case j.Constants.STORED:if(P.copy(D),m(D))return f&&g&&g(D),D;throw f&&g&&g(D,j.Errors.BAD_CRC()),j.Errors.BAD_CRC();case j.Constants.DEFLATED:var z=new Jn.Inflater(P,i.size);if(f)z.inflateAsync(function(M){M.copy(M,0),g&&(m(M)?g(M):g(M,j.Errors.BAD_CRC()))});else{if(z.inflate(D).copy(D,0),!m(D))throw j.Errors.BAD_CRC(`"${I.decode(s)}"`);return D}break;default:throw f&&g&&g(Buffer.alloc(0),j.Errors.UNKNOWN_METHOD()),j.Errors.UNKNOWN_METHOD()}}function R(f,g){if((!d||!d.length)&&Buffer.isBuffer(r))return f&&g&&g(F()),F();if(d.length&&!l){var S;switch(i.method){case j.Constants.STORED:return i.compressedSize=i.size,S=Buffer.alloc(d.length),d.copy(S),f&&g&&g(S),S;default:case j.Constants.DEFLATED:var P=new Jn.Deflater(d);if(f)P.deflateAsync(function(z){S=Buffer.alloc(z.length),i.compressedSize=z.length,z.copy(S),g&&g(S)});else{var D=P.deflate();return i.compressedSize=D.length,D}P=null;break}}else if(f&&g)g(Buffer.alloc(0));else return Buffer.alloc(0)}function b(f,g){return(f.readUInt32LE(g+4)<<4)+f.readUInt32LE(g)}function y(f){try{for(var g=0,S,P,D;g+4<f.length;)S=f.readUInt16LE(g),g+=2,P=f.readUInt16LE(g),g+=2,D=f.slice(g,g+P),g+=P,J.ID_ZIP64===S&&T(D)}catch{throw j.Errors.EXTRA_FIELD_PARSE_ERROR()}}function T(f){var g,S,P,D;f.length>=J.EF_ZIP64_SCOMP&&(g=b(f,J.EF_ZIP64_SUNCOMP),i.size===J.EF_ZIP64_OR_32&&(i.size=g)),f.length>=J.EF_ZIP64_RHO&&(S=b(f,J.EF_ZIP64_SCOMP),i.compressedSize===J.EF_ZIP64_OR_32&&(i.compressedSize=S)),f.length>=J.EF_ZIP64_DSN&&(P=b(f,J.EF_ZIP64_RHO),i.offset===J.EF_ZIP64_OR_32&&(i.offset=P)),f.length>=J.EF_ZIP64_DSN+4&&(D=f.readUInt32LE(J.EF_ZIP64_DSN),i.diskNumStart===J.EF_ZIP64_OR_16&&(i.diskNumStart=D))}return{get entryName(){return I.decode(s)},get rawEntryName(){return s},set entryName(f){s=j.toBuffer(f,I.encode);var g=s[s.length-1];l=g===47||g===92,i.fileNameLength=s.length},get efs(){return typeof p=="function"?p(this.entryName):p},get extra(){return A},set extra(f){A=f,i.extraLength=f.length,y(f)},get comment(){return I.decode(a)},set comment(f){if(a=j.toBuffer(f,I.encode),i.commentLength=a.length,a.length>65535)throw j.Errors.COMMENT_TOO_LONG()},get name(){var f=I.decode(s);return l?f.substr(f.length-1).split("/").pop():f.split("/").pop()},get isDirectory(){return l},getCompressedData:function(){return R(!1,null)},getCompressedDataAsync:function(f){R(!0,f)},setData:function(f){d=j.toBuffer(f,j.decoder.encode),!l&&d.length?(i.size=d.length,i.method=j.Constants.DEFLATED,i.crc=j.crc32(f),i.changed=!0):i.method=j.Constants.STORED},getData:function(f){return i.changed?d:h(!1,null,f)},getDataAsync:function(f,g){i.changed?f(d):h(!0,f,g)},set attr(f){i.attr=f},get attr(){return i.attr},set header(f){i.loadFromBinary(f)},get header(){return i},packCentralHeader:function(){i.flags_efs=this.efs,i.extraLength=A.length;var f=i.centralHeaderToBinary(),g=j.Constants.CENHDR;return s.copy(f,g),g+=s.length,A.copy(f,g),g+=i.extraLength,a.copy(f,g),f},packLocalHeader:function(){let f=0;i.flags_efs=this.efs,i.extraLocalLength=w.length;let g=i.localHeaderToBinary(),S=Buffer.alloc(g.length+s.length+i.extraLocalLength);return g.copy(S,f),f+=g.length,s.copy(S,f),f+=s.length,w.copy(S,f),f+=w.length,S},toJSON:function(){let f=function(g){return"<"+(g&&g.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:i.toJSON(),compressedData:f(r),data:f(d)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Ls=te((ac,Ds)=>{var Is=eo(),Cu=Kn(),ie=xt();Ds.exports=function(n,r){var i=[],s={},a=Buffer.alloc(0),l=new Cu.MainHeader,d=!1,A=null;let w=new Set,p=r,{noSort:E,decoder:I}=p;n?h(p.readEntries):d=!0;function F(){let b=new Set;for(let y of Object.keys(s)){let T=y.split("/");if(T.pop(),!!T.length)for(let f=0;f<T.length;f++){let g=T.slice(0,f+1).join("/")+"/";b.add(g)}}for(let y of b)if(!(y in s)){let T=new Is(p);T.entryName=y,T.attr=16,T.temporary=!0,i.push(T),s[T.entryName]=T,w.add(T)}}function m(){if(d=!0,s={},l.diskEntries>(n.length-l.offset)/ie.Constants.CENHDR)throw ie.Errors.DISK_ENTRY_TOO_LARGE();i=new Array(l.diskEntries);for(var b=l.offset,y=0;y<i.length;y++){var T=b,f=new Is(p,n);f.header=n.slice(T,T+=ie.Constants.CENHDR),f.entryName=n.slice(T,T+=f.header.fileNameLength),f.header.extraLength&&(f.extra=n.slice(T,T+=f.header.extraLength)),f.header.commentLength&&(f.comment=n.slice(T,T+f.header.commentLength)),b+=f.header.centralHeaderSize,i[y]=f,s[f.entryName]=f}w.clear(),F()}function h(b){var y=n.length-ie.Constants.ENDHDR,T=Math.max(0,y-65535),f=T,g=n.length,S=-1,P=0;for((typeof p.trailingSpace=="boolean"?p.trailingSpace:!1)&&(T=0),y;y>=f;y--)if(n[y]===80){if(n.readUInt32LE(y)===ie.Constants.ENDSIG){S=y,P=y,g=y+ie.Constants.ENDHDR,f=y-ie.Constants.END64HDR;continue}if(n.readUInt32LE(y)===ie.Constants.END64SIG){f=T;continue}if(n.readUInt32LE(y)===ie.Constants.ZIP64SIG){S=y,g=y+ie.readBigUInt64LE(n,y+ie.Constants.ZIP64SIZE)+ie.Constants.ZIP64LEAD;break}}if(S==-1)throw ie.Errors.INVALID_FORMAT();l.loadFromBinary(n.slice(S,g)),l.commentLength&&(a=n.slice(P+ie.Constants.ENDHDR)),b&&m()}function R(){i.length>1&&!E&&i.sort((b,y)=>b.entryName.toLowerCase().localeCompare(y.entryName.toLowerCase()))}return{get entries(){return d||m(),i.filter(b=>!w.has(b))},get comment(){return I.decode(a)},set comment(b){a=ie.toBuffer(b,I.encode),l.commentLength=a.length},getEntryCount:function(){return d?i.length:l.diskEntries},forEach:function(b){this.entries.forEach(b)},getEntry:function(b){return d||m(),s[b]||null},setEntry:function(b){d||m(),i.push(b),s[b.entryName]=b,l.totalEntries=i.length},deleteFile:function(b,y=!0){d||m();let T=s[b];this.getEntryChildren(T,y).map(g=>g.entryName).forEach(this.deleteEntry)},deleteEntry:function(b){d||m();let y=s[b],T=i.indexOf(y);T>=0&&(i.splice(T,1),delete s[b],l.totalEntries=i.length)},getEntryChildren:function(b,y=!0){if(d||m(),typeof b=="object")if(b.isDirectory&&y){let T=[],f=b.entryName;for(let g of i)g.entryName.startsWith(f)&&T.push(g);return T}else return[b];return[]},getChildCount:function(b){if(b&&b.isDirectory){let y=this.getEntryChildren(b);return y.includes(b)?y.length-1:y.length}return 0},compressToBuffer:function(){d||m(),R();let b=[],y=[],T=0,f=0;l.size=0,l.offset=0;let g=0;for(let D of this.entries){let z=D.getCompressedData();D.header.offset=f;let M=D.packLocalHeader(),Q=M.length+z.length;f+=Q,b.push(M),b.push(z);let H=D.packCentralHeader();y.push(H),l.size+=H.length,T+=Q+H.length,g++}T+=l.mainHeaderSize,l.offset=f,l.totalEntries=g,f=0;let S=Buffer.alloc(T);for(let D of b)D.copy(S,f),f+=D.length;for(let D of y)D.copy(S,f),f+=D.length;let P=l.toBinary();return a&&a.copy(P,ie.Constants.ENDHDR),P.copy(S,f),n=S,d=!1,S},toAsyncBuffer:function(b,y,T,f){try{d||m(),R();let g=[],S=[],P=0,D=0,z=0;l.size=0,l.offset=0;let M=function(Q){if(Q.length>0){let H=Q.shift(),ce=H.entryName+H.extra.toString();T&&T(ce),H.getCompressedDataAsync(function(X){f&&f(ce),H.header.offset=D;let Fe=H.packLocalHeader(),gt=Fe.length+X.length;D+=gt,g.push(Fe),g.push(X);let _t=H.packCentralHeader();S.push(_t),l.size+=_t.length,P+=gt+_t.length,z++,M(Q)})}else{P+=l.mainHeaderSize,l.offset=D,l.totalEntries=z,D=0;let H=Buffer.alloc(P);g.forEach(function(X){X.copy(H,D),D+=X.length}),S.forEach(function(X){X.copy(H,D),D+=X.length});let ce=l.toBinary();a&&a.copy(ce,ie.Constants.ENDHDR),ce.copy(H,D),n=H,d=!1,b(H)}};M(Array.from(this.entries))}catch(g){y(g)}}}}});var Os=te((lc,Fs)=>{var Y=xt(),ee=require("path"),Tu=eo(),Au=Ls(),bt=(...n)=>Y.findLast(n,r=>typeof r=="boolean"),vs=(...n)=>Y.findLast(n,r=>typeof r=="string"),Pu=(...n)=>Y.findLast(n,r=>typeof r=="function"),Iu={noSort:!1,readEntries:!1,method:Y.Constants.NONE,fs:null};Fs.exports=function(n,r){let i=null,s=Object.assign(Object.create(null),Iu);n&&typeof n=="object"&&(n instanceof Uint8Array||(Object.assign(s,n),n=s.input?s.input:void 0,s.input&&delete s.input),Buffer.isBuffer(n)&&(i=n,s.method=Y.Constants.BUFFER,n=void 0)),Object.assign(s,r);let a=new Y(s);if((typeof s.decoder!="object"||typeof s.decoder.encode!="function"||typeof s.decoder.decode!="function")&&(s.decoder=Y.decoder),n&&typeof n=="string")if(a.fs.existsSync(n))s.method=Y.Constants.FILE,s.filename=n,i=a.fs.readFileSync(n);else throw Y.Errors.INVALID_FILENAME();let l=new Au(i,s),{canonical:d,sanitize:A,zipnamefix:w}=Y;function p(m){if(m&&l){var h;if(typeof m=="string"&&(h=l.getEntry(ee.posix.normalize(m))),typeof m=="object"&&typeof m.entryName<"u"&&typeof m.header<"u"&&(h=l.getEntry(m.entryName)),h)return h}return null}function E(m){let{join:h,normalize:R,sep:b}=ee.posix;return h(".",R(b+m.split("\\").join(b)+b))}function I(m){return m instanceof RegExp?(function(h){return function(R){return h.test(R)}})(m):typeof m!="function"?()=>!0:m}let F=(m,h)=>{let R=h.slice(-1);return R=R===a.sep?a.sep:"",ee.relative(m,h)+R};return{readFile:function(m,h){var R=p(m);return R&&R.getData(h)||null},childCount:function(m){let h=p(m);if(h)return l.getChildCount(h)},readFileAsync:function(m,h){var R=p(m);R?R.getDataAsync(h):h(null,"getEntry failed for:"+m)},readAsText:function(m,h){var R=p(m);if(R){var b=R.getData();if(b&&b.length)return b.toString(h||"utf8")}return""},readAsTextAsync:function(m,h,R){var b=p(m);b?b.getDataAsync(function(y,T){if(T){h(y,T);return}y&&y.length?h(y.toString(R||"utf8")):h("")}):h("")},deleteFile:function(m,h=!0){var R=p(m);R&&l.deleteFile(R.entryName,h)},deleteEntry:function(m){var h=p(m);h&&l.deleteEntry(h.entryName)},addZipComment:function(m){l.comment=m},getZipComment:function(){return l.comment||""},addZipEntryComment:function(m,h){var R=p(m);R&&(R.comment=h)},getZipEntryComment:function(m){var h=p(m);return h&&h.comment||""},updateFile:function(m,h){var R=p(m);R&&R.setData(h)},addLocalFile:function(m,h,R,b){if(a.fs.existsSync(m)){h=h?E(h):"";let y=ee.win32.basename(ee.win32.normalize(m));h+=R||y;let T=a.fs.statSync(m),f=T.isFile()?a.fs.readFileSync(m):Buffer.alloc(0);T.isDirectory()&&(h+=a.sep),this.addFile(h,f,b,T)}else throw Y.Errors.FILE_NOT_FOUND(m)},addLocalFileAsync:function(m,h){m=typeof m=="object"?m:{localPath:m};let R=ee.resolve(m.localPath),{comment:b}=m,{zipPath:y,zipName:T}=m,f=this;a.fs.stat(R,function(g,S){if(g)return h(g,!1);y=y?E(y):"";let P=ee.win32.basename(ee.win32.normalize(R));if(y+=T||P,S.isFile())a.fs.readFile(R,function(D,z){return D?h(D,!1):(f.addFile(y,z,b,S),setImmediate(h,void 0,!0))});else if(S.isDirectory())return y+=a.sep,f.addFile(y,Buffer.alloc(0),b,S),setImmediate(h,void 0,!0)})},addLocalFolder:function(m,h,R){if(R=I(R),h=h?E(h):"",m=ee.normalize(m),a.fs.existsSync(m)){let b=a.findFiles(m),y=this;if(b.length)for(let T of b){let f=ee.join(h,F(m,T));R(f)&&y.addLocalFile(T,ee.dirname(f))}}else throw Y.Errors.FILE_NOT_FOUND(m)},addLocalFolderAsync:function(m,h,R,b){b=I(b),R=R?E(R):"",m=ee.normalize(m);var y=this;a.fs.open(m,"r",function(T){if(T&&T.code==="ENOENT")h(void 0,Y.Errors.FILE_NOT_FOUND(m));else if(T)h(void 0,T);else{var f=a.findFiles(m),g=-1,S=function(){if(g+=1,g<f.length){var P=f[g],D=F(m,P).split("\\").join("/");D=D.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),b(D)?a.fs.stat(P,function(z,M){z&&h(void 0,z),M.isFile()?a.fs.readFile(P,function(Q,H){Q?h(void 0,Q):(y.addFile(R+D,H,"",M),S())}):(y.addFile(R+D+"/",Buffer.alloc(0),"",M),S())}):process.nextTick(()=>{S()})}else h(!0,void 0)};S()}})},addLocalFolderAsync2:function(m,h){let R=this;m=typeof m=="object"?m:{localPath:m},localPath=ee.resolve(E(m.localPath));let{zipPath:b,filter:y,namefix:T}=m;y instanceof RegExp?y=(function(S){return function(P){return S.test(P)}})(y):typeof y!="function"&&(y=function(){return!0}),b=b?E(b):"",T=="latin1"&&(T=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof T!="function"&&(T=S=>S);let f=S=>ee.join(b,T(F(localPath,S))),g=S=>ee.win32.basename(ee.win32.normalize(T(S)));a.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?h(void 0,Y.Errors.FILE_NOT_FOUND(localPath)):S?h(void 0,S):a.findFilesAsync(localPath,function(P,D){if(P)return h(P);D=D.filter(z=>y(f(z))),D.length||h(void 0,!1),setImmediate(D.reverse().reduce(function(z,M){return function(Q,H){if(Q||H===!1)return setImmediate(z,Q,!1);R.addLocalFileAsync({localPath:M,zipPath:ee.dirname(f(M)),zipName:g(M)},z)}},h))})})},addLocalFolderPromise:function(m,h){return new Promise((R,b)=>{this.addLocalFolderAsync2(Object.assign({localPath:m},h),(y,T)=>{y&&b(y),T&&R(this)})})},addFile:function(m,h,R,b){m=w(m);let y=p(m),T=y!=null;T||(y=new Tu(s),y.entryName=m),y.comment=R||"";let f=typeof b=="object"&&b instanceof a.fs.Stats;f&&(y.header.time=b.mtime);var g=y.isDirectory?16:0;let S=y.isDirectory?16384:32768;return f?S|=4095&b.mode:typeof b=="number"?S|=4095&b:S|=y.isDirectory?493:420,g=(g|S<<16)>>>0,y.attr=g,y.setData(h),T||l.setEntry(y),y},getEntries:function(m){return l.password=m,l?l.entries:[]},getEntry:function(m){return p(m)},getEntryCount:function(){return l.getEntryCount()},forEach:function(m){return l.forEach(m)},extractEntryTo:function(m,h,R,b,y,T){b=bt(!1,b),y=bt(!1,y),R=bt(!0,R),T=vs(y,T);var f=p(m);if(!f)throw Y.Errors.NO_ENTRY();var g=d(f.entryName),S=A(h,T&&!f.isDirectory?T:R?g:ee.basename(g));if(f.isDirectory){var P=l.getEntryChildren(f);return P.forEach(function(M){if(M.isDirectory)return;var Q=M.getData();if(!Q)throw Y.Errors.CANT_EXTRACT_FILE();var H=d(M.entryName),ce=A(h,R?H:ee.basename(H));let X=y?M.header.fileAttr:void 0;a.writeFileTo(ce,Q,b,X)}),!0}var D=f.getData(l.password);if(!D)throw Y.Errors.CANT_EXTRACT_FILE();if(a.fs.existsSync(S)&&!b)throw Y.Errors.CANT_OVERRIDE();let z=y?m.header.fileAttr:void 0;return a.writeFileTo(S,D,b,z),!0},test:function(m){if(!l)return!1;for(var h in l.entries)try{if(h.isDirectory)continue;var R=l.entries[h].getData(m);if(!R)return!1}catch{return!1}return!0},extractAllTo:function(m,h,R,b){if(R=bt(!1,R),b=vs(R,b),h=bt(!1,h),!l)throw Y.Errors.NO_ZIP();l.entries.forEach(function(y){var T=A(m,d(y.entryName));if(y.isDirectory){a.makeDir(T);return}var f=y.getData(b);if(!f)throw Y.Errors.CANT_EXTRACT_FILE();let g=R?y.header.fileAttr:void 0;a.writeFileTo(T,f,h,g);try{a.fs.utimesSync(T,y.header.time,y.header.time)}catch{throw Y.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(m,h,R,b){if(b=Pu(h,R,b),R=bt(!1,R),h=bt(!1,h),!b)return new Promise((S,P)=>{this.extractAllToAsync(m,h,R,function(D){D?P(D):S(this)})});if(!l){b(Y.Errors.NO_ZIP());return}m=ee.resolve(m);let y=S=>A(m,ee.normalize(d(S.entryName))),T=(S,P)=>new Error(S+': "'+P+'"'),f=[],g=[];l.entries.forEach(S=>{S.isDirectory?f.push(S):g.push(S)});for(let S of f){let P=y(S),D=R?S.header.fileAttr:void 0;try{a.makeDir(P),D&&a.fs.chmodSync(P,D),a.fs.utimesSync(P,S.header.time,S.header.time)}catch{b(T("Unable to create folder",P))}}g.reverse().reduce(function(S,P){return function(D){if(D)S(D);else{let z=ee.normalize(d(P.entryName)),M=A(m,z);P.getDataAsync(function(Q,H){if(H)S(H);else if(!Q)S(Y.Errors.CANT_EXTRACT_FILE());else{let ce=R?P.header.fileAttr:void 0;a.writeFileToAsync(M,Q,h,ce,function(X){X||S(T("Unable to write file",M)),a.fs.utimes(M,P.header.time,P.header.time,function(Fe){Fe?S(T("Unable to set times",M)):S()})})}})}}},b)()},writeZip:function(m,h){if(arguments.length===1&&typeof m=="function"&&(h=m,m=""),!m&&s.filename&&(m=s.filename),!!m){var R=l.compressToBuffer();if(R){var b=a.writeFileTo(m,R,!0);typeof h=="function"&&h(b?null:new Error("failed"),"")}}},writeZipPromise:function(m,h){let{overwrite:R,perm:b}=Object.assign({overwrite:!0},h);return new Promise((y,T)=>{!m&&s.filename&&(m=s.filename),m||T("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(f=>{let g=S=>S?y(S):T("ADM-ZIP: Wasn't able to write zip file");a.writeFileToAsync(m,f,R,b,g)},T)})},toBufferPromise:function(){return new Promise((m,h)=>{l.toAsyncBuffer(m,h)})},toBuffer:function(m,h,R,b){return typeof m=="function"?(l.toAsyncBuffer(m,h,R,b),null):l.compressToBuffer()}}}});var Ou={};gi(Ou,{default:()=>Ms});module.exports=zl(Ou);var U=require("@raycast/api"),ar=require("react");var qe=require("@raycast/api");var Si=_e(require("fs/promises"));async function Yt(n,r){try{let i=[];for(let s of n)i.push(`# ---- ${s.name} ----
${await(await Si.default.readFile(s.path,{signal:r})).toString()}`);return i.join(`
`)}catch(i){if(r?.aborted)return"";throw i}}async function kr(n){await(0,qe.showHUD)("Copied to Clipboard"),await qe.Clipboard.copy(await Yt(n)),await(0,qe.popToRoot)()}async function Ei(n){await(0,qe.showHUD)("Pasted to App"),await qe.Clipboard.paste(await Yt(n)),await(0,qe.popToRoot)()}var Ji=_e(require("node:http"),1),es=_e(require("node:https"),1),yt=_e(require("node:zlib"),1),pe=_e(require("node:stream"),1),rr=require("node:buffer");function Ml(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let i=n.substring(5,r).split(";"),s="",a=!1,l=i[0]||"text/plain",d=l;for(let E=1;E<i.length;E++)i[E]==="base64"?a=!0:i[E]&&(d+=`;${i[E]}`,i[E].indexOf("charset=")===0&&(s=i[E].substring(8)));!i[0]&&!s.length&&(d+=";charset=US-ASCII",s="US-ASCII");let A=a?"base64":"ascii",w=unescape(n.substring(r+1)),p=Buffer.from(w,A);return p.type=l,p.typeFull=d,p.charset=s,p}var wi=Ml;var Se=_e(require("node:stream"),1),He=require("node:util"),he=require("node:buffer");Qt();qr();var Me=class extends Error{constructor(r,i){super(r),Error.captureStackTrace(this,this.constructor),this.type=i}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ae=class extends Me{constructor(r,i,s){super(r,i),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var zr=Symbol.toStringTag,jn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[zr]==="URLSearchParams",Kt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[zr]),vi=n=>typeof n=="object"&&(n[zr]==="AbortSignal"||n[zr]==="EventTarget"),Fi=(n,r)=>{let i=new URL(r).hostname,s=new URL(n).hostname;return i===s||i.endsWith(`.${s}`)},Oi=(n,r)=>{let i=new URL(r).protocol,s=new URL(n).protocol;return i===s};var nu=(0,He.promisify)(Se.default.pipeline),fe=Symbol("Body internals"),Le=class{constructor(r,{size:i=0}={}){let s=null;r===null?r=null:jn(r)?r=he.Buffer.from(r.toString()):Kt(r)||he.Buffer.isBuffer(r)||(He.types.isAnyArrayBuffer(r)?r=he.Buffer.from(r):ArrayBuffer.isView(r)?r=he.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof Se.default||(r instanceof ht?(r=Li(r),s=r.type.split("=")[1]):r=he.Buffer.from(String(r))));let a=r;he.Buffer.isBuffer(r)?a=Se.default.Readable.from(r):Kt(r)&&(a=Se.default.Readable.from(r.stream())),this[fe]={body:r,stream:a,boundary:s,disturbed:!1,error:null},this.size=i,r instanceof Se.default&&r.on("error",l=>{let d=l instanceof Me?l:new ae(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[fe].error=d})}get body(){return this[fe].stream}get bodyUsed(){return this[fe].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:i,byteLength:s}=await Zn(this);return r.slice(i,i+s)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let s=new ht,a=new URLSearchParams(await this.text());for(let[l,d]of a)s.append(l,d);return s}let{toFormData:i}=await Promise.resolve().then(()=>(ki(),Ui));return i(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[fe].body&&this[fe].body.type||"",i=await this.arrayBuffer();return new ze([i],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Zn(this);return new TextDecoder().decode(r)}buffer(){return Zn(this)}};Le.prototype.buffer=(0,He.deprecate)(Le.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Le.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,He.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Zn(n){if(n[fe].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[fe].disturbed=!0,n[fe].error)throw n[fe].error;let{body:r}=n;if(r===null)return he.Buffer.alloc(0);if(!(r instanceof Se.default))return he.Buffer.alloc(0);let i=[],s=0;try{for await(let a of r){if(n.size>0&&s+a.length>n.size){let l=new ae(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(l),l}s+=a.length,i.push(a)}}catch(a){throw a instanceof Me?a:new ae(`Invalid response body while trying to fetch ${n.url}: ${a.message}`,"system",a)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return i.every(a=>typeof a=="string")?he.Buffer.from(i.join("")):he.Buffer.concat(i,s)}catch(a){throw new ae(`Could not create Buffer from response body for ${n.url}: ${a.message}`,"system",a)}else throw new ae(`Premature close of server response while trying to fetch ${n.url}`)}var Ot=(n,r)=>{let i,s,{body:a}=n[fe];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof Se.default&&typeof a.getBoundary!="function"&&(i=new Se.PassThrough({highWaterMark:r}),s=new Se.PassThrough({highWaterMark:r}),a.pipe(i),a.pipe(s),n[fe].stream=i,a=s),a},ou=(0,He.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),$r=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":jn(n)?"application/x-www-form-urlencoded;charset=UTF-8":Kt(n)?n.type||null:he.Buffer.isBuffer(n)||He.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof ht?`multipart/form-data; boundary=${r[fe].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${ou(n)}`:n instanceof Se.default?null:"text/plain;charset=UTF-8",Wi=n=>{let{body:r}=n[fe];return r===null?0:Kt(r)?r.size:he.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},qi=async(n,{body:r})=>{r===null?n.end():await nu(r,n)};var Vn=require("node:util"),er=_e(require("node:http"),1),Gr=typeof er.default.validateHeaderName=="function"?er.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Yn=typeof er.default.validateHeaderValue=="function"?er.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let i=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(i,"code",{value:"ERR_INVALID_CHAR"}),i}},me=class n extends URLSearchParams{constructor(r){let i=[];if(r instanceof n){let s=r.raw();for(let[a,l]of Object.entries(s))i.push(...l.map(d=>[a,d]))}else if(r!=null)if(typeof r=="object"&&!Vn.types.isBoxedPrimitive(r)){let s=r[Symbol.iterator];if(s==null)i.push(...Object.entries(r));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");i=[...r].map(a=>{if(typeof a!="object"||Vn.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return i=i.length>0?i.map(([s,a])=>(Gr(s),Yn(s,String(a)),[String(s).toLowerCase(),String(a)])):void 0,super(i),new Proxy(this,{get(s,a,l){switch(a){case"append":case"set":return(d,A)=>(Gr(d),Yn(d,String(A)),URLSearchParams.prototype[a].call(s,String(d).toLowerCase(),String(A)));case"delete":case"has":case"getAll":return d=>(Gr(d),URLSearchParams.prototype[a].call(s,String(d).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,a,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let i=this.getAll(r);if(i.length===0)return null;let s=i.join(", ");return/^content-encoding$/i.test(r)&&(s=s.toLowerCase()),s}forEach(r,i=void 0){for(let s of this.keys())Reflect.apply(r,i,[this.get(s),s,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,i)=>(r[i]=this.getAll(i),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,i)=>{let s=this.getAll(i);return i==="host"?r[i]=s[0]:r[i]=s.length>1?s:s[0],r},{})}};Object.defineProperties(me.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function zi(n=[]){return new me(n.reduce((r,i,s,a)=>(s%2===0&&r.push(a.slice(s,s+2)),r),[]).filter(([r,i])=>{try{return Gr(r),Yn(r,String(i)),!0}catch{return!1}}))}var iu=new Set([301,302,303,307,308]),Zr=n=>iu.has(n);var Ae=Symbol("Response internals"),Ee=class n extends Le{constructor(r=null,i={}){super(r,i);let s=i.status!=null?i.status:200,a=new me(i.headers);if(r!==null&&!a.has("Content-Type")){let l=$r(r,this);l&&a.append("Content-Type",l)}this[Ae]={type:"default",url:i.url,status:s,statusText:i.statusText||"",headers:a,counter:i.counter,highWaterMark:i.highWaterMark}}get type(){return this[Ae].type}get url(){return this[Ae].url||""}get status(){return this[Ae].status}get ok(){return this[Ae].status>=200&&this[Ae].status<300}get redirected(){return this[Ae].counter>0}get statusText(){return this[Ae].statusText}get headers(){return this[Ae].headers}get highWaterMark(){return this[Ae].highWaterMark}clone(){return new n(Ot(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,i=302){if(!Zr(i))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new n(null,{headers:{location:new URL(r).toString()},status:i})}static error(){let r=new n(null,{status:0,statusText:""});return r[Ae].type="error",r}static json(r=void 0,i={}){let s=JSON.stringify(r);if(s===void 0)throw new TypeError("data is not JSON serializable");let a=new me(i&&i.headers);return a.has("content-type")||a.set("content-type","application/json"),new n(s,{...i,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Ee.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Qi=require("node:url"),Xi=require("node:util");var Mi=n=>{if(n.search)return n.search;let r=n.href.length-1,i=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-i.length]==="?"?"?":""};var ji=require("node:net");function Hi(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var $i=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Gi="strict-origin-when-cross-origin";function Zi(n){if(!$i.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function su(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),i=(0,ji.isIP)(r);return i===4&&/^127\./.test(r)||i===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:n.host==="localhost"||n.host.endsWith(".localhost")?!1:n.protocol==="file:"}function Nt(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:su(n)}function Vi(n,{referrerURLCallback:r,referrerOriginCallback:i}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let s=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let a=n.referrer,l=Hi(a),d=Hi(a,!0);l.toString().length>4096&&(l=d),r&&(l=r(l)),i&&(d=i(d));let A=new URL(n.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return d;case"unsafe-url":return l;case"strict-origin":return Nt(l)&&!Nt(A)?"no-referrer":d.toString();case"strict-origin-when-cross-origin":return l.origin===A.origin?l:Nt(l)&&!Nt(A)?"no-referrer":d;case"same-origin":return l.origin===A.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===A.origin?l:d;case"no-referrer-when-downgrade":return Nt(l)&&!Nt(A)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Yi(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),i="";for(let s of r)s&&$i.has(s)&&(i=s);return i}var ne=Symbol("Request internals"),tr=n=>typeof n=="object"&&typeof n[ne]=="object",au=(0,Xi.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),pt=class n extends Le{constructor(r,i={}){let s;if(tr(r)?s=new URL(r.url):(s=new URL(r),r={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let a=i.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!tr(i)&&"data"in i&&au(),(i.body!=null||tr(r)&&r.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=i.body?i.body:tr(r)&&r.body!==null?Ot(r):null;super(l,{size:i.size||r.size||0});let d=new me(i.headers||r.headers||{});if(l!==null&&!d.has("Content-Type")){let p=$r(l,this);p&&d.set("Content-Type",p)}let A=tr(r)?r.signal:null;if("signal"in i&&(A=i.signal),A!=null&&!vi(A))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let w=i.referrer==null?r.referrer:i.referrer;if(w==="")w="no-referrer";else if(w){let p=new URL(w);w=/^about:(\/\/)?client$/.test(p)?"client":p}else w=void 0;this[ne]={method:a,redirect:i.redirect||r.redirect||"follow",headers:d,parsedURL:s,signal:A,referrer:w},this.follow=i.follow===void 0?r.follow===void 0?20:r.follow:i.follow,this.compress=i.compress===void 0?r.compress===void 0?!0:r.compress:i.compress,this.counter=i.counter||r.counter||0,this.agent=i.agent||r.agent,this.highWaterMark=i.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=i.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=i.referrerPolicy||r.referrerPolicy||""}get method(){return this[ne].method}get url(){return(0,Qi.format)(this[ne].parsedURL)}get headers(){return this[ne].headers}get redirect(){return this[ne].redirect}get signal(){return this[ne].signal}get referrer(){if(this[ne].referrer==="no-referrer")return"";if(this[ne].referrer==="client")return"about:client";if(this[ne].referrer)return this[ne].referrer.toString()}get referrerPolicy(){return this[ne].referrerPolicy}set referrerPolicy(r){this[ne].referrerPolicy=Zi(r)}clone(){return new n(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(pt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ki=n=>{let{parsedURL:r}=n[ne],i=new me(n[ne].headers);i.has("Accept")||i.set("Accept","*/*");let s=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(s="0"),n.body!==null){let A=Wi(n);typeof A=="number"&&!Number.isNaN(A)&&(s=String(A))}s&&i.set("Content-Length",s),n.referrerPolicy===""&&(n.referrerPolicy=Gi),n.referrer&&n.referrer!=="no-referrer"?n[ne].referrer=Vi(n):n[ne].referrer="no-referrer",n[ne].referrer instanceof URL&&i.set("Referer",n.referrer),i.has("User-Agent")||i.set("User-Agent","node-fetch"),n.compress&&!i.has("Accept-Encoding")&&i.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=n;typeof a=="function"&&(a=a(r));let l=Mi(r),d={path:r.pathname+l,method:n.method,headers:i[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:a};return{parsedURL:r,options:d}};var Vr=class extends Me{constructor(r,i="aborted"){super(r,i)}};qr();$n();var lu=new Set(["data:","http:","https:"]);async function Yr(n,r){return new Promise((i,s)=>{let a=new pt(n,r),{parsedURL:l,options:d}=Ki(a);if(!lu.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let h=wi(a.url),R=new Ee(h,{headers:{"Content-Type":h.typeFull}});i(R);return}let A=(l.protocol==="https:"?es.default:Ji.default).request,{signal:w}=a,p=null,E=()=>{let h=new Vr("The operation was aborted.");s(h),a.body&&a.body instanceof pe.default.Readable&&a.body.destroy(h),!(!p||!p.body)&&p.body.emit("error",h)};if(w&&w.aborted){E();return}let I=()=>{E(),m()},F=A(l.toString(),d);w&&w.addEventListener("abort",I);let m=()=>{F.abort(),w&&w.removeEventListener("abort",I)};F.on("error",h=>{s(new ae(`request to ${a.url} failed, reason: ${h.message}`,"system",h)),m()}),uu(F,h=>{p&&p.body&&p.body.destroy(h)}),process.version<"v14"&&F.on("socket",h=>{let R;h.prependListener("end",()=>{R=h._eventsCount}),h.prependListener("close",b=>{if(p&&R<h._eventsCount&&!b){let y=new Error("Premature close");y.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",y)}})}),F.on("response",h=>{F.setTimeout(0);let R=zi(h.rawHeaders);if(Zr(h.statusCode)){let g=R.get("Location"),S=null;try{S=g===null?null:new URL(g,a.url)}catch{if(a.redirect!=="manual"){s(new ae(`uri requested responds with an invalid redirect URL: ${g}`,"invalid-redirect")),m();return}}switch(a.redirect){case"error":s(new ae(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),m();return;case"manual":break;case"follow":{if(S===null)break;if(a.counter>=a.follow){s(new ae(`maximum redirect reached at: ${a.url}`,"max-redirect")),m();return}let P={headers:new me(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:Ot(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!Fi(a.url,S)||!Oi(a.url,S))for(let z of["authorization","www-authenticate","cookie","cookie2"])P.headers.delete(z);if(h.statusCode!==303&&a.body&&r.body instanceof pe.default.Readable){s(new ae("Cannot follow redirect with body being a readable stream","unsupported-redirect")),m();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&a.method==="POST")&&(P.method="GET",P.body=void 0,P.headers.delete("content-length"));let D=Yi(R);D&&(P.referrerPolicy=D),i(Yr(new pt(S,P))),m();return}default:return s(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}w&&h.once("end",()=>{w.removeEventListener("abort",I)});let b=(0,pe.pipeline)(h,new pe.PassThrough,g=>{g&&s(g)});process.version<"v12.10"&&h.on("aborted",I);let y={url:a.url,status:h.statusCode,statusText:h.statusMessage,headers:R,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},T=R.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||T===null||h.statusCode===204||h.statusCode===304){p=new Ee(b,y),i(p);return}let f={flush:yt.default.Z_SYNC_FLUSH,finishFlush:yt.default.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){b=(0,pe.pipeline)(b,yt.default.createGunzip(f),g=>{g&&s(g)}),p=new Ee(b,y),i(p);return}if(T==="deflate"||T==="x-deflate"){let g=(0,pe.pipeline)(h,new pe.PassThrough,S=>{S&&s(S)});g.once("data",S=>{(S[0]&15)===8?b=(0,pe.pipeline)(b,yt.default.createInflate(),P=>{P&&s(P)}):b=(0,pe.pipeline)(b,yt.default.createInflateRaw(),P=>{P&&s(P)}),p=new Ee(b,y),i(p)}),g.once("end",()=>{p||(p=new Ee(b,y),i(p))});return}if(T==="br"){b=(0,pe.pipeline)(b,yt.default.createBrotliDecompress(),g=>{g&&s(g)}),p=new Ee(b,y),i(p);return}p=new Ee(b,y),i(p)}),qi(F,a).catch(s)})}function uu(n,r){let i=rr.Buffer.from(`0\r
\r
`),s=!1,a=!1,l;n.on("response",d=>{let{headers:A}=d;s=A["transfer-encoding"]==="chunked"&&!A["content-length"]}),n.on("socket",d=>{let A=()=>{if(s&&!a){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}},w=p=>{a=rr.Buffer.compare(p.slice(-5),i)===0,!a&&l&&(a=rr.Buffer.compare(l.slice(-3),i.slice(0,3))===0&&rr.Buffer.compare(p.slice(-2),i.slice(3))===0),l=p};d.prependListener("close",A),d.on("data",w),n.on("close",()=>{d.removeListener("close",A),d.removeListener("data",w)})})}var je=_e(require("fs/promises")),Bs=_e(require("fs")),$e=require("path"),oe=require("@raycast/api"),xs=require("stream/promises"),we=require("react"),Us=_e(Os()),Du="https://codeload.github.com/github/gitignore/zip/main",en=(0,$e.resolve)(oe.environment.supportPath,"download.zip"),Ns=(0,$e.resolve)(oe.environment.supportPath,"gitignore-main"),ks="latest",or=(0,$e.resolve)(oe.environment.supportPath,ks),tn=class n extends Error{constructor(r){super(r),Object.setPrototypeOf(this,n.prototype)}};async function Lu(){let n=await Yr(Du);if(n.body===null)throw new tn("No data returned. Please try again later.");await je.default.rm(en,{force:!0}),await(0,xs.pipeline)(n.body,Bs.default.createWriteStream(en));try{await je.default.rm(Ns,{recursive:!0,force:!0}),new Us.default(en).extractAllTo(oe.environment.supportPath,!0)}catch(r){throw new tn(`Could not unzip. Please file a bug report. ${r}`)}await je.default.rm(or,{recursive:!0,force:!0}),await je.default.rm(en),await je.default.rename(Ns,or),await oe.LocalStorage.setItem("last-updated",new Date().getTime())}async function Ws(n){let r=await(0,je.readdir)(n,{withFileTypes:!0});return(await Promise.all(r.map(s=>{let a=(0,$e.resolve)(n,s.name);if(s.isDirectory())return Ws(a);{let l=(0,$e.parse)(a);if(l.ext===".gitignore"){let d=(0,$e.basename)(l.dir),A=d==ks?void 0:d;return{id:a,name:l.name,path:a,folder:A}}}return[]}))).flat()}function vu(){let[n,r]=(0,we.useState)(new Set);(0,we.useEffect)(()=>{oe.LocalStorage.getItem("favorites").then(s=>{if(s)try{let a=JSON.parse(s);r(new Set(a))}catch(a){console.error("Failed to parse favorites:",a)}}).catch(s=>{console.error("Failed to load favorites:",s)})},[]);let i=(0,we.useCallback)(s=>{r(a=>{let l=new Set(a);return l.has(s.id)?l.delete(s.id):l.add(s.id),oe.LocalStorage.setItem("favorites",JSON.stringify(Array.from(l))).catch(d=>{console.error("Failed to save favorites:",d)}),l})},[]);return[n,i]}function qs(){let[n,r]=(0,we.useState)({gitignoreFiles:[],loading:!0,lastUpdated:null}),[i,s]=(0,we.useState)(new Set),[a,l]=vu(),d=(0,we.useCallback)(async p=>{r(I=>({...I,loading:!0}));let E=p;if(!E)try{await je.default.access(or)}catch(I){E=!0,console.error(`Could not access ${or}.`,I)}try{E&&(await Lu(),s(new Set),await(0,oe.showToast)({title:"Successfully downloaded gitignore files"}));let I=await Ws(or),F=await oe.LocalStorage.getItem("last-updated");r({gitignoreFiles:I,lastUpdated:F?new Date(F):null,loading:!1})}catch(I){let F="Unknown error occurred";I instanceof ae?F="Please check your internet connection and try again":I instanceof Error&&(F=I.message),console.error(I),await(0,oe.showToast)({style:oe.Toast.Style.Failure,title:"Unable to refresh",message:F}),r(m=>({...m,loading:!1}))}},[]),A=(0,we.useCallback)(p=>{s(E=>{let I=new Set(E);return I.has(p.id)?I.delete(p.id):I.add(p.id),I})},[]),w=(0,we.useCallback)(p=>{s(E=>{let I=new Set(E);return p.forEach(F=>{I.add(F.id)}),I})},[]);return(0,we.useEffect)(()=>{d(!1)},[d]),[n,i,A,()=>d(!0),a,l,w]}function to(){return(0,oe.getPreferenceValues)().listdetail}function zs(){return(0,oe.getPreferenceValues)().autoselect}var ve=require("@raycast/api"),rn=require("react");var ir=require("react/jsx-runtime");function Fu(n,r){if(r!==null)return`### ${n}
\`\`\`
${r}
\`\`\``}function sr({gitignoreFiles:n,listPreview:r}){let[i,s]=(0,rn.useState)(null);(0,rn.useEffect)(()=>{let d=new AbortController;return Yt(n,d.signal).then(A=>s(A)).catch(A=>{d.signal.aborted||(console.error("Failed to generate contents:",A),s(""))}),()=>{d.abort()}},[n]);let a=n.map(d=>d.name).join(", "),l=Fu(a,i);return r?(0,ir.jsx)(ve.List.Item.Detail,{isLoading:i===null,markdown:l}):(0,ir.jsx)(ve.Detail,{navigationTitle:"Gitignore Preview",isLoading:i===null,markdown:l,actions:(0,ir.jsx)(ve.ActionPanel,{children:(0,ir.jsx)(ve.Action,{title:"Copy to Clipboard",icon:ve.Icon.Clipboard,onAction:()=>kr(n)})})})}var q=require("react/jsx-runtime");function ro({gitignoreFiles:n,selected:r,toggleSelection:i,toggleFavorite:s,favoriteIds:a}){let l=to();return(0,q.jsx)(q.Fragment,{children:n.map(d=>{let A=d.folder!==void 0?[d.folder]:void 0,w=typeof r=="function"?r(d):r,p=a?.has(d.id)??!1,E=[];return p&&E.push({tooltip:"Favourite"}),d.folder&&E.push({text:d.folder}),(0,q.jsx)(U.List.Item,{id:d.path,icon:w?{source:U.Icon.Checkmark,tintColor:U.Color.Green}:p?U.Icon.Star:U.Icon.Circle,title:d.name,keywords:A,accessories:E.length>0?E:void 0,detail:l?(0,q.jsx)(sr,{gitignoreFiles:[d],listPreview:!0}):void 0,actions:(0,q.jsxs)(U.ActionPanel,{children:[(0,q.jsx)(U.Action,{title:w?"Deselect":"Select",icon:w?U.Icon.Circle:U.Icon.Checkmark,onAction:()=>{i(d)}}),s&&(0,q.jsx)(U.Action,{title:p?"Remove from Favourites":"Add to Favourites",icon:p?U.Icon.StarDisabled:U.Icon.Star,shortcut:U.Keyboard.Shortcut.Common.Pin,onAction:()=>{s(d)}}),(0,q.jsx)($s,{selected:[d]}),(0,q.jsx)(js,{selected:[d]}),(0,q.jsx)(Hs,{selected:[d]})]})},d.path)})})}function Ms(){let[{gitignoreFiles:n,lastUpdated:r,loading:i},s,a,l,d,A,w]=qs(),p=to(),E=zs(),I=(0,ar.useRef)(new Set);(0,ar.useEffect)(()=>{if(E&&!i&&n.length>0&&d.size>0){let y=n.filter(f=>d.has(f.id)&&!s.has(f.id)),T=Array.from(d).some(f=>!I.current.has(f));y.length>0&&(I.current.size===0||T)&&w(y),I.current=new Set(d)}else(i||d.size===0)&&(I.current=new Set)},[E,i,n,d,s,w]),(0,ar.useEffect)(()=>{s.size>0&&(0,U.clearSearchBar)({forceScrollToTop:!1})},[s]);let F=n.filter(y=>d.has(y.id)),m=n.filter(y=>s.has(y.id)),h=n.filter(y=>s.has(y.id)&&!d.has(y.id)),R=n.filter(y=>!s.has(y.id)&&!d.has(y.id)),b=r!=null?`Last updated ${r.toLocaleString()}`:"";return(0,q.jsxs)(U.List,{isLoading:i,isShowingDetail:p,children:[(0,q.jsx)(U.List.Section,{children:m.length>0?(0,q.jsx)(U.List.Item,{icon:U.Icon.Document,title:"Create .gitignore",detail:p?(0,q.jsx)(sr,{gitignoreFiles:m,listPreview:!0}):void 0,actions:(0,q.jsxs)(U.ActionPanel,{children:[(0,q.jsx)($s,{selected:m}),(0,q.jsx)(js,{selected:m}),(0,q.jsx)(Hs,{selected:m})]})}):!i&&(0,q.jsx)(U.List.Item,{icon:U.Icon.Download,title:"Refresh",subtitle:p?void 0:b,detail:p&&(0,q.jsx)(U.List.Item.Detail,{markdown:`### ${b}`}),actions:(0,q.jsx)(U.ActionPanel,{children:(0,q.jsx)(U.Action,{title:"Refresh",onAction:l})})})}),F.length>0&&(0,q.jsx)(U.List.Section,{title:"Favourites",children:(0,q.jsx)(ro,{gitignoreFiles:F,selected:y=>s.has(y.id),toggleSelection:a,toggleFavorite:A,favoriteIds:d})}),h.length>0&&(0,q.jsx)(U.List.Section,{title:"Selected",children:(0,q.jsx)(ro,{gitignoreFiles:h,selected:!0,toggleSelection:a,toggleFavorite:A,favoriteIds:d})}),R.length>0&&(0,q.jsx)(U.List.Section,{title:"Available",children:(0,q.jsx)(ro,{gitignoreFiles:R,selected:!1,toggleSelection:a,toggleFavorite:A,favoriteIds:d})})]})}function Hs({selected:n}){return(0,q.jsx)(U.Action.Push,{title:"Preview",icon:U.Icon.Eye,shortcut:U.Keyboard.Shortcut.Common.ToggleQuickLook,target:(0,q.jsx)(sr,{gitignoreFiles:n})})}function js({selected:n}){return(0,q.jsx)(U.Action,{title:"Paste to App",shortcut:{macOS:{modifiers:["cmd","shift"],key:"enter"},windows:{modifiers:["ctrl","shift"],key:"enter"}},icon:U.Icon.BlankDocument,onAction:()=>Ei(n)})}function $s({selected:n}){return(0,q.jsx)(U.Action,{title:"Copy to Clipboard",icon:U.Icon.Clipboard,onAction:()=>kr(n)})}
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
