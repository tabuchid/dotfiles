"use strict";var I=Object.create;var u=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var C=(e,t)=>{for(var i in t)u(e,i,{get:t[i],enumerable:!0})},c=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of x(t))!F.call(e,n)&&n!==i&&u(e,n,{get:()=>t[n],enumerable:!(s=P(t,n))||s.enumerable});return e};var p=(e,t,i)=>(i=e!=null?I(b(e)):{},c(t||!e||!e.__esModule?u(i,"default",{value:e,enumerable:!0}):i,e)),K=e=>c(u({},"__esModule",{value:!0}),e);var T={};C(T,{default:()=>A});module.exports=K(T);var r=require("@raycast/api");var a=require("@raycast/api");var m=p(require("node:process"),1),v=require("node:util"),l=require("node:child_process"),N=(0,v.promisify)(l.execFile);async function d(e,{humanReadableOutput:t=!0,signal:i}={}){if(m.default.platform!=="darwin")throw new Error("macOS only");let s=t?[]:["-ss"],n={};i&&(n.signal=i);let{stdout:S}=await N("osascript",["-e",e,s],n);return S.trim()}var y=require("@raycast/api"),o=class e{static cache=new y.Cache;static AudioInputLevelPreviousKey="audio-input-level-previous";static AudioInputLevelCurrentKey="audio-input-level-current";static AudioInputLevelDefault="50";static listeners=new Set;static get prevInputLevel(){return this.cache.get(e.AudioInputLevelPreviousKey)??e.AudioInputLevelDefault}static set prevInputLevel(t){this.cache.set(e.AudioInputLevelPreviousKey,t)}static get curInputLevel(){return this.cache.get(e.AudioInputLevelCurrentKey)??e.AudioInputLevelDefault}static set curInputLevel(t){this.cache.set(e.AudioInputLevelCurrentKey,t)}static addListener(t){this.listeners.add(t)}static removeListener(t){this.listeners.delete(t)}};var f=require("os"),L=require("child_process"),g=require("util"),w=p(require("path")),D=(0,g.promisify)(L.exec),E=(0,f.platform)()==="win32";async function h(e){if(E){let t=w.default.join(a.environment.assetsPath,"scripts","windows-set-level.ps1");await D(`powershell -ExecutionPolicy Bypass -File "${t}" -Level ${e}`),o.curInputLevel=e;return}await d(`set volume input volume ${e}`),o.curInputLevel=e}async function A(e){await(0,r.closeMainWindow)();let t=0,i=Number((0,r.getPreferenceValues)()["default-level"]),s=0;if(e.arguments.level.length!==0){if(t=Number(e.arguments.level),isNaN(t)||0>t||t>100){await(0,r.showHUD)("\u274C Level must be a number between 0 and 100");return}s=t}else{if(isNaN(i)||0>i||i>100){await(0,r.showHUD)("\u274C Default level must be a number between 0 and 100"),(0,r.openCommandPreferences)();return}s=i}let n=await(0,r.showToast)({style:r.Toast.Style.Animated,title:"Setting audio input\u2026"});try{await h(s.toString()),n.style=r.Toast.Style.Success,n.title=`Audio input set to ${s.toString()}`}catch{n.style=r.Toast.Style.Failure,n.title="Failed to set the input level"}try{await(0,r.launchCommand)({name:"mute-menu-bar",type:r.LaunchType.Background})}catch{console.log("mute-menu-bar command is not active")}}
