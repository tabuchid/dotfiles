"use strict";var uc=Object.create;var lt=Object.defineProperty;var lc=Object.getOwnPropertyDescriptor;var fc=Object.getOwnPropertyNames;var mc=Object.getPrototypeOf,dc=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pc=(e,t)=>{for(var r in t)lt(e,r,{get:t[r],enumerable:!0})},br=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of fc(t))!dc.call(e,i)&&i!==r&&lt(e,i,{get:()=>t[i],enumerable:!(n=lc(t,i))||n.enumerable});return e};var te=(e,t,r)=>(r=e!=null?uc(mc(e)):{},br(t||!e||!e.__esModule?lt(r,"default",{value:e,enumerable:!0}):r,e)),yc=e=>br(lt({},"__esModule",{value:!0}),e);var z=p(Yt=>{"use strict";Yt.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Yt.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var qr=p((Mf,Ar)=>{var me=require("constants"),hc=process.cwd,ft=null,Sc=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ft||(ft=hc.call(process)),ft};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Wt=process.chdir,process.chdir=function(e){ft=null,Wt.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Wt));var Wt;Ar.exports=wc;function wc(e){me.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(a,f,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(a,f,m,d){d&&process.nextTick(d)},e.lchownSync=function(){}),Sc==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:(function(a){function f(m,d,y){var w=Date.now(),h=0;a(m,d,function E(L){if(L&&(L.code==="EACCES"||L.code==="EPERM"||L.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){e.stat(d,function(U,fe){U&&U.code==="ENOENT"?a(m,d,E):y(L)})},h),h<100&&(h+=10);return}y&&y(L)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,a),f})(e.rename)),e.read=typeof e.read!="function"?e.read:(function(a){function f(m,d,y,w,h,E){var L;if(E&&typeof E=="function"){var U=0;L=function(fe,Be,Ue){if(fe&&fe.code==="EAGAIN"&&U<10)return U++,a.call(e,m,d,y,w,h,L);E.apply(this,arguments)}}return a.call(e,m,d,y,w,h,L)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,a),f})(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:(function(a){return function(f,m,d,y,w){for(var h=0;;)try{return a.call(e,f,m,d,y,w)}catch(E){if(E.code==="EAGAIN"&&h<10){h++;continue}throw E}}})(e.readSync);function t(a){a.lchmod=function(f,m,d){a.open(f,me.O_WRONLY|me.O_SYMLINK,m,function(y,w){if(y){d&&d(y);return}a.fchmod(w,m,function(h){a.close(w,function(E){d&&d(h||E)})})})},a.lchmodSync=function(f,m){var d=a.openSync(f,me.O_WRONLY|me.O_SYMLINK,m),y=!0,w;try{w=a.fchmodSync(d,m),y=!1}finally{if(y)try{a.closeSync(d)}catch{}else a.closeSync(d)}return w}}function r(a){me.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(f,m,d,y){a.open(f,me.O_SYMLINK,function(w,h){if(w){y&&y(w);return}a.futimes(h,m,d,function(E){a.close(h,function(L){y&&y(E||L)})})})},a.lutimesSync=function(f,m,d){var y=a.openSync(f,me.O_SYMLINK),w,h=!0;try{w=a.futimesSync(y,m,d),h=!1}finally{if(h)try{a.closeSync(y)}catch{}else a.closeSync(y)}return w}):a.futimes&&(a.lutimes=function(f,m,d,y){y&&process.nextTick(y)},a.lutimesSync=function(){})}function n(a){return a&&function(f,m,d){return a.call(e,f,m,function(y){l(y)&&(y=null),d&&d.apply(this,arguments)})}}function i(a){return a&&function(f,m){try{return a.call(e,f,m)}catch(d){if(!l(d))throw d}}}function o(a){return a&&function(f,m,d,y){return a.call(e,f,m,d,function(w){l(w)&&(w=null),y&&y.apply(this,arguments)})}}function s(a){return a&&function(f,m,d){try{return a.call(e,f,m,d)}catch(y){if(!l(y))throw y}}}function c(a){return a&&function(f,m,d){typeof m=="function"&&(d=m,m=null);function y(w,h){h&&(h.uid<0&&(h.uid+=4294967296),h.gid<0&&(h.gid+=4294967296)),d&&d.apply(this,arguments)}return m?a.call(e,f,m,y):a.call(e,f,y)}}function u(a){return a&&function(f,m){var d=m?a.call(e,f,m):a.call(e,f);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function l(a){if(!a||a.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(a.code==="EINVAL"||a.code==="EPERM"))}}});var Lr=p((Lf,Mr)=>{var _r=require("stream").Stream;Mr.exports=gc;function gc(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);_r.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),c=0,u=s.length;c<u;c++){var l=s[c];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(a,f){if(a){o.emit("error",a),o.readable=!1;return}o.fd=f,o.emit("open",f),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);_r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,c=o.length;s<c;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Gr=p(($f,$r)=>{"use strict";$r.exports=Dc;var Ec=Object.getPrototypeOf||function(e){return e.__proto__};function Dc(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Ec(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var H=p((Gf,Kt)=>{var N=require("fs"),Oc=qr(),xc=Lr(),Ic=Gr(),mt=require("util"),V,pt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(V=Symbol.for("graceful-fs.queue"),pt=Symbol.for("graceful-fs.previous")):(V="___graceful-fs.queue",pt="___graceful-fs.previous");function Cc(){}function Ur(e,t){Object.defineProperty(e,V,{get:function(){return t}})}var Ee=Cc;mt.debuglog?Ee=mt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ee=function(){var e=mt.format.apply(mt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});N[V]||(jr=global[V]||[],Ur(N,jr),N.close=(function(e){function t(r,n){return e.call(N,r,function(i){i||Br(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,pt,{value:e}),t})(N.close),N.closeSync=(function(e){function t(r){e.apply(N,arguments),Br()}return Object.defineProperty(t,pt,{value:e}),t})(N.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ee(N[V]),require("assert").equal(N[V].length,0)}));var jr;global[V]||Ur(global,N[V]);Kt.exports=Jt(Ic(N));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!N.__patched&&(Kt.exports=Jt(N),N.__patched=!0);function Jt(e){Oc(e),e.gracefulify=Jt,e.createReadStream=Be,e.createWriteStream=Ue;var t=e.readFile;e.readFile=r;function r(g,x,O){return typeof x=="function"&&(O=x,x=null),Y(g,x,O);function Y(W,G,T,b){return t(W,G,function(v){v&&(v.code==="EMFILE"||v.code==="ENFILE")?Pe([Y,[W,G,T],v,b||Date.now(),Date.now()]):typeof T=="function"&&T.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(g,x,O,Y){return typeof O=="function"&&(Y=O,O=null),W(g,x,O,Y);function W(G,T,b,v,J){return n(G,T,b,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?Pe([W,[G,T,b,v],k,J||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(g,x,O,Y){return typeof O=="function"&&(Y=O,O=null),W(g,x,O,Y);function W(G,T,b,v,J){return o(G,T,b,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?Pe([W,[G,T,b,v],k,J||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=u);function u(g,x,O,Y){return typeof O=="function"&&(Y=O,O=0),W(g,x,O,Y);function W(G,T,b,v,J){return c(G,T,b,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?Pe([W,[G,T,b,v],k,J||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}var l=e.readdir;e.readdir=f;var a=/^v[0-5]\./;function f(g,x,O){typeof x=="function"&&(O=x,x=null);var Y=a.test(process.version)?function(T,b,v,J){return l(T,W(T,b,v,J))}:function(T,b,v,J){return l(T,b,W(T,b,v,J))};return Y(g,x,O);function W(G,T,b,v){return function(J,k){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Pe([Y,[G,T,b],J,v||Date.now(),Date.now()]):(k&&k.sort&&k.sort(),typeof b=="function"&&b.call(this,J,k))}}}if(process.version.substr(0,4)==="v0.8"){var m=xc(e);E=m.ReadStream,U=m.WriteStream}var d=e.ReadStream;d&&(E.prototype=Object.create(d.prototype),E.prototype.open=L);var y=e.WriteStream;y&&(U.prototype=Object.create(y.prototype),U.prototype.open=fe),Object.defineProperty(e,"ReadStream",{get:function(){return E},set:function(g){E=g},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return U},set:function(g){U=g},enumerable:!0,configurable:!0});var w=E;Object.defineProperty(e,"FileReadStream",{get:function(){return w},set:function(g){w=g},enumerable:!0,configurable:!0});var h=U;Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(g){h=g},enumerable:!0,configurable:!0});function E(g,x){return this instanceof E?(d.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function L(){var g=this;Ut(g.path,g.flags,g.mode,function(x,O){x?(g.autoClose&&g.destroy(),g.emit("error",x)):(g.fd=O,g.emit("open",O),g.read())})}function U(g,x){return this instanceof U?(y.apply(this,arguments),this):U.apply(Object.create(U.prototype),arguments)}function fe(){var g=this;Ut(g.path,g.flags,g.mode,function(x,O){x?(g.destroy(),g.emit("error",x)):(g.fd=O,g.emit("open",O))})}function Be(g,x){return new e.ReadStream(g,x)}function Ue(g,x){return new e.WriteStream(g,x)}var ut=e.open;e.open=Ut;function Ut(g,x,O,Y){return typeof O=="function"&&(Y=O,O=null),W(g,x,O,Y);function W(G,T,b,v,J){return ut(G,T,b,function(k,bf){k&&(k.code==="EMFILE"||k.code==="ENFILE")?Pe([W,[G,T,b,v],k,J||Date.now(),Date.now()]):typeof v=="function"&&v.apply(this,arguments)})}}return e}function Pe(e){Ee("ENQUEUE",e[0].name,e[1]),N[V].push(e),Vt()}var dt;function Br(){for(var e=Date.now(),t=0;t<N[V].length;++t)N[V][t].length>2&&(N[V][t][3]=e,N[V][t][4]=e);Vt()}function Vt(){if(clearTimeout(dt),dt=void 0,N[V].length!==0){var e=N[V].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)Ee("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Ee("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var c=Date.now()-o,u=Math.max(o-i,1),l=Math.min(u*1.2,100);c>=l?(Ee("RETRY",t.name,r),t.apply(null,r.concat([i]))):N[V].push(e)}dt===void 0&&(dt=setTimeout(Vt,0))}}});var De=p(de=>{"use strict";var Yr=z().fromCallback,Q=H(),vc=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof Q[e]=="function");Object.assign(de,Q);vc.forEach(e=>{de[e]=Yr(Q[e])});de.exists=function(e,t){return typeof t=="function"?Q.exists(e,t):new Promise(r=>Q.exists(e,r))};de.read=function(e,t,r,n,i,o){return typeof o=="function"?Q.read(e,t,r,n,i,o):new Promise((s,c)=>{Q.read(e,t,r,n,i,(u,l,a)=>{if(u)return c(u);s({bytesRead:l,buffer:a})})})};de.write=function(e,t,...r){return typeof r[r.length-1]=="function"?Q.write(e,t,...r):new Promise((n,i)=>{Q.write(e,t,...r,(o,s,c)=>{if(o)return i(o);n({bytesWritten:s,buffer:c})})})};typeof Q.writev=="function"&&(de.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?Q.writev(e,t,...r):new Promise((n,i)=>{Q.writev(e,t,...r,(o,s,c)=>{if(o)return i(o);n({bytesWritten:s,buffers:c})})})});typeof Q.realpath.native=="function"?de.realpath.native=Yr(Q.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Jr=p((Bf,Wr)=>{"use strict";var Pc=require("path");Wr.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Pc.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var Xr=p((Uf,Ht)=>{"use strict";var Vr=De(),{checkPath:Kr}=Jr(),Hr=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Ht.exports.makeDir=async(e,t)=>(Kr(e),Vr.mkdir(e,{mode:Hr(t),recursive:!0}));Ht.exports.makeDirSync=(e,t)=>(Kr(e),Vr.mkdirSync(e,{mode:Hr(t),recursive:!0}))});var ie=p((Yf,zr)=>{"use strict";var kc=z().fromPromise,{makeDir:Fc,makeDirSync:Xt}=Xr(),zt=kc(Fc);zr.exports={mkdirs:zt,mkdirsSync:Xt,mkdirp:zt,mkdirpSync:Xt,ensureDir:zt,ensureDirSync:Xt}});var pe=p((Wf,Zr)=>{"use strict";var Tc=z().fromPromise,Qr=De();function Nc(e){return Qr.access(e).then(()=>!0).catch(()=>!1)}Zr.exports={pathExists:Tc(Nc),pathExistsSync:Qr.existsSync}});var Qt=p((Jf,en)=>{"use strict";var ke=H();function Rc(e,t,r,n){ke.open(e,"r+",(i,o)=>{if(i)return n(i);ke.futimes(o,t,r,s=>{ke.close(o,c=>{n&&n(s||c)})})})}function bc(e,t,r){let n=ke.openSync(e,"r+");return ke.futimesSync(n,t,r),ke.closeSync(n)}en.exports={utimesMillis:Rc,utimesMillisSync:bc}});var Oe=p((Vf,nn)=>{"use strict";var Fe=De(),j=require("path"),Ac=require("util");function qc(e,t,r){let n=r.dereference?i=>Fe.stat(i,{bigint:!0}):i=>Fe.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function _c(e,t,r){let n,i=r.dereference?s=>Fe.statSync(s,{bigint:!0}):s=>Fe.lstatSync(s,{bigint:!0}),o=i(e);try{n=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Mc(e,t,r,n,i){Ac.callbackify(qc)(e,t,n,(o,s)=>{if(o)return i(o);let{srcStat:c,destStat:u}=s;if(u){if(Ye(c,u)){let l=j.basename(e),a=j.basename(t);return r==="move"&&l!==a&&l.toLowerCase()===a.toLowerCase()?i(null,{srcStat:c,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!c.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return c.isDirectory()&&Zt(e,t)?i(new Error(yt(e,t,r))):i(null,{srcStat:c,destStat:u})})}function Lc(e,t,r,n){let{srcStat:i,destStat:o}=_c(e,t,n);if(o){if(Ye(i,o)){let s=j.basename(e),c=j.basename(t);if(r==="move"&&s!==c&&s.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Zt(e,t))throw new Error(yt(e,t,r));return{srcStat:i,destStat:o}}function tn(e,t,r,n,i){let o=j.resolve(j.dirname(e)),s=j.resolve(j.dirname(r));if(s===o||s===j.parse(s).root)return i();Fe.stat(s,{bigint:!0},(c,u)=>c?c.code==="ENOENT"?i():i(c):Ye(t,u)?i(new Error(yt(e,r,n))):tn(e,t,s,n,i))}function rn(e,t,r,n){let i=j.resolve(j.dirname(e)),o=j.resolve(j.dirname(r));if(o===i||o===j.parse(o).root)return;let s;try{s=Fe.statSync(o,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ye(t,s))throw new Error(yt(e,r,n));return rn(e,t,o,n)}function Ye(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Zt(e,t){let r=j.resolve(e).split(j.sep).filter(i=>i),n=j.resolve(t).split(j.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function yt(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}nn.exports={checkPaths:Mc,checkPathsSync:Lc,checkParentPaths:tn,checkParentPathsSync:rn,isSrcSubdir:Zt,areIdentical:Ye}});var mn=p((Kf,fn)=>{"use strict";var Z=H(),We=require("path"),$c=ie().mkdirs,Gc=pe().pathExists,jc=Qt().utimesMillis,Je=Oe();function Bc(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Je.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:c}=o;Je.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?cn(on,c,e,t,r,n):on(c,e,t,r,n))})}function on(e,t,r,n,i){let o=We.dirname(r);Gc(o,(s,c)=>{if(s)return i(s);if(c)return ht(e,t,r,n,i);$c(o,u=>u?i(u):ht(e,t,r,n,i))})}function cn(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function Uc(e,t,r,n,i){return n.filter?cn(ht,e,t,r,n,i):ht(e,t,r,n,i)}function ht(e,t,r,n,i){(n.dereference?Z.stat:Z.lstat)(t,(s,c)=>s?i(s):c.isDirectory()?Xc(c,e,t,r,n,i):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?Yc(c,e,t,r,n,i):c.isSymbolicLink()?Zc(e,t,r,n,i):c.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):c.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function Yc(e,t,r,n,i,o){return t?Wc(e,r,n,i,o):an(e,r,n,i,o)}function Wc(e,t,r,n,i){if(n.overwrite)Z.unlink(r,o=>o?i(o):an(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function an(e,t,r,n,i){Z.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?Jc(e.mode,t,r,i):St(r,e.mode,i))}function Jc(e,t,r,n){return Vc(e)?Kc(r,e,i=>i?n(i):sn(e,t,r,n)):sn(e,t,r,n)}function Vc(e){return(e&128)===0}function Kc(e,t,r){return St(e,t|128,r)}function sn(e,t,r,n){Hc(t,r,i=>i?n(i):St(r,e,n))}function St(e,t,r){return Z.chmod(e,t,r)}function Hc(e,t,r){Z.stat(e,(n,i)=>n?r(n):jc(t,i.atime,i.mtime,r))}function Xc(e,t,r,n,i,o){return t?un(r,n,i,o):zc(e.mode,r,n,i,o)}function zc(e,t,r,n,i){Z.mkdir(r,o=>{if(o)return i(o);un(t,r,n,s=>s?i(s):St(r,e,i))})}function un(e,t,r,n){Z.readdir(e,(i,o)=>i?n(i):ln(o,e,t,r,n))}function ln(e,t,r,n,i){let o=e.pop();return o?Qc(e,o,t,r,n,i):i()}function Qc(e,t,r,n,i,o){let s=We.join(r,t),c=We.join(n,t);Je.checkPaths(s,c,"copy",i,(u,l)=>{if(u)return o(u);let{destStat:a}=l;Uc(a,s,c,i,f=>f?o(f):ln(e,r,n,i,o))})}function Zc(e,t,r,n,i){Z.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=We.resolve(process.cwd(),s)),e)Z.readlink(r,(c,u)=>c?c.code==="EINVAL"||c.code==="UNKNOWN"?Z.symlink(s,r,i):i(c):(n.dereference&&(u=We.resolve(process.cwd(),u)),Je.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&Je.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):ea(s,r,i)));else return Z.symlink(s,r,i)})}function ea(e,t,r){Z.unlink(t,n=>n?r(n):Z.symlink(e,t,r))}fn.exports=Bc});var Sn=p((Hf,hn)=>{"use strict";var K=H(),Ve=require("path"),ta=ie().mkdirsSync,ra=Qt().utimesMillisSync,Ke=Oe();function na(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=Ke.checkPathsSync(e,t,"copy",r);return Ke.checkParentPathsSync(e,n,t,"copy"),ia(i,e,t,r)}function ia(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=Ve.dirname(r);return K.existsSync(i)||ta(i),dn(e,t,r,n)}function oa(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return dn(e,t,r,n)}function dn(e,t,r,n){let o=(n.dereference?K.statSync:K.lstatSync)(t);if(o.isDirectory())return ma(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return sa(o,e,t,r,n);if(o.isSymbolicLink())return ya(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function sa(e,t,r,n,i){return t?ca(e,r,n,i):pn(e,r,n,i)}function ca(e,t,r,n){if(n.overwrite)return K.unlinkSync(r),pn(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function pn(e,t,r,n){return K.copyFileSync(t,r),n.preserveTimestamps&&aa(e.mode,t,r),er(r,e.mode)}function aa(e,t,r){return ua(e)&&la(r,e),fa(t,r)}function ua(e){return(e&128)===0}function la(e,t){return er(e,t|128)}function er(e,t){return K.chmodSync(e,t)}function fa(e,t){let r=K.statSync(e);return ra(t,r.atime,r.mtime)}function ma(e,t,r,n,i){return t?yn(r,n,i):da(e.mode,r,n,i)}function da(e,t,r,n){return K.mkdirSync(r),yn(t,r,n),er(r,e)}function yn(e,t,r){K.readdirSync(e).forEach(n=>pa(n,e,t,r))}function pa(e,t,r,n){let i=Ve.join(t,e),o=Ve.join(r,e),{destStat:s}=Ke.checkPathsSync(i,o,"copy",n);return oa(s,i,o,n)}function ya(e,t,r,n){let i=K.readlinkSync(t);if(n.dereference&&(i=Ve.resolve(process.cwd(),i)),e){let o;try{o=K.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return K.symlinkSync(i,r);throw s}if(n.dereference&&(o=Ve.resolve(process.cwd(),o)),Ke.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(K.statSync(r).isDirectory()&&Ke.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ha(i,r)}else return K.symlinkSync(i,r)}function ha(e,t){return K.unlinkSync(t),K.symlinkSync(e,t)}hn.exports=na});var wt=p((Xf,wn)=>{"use strict";var Sa=z().fromCallback;wn.exports={copy:Sa(mn()),copySync:Sn()}});var Pn=p((zf,vn)=>{"use strict";var gn=H(),xn=require("path"),C=require("assert"),He=process.platform==="win32";function In(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||gn[r],r=r+"Sync",e[r]=e[r]||gn[r]}),e.maxBusyTries=e.maxBusyTries||3}function tr(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),C(e,"rimraf: missing path"),C.strictEqual(typeof e,"string","rimraf: path should be a string"),C.strictEqual(typeof r,"function","rimraf: callback function required"),C(t,"rimraf: invalid options argument provided"),C.strictEqual(typeof t,"object","rimraf: options should be object"),In(t),En(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>En(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function En(e,t,r){C(e),C(t),C(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&He)return Dn(e,t,n,r);if(i&&i.isDirectory())return gt(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return He?Dn(e,t,o,r):gt(e,t,o,r);if(o.code==="EISDIR")return gt(e,t,o,r)}return r(o)})})}function Dn(e,t,r,n){C(e),C(t),C(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?gt(e,t,r,n):t.unlink(e,n)})})}function On(e,t,r){let n;C(e),C(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Et(e,t,r):t.unlinkSync(e)}function gt(e,t,r,n){C(e),C(t),C(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?wa(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function wa(e,t,r){C(e),C(t),C(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(c=>{tr(xn.join(e,c),t,u=>{if(!s){if(u)return r(s=u);--o===0&&t.rmdir(e,r)}})})})}function Cn(e,t){let r;t=t||{},In(t),C(e,"rimraf: missing path"),C.strictEqual(typeof e,"string","rimraf: path should be a string"),C(t,"rimraf: missing options"),C.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&He&&On(e,t,n)}try{r&&r.isDirectory()?Et(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return He?On(e,t,n):Et(e,t,n);if(n.code!=="EISDIR")throw n;Et(e,t,n)}}function Et(e,t,r){C(e),C(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")ga(e,t);else if(n.code!=="ENOENT")throw n}}function ga(e,t){if(C(e),C(t),t.readdirSync(e).forEach(r=>Cn(xn.join(e,r),t)),He){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}vn.exports=tr;tr.sync=Cn});var Xe=p((Qf,Fn)=>{"use strict";var Dt=H(),Ea=z().fromCallback,kn=Pn();function Da(e,t){if(Dt.rm)return Dt.rm(e,{recursive:!0,force:!0},t);kn(e,t)}function Oa(e){if(Dt.rmSync)return Dt.rmSync(e,{recursive:!0,force:!0});kn.sync(e)}Fn.exports={remove:Ea(Da),removeSync:Oa}});var Mn=p((Zf,_n)=>{"use strict";var xa=z().fromPromise,Rn=De(),bn=require("path"),An=ie(),qn=Xe(),Tn=xa(async function(t){let r;try{r=await Rn.readdir(t)}catch{return An.mkdirs(t)}return Promise.all(r.map(n=>qn.remove(bn.join(t,n))))});function Nn(e){let t;try{t=Rn.readdirSync(e)}catch{return An.mkdirsSync(e)}t.forEach(r=>{r=bn.join(e,r),qn.removeSync(r)})}_n.exports={emptyDirSync:Nn,emptydirSync:Nn,emptyDir:Tn,emptydir:Tn}});var jn=p((em,Gn)=>{"use strict";var Ia=z().fromCallback,Ln=require("path"),ye=H(),$n=ie();function Ca(e,t){function r(){ye.writeFile(e,"",n=>{if(n)return t(n);t()})}ye.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Ln.dirname(e);ye.stat(o,(s,c)=>{if(s)return s.code==="ENOENT"?$n.mkdirs(o,u=>{if(u)return t(u);r()}):t(s);c.isDirectory()?r():ye.readdir(o,u=>{if(u)return t(u)})})})}function va(e){let t;try{t=ye.statSync(e)}catch{}if(t&&t.isFile())return;let r=Ln.dirname(e);try{ye.statSync(r).isDirectory()||ye.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")$n.mkdirsSync(r);else throw n}ye.writeFileSync(e,"")}Gn.exports={createFile:Ia(Ca),createFileSync:va}});var Jn=p((tm,Wn)=>{"use strict";var Pa=z().fromCallback,Bn=require("path"),he=H(),Un=ie(),ka=pe().pathExists,{areIdentical:Yn}=Oe();function Fa(e,t,r){function n(i,o){he.link(i,o,s=>{if(s)return r(s);r(null)})}he.lstat(t,(i,o)=>{he.lstat(e,(s,c)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Yn(c,o))return r(null);let u=Bn.dirname(t);ka(u,(l,a)=>{if(l)return r(l);if(a)return n(e,t);Un.mkdirs(u,f=>{if(f)return r(f);n(e,t)})})})})}function Ta(e,t){let r;try{r=he.lstatSync(t)}catch{}try{let o=he.lstatSync(e);if(r&&Yn(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Bn.dirname(t);return he.existsSync(n)||Un.mkdirsSync(n),he.linkSync(e,t)}Wn.exports={createLink:Pa(Fa),createLinkSync:Ta}});var Kn=p((rm,Vn)=>{"use strict";var Se=require("path"),ze=H(),Na=pe().pathExists;function Ra(e,t,r){if(Se.isAbsolute(e))return ze.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=Se.dirname(t),i=Se.join(n,e);return Na(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):ze.lstat(e,c=>c?(c.message=c.message.replace("lstat","ensureSymlink"),r(c)):r(null,{toCwd:e,toDst:Se.relative(n,e)})))}}function ba(e,t){let r;if(Se.isAbsolute(e)){if(r=ze.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=Se.dirname(t),i=Se.join(n,e);if(r=ze.existsSync(i),r)return{toCwd:i,toDst:e};if(r=ze.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Se.relative(n,e)}}}Vn.exports={symlinkPaths:Ra,symlinkPathsSync:ba}});var zn=p((nm,Xn)=>{"use strict";var Hn=H();function Aa(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);Hn.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function qa(e,t){let r;if(t)return t;try{r=Hn.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Xn.exports={symlinkType:Aa,symlinkTypeSync:qa}});var oi=p((im,ii)=>{"use strict";var _a=z().fromCallback,Zn=require("path"),oe=De(),ei=ie(),Ma=ei.mkdirs,La=ei.mkdirsSync,ti=Kn(),$a=ti.symlinkPaths,Ga=ti.symlinkPathsSync,ri=zn(),ja=ri.symlinkType,Ba=ri.symlinkTypeSync,Ua=pe().pathExists,{areIdentical:ni}=Oe();function Ya(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,oe.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([oe.stat(e),oe.stat(t)]).then(([s,c])=>{if(ni(s,c))return n(null);Qn(e,t,r,n)}):Qn(e,t,r,n)})}function Qn(e,t,r,n){$a(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,ja(o.toCwd,r,(s,c)=>{if(s)return n(s);let u=Zn.dirname(t);Ua(u,(l,a)=>{if(l)return n(l);if(a)return oe.symlink(e,t,c,n);Ma(u,f=>{if(f)return n(f);oe.symlink(e,t,c,n)})})})})}function Wa(e,t,r){let n;try{n=oe.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let c=oe.statSync(e),u=oe.statSync(t);if(ni(c,u))return}let i=Ga(e,t);e=i.toDst,r=Ba(i.toCwd,r);let o=Zn.dirname(t);return oe.existsSync(o)||La(o),oe.symlinkSync(e,t,r)}ii.exports={createSymlink:_a(Ya),createSymlinkSync:Wa}});var di=p((om,mi)=>{"use strict";var{createFile:si,createFileSync:ci}=jn(),{createLink:ai,createLinkSync:ui}=Jn(),{createSymlink:li,createSymlinkSync:fi}=oi();mi.exports={createFile:si,createFileSync:ci,ensureFile:si,ensureFileSync:ci,createLink:ai,createLinkSync:ui,ensureLink:ai,ensureLinkSync:ui,createSymlink:li,createSymlinkSync:fi,ensureSymlink:li,ensureSymlinkSync:fi}});var Ot=p((sm,pi)=>{function Ja(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Va(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}pi.exports={stringify:Ja,stripBom:Va}});var wi=p((cm,Si)=>{var Te;try{Te=H()}catch{Te=require("fs")}var xt=z(),{stringify:yi,stripBom:hi}=Ot();async function Ka(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Te,n="throws"in t?t.throws:!0,i=await xt.fromCallback(r.readFile)(e,t);i=hi(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(n)throw s.message=`${e}: ${s.message}`,s;return null}return o}var Ha=xt.fromPromise(Ka);function Xa(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Te,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=hi(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function za(e,t,r={}){let n=r.fs||Te,i=yi(t,r);await xt.fromCallback(n.writeFile)(e,i,r)}var Qa=xt.fromPromise(za);function Za(e,t,r={}){let n=r.fs||Te,i=yi(t,r);return n.writeFileSync(e,i,r)}var eu={readFile:Ha,readFileSync:Xa,writeFile:Qa,writeFileSync:Za};Si.exports=eu});var Ei=p((am,gi)=>{"use strict";var It=wi();gi.exports={readJson:It.readFile,readJsonSync:It.readFileSync,writeJson:It.writeFile,writeJsonSync:It.writeFileSync}});var Ct=p((um,xi)=>{"use strict";var tu=z().fromCallback,Qe=H(),Di=require("path"),Oi=ie(),ru=pe().pathExists;function nu(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Di.dirname(e);ru(i,(o,s)=>{if(o)return n(o);if(s)return Qe.writeFile(e,t,r,n);Oi.mkdirs(i,c=>{if(c)return n(c);Qe.writeFile(e,t,r,n)})})}function iu(e,...t){let r=Di.dirname(e);if(Qe.existsSync(r))return Qe.writeFileSync(e,...t);Oi.mkdirsSync(r),Qe.writeFileSync(e,...t)}xi.exports={outputFile:tu(nu),outputFileSync:iu}});var Ci=p((lm,Ii)=>{"use strict";var{stringify:ou}=Ot(),{outputFile:su}=Ct();async function cu(e,t,r={}){let n=ou(t,r);await su(e,n,r)}Ii.exports=cu});var Pi=p((fm,vi)=>{"use strict";var{stringify:au}=Ot(),{outputFileSync:uu}=Ct();function lu(e,t,r){let n=au(t,r);uu(e,n,r)}vi.exports=lu});var Fi=p((mm,ki)=>{"use strict";var fu=z().fromPromise,X=Ei();X.outputJson=fu(Ci());X.outputJsonSync=Pi();X.outputJSON=X.outputJson;X.outputJSONSync=X.outputJsonSync;X.writeJSON=X.writeJson;X.writeJSONSync=X.writeJsonSync;X.readJSON=X.readJson;X.readJSONSync=X.readJsonSync;ki.exports=X});var Ai=p((dm,bi)=>{"use strict";var mu=H(),nr=require("path"),du=wt().copy,Ri=Xe().remove,pu=ie().mkdirp,yu=pe().pathExists,Ti=Oe();function hu(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;Ti.checkPaths(e,t,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:c,isChangingCase:u=!1}=s;Ti.checkParentPaths(e,c,t,"move",l=>{if(l)return n(l);if(Su(t))return Ni(e,t,i,u,n);pu(nr.dirname(t),a=>a?n(a):Ni(e,t,i,u,n))})})}function Su(e){let t=nr.dirname(e);return nr.parse(t).root===t}function Ni(e,t,r,n,i){if(n)return rr(e,t,r,i);if(r)return Ri(t,o=>o?i(o):rr(e,t,r,i));yu(t,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):rr(e,t,r,i))}function rr(e,t,r,n){mu.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):wu(e,t,r,n):n())}function wu(e,t,r,n){du(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Ri(e,n))}bi.exports=hu});var $i=p((pm,Li)=>{"use strict";var _i=H(),or=require("path"),gu=wt().copySync,Mi=Xe().removeSync,Eu=ie().mkdirpSync,qi=Oe();function Du(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=qi.checkPathsSync(e,t,"move",r);return qi.checkParentPathsSync(e,i,t,"move"),Ou(t)||Eu(or.dirname(t)),xu(e,t,n,o)}function Ou(e){let t=or.dirname(e);return or.parse(t).root===t}function xu(e,t,r,n){if(n)return ir(e,t,r);if(r)return Mi(t),ir(e,t,r);if(_i.existsSync(t))throw new Error("dest already exists.");return ir(e,t,r)}function ir(e,t,r){try{_i.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Iu(e,t,r)}}function Iu(e,t,r){return gu(e,t,{overwrite:r,errorOnExist:!0}),Mi(e)}Li.exports=Du});var ji=p((ym,Gi)=>{"use strict";var Cu=z().fromCallback;Gi.exports={move:Cu(Ai()),moveSync:$i()}});var Ne=p((hm,Bi)=>{"use strict";Bi.exports={...De(),...wt(),...Mn(),...di(),...Fi(),...ie(),...ji(),...Ct(),...pe(),...Xe()}});var Vi=p((Sm,Ji)=>{Ji.exports=Wi;Wi.sync=Pu;var Ui=require("fs");function vu(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function Yi(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:vu(t,r)}function Wi(e,t,r){Ui.stat(e,function(n,i){r(n,n?!1:Yi(i,e,t))})}function Pu(e,t){return Yi(Ui.statSync(e),e,t)}});var Qi=p((wm,zi)=>{zi.exports=Hi;Hi.sync=ku;var Ki=require("fs");function Hi(e,t,r){Ki.stat(e,function(n,i){r(n,n?!1:Xi(i,t))})}function ku(e,t){return Xi(Ki.statSync(e),t)}function Xi(e,t){return e.isFile()&&Fu(e,t)}function Fu(e,t){var r=e.mode,n=e.uid,i=e.gid,o=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),l=parseInt("001",8),a=c|u,f=r&l||r&u&&i===s||r&c&&n===o||r&a&&o===0;return f}});var eo=p((Em,Zi)=>{var gm=require("fs"),vt;process.platform==="win32"||global.TESTING_WINDOWS?vt=Vi():vt=Qi();Zi.exports=sr;sr.sync=Tu;function sr(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){sr(e,t||{},function(o,s){o?i(o):n(s)})})}vt(e,t||{},function(n,i){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,i=!1),r(n,i)})}function Tu(e,t){try{return vt.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var co=p((Dm,so)=>{var Re=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",to=require("path"),Nu=Re?";":":",ro=eo(),no=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),io=(e,t)=>{let r=t.colon||Nu,n=e.match(/\//)||Re&&e.match(/\\/)?[""]:[...Re?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],i=Re?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Re?i.split(r):[""];return Re&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},oo=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:i,pathExtExe:o}=io(e,t),s=[],c=l=>new Promise((a,f)=>{if(l===n.length)return t.all&&s.length?a(s):f(no(e));let m=n[l],d=/^".*"$/.test(m)?m.slice(1,-1):m,y=to.join(d,e),w=!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+y:y;a(u(w,l,0))}),u=(l,a,f)=>new Promise((m,d)=>{if(f===i.length)return m(c(a+1));let y=i[f];ro(l+y,{pathExt:o},(w,h)=>{if(!w&&h)if(t.all)s.push(l+y);else return m(l+y);return m(u(l,a,f+1))})});return r?c(0).then(l=>r(null,l),r):c(0)},Ru=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=io(e,t),o=[];for(let s=0;s<r.length;s++){let c=r[s],u=/^".*"$/.test(c)?c.slice(1,-1):c,l=to.join(u,e),a=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let f=0;f<n.length;f++){let m=a+n[f];try{if(ro.sync(m,{pathExt:i}))if(t.all)o.push(m);else return m}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw no(e)};so.exports=oo;oo.sync=Ru});var ar=p((Om,cr)=>{"use strict";var ao=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};cr.exports=ao;cr.exports.default=ao});var mo=p((xm,fo)=>{"use strict";var uo=require("path"),bu=co(),Au=ar();function lo(e,t){let r=e.options.env||process.env,n=process.cwd(),i=e.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch{}let s;try{s=bu.sync(e.command,{path:r[Au({env:r})],pathExt:t?uo.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=uo.resolve(i?e.options.cwd:"",s)),s}function qu(e){return lo(e)||lo(e,!0)}fo.exports=qu});var po=p((Im,lr)=>{"use strict";var ur=/([()\][%!^"`<>&|;, *?])/g;function _u(e){return e=e.replace(ur,"^$1"),e}function Mu(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(ur,"^$1"),t&&(e=e.replace(ur,"^$1")),e}lr.exports.command=_u;lr.exports.argument=Mu});var ho=p((Cm,yo)=>{"use strict";yo.exports=/^#!(.*)/});var wo=p((vm,So)=>{"use strict";var Lu=ho();So.exports=(e="")=>{let t=e.match(Lu);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Eo=p((Pm,go)=>{"use strict";var fr=require("fs"),$u=wo();function Gu(e){let r=Buffer.alloc(150),n;try{n=fr.openSync(e,"r"),fr.readSync(n,r,0,150,0),fr.closeSync(n)}catch{}return $u(r.toString())}go.exports=Gu});var Io=p((km,xo)=>{"use strict";var ju=require("path"),Do=mo(),Oo=po(),Bu=Eo(),Uu=process.platform==="win32",Yu=/\.(?:com|exe)$/i,Wu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ju(e){e.file=Do(e);let t=e.file&&Bu(e.file);return t?(e.args.unshift(e.file),e.command=t,Do(e)):e.file}function Vu(e){if(!Uu)return e;let t=Ju(e),r=!Yu.test(t);if(e.options.forceShell||r){let n=Wu.test(t);e.command=ju.normalize(e.command),e.command=Oo.command(e.command),e.args=e.args.map(o=>Oo.argument(o,n));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Ku(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:Vu(n)}xo.exports=Ku});var Po=p((Fm,vo)=>{"use strict";var mr=process.platform==="win32";function dr(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Hu(e,t){if(!mr)return;let r=e.emit;e.emit=function(n,i){if(n==="exit"){let o=Co(i,t);if(o)return r.call(e,"error",o)}return r.apply(e,arguments)}}function Co(e,t){return mr&&e===1&&!t.file?dr(t.original,"spawn"):null}function Xu(e,t){return mr&&e===1&&!t.file?dr(t.original,"spawnSync"):null}vo.exports={hookChildProcess:Hu,verifyENOENT:Co,verifyENOENTSync:Xu,notFoundError:dr}});var To=p((Tm,be)=>{"use strict";var ko=require("child_process"),pr=Io(),yr=Po();function Fo(e,t,r){let n=pr(e,t,r),i=ko.spawn(n.command,n.args,n.options);return yr.hookChildProcess(i,n),i}function zu(e,t,r){let n=pr(e,t,r),i=ko.spawnSync(n.command,n.args,n.options);return i.error=i.error||yr.verifyENOENTSync(i.status,n),i}be.exports=Fo;be.exports.spawn=Fo;be.exports.sync=zu;be.exports._parse=pr;be.exports._enoent=yr});var Ro=p((Nm,No)=>{"use strict";No.exports=e=>{let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}});var qo=p((Rm,et)=>{"use strict";var Ze=require("path"),bo=ar(),Ao=e=>{e={cwd:process.cwd(),path:process.env[bo()],execPath:process.execPath,...e};let t,r=Ze.resolve(e.cwd),n=[];for(;t!==r;)n.push(Ze.join(r,"node_modules/.bin")),t=r,r=Ze.resolve(r,"..");let i=Ze.resolve(e.cwd,e.execPath,"..");return n.push(i),n.concat(e.path).join(Ze.delimiter)};et.exports=Ao;et.exports.default=Ao;et.exports.env=e=>{e={env:process.env,...e};let t={...e.env},r=bo({env:t});return e.path=t[r],t[r]=et.exports(e),t}});var Mo=p((bm,hr)=>{"use strict";var _o=(e,t)=>{for(let r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};hr.exports=_o;hr.exports.default=_o});var $o=p((Am,kt)=>{"use strict";var Qu=Mo(),Pt=new WeakMap,Lo=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,i=e.displayName||e.name||"<anonymous>",o=function(...s){if(Pt.set(o,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return Qu(o,e),Pt.set(o,n),o};kt.exports=Lo;kt.exports.default=Lo;kt.exports.callCount=e=>{if(!Pt.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Pt.get(e)}});var Go=p(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.SIGNALS=void 0;var Zu=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Ft.SIGNALS=Zu});var Sr=p(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.SIGRTMAX=Ae.getRealtimeSignals=void 0;var el=function(){let e=Bo-jo+1;return Array.from({length:e},tl)};Ae.getRealtimeSignals=el;var tl=function(e,t){return{name:`SIGRT${t+1}`,number:jo+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},jo=34,Bo=64;Ae.SIGRTMAX=Bo});var Uo=p(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.getSignals=void 0;var rl=require("os"),nl=Go(),il=Sr(),ol=function(){let e=(0,il.getRealtimeSignals)();return[...nl.SIGNALS,...e].map(sl)};Tt.getSignals=ol;var sl=function({name:e,number:t,description:r,action:n,forced:i=!1,standard:o}){let{signals:{[e]:s}}=rl.constants,c=s!==void 0;return{name:e,number:c?s:t,description:r,supported:c,action:n,forced:i,standard:o}}});var Wo=p(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.signalsByNumber=qe.signalsByName=void 0;var cl=require("os"),Yo=Uo(),al=Sr(),ul=function(){return(0,Yo.getSignals)().reduce(ll,{})},ll=function(e,{name:t,number:r,description:n,supported:i,action:o,forced:s,standard:c}){return{...e,[t]:{name:t,number:r,description:n,supported:i,action:o,forced:s,standard:c}}},fl=ul();qe.signalsByName=fl;var ml=function(){let e=(0,Yo.getSignals)(),t=al.SIGRTMAX+1,r=Array.from({length:t},(n,i)=>dl(i,e));return Object.assign({},...r)},dl=function(e,t){let r=pl(e,t);if(r===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:c,standard:u}=r;return{[e]:{name:n,number:e,description:i,supported:o,action:s,forced:c,standard:u}}},pl=function(e,t){let r=t.find(({name:n})=>cl.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},yl=ml();qe.signalsByNumber=yl});var Vo=p(($m,Jo)=>{"use strict";var{signalsByName:hl}=Wo(),Sl=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",wl=({stdout:e,stderr:t,all:r,error:n,signal:i,exitCode:o,command:s,escapedCommand:c,timedOut:u,isCanceled:l,killed:a,parsed:{options:{timeout:f}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let m=i===void 0?void 0:hl[i].description,d=n&&n.code,w=`Command ${Sl({timedOut:u,timeout:f,errorCode:d,signal:i,signalDescription:m,exitCode:o,isCanceled:l})}: ${s}`,h=Object.prototype.toString.call(n)==="[object Error]",E=h?`${w}
${n.message}`:w,L=[E,t,e].filter(Boolean).join(`
`);return h?(n.originalMessage=n.message,n.message=L):n=new Error(L),n.shortMessage=E,n.command=s,n.escapedCommand=c,n.exitCode=o,n.signal=i,n.signalDescription=m,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!u,n.isCanceled=l,n.killed=a&&!u,n};Jo.exports=wl});var Ho=p((Gm,wr)=>{"use strict";var Nt=["stdin","stdout","stderr"],gl=e=>Nt.some(t=>e[t]!==void 0),Ko=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Nt.map(n=>e[n]);if(gl(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Nt.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Nt.length);return Array.from({length:r},(n,i)=>t[i])};wr.exports=Ko;wr.exports.node=e=>{let t=Ko(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Xo=p((jm,Rt)=>{Rt.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Rt.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Rt.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var ts=p((Bm,Le)=>{var F=global.process,xe=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};xe(F)?(zo=require("assert"),_e=Xo(),Qo=/^win/i.test(F.platform),tt=require("events"),typeof tt!="function"&&(tt=tt.EventEmitter),F.__signal_exit_emitter__?B=F.__signal_exit_emitter__:(B=F.__signal_exit_emitter__=new tt,B.count=0,B.emitted={}),B.infinite||(B.setMaxListeners(1/0),B.infinite=!0),Le.exports=function(e,t){if(!xe(global.process))return function(){};zo.equal(typeof e,"function","a callback must be provided for exit handler"),Me===!1&&gr();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){B.removeListener(r,e),B.listeners("exit").length===0&&B.listeners("afterexit").length===0&&bt()};return B.on(r,e),n},bt=function(){!Me||!xe(global.process)||(Me=!1,_e.forEach(function(t){try{F.removeListener(t,At[t])}catch{}}),F.emit=qt,F.reallyExit=Er,B.count-=1)},Le.exports.unload=bt,Ie=function(t,r,n){B.emitted[t]||(B.emitted[t]=!0,B.emit(t,r,n))},At={},_e.forEach(function(e){At[e]=function(){if(xe(global.process)){var r=F.listeners(e);r.length===B.count&&(bt(),Ie("exit",null,e),Ie("afterexit",null,e),Qo&&e==="SIGHUP"&&(e="SIGINT"),F.kill(F.pid,e))}}}),Le.exports.signals=function(){return _e},Me=!1,gr=function(){Me||!xe(global.process)||(Me=!0,B.count+=1,_e=_e.filter(function(t){try{return F.on(t,At[t]),!0}catch{return!1}}),F.emit=es,F.reallyExit=Zo)},Le.exports.load=gr,Er=F.reallyExit,Zo=function(t){xe(global.process)&&(F.exitCode=t||0,Ie("exit",F.exitCode,null),Ie("afterexit",F.exitCode,null),Er.call(F,F.exitCode))},qt=F.emit,es=function(t,r){if(t==="exit"&&xe(global.process)){r!==void 0&&(F.exitCode=r);var n=qt.apply(this,arguments);return Ie("exit",F.exitCode,null),Ie("afterexit",F.exitCode,null),n}else return qt.apply(this,arguments)}):Le.exports=function(){return function(){}};var zo,_e,Qo,tt,B,bt,Ie,At,Me,gr,Er,Zo,qt,es});var ns=p((Um,rs)=>{"use strict";var El=require("os"),Dl=ts(),Ol=1e3*5,xl=(e,t="SIGTERM",r={})=>{let n=e(t);return Il(e,t,r,n),n},Il=(e,t,r,n)=>{if(!Cl(t,r,n))return;let i=Pl(r),o=setTimeout(()=>{e("SIGKILL")},i);o.unref&&o.unref()},Cl=(e,{forceKillAfterTimeout:t},r)=>vl(e)&&t!==!1&&r,vl=e=>e===El.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Pl=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Ol;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},kl=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Fl=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Tl=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let i,o=new Promise((c,u)=>{i=setTimeout(()=>{Fl(e,r,u)},t)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},Nl=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Rl=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let i=Dl(()=>{e.kill()});return n.finally(()=>{i()})};rs.exports={spawnedKill:xl,spawnedCancel:kl,setupTimeout:Tl,validateTimeout:Nl,setExitHandler:Rl}});var os=p((Ym,is)=>{"use strict";var se=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";se.writable=e=>se(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";se.readable=e=>se(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";se.duplex=e=>se.writable(e)&&se.readable(e);se.transform=e=>se.duplex(e)&&typeof e._transform=="function";is.exports=se});var cs=p((Wm,ss)=>{"use strict";var{PassThrough:bl}=require("stream");ss.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",i=!1;t?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new bl({objectMode:i});r&&o.setEncoding(r);let s=0,c=[];return o.on("data",u=>{c.push(u),i?s=c.length:s+=u.length}),o.getBufferedValue=()=>t?c:n?Buffer.concat(c,s):c.join(""),o.getBufferedLength=()=>s,o}});var as=p((Jm,rt)=>{"use strict";var{constants:Al}=require("buffer"),ql=require("stream"),{promisify:_l}=require("util"),Ml=cs(),Ll=_l(ql.pipeline),_t=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Dr(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=Ml(t);return await new Promise((i,o)=>{let s=c=>{c&&n.getBufferedLength()<=Al.MAX_LENGTH&&(c.bufferedData=n.getBufferedValue()),o(c)};(async()=>{try{await Ll(e,n),i()}catch(c){s(c)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new _t)})}),n.getBufferedValue()}rt.exports=Dr;rt.exports.buffer=(e,t)=>Dr(e,{...t,encoding:"buffer"});rt.exports.array=(e,t)=>Dr(e,{...t,array:!0});rt.exports.MaxBufferError=_t});var ls=p((Vm,us)=>{"use strict";var{PassThrough:$l}=require("stream");us.exports=function(){var e=[],t=new $l({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),t;function r(o){return Array.isArray(o)?(o.forEach(r),this):(e.push(o),o.once("end",i.bind(null,o)),o.once("error",t.emit.bind(t,"error")),o.pipe(t,{end:!1}),this)}function n(){return e.length==0}function i(o){e=e.filter(function(s){return s!==o}),!e.length&&t.readable&&t.end()}}});var ps=p((Km,ds)=>{"use strict";var ms=os(),fs=as(),Gl=ls(),jl=(e,t)=>{t===void 0||e.stdin===void 0||(ms(t)?t.pipe(e.stdin):e.stdin.end(t))},Bl=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=Gl();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},Or=async(e,t)=>{if(e){e.destroy();try{return await t}catch(r){return r.bufferedData}}},xr=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?fs(e,{encoding:t,maxBuffer:n}):fs.buffer(e,{maxBuffer:n})},Ul=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:i,maxBuffer:o},s)=>{let c=xr(e,{encoding:n,buffer:i,maxBuffer:o}),u=xr(t,{encoding:n,buffer:i,maxBuffer:o}),l=xr(r,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,c,u,l])}catch(a){return Promise.all([{error:a,signal:a.signal,timedOut:a.timedOut},Or(e,c),Or(t,u),Or(r,l)])}},Yl=({input:e})=>{if(ms(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};ds.exports={handleInput:jl,makeAllStream:Bl,getSpawnedResult:Ul,validateInputSync:Yl}});var hs=p((Hm,ys)=>{"use strict";var Wl=(async()=>{})().constructor.prototype,Jl=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Wl,e)]),Vl=(e,t)=>{for(let[r,n]of Jl){let i=typeof t=="function"?(...o)=>Reflect.apply(n.value,t(),o):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:i})}return e},Kl=e=>new Promise((t,r)=>{e.on("exit",(n,i)=>{t({exitCode:n,signal:i})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});ys.exports={mergePromise:Vl,getSpawnedPromise:Kl}});var gs=p((Xm,ws)=>{"use strict";var Ss=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Hl=/^[\w.-]+$/,Xl=/"/g,zl=e=>typeof e!="string"||Hl.test(e)?e:`"${e.replace(Xl,'\\"')}"`,Ql=(e,t)=>Ss(e,t).join(" "),Zl=(e,t)=>Ss(e,t).map(r=>zl(r)).join(" "),ef=/ +/g,tf=e=>{let t=[];for(let r of e.trim().split(ef)){let n=t[t.length-1];n&&n.endsWith("\\")?t[t.length-1]=`${n.slice(0,-1)} ${r}`:t.push(r)}return t};ws.exports={joinCommand:Ql,getEscapedCommand:Zl,parseCommand:tf}});var vs=p((zm,$e)=>{"use strict";var rf=require("path"),Ir=require("child_process"),nf=To(),of=Ro(),sf=qo(),cf=$o(),Mt=Vo(),Ds=Ho(),{spawnedKill:af,spawnedCancel:uf,setupTimeout:lf,validateTimeout:ff,setExitHandler:mf}=ns(),{handleInput:df,getSpawnedResult:pf,makeAllStream:yf,validateInputSync:hf}=ps(),{mergePromise:Es,getSpawnedPromise:Sf}=hs(),{joinCommand:Os,parseCommand:xs,getEscapedCommand:Is}=gs(),wf=1e3*1e3*100,gf=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:i})=>{let o=t?{...process.env,...e}:e;return r?sf.env({env:o,cwd:n,execPath:i}):o},Cs=(e,t,r={})=>{let n=nf._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:wf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=gf(r),r.stdio=Ds(r),process.platform==="win32"&&rf.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},nt=(e,t,r)=>typeof t!="string"&&!Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?of(t):t,Lt=(e,t,r)=>{let n=Cs(e,t,r),i=Os(e,t),o=Is(e,t);ff(n.options);let s;try{s=Ir.spawn(n.file,n.args,n.options)}catch(d){let y=new Ir.ChildProcess,w=Promise.reject(Mt({error:d,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Es(y,w)}let c=Sf(s),u=lf(s,n.options,c),l=mf(s,n.options,u),a={isCanceled:!1};s.kill=af.bind(null,s.kill.bind(s)),s.cancel=uf.bind(null,s,a);let m=cf(async()=>{let[{error:d,exitCode:y,signal:w,timedOut:h},E,L,U]=await pf(s,n.options,l),fe=nt(n.options,E),Be=nt(n.options,L),Ue=nt(n.options,U);if(d||y!==0||w!==null){let ut=Mt({error:d,exitCode:y,signal:w,stdout:fe,stderr:Be,all:Ue,command:i,escapedCommand:o,parsed:n,timedOut:h,isCanceled:a.isCanceled,killed:s.killed});if(!n.options.reject)return ut;throw ut}return{command:i,escapedCommand:o,exitCode:0,stdout:fe,stderr:Be,all:Ue,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return df(s,n.options.input),s.all=yf(s,n.options),Es(s,m)};$e.exports=Lt;$e.exports.sync=(e,t,r)=>{let n=Cs(e,t,r),i=Os(e,t),o=Is(e,t);hf(n.options);let s;try{s=Ir.spawnSync(n.file,n.args,n.options)}catch(l){throw Mt({error:l,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let c=nt(n.options,s.stdout,s.error),u=nt(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let l=Mt({stdout:c,stderr:u,error:s.error,signal:s.signal,exitCode:s.status,command:i,escapedCommand:o,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return l;throw l}return{command:i,escapedCommand:o,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};$e.exports.command=(e,t)=>{let[r,...n]=xs(e);return Lt(r,n,t)};$e.exports.commandSync=(e,t)=>{let[r,...n]=xs(e);return Lt.sync(r,n,t)};$e.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(r=t,t=[]);let n=Ds.node(r),i=process.execArgv.filter(c=>!c.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:s=i}=r;return Lt(o,[...s,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var Rf={};pc(Rf,{default:()=>cc,resetRank:()=>ac});module.exports=yc(Rf);var S=require("@raycast/api");var at=require("react");var P=require("@raycast/api");var Ce=require("react");var it=te(Ne()),Ge=require("@raycast/api");var bs=te(require("path"));var Ps=te(require("node:process"),1),ks=te(vs(),1);async function Cr(e,{humanReadableOutput:t=!0}={}){if(Ps.default.platform!=="darwin")throw new Error("macOS only");let r=t?[]:["-ss"],{stdout:n}=await(0,ks.default)("osascript",["-e",e,r]);return n}var Ef=`
if application "Finder" is not running then
    return "Not running"
end if

tell application "Finder"
    set windowList to windows
    set finderPath to {}
    repeat with _window in windowList
        set the end of finderPath to POSIX path of (folder of _window as alias)
    end repeat
    return finderPath
end tell
`,Ts=async()=>{let e=[];try{let t=(await Cr(Ef)).split(", ").map(r=>r.charAt(r.length-1)==="/"?r.slice(0,-1):r);return Array.from(new Set(t)).forEach(r=>{ce(r)||e.push({id:r,name:$t(r),alias:"",path:r,type:"Directory",valid:!0,rank:1,rankSendFile:1,isCommon:!1,date:new Date().getTime()})}),e}catch{return e}},Df=`
if application "Finder" is not running then
    return "Not running"
end if

return POSIX path of (choose folder)
`,Ns=async()=>{let e="";try{let t=await Cr(Df);return e=ce(t)?"":t.slice(0,-1),e}catch{return e}};var ce=e=>!(e!=null&&String(e).length>0);var $t=e=>bs.default.parse(e).base,As=e=>{try{let t=it.default.lstatSync(e);if(t.isDirectory())return"Directory";if(t.isFile())return"File"}catch{return"Directory"}return"Directory"},vr=e=>{try{if(it.default.lstatSync(e).isDirectory())return!0}catch{return!1}return!1},qs=e=>{try{let t=it.default.readdirSync(e),r=t.filter(n=>n.startsWith("."));return t.length==r.length}catch{return!1}},_s=e=>{let t=[];return e.forEach(r=>{it.default.existsSync(r.path)&&t.push(r)}),t};var $=require("react");var kr=te(Ne());var Ms=te(require("path"),1);function Pr(e,t={}){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);let{resolve:r=!0}=t,n=e;return r&&(n=Ms.default.resolve(e)),n=n.replace(/\\/g,"/"),n[0]!=="/"&&(n=`/${n}`),encodeURI(`file://${n}`).replace(/[?#]/g,encodeURIComponent)}var Ls=te(require("path")),ot=require("@raycast/api"),Of=ot.environment.assetsPath,$s=e=>{let t="",r=Ls.default.parse(e),n="",i="",o="",s="",c="";try{if(!ce(e)){let u=kr.default.statSync(e),a=kr.default.readdirSync(e).filter(f=>!f.startsWith("."));t=`<img src="${Pr(Of+"/folder-icon.png")}" alt="${r.name}" height="190" />`,n="Sub-files",i=a.length+"",o=new Date(u.birthtime).toLocaleString(),s=new Date(u.mtime).toLocaleString(),c=new Date(u.atime).toLocaleString()}}catch(u){console.error(String(u))}return{fileContent:t,name:r.name,where:r.dir,sizeTitle:n,size:i,created:o,modified:s,lastOpened:c}};var Gs=async e=>{let t=await ot.LocalStorage.getItem(e);return typeof t>"u"?!0:t},js=async(e,t)=>{await ot.LocalStorage.setItem(e,t)};var st=require("@raycast/api");var Bs=te(Ne()),we=()=>Date.now(),Us=(e,t)=>{let[r,n]=(0,$.useState)(!0),i=(0,$.useCallback)(async()=>{n(await Gs(t))},[e]);return(0,$.useEffect)(()=>{i()},[i]),r},Ys=(e,t,r,n)=>{let[i,o]=(0,$.useState)(!0),[s,c]=(0,$.useState)([]),[u,l]=(0,$.useState)([]),a=(0,$.useCallback)(async()=>{let f=await Fr(n,t),m=_s(f);if(c(m),r){let d=await Ts(),y=[];d.forEach(w=>{m.some(E=>E.path==w.path)||y.push(w)}),l(y)}o(!1),await st.LocalStorage.setItem(n,JSON.stringify(m))},[e]);return(0,$.useEffect)(()=>{a()},[a]),{commonDirectory:s,openDirectory:u,loading:i}},Ws=(e,t=0)=>{let[r,n]=(0,$.useState)({}),[i,o]=(0,$.useState)(!0),s=(0,$.useCallback)(async()=>{o(!0),n($s(e)),o(!1)},[t,e]);return(0,$.useEffect)(()=>{s()},[s]),{directoryInfo:r,isDetailLoading:i}};function Js(e,t){let[r,n]=(0,$.useState)([]),[i,o]=(0,$.useState)(!0),s=(0,$.useCallback)(async()=>{let c=Bs.default.readdirSync(e),u=[];t?c.forEach(l=>{l.startsWith(".")||u.push({name:l,isFolder:vr(e+"/"+l)})}):c.forEach(l=>{vr(e+"/"+l)&&u.push({name:l,isFolder:!0})}),n(u),o(!1)},[]);return(0,$.useEffect)(()=>{s()},[s]),{folders:r,loading:i}}async function Fr(e,t){let r=await st.LocalStorage.getItem(e),n=typeof r=="string"?JSON.parse(r):[];return t==="Name+"?n.sort(function(i,o){return o.name.toUpperCase()<i.name.toUpperCase()?1:-1}):t==="Name-"&&n.sort(function(i,o){return o.name.toUpperCase()>i.name.toUpperCase()?1:-1}),n}var Gt=async(e,t,r,n,i,o)=>{await(0,st.confirmAlert)({icon:e,title:t,message:r,primaryAction:{title:n,onAction:i},dismissAction:{title:"Cancel",onAction:()=>o}})};var Vs=te(require("path")),Ks=te(Ne()),ue=require("react/jsx-runtime");function ct(e){let t=typeof e.setRefresh>"u"?()=>{}:e.setRefresh,[r,n]=(0,Ce.useState)([]),[i,o]=(0,Ce.useState)(""),[s,c]=(0,Ce.useState)(""),[u,l]=(0,Ce.useState)();return(0,Ce.useEffect)(()=>{async function a(){r.length!==0&&o($t(r[0]))}a().then()},[r]),(0,ue.jsxs)(P.Form,{navigationTitle:"Add Common Directory",actions:(0,ue.jsx)(P.ActionPanel,{children:(0,ue.jsx)(P.Action,{title:"Add Directory",icon:P.Icon.Plus,onAction:async()=>{if(r.length===0){l("The field should't be empty!");return}await If(s,r[0],l),t(we())}})}),children:[(0,ue.jsx)(P.Form.Description,{title:"Information",text:"Directory added will automatically be available in the Open Common Directory and Send File to Directory commands."}),(0,ue.jsx)(P.Form.FilePicker,{id:"filePicker",title:"Folder",allowMultipleSelection:!1,canChooseDirectories:!0,canChooseFiles:!1,value:r,onChange:a=>{n(a),l("")},error:u}),(0,ue.jsx)(P.Form.TextField,{id:"alias",title:"Alias",placeholder:"Optional",value:s,onChange:c}),(0,ue.jsx)(P.Form.Description,{title:"Name",text:i})]})}async function If(e,t,r){let n=Vs.default.parse(t);if(Ks.default.existsSync(t)){let o=As(t);if(o==="File")r("File path is not supported.");else{let s=await P.LocalStorage.getItem("open_common_directory"),c=await P.LocalStorage.getItem("send_common_directory"),u=typeof s=="string"?JSON.parse(s):[],l=typeof c=="string"?JSON.parse(c):[],a=!1;if(u.forEach(f=>{if(f.path===n.dir+"/"+n.base){a=!0;return}}),a)await(0,P.showToast)(P.Toast.Style.Failure,"Directory already exists.");else{let f={id:o+"_"+new Date().getTime(),alias:e,name:n.base,path:n.dir+"/"+n.base,valid:!0,type:o,rank:1,rankSendFile:1,isCommon:!0,date:new Date().getTime()};u.push(f),l.push(f),await P.LocalStorage.setItem("open_common_directory",JSON.stringify(u)),await P.LocalStorage.setItem("send_common_directory",JSON.stringify(l)),await(0,P.showHUD)(`${n.name} added`),await(0,P.popToRoot)({clearSearchBar:!1})}}}else r("Path is invalid.")}var sc=te(require("path"));var ge=require("@raycast/api"),Tr=require("react/jsx-runtime");function ve(){return(0,Tr.jsx)(ge.ActionPanel.Section,{children:(0,Tr.jsx)(ge.Action,{icon:ge.Icon.Gear,title:"Open Command Preferences",shortcut:{modifiers:["cmd"],key:","},onAction:ge.openCommandPreferences})})}var ne=require("@raycast/api"),je=require("react/jsx-runtime");function jt(e){let{name:t,path:r}=e;return(0,je.jsxs)(ne.ActionPanel.Section,{children:[(0,je.jsx)(ne.Action,{icon:ne.Icon.Clipboard,title:"Copy File",shortcut:{modifiers:["cmd"],key:"."},onAction:async()=>{await(0,ne.showHUD)(`${t} is copied to clipboard`),await ne.Clipboard.copy({file:r})}}),(0,je.jsx)(ne.Action.CopyToClipboard,{title:"Copy Name",content:t,shortcut:{modifiers:["shift","cmd"],key:"."}}),(0,je.jsx)(ne.Action.CopyToClipboard,{title:"Copy Path",content:r,shortcut:{modifiers:["shift","cmd"],key:","}})]})}var re=require("@raycast/api"),ee=require("react/jsx-runtime");function Hs(e){let{directoryInfo:t}=e;return(0,ee.jsxs)(re.List.Item.Detail.Metadata,{children:[(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:"Name",text:t.name}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Separator,{}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:"Where",text:t.where}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Separator,{}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:t.sizeTitle,text:t.size}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Separator,{}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:"Created",text:t.created}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Separator,{}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:"Modified",text:t.modified}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Separator,{}),(0,ee.jsx)(re.List.Item.Detail.Metadata.Label,{title:"Last opened",text:t.lastOpened})]})}var _=require("@raycast/api");var D=require("@raycast/api"),le=te(Ne()),A=te(require("path"));var Cf=async()=>{let e=[],t=[];try{return(await(0,D.getSelectedFinderItems)()).forEach(n=>{let i=le.default.lstatSync(n.path);i.isDirectory()&&t.push(A.default.parse(n.path)),i.isFile()&&e.push(A.default.parse(n.path))}),{selectedFile:e,selectedFolder:t}}catch(r){return console.error(String(r)),{selectedFile:e,selectedFolder:t}}};function Xs(e,t){for(let r of t)if(vf(r,e))return!0;return!1}function vf(e,t){return le.default.pathExistsSync(t+"/"+e.base)&&!Bt(e,t)}function Bt(e,t){return e.dir===t+"/"+e.base}function ec(e,t){return e.dir===t}function Nr(e,t){return t.includes(e.dir+"/"+e.base)||A.default.resolve(t).includes(A.default.resolve(e.dir+e.base))}var ae=async(e,t="")=>{let{selectedFile:r,selectedFolder:n}=await Cf();if(ce(t)&&(t=await Ns().then(async s=>(await(0,D.open)("raycast://"),s)).catch(async()=>(await(0,D.open)("raycast://"),""))),ce(t))return await(0,D.showToast)(D.Toast.Style.Failure,"Error!","Path is invalid."),!1;if(r.length===0&&n.length===0)return await(0,D.showToast)(D.Toast.Style.Failure,"Error!","Nothing is selected."),!1;let i=r.length===0?n[0].dir:r[0].dir;if(t===i||A.default.resolve(i)===A.default.resolve(t))return await(0,D.showToast)(D.Toast.Style.Failure,"Error!",`Cannot ${e} a directory to itself.`),!1;if(n.length===1&&r.length===0&&Nr(n[0],t))return await(0,D.showToast)(D.Toast.Style.Failure,"Error!",`Cannot ${e} folder to a subdirectory of itself.`),!1;if(n.length===1&&r.length===0&&Bt(n[0],t))return await(0,D.showToast)(D.Toast.Style.Failure,"Error!","Cannot replace folder by the items it contains."),!1;let o=await Pf(r,n,t,e);if(o.isCancel)return!1;try{(0,D.getPreferenceValues)().deleteEmptyDirectory&&qs(i)&&le.default.removeSync(i)}catch(s){console.error(String(s))}return await kf(o.sendResult,t,e),!0};async function Pf(e,t,r,n){let i=[],o=!1;if(Xs(r,e)||Xs(r,t)){let s=()=>e.length>0?e[0].base:t.length>0?t[0].base:"Files or Folders",c={icon:D.Icon.ExclamationMark,title:"Overwrite",message:`${s()} already exist in the ${A.default.basename(r)}. Overwrite?`,primaryAction:{title:"Overwrite All",onAction:()=>{i=zs(e,t,r,n)}},dismissAction:{title:"Cancel",onAction:()=>{(0,D.showToast)(D.Toast.Style.Failure,"Error!","User cancels the operation."),o=!0}}};await(0,D.confirmAlert)(c)}else i=zs(e,t,r,n);return{isCancel:o,sendResult:i}}function zs(e,t,r,n,i=!0){let o=[];switch(n){case"copy":return e.forEach(s=>{o.push(Qs(s.dir+"/"+s.base,r+"/"+s.base,i))}),t.forEach(s=>{o.push(Qs(s.dir+"/"+s.base,r+"/"+s.base,i))}),o;case"move":{e.forEach(s=>{o.push(Zs(s.dir+"/"+s.base,r+"/"+s.base,i))});for(let s of t)o.push(Zs(s.dir+"/"+s.base,r+"/"+s.base,i));return o}}}var kf=async(e,t,r)=>{try{let n=e.filter(s=>s.isSuccess),i=e.filter(s=>!s.isSuccess),o={style:D.Toast.Style.Success,title:`${r=="move"?"Moved":"Copied"} successfully!`,message:`${n.length} item${n.length>1?"s":""} success, ${i.length} item${i.length>1?"s":""} failure.`,primaryAction:{title:"Open Folder",onAction:s=>{(0,D.open)(t),s.hide()}},secondaryAction:{title:"Show Folder",onAction:s=>{(0,D.showInFinder)(t),s.hide()}}};await(0,D.showToast)(o),(0,D.getPreferenceValues)().openDestDirectory&&(await(0,D.showHUD)(`${r=="move"?"Moved":"Copied"} successfully, Open ${A.default.parse(t).base}`),await(0,D.open)(t))}catch(n){console.error(String(n))}};function Qs(e,t,r){let n=A.default.parse(e),i=A.default.parse(t);try{return Bt(n,i.dir)||Nr(n,i.dir)||ec(n,i.dir)?{isSuccess:!1,srcPath:n}:(le.default.pathExistsSync(t)?Ff(e,t):le.default.copySync(e,t,{overwrite:r,recursive:!0}),{isSuccess:!0,srcPath:n})}catch(o){return console.error(String(o)),{isSuccess:!1,srcPath:n}}}function Zs(e,t,r){try{return Bt(A.default.parse(e),A.default.dirname(t))||Nr(A.default.parse(e),A.default.dirname(t))||ec(A.default.parse(e),A.default.dirname(t))?{isSuccess:!1,srcPath:A.default.parse(e)}:(le.default.moveSync(e,t,{overwrite:r}),{isSuccess:!0,srcPath:A.default.parse(e)})}catch(n){return console.error(String(n)),{isSuccess:!1,srcPath:A.default.parse(e)}}}function Ff(e,t){try{le.default.rmSync(t,{recursive:!0})}catch(r){console.error(String(r))}try{le.default.copySync(e,t,{overwrite:!0,recursive:!0})}catch(r){console.error(String(r))}}var q=require("react/jsx-runtime");function tc(e){let{setRefresh:t}=e;return(0,q.jsx)(_.List.EmptyView,{icon:{source:{light:"empty-view-icon.svg",dark:"empty-view-icon@dark.svg"}},title:"No directories",actions:(0,q.jsxs)(_.ActionPanel,{children:[(0,q.jsx)(_.Action.Push,{title:"Add Directory",icon:_.Icon.Plus,target:(0,q.jsx)(ct,{setRefresh:t})}),(0,q.jsx)(ve,{})]})})}function rc(e){let{path:t,isOpenDirectory:r,primaryAction:n,pop:i}=e;return(0,q.jsx)(_.List.EmptyView,{icon:{source:{light:"empty-view-icon.svg",dark:"empty-view-icon@dark.svg"}},title:"No folder",actions:(0,q.jsxs)(_.ActionPanel,{children:[r?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.Action.Open,{title:"Open",target:t}),(0,q.jsx)(_.Action.ShowInFinder,{path:t})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(_.Action,{title:n==="copy"?"Copy to Directory":"Move to Directory",icon:n==="copy"?_.Icon.Clipboard:_.Icon.Download,onAction:async()=>{n==="copy"?await ae("copy",t):await ae("move",t)}}),(0,q.jsx)(_.Action,{title:n==="copy"?"Move to Directory":"Copy to Directory",icon:n==="copy"?_.Icon.Download:_.Icon.Clipboard,onAction:async()=>{n==="copy"?await ae("move",t):await ae("copy",t)}})]}),(0,q.jsx)(_.Action,{icon:_.Icon.ChevronUp,title:"Enclosing Folder",shortcut:{modifiers:["cmd","opt"],key:"arrowUp"},onAction:i}),(0,q.jsx)(ve,{})]})})}var R=require("@raycast/api"),nc=require("react");var M=require("react/jsx-runtime");function Rr(e){let t=(0,R.getPreferenceValues)().primaryAction,{folderName:r,folderPath:n,isOpenDirectory:i}=e,[o,s]=(0,nc.useState)(""),{folders:c,loading:u}=Js(n,i),{pop:l}=(0,R.useNavigation)();return(0,M.jsxs)(R.List,{navigationTitle:r,isLoading:u,searchBarPlaceholder:n,onSelectionChange:a=>{typeof a=="string"&&s(a)},children:[(0,M.jsx)(rc,{path:n,isOpenDirectory:i,primaryAction:t,pop:l}),c.map((a,f)=>(0,M.jsx)(R.List.Item,{id:a.name,icon:{fileIcon:n+"/"+a.name},title:a.name,accessories:[o===a.name?{text:n+"/"+a.name}:{}],actions:(0,M.jsxs)(R.ActionPanel,{children:[i?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(R.Action.Open,{title:"Open",target:n+"/"+a.name}),(0,M.jsx)(R.Action.ShowInFinder,{path:n+"/"+a.name})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(R.Action,{title:t==="copy"?"Copy to Directory":"Move to Directory",icon:t==="copy"?R.Icon.Clipboard:R.Icon.Download,onAction:async()=>{t==="copy"?await ae("copy",n+"/"+a.name):await ae("move",n+"/"+a.name)}}),(0,M.jsx)(R.Action,{title:t==="copy"?"Move to Directory":"Copy to Directory",icon:t==="copy"?R.Icon.Download:R.Icon.Clipboard,onAction:async()=>{t==="copy"?await ae("move",n+"/"+a.name):await ae("copy",n+"/"+a.name)}})]}),(0,M.jsx)(R.Action,{icon:R.Icon.ChevronUp,title:"Enclosing Folder",shortcut:{modifiers:["cmd","opt"],key:"arrowUp"},onAction:l}),a.isFolder&&(0,M.jsx)(R.Action.Push,{icon:R.Icon.ChevronDown,title:"Enter Folder",shortcut:{modifiers:["cmd","opt"],key:"arrowDown"},target:(0,M.jsx)(Rr,{folderName:a.name,folderPath:n+"/"+a.name,isOpenDirectory:i})}),(0,M.jsx)(jt,{name:a.name,path:n+"/"+a.name}),(0,M.jsx)(ve,{})]})},f))]})}var I=require("react/jsx-runtime");function cc(){let{sortBy:e,showOpenDirectory:t}=(0,S.getPreferenceValues)(),[r,n]=(0,at.useState)(""),[i,o]=(0,at.useState)(""),[s,c]=(0,at.useState)(0),[u,l]=(0,at.useState)(0),a=Us(u,"open_detail"),{commonDirectory:f,openDirectory:m,loading:d}=Ys(s,e,t,"open_common_directory"),{directoryInfo:y,isDetailLoading:w}=Ws(i);return(0,I.jsxs)(S.List,{isLoading:d,isShowingDetail:a&&(f.length!==0||t&&m.length!==0),searchBarPlaceholder:"Search directories",onSearchTextChange:h=>{n(h)},onSelectionChange:h=>{if(typeof h=="string"){let E=JSON.parse(h);o(E.path)}},children:[(0,I.jsx)(tc,{setRefresh:c}),(0,I.jsx)(S.List.Section,{title:"Common Directories",children:!d&&f.map((h,E)=>{if(h.alias.toLowerCase().includes(r.toLowerCase())||h.name.toLowerCase().includes(r.toLowerCase()))return(0,I.jsx)(ic,{directory:h,index:E,commonDirectory:f,directoryInfo:y,isDetailLoading:w,showDetail:a,setRefresh:c,setRefreshDetail:l},h.id)})}),(0,I.jsx)(S.List.Section,{title:"Open Directories",children:!d&&m.map((h,E)=>{if(h.name.toLowerCase().includes(r.toLowerCase()))return(0,I.jsx)(ic,{directory:h,index:E,commonDirectory:m,directoryInfo:y,isDetailLoading:w,showDetail:a,setRefresh:c,setRefreshDetail:l},h.id)})})]})}function ic(e){let{directory:t,setRefresh:r,setRefreshDetail:n,index:i,commonDirectory:o,showDetail:s,directoryInfo:c,isDetailLoading:u}=e;return(0,I.jsx)(S.List.Item,{id:JSON.stringify({type:t.isCommon,path:t.path}),icon:{fileIcon:t.path},title:t.name,subtitle:s?"":t.alias,detail:(0,I.jsx)(S.List.Item.Detail,{isLoading:u,markdown:c.fileContent,metadata:!u&&(0,I.jsx)(Hs,{directoryInfo:c})}),accessories:s?[{text:ce(t.alias)?" ":t.alias},t.valid?{}:{icon:"\u26A0\uFE0F"}]:[{text:sc.default.parse(t.path).dir},t.valid?{}:{icon:"\u26A0\uFE0F"}],actions:(0,I.jsxs)(S.ActionPanel,{children:[(0,I.jsx)(S.Action.Open,{title:"Open",target:t.path,onOpen:()=>oc(t,i,o,r)}),(0,I.jsx)(S.Action.ShowInFinder,{path:t.path,onShow:()=>oc(t,i,o,r)}),(0,I.jsx)(S.Action.Push,{icon:S.Icon.ChevronDown,title:"Enter Folder",shortcut:{modifiers:["cmd","opt"],key:"arrowDown"},target:(0,I.jsx)(Rr,{folderName:t.name,folderPath:t.path,isOpenDirectory:!0})}),(0,I.jsx)(jt,{name:t.name,path:t.path}),(0,I.jsxs)(S.ActionPanel.Section,{children:[(0,I.jsx)(S.Action.Push,{title:"Add Directory",icon:S.Icon.Plus,shortcut:{modifiers:["cmd"],key:"d"},target:(0,I.jsx)(ct,{setRefresh:r})}),t.isCommon&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S.Action,{title:"Remove Directory",icon:S.Icon.StarDisabled,shortcut:{modifiers:["cmd","ctrl"],key:"x"},onAction:async()=>{await Gt(S.Icon.Trash,"Remove directory",`Are you sure you want to remove ${t.name}?`,"Remove",async()=>{let l=[...o];l.splice(i,1),await S.LocalStorage.setItem("open_common_directory",JSON.stringify(l)),r(we);let f=(await Fr("send_common_directory",(0,S.getPreferenceValues)().sortBy)).filter(m=>m.path!==t.path);await S.LocalStorage.setItem("send_common_directory",JSON.stringify(f)),await(0,S.showToast)(S.Toast.Style.Success,"Successfully removed directory!")})}}),(0,I.jsx)(S.Action,{title:"Remove All Directories",icon:S.Icon.ExclamationMark,shortcut:{modifiers:["ctrl","shift"],key:"x"},onAction:async()=>{await Gt(S.Icon.ExclamationMark,"Remove all directories","Are you sure you want to remove all directories?","Remove all",async()=>{await S.LocalStorage.setItem("open_common_directory",JSON.stringify([])),await S.LocalStorage.setItem("send_common_directory",JSON.stringify([])),r(we),await(0,S.showToast)(S.Toast.Style.Success,"Successfully removed all directories!")})}}),(0,I.jsx)(S.Action,{title:"Reset All Ranks",icon:S.Icon.ArrowClockwise,shortcut:{modifiers:["ctrl","shift"],key:"r"},onAction:async()=>{await Gt(S.Icon.ArrowClockwise,"Reset all ranks","Are you sure you want to reset all ranks?","Reset all ranks",async()=>{ac(o,r).then(async()=>{await(0,S.showToast)(S.Toast.Style.Success,"Successfully reset ranks!")})})}})]})]}),(0,I.jsx)(S.ActionPanel.Section,{children:(0,I.jsx)(S.Action,{title:"Toggle Details",icon:S.Icon.Sidebar,shortcut:{modifiers:["shift","ctrl"],key:"d"},onAction:()=>{js("open_detail",!s).then(),n(we())}})}),(0,I.jsx)(ve,{})]})})}async function oc(e,t,r,n){try{let i=[...r];(0,S.getPreferenceValues)().sortBy==="Rank"&&(i=await Nf([...i],t)),e.isCommon&&(await S.LocalStorage.setItem("open_common_directory",JSON.stringify(i)),n(we()))}catch(i){console.error(String(i))}}async function Nf(e,t){if(e.filter(n=>n.path!==e[t].path&&n.rank>=e[t].rank).length!==0){let n=0;e.forEach(i=>[n=n+i.rank]),e[t].rank=Math.floor((e[t].rank+1-e[t].rank/n)*100)/100}return e.sort(function(n,i){return i.rank-n.rank}),e}async function ac(e,t){let r=[...e];r.forEach(n=>{n.rank=1,n.rankSendFile=1}),r.sort(function(n,i){return i.name.toUpperCase()<n.name.toUpperCase()?1:-1}),await S.LocalStorage.setItem("open_common_directory",JSON.stringify(r)),await S.LocalStorage.setItem("send_common_directory",JSON.stringify(r)),t(we())}0&&(module.exports={resetRank});
