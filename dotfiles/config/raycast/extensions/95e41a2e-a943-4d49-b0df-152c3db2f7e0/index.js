"use strict";var Zt=Object.create;var te=Object.defineProperty;var qt=Object.getOwnPropertyDescriptor;var Yt=Object.getOwnPropertyNames;var Qt=Object.getPrototypeOf,Xt=Object.prototype.hasOwnProperty;var er=(e,r)=>{for(var t in r)te(e,t,{get:r[t],enumerable:!0})},Ge=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Yt(r))!Xt.call(e,i)&&i!==t&&te(e,i,{get:()=>r[i],enumerable:!(n=qt(r,i))||n.enumerable});return e};var x=(e,r,t)=>(t=e!=null?Zt(Qt(e)):{},Ge(r||!e||!e.__esModule?te(t,"default",{value:e,enumerable:!0}):t,e)),tr=e=>Ge(te({},"__esModule",{value:!0}),e);var Sr={};er(Sr,{default:()=>Wt});module.exports=tr(Sr);var o=require("@raycast/api");var m=x(require("react")),f=require("@raycast/api");var Be=Object.prototype.hasOwnProperty;function re(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&re(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(Be.call(e,t)&&++n&&!Be.call(r,t)||!(t in r)||!re(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var I=x(require("node:fs")),U=x(require("node:path")),Ye=x(require("node:crypto")),J=x(require("node:child_process")),Qe=require("node:buffer"),z=x(require("node:stream")),Xe=require("node:util"),A=require("node:fs/promises");var E=require("react/jsx-runtime"),ce=x(require("node:os"));var be=globalThis;function rr(e){let r=(0,m.useRef)(e),t=(0,m.useRef)(0);return re(e,r.current)||(r.current=e,t.current+=1),(0,m.useMemo)(()=>r.current,[t.current])}function S(e){let r=(0,m.useRef)(e);return r.current=e,r}function et(e,r){let t=e instanceof Error?e.message:String(e);return(0,f.showToast)({style:f.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??Ke(e),secondaryAction:r?.primaryAction?Ke(e):void 0})}var Ke=e=>{let r=!0,t="[Extension Name]...",n="";try{let a=JSON.parse((0,I.readFileSync)((0,U.join)(f.environment.assetsPath,"..","package.json"),"utf8"));t=`[${a.title}]...`,n=`https://raycast.com/${a.owner||a.author}/${a.name}`,(!a.owner||a.access==="public")&&(r=!1)}catch{}let i=f.environment.isDevelopment||r,s=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:i?"Copy Logs":"Report Error",onAction(a){a.hide(),i?f.Clipboard.copy(s):(0,f.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function Se(e,r,t){let n=(0,m.useRef)(0),[i,s]=(0,m.useState)({isLoading:!0}),a=S(e),l=S(t?.abortable),c=S(r||[]),d=S(t?.onError),p=S(t?.onData),h=S(t?.onWillExecute),y=S(t?.failureToastOptions),b=S(i.data),C=(0,m.useRef)(null),w=(0,m.useRef)({page:0}),B=(0,m.useRef)(!1),K=(0,m.useRef)(!0),ze=(0,m.useRef)(50),_=(0,m.useCallback)(()=>(l.current&&(l.current.current?.abort(),l.current.current=new AbortController),++n.current),[l]),D=(0,m.useCallback)((...T)=>{let v=_();h.current?.(T),s(g=>({...g,isLoading:!0}));let V=nr(a.current)(...T);function j(g){return g.name=="AbortError"||v===n.current&&(d.current?d.current(g):f.environment.launchType!==f.LaunchType.Background&&et(g,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(M){M.hide(),C.current?.(...c.current||[])}},...y.current}),s({error:g,isLoading:!1})),g}return typeof V=="function"?(B.current=!0,V(w.current).then(({data:g,hasMore:M,cursor:Jt})=>(v===n.current&&(w.current&&(w.current.cursor=Jt,w.current.lastItem=g?.[g.length-1]),p.current&&p.current(g,w.current),M&&(ze.current=g.length),K.current=M,s(Ht=>w.current.page===0?{data:g,isLoading:!1}:{data:(Ht.data||[])?.concat(g),isLoading:!1})),g),g=>(K.current=!1,j(g)))):(B.current=!1,V.then(g=>(v===n.current&&(p.current&&p.current(g),s({data:g,isLoading:!1})),g),j))},[p,d,c,a,s,C,h,w,y,_]);C.current=D;let ee=(0,m.useCallback)(()=>{w.current={page:0};let T=c.current||[];return D(...T)},[D,c]),jt=(0,m.useCallback)(async(T,v)=>{let V;try{if(v?.optimisticUpdate){_(),typeof v?.rollbackOnError!="function"&&v?.rollbackOnError!==!1&&(V=structuredClone(b.current?.value));let j=v.optimisticUpdate;s(g=>({...g,data:j(g.data)}))}return await T}catch(j){if(typeof v?.rollbackOnError=="function"){let g=v.rollbackOnError;s(M=>({...M,data:g(M.data)}))}else v?.optimisticUpdate&&v?.rollbackOnError!==!1&&s(g=>({...g,data:V}));throw j}finally{v?.shouldRevalidateAfter!==!1&&(f.environment.launchType===f.LaunchType.Background||f.environment.commandMode==="menu-bar"?await ee():ee())}},[ee,b,s,_]),zt=(0,m.useCallback)(()=>{w.current.page+=1;let T=c.current||[];D(...T)},[w,c,D]);(0,m.useEffect)(()=>{w.current={page:0},t?.execute!==!1?D(...r||[]):_()},[rr([r,t?.execute,D]),l,w]),(0,m.useEffect)(()=>()=>{_()},[_]);let Gt=t?.execute!==!1?i.isLoading:!1,Bt={...i,isLoading:Gt},Kt=B.current?{pageSize:ze.current,hasMore:K.current,onLoadMore:zt}:void 0;return{...Bt,revalidate:ee,mutate:jt,pagination:Kt}}function nr(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Je(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function ir(e){return e instanceof URLSearchParams?e.toString():e}function tt(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=ir(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let i=/\[object (.*)\]/i,s=Object.prototype.toString.call(n),a=i.exec(s)?.[1]??"unknown:["+s+"]";a=a.toLowerCase();let l=null;if((l=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+l+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](n);else throw new Error('Unknown object type "'+a+'"');else{let c=Object.keys(n);c=c.sort(),Je(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let d=this;return c.forEach(function(p){d.dispatch(p),t(":"),d.dispatch(n[p]),t(",")})}},_array:function(n,i){i=typeof i<"u"?i:!1;let s=this;if(t("array:"+n.length+":"),!i||n.length<=1){n.forEach(function(c){s.dispatch(c)});return}let a=[],l=n.map(function(c){let d=ar(),p=r.slice();return tt(d,p).dispatch(c),a=a.concat(p.slice(r.length)),d.read().toString()});r=r.concat(a),l.sort(),this._array(l,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Je(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let i=Array.from(n);this._array(i,!0)},_set:function(n){t("set:");let i=Array.from(n);this._array(i,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function ar(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function sr(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toISOString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function or(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function rt(e){let r=Ye.default.createHash("sha1");return tt(r).dispatch(e),r.digest("hex")}var cr=Symbol("cache without namespace"),He=new Map;function nt(e,r,t){let n=t?.cacheNamespace||cr,i=He.get(n)||He.set(n,new f.Cache({namespace:t?.cacheNamespace})).get(n);if(!i)throw new Error("Missing cache");let s=S(e),a=S(r),l=(0,m.useSyncExternalStore)(i.subscribe,()=>{try{return i.get(s.current)}catch(h){console.error("Could not get Cache data:",h);return}}),c=(0,m.useMemo)(()=>{if(typeof l<"u"){if(l==="undefined")return;try{return JSON.parse(l,or)}catch(h){return console.warn("The cached data is corrupted",h),a.current}}else return a.current},[l,a]),d=S(c),p=(0,m.useCallback)(h=>{let y=typeof h=="function"?h(d.current):h;if(typeof y>"u")i.set(s.current,"undefined");else{let b=JSON.stringify(y,sr);i.set(s.current,b)}return y},[i,s,d]);return[c,p]}var ne=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",$e=Symbol.for("signal-exit emitter"),ke=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),be[$e])return be[$e];Object.defineProperty(be,$e,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],i=n.indexOf(t);i!==-1&&(i===0&&n.length===1?n.length=0:n.splice(i,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let i=!1;for(let s of this.listeners[r])i=s(t,n)===!0||i;return r==="exit"&&(i=this.emit("afterExit",t,n)||i),i}},xe=class{onExit(){return()=>{}}load(){}unload(){}},ve=class{#o;#t;#e;#a;#s;#i;#n;#r;constructor(r){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new ke,this.#i={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#i={};for(let t of this.#r)this.#i[t]=()=>{let n=this.#e.listeners(t),{count:i}=this.#t,s=r;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(i+=s.__signal_exit_emitter__.count),n.length===i){this.unload();let a=this.#t.emit("exit",null,t),l=t==="SIGHUP"?this.#o:t;a||r.kill(r.pid,l)}};this.#s=r.reallyExit,this.#a=r.emit}onExit(r,t){if(!ne(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#i[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#l(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#i[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#s,this.#t.count-=1)}#c(r){return ne(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#s.call(this.#e,this.#e.exitCode)):0}#l(r,...t){let n=this.#a;if(r==="exit"&&ne(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let i=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),i}else return n.call(this.#e,r,...t)}},we=null,lr=(e,r)=>(we||(we=ne(process)?new ve(process):new xe),we.onExit(e,r));function ie(e,{timeout:r}={}){let t=new Promise((l,c)=>{e.on("exit",(d,p)=>{l({exitCode:d,signal:p,timedOut:!1})}),e.on("error",d=>{c(d)}),e.stdin&&e.stdin.on("error",d=>{c(d)})}),n=lr(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let i,s=new Promise((l,c)=>{i=setTimeout(()=>{e.kill("SIGTERM"),c(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),a=t.finally(()=>{clearTimeout(i)});return Promise.race([s,a]).finally(()=>n())}var Ee=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function ur(e){let{encoding:r}=e,t=r==="buffer",n=new z.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let i=0,s=[];return n.on("data",a=>{s.push(a),i+=a.length}),n.getBufferedValue=()=>t?Buffer.concat(s,i):s.join(""),n.getBufferedLength=()=>i,n}async function Ze(e,r){let t=ur(r);return await new Promise((n,i)=>{let s=a=>{a&&t.getBufferedLength()<=Qe.constants.MAX_LENGTH&&(a.bufferedData=t.getBufferedValue()),i(a)};(async()=>{try{await(0,Xe.promisify)(z.default.pipeline)(e,t),n()}catch(a){s(a)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&s(new Ee)})}),t.getBufferedValue()}async function qe(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function ae({stdout:e,stderr:r},{encoding:t},n){let i=Ze(e,{encoding:t}),s=Ze(r,{encoding:t});try{return await Promise.all([n,i,s])}catch(a){return Promise.all([{error:a,exitCode:null,signal:a.signal,timedOut:a.timedOut||!1},qe(e,i),qe(r,s)])}}function dr(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function se(e,r){return e.stripFinalNewline?dr(r):r}function fr({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function pr({stdout:e,stderr:r,error:t,signal:n,exitCode:i,command:s,timedOut:a,options:l,parentError:c}){let p=`Command ${fr({timedOut:a,timeout:l?.timeout,signal:n,exitCode:i})}: ${s}`,h=t?`${p}
${t.message}`:p,y=[h,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=c,t.message=y,t.shortMessage=h,t.command=s,t.exitCode=i,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function it({stdout:e,stderr:r,error:t,exitCode:n,signal:i,timedOut:s,command:a,options:l,parentError:c}){if(t||n!==0||i!==null)throw pr({error:t,exitCode:n,signal:i,stdout:e,stderr:r,command:a,timedOut:s,options:l,parentError:c});return e}var oe=class extends Error{constructor(r){super(r),this.name="PermissionError"}};function hr(e){return e instanceof Error&&e.name==="PermissionError"}async function mr(e,r,t){if(!(0,I.existsSync)(e))throw new Error("The database does not exist");let n;try{n=await(d=>import(d))("node:sqlite")}catch{return gr(e,r,t)}let i=new n.DatabaseSync(e,{open:!1,readOnly:!0}),s=t?.signal;try{i.open()}catch(c){if(console.log(c),c.message.match("(5)")||c.message.match("(14)")){let d;if(!d){let p=U.default.join(ce.default.tmpdir(),"useSQL",rt(e));await(0,A.mkdir)(p,{recursive:!0}),L(s),d=U.default.join(p,"db.db"),await(0,A.copyFile)(e,d),await(0,A.writeFile)(d+"-shm",""),await(0,A.writeFile)(d+"-wal",""),L(s)}i=new n.DatabaseSync(d,{open:!1,readOnly:!0}),i.open(),L(s)}}let a=i.prepare(r);L(s);let l=a.all();return i.close(),l}async function gr(e,r,t){let n=t?.signal,i=J.default.spawn("sqlite3",["--json","--readonly",e,r],{signal:n}),s=ie(i),[{error:a,exitCode:l,signal:c},d,p]=await ae(i,{encoding:"utf-8"},s);if(L(n),p.match("(5)")||p.match("(14)")){let h;if(!h){let y=U.default.join(ce.default.tmpdir(),"useSQL",rt(e));await(0,A.mkdir)(y,{recursive:!0}),L(n),h=U.default.join(y,"db.db"),await(0,A.copyFile)(e,h),await(0,A.writeFile)(h+"-shm",""),await(0,A.writeFile)(h+"-wal",""),L(n)}i=J.default.spawn("sqlite3",["--json","--readonly","--vfs","unix-none",h,r],{signal:n}),s=ie(i),[{error:a,exitCode:l,signal:c},d,p]=await ae(i,{encoding:"utf-8"},s),L(n)}if(a||l!==0||c!==null)throw p.includes("authorization denied")?new oe("You do not have permission to access the database."):new Error(p||"Unknown error");return JSON.parse(d.trim()||"[]")}function L(e){if(e?.aborted){let r=new Error("aborted");throw r.name="AbortError",r}}function at(e,r,t){let{permissionPriming:n,...i}=t||{},[s,a]=(0,m.useState)(null),l=S(t||{}),c=(0,m.useRef)(null),d=(0,m.useCallback)(h=>{console.error(h);let y=h instanceof Error&&h.message.includes("authorization denied")?new oe("You do not have permission to access the database."):h;hr(y)?a((0,E.jsx)(yr,{priming:l.current.permissionPriming})):l.current.onError?l.current.onError(y):f.environment.launchType!==f.LaunchType.Background&&et(y,{title:"Cannot query the data"})},[l]),p=(0,m.useMemo)(()=>{if(!(0,I.existsSync)(e))throw new Error("The database does not exist");return async(h,y)=>{let b=c.current?.signal;return mr(h,y,{signal:b})}},[e]);return{...Se(p,[e,r],{...i,onError:d}),permissionView:s}}function yr(e){let r=parseInt(ce.default.release().split(".")[0])>=22,t=r?"Settings":"Preferences",n=r?{title:"Open System Settings -> Privacy",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"}:{title:"Open System Preferences -> Security",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"};return f.environment.commandMode==="menu-bar"?(0,E.jsxs)(f.MenuBarExtra,{icon:f.Icon.Warning,title:f.environment.commandName,children:[(0,E.jsx)(f.MenuBarExtra.Item,{title:"Raycast needs full disk access",tooltip:`You can revert this access in ${t} whenever you want`}),e.priming?(0,E.jsx)(f.MenuBarExtra.Item,{title:e.priming,tooltip:`You can revert this access in ${t} whenever you want`}):null,(0,E.jsx)(f.MenuBarExtra.Separator,{}),(0,E.jsx)(f.MenuBarExtra.Item,{title:n.title,onAction:()=>(0,f.open)(n.target)})]}):(0,E.jsx)(f.List,{children:(0,E.jsx)(f.List.EmptyView,{icon:{source:{light:"https://raycast.com/uploads/extensions-utils-security-permissions-light.png",dark:"https://raycast.com/uploads/extensions-utils-security-permissions-dark.png"}},title:"Raycast needs full disk access.",description:`${e.priming?e.priming+`
`:""}You can revert this access in ${t} whenever you want.`,actions:(0,E.jsx)(f.ActionPanel,{children:(0,E.jsx)(f.Action.Open,{...n})})})})}async function st(e,r,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:i,timeout:s,...a}=Array.isArray(r)?t||{}:r||{},l=n!==!1?[]:["-ss"];i==="JavaScript"&&l.push("-l","JavaScript"),Array.isArray(r)&&l.push("-",...r);let c=J.default.spawn("osascript",l,{...a,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),d=ie(c,{timeout:s??1e4});c.stdin.end(e);let[{error:p,exitCode:h,signal:y,timedOut:b},C,w]=await ae(c,{encoding:"utf8"},d),B=se({stripFinalNewline:!0},C),K=se({stripFinalNewline:!0},w);return it({stdout:B,stderr:K,error:p,exitCode:h,signal:y,timedOut:b,command:"osascript",options:t,parentError:new Error})}async function ot(e,r){if(process.platform!=="win32")throw new Error("PowerShell is only supported on Windows");let{timeout:t,...n}=r||{},i=["-NoLogo","-NoProfile","-NonInteractive","-Command","-"],s=J.default.spawn("powershell.exe",i,{...n}),a=ie(s,{timeout:t??1e4});s.stdin.end(e);let[{error:l,exitCode:c,signal:d,timedOut:p},h,y]=await ae(s,{encoding:"utf8"},a),b=se({stripFinalNewline:!0},h),C=se({stripFinalNewline:!0},y);return it({stdout:b,stderr:C,error:l,exitCode:c,signal:d,timedOut:p,command:"powershell.exe",options:r,parentError:new Error})}var Q=require("path"),X=require("react");var H=x(require("node:path"),1),lt=x(require("node:os"),1),ct=lt.default.homedir();function Ae(e){let r=H.default.normalize(e)+H.default.sep;return(r.startsWith(ct)?r.replace(ct+H.default.sep,`~${H.default.sep}`):r).slice(0,-1)}var Ft=require("url");var $=require("@raycast/api");var Et=x(require("fs")),_e=require("os");var ut=require("@raycast/api"),F=(0,ut.getPreferenceValues)(),P=F.build,R=F.layout,dt=F.keepSectionOrder,Z=F.closeOtherWindows,G=F.terminalApp,le=F.showGitBranch,q=F.gitBranchColor;var wr=require("@raycast/api");var ue=require("fs"),de=require("url"),gt=require("util");var Ce=require("@raycast/api");var pt=require("@raycast/api");function ft(e,r){let t,n;function i(...s){return(t===void 0||r?.maxAge&&n!==void 0&&Date.now()-n>r.maxAge)&&(t=e(...s),n=Date.now()),t}return i.clear=()=>{t=void 0,n=void 0},i}var ht=x(require("path")),br=ft(pt.getApplications),$r={Antigravity:{macos:"com.google.antigravity",windows:{name:"Antigravity",exe:"Antigravity.exe"}},Code:{macos:"com.microsoft.VSCode",windows:{name:"Visual Studio Code",exe:"Code.exe"}},"Code - Insiders":{macos:"com.microsoft.VSCodeInsiders",windows:{name:"Visual Studio Code - Insiders",exe:"Code - Insiders.exe"}},Cursor:{macos:"com.todesktop.230313mzl4w4u92",windows:{name:"Cursor",exe:"Cursor.exe"}},Kiro:{macos:"dev.kiro.desktop",windows:{name:"Kiro",exe:"Kiro.exe"}},Positron:{macos:"com.rstudio.positron",windows:{name:"Positron",exe:"Positron.exe"}},Trae:{macos:"com.trae.app",windows:{name:"Trae",exe:"Trae.exe"}},"Trae CN":{macos:"cn.trae.app",windows:{name:"Trae CN",exe:"Trae - CN.exe"}},VSCodium:{macos:"com.vscodium",windows:{name:"VSCodium",exe:"VSCodium.exe"}},"VSCodium - Insiders":{macos:"com.vscodium.VSCodiumInsiders",windows:{name:"VSCodium - Insiders",exe:"VSCodium - Insiders.exe"}},Windsurf:{macos:"com.exafunction.windsurf",windows:{name:"Windsurf",exe:"Windsurf.exe"}}};async function Pe(e){let r=await br(),t=$r[e];if(Re){if(t){let n=r.find(i=>i.bundleId===t.macos);if(n)return n}}else{let n=r.find(i=>{let s=i.name===t.windows.name,l=ht.default.basename(i.path)===t.windows.exe;return s||l});if(n)return n}}function Ie(){return(0,Ce.getPreferenceValues)().build}var mt={Antigravity:"antigravity",Code:"vscode","Code - Insiders":"vscode-insiders",Cursor:"cursor",Kiro:"kiro",VSCodium:"vscode-oss",Positron:"positron",Windsurf:"windsurf",Trae:"trae","Trae CN":"trae-cn"};function Te(){let e=mt[Ie()];return!e||e.length<=0?mt.Code:e}function Le(e){let{fileUri:r}=e;if(r===void 0)return!1;try{let t=new de.URL(r);return(0,ue.existsSync)(t)&&r.indexOf(".code-workspace")===-1}catch{return!1}}function fe(e){let{folderUri:r}=e;if(r===void 0)return!1;try{let t=new de.URL(r);return(0,ue.existsSync)(t)}catch{return!1}}function Ue(e){let{workspace:r}=e;if(r===void 0)return!1;try{let t=new de.URL(r.configPath);return(0,ue.existsSync)(t)&&r.configPath.indexOf(".code-workspace")!==-1}catch{return!1}}function pe(e){let{folderUri:r,remoteAuthority:t}=e;return r!==void 0&&t!==void 0}function he(e){let{workspace:r,remoteAuthority:t}=e;return r!==void 0&&t!==void 0}function yt(e,r){return"fileUri"in e&&"fileUri"in r?e.fileUri===r.fileUri:"folderUri"in e&&"folderUri"in r?e.folderUri===r.folderUri:"workspace"in e&&"workspace"in r?e.workspace.configPath===r.workspace.configPath:!1}function Oe(e){switch(e){case"All Types":return()=>!0;case"Workspaces":return Ue;case"Folders":return fe;case"Remote Folders":return pe;case"Remote Workspace":return he;case"Files":return Le;default:return()=>!1}}function bt(e){return r=>e.find(t=>(0,gt.isDeepStrictEqual)(t,r))===void 0}var zr=new Intl.NumberFormat("en",{notation:"compact"});function $t(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)}var O=process.platform==="win32",Re=process.platform==="darwin";var wt=require("child_process"),kt=x(require("util")),xt=kt.default.promisify(wt.execFile);function St(){let e=At();if(!Et.default.existsSync(e))return{data:[],isLoading:!1,error:!0,removeEntry:()=>Promise.resolve(),removeAllEntries:()=>Promise.resolve()};let{data:r,isLoading:t,revalidate:n}=at(e,"SELECT json_extract(value, '$.entries') as entries FROM ItemTable WHERE key = 'history.recentlyOpenedPathsList'"),i=r&&r.length?r[0].entries:void 0,s=i?JSON.parse(i):void 0;async function a(c){if(!s){await(0,$.showToast)($.Toast.Style.Failure,"No recent entries found");return}try{await vt(s.filter(d=>!yt(d,c))),await n(),(0,$.showToast)($.Toast.Style.Success,"Entry removed",`Restart ${P} to sync the list in ${P} (optional)`)}catch{(0,$.showToast)($.Toast.Style.Failure,"Failed to remove entry")}}async function l(){try{await(0,$.confirmAlert)({icon:$.Icon.Trash,title:"Remove all recent entries?",message:"This cannot be undone.",dismissAction:{title:"Cancel",style:$.Alert.ActionStyle.Cancel},primaryAction:{title:"Remove",style:$.Alert.ActionStyle.Destructive}})&&(await vt([]),await n(),(0,$.showToast)($.Toast.Style.Success,"All entries removed",`Restart ${P} to sync the list in ${P} (optional)`))}catch{(0,$.showToast)($.Toast.Style.Failure,"Failed to remove entries")}}return{data:s,isLoading:t,removeEntry:a,removeAllEntries:l}}function At(){let e=Ie();return O?`${(0,_e.homedir)()}\\AppData\\Roaming\\${e}\\User\\globalStorage\\state.vscdb`:`${(0,_e.homedir)()}/Library/Application Support/${e}/User/globalStorage/state.vscdb`}async function vt(e){let t=`INSERT INTO ItemTable (key, value) VALUES ('history.recentlyOpenedPathsList', '${JSON.stringify({entries:e})}');`;await xt("sqlite3",[At(),t])}var k=require("@raycast/api");function De(e){return R==="list"?(0,k.List)({...e}):(0,k.Grid)({...e})}function Me(e){return R==="list"?k.List.Section({...e}):k.Grid.Section({...e})}function Fe(e){return R==="list"?k.List.Item({...e}):k.Grid.Item({...e})}function Pt(e){return R==="list"?k.List.EmptyView({...e}):k.Grid.EmptyView({...e})}function Rt(e){return R==="list"?k.List.Dropdown({...e}):k.Grid.Dropdown({...e})}function Ct(e){return R==="list"?k.List.Dropdown.Section({...e}):k.Grid.Dropdown.Section({...e})}function We(e){return R==="list"?k.List.Dropdown.Item({...e}):k.Grid.Dropdown.Item({...e})}var W=require("util");var Y=6;function kr(e,r){let t=new Array;if(R==="grid"){let n=e.findIndex(i=>(0,W.isDeepStrictEqual)(i,r));n>=Y&&n%Y===0&&t.push("up"),n<Math.floor(e.length/Y)*Y&&(n+1)%Y===0&&t.push("down"),n!==e.length-1&&t.push("right"),n!==0&&t.push("left")}else{let n=e.findIndex(i=>(0,W.isDeepStrictEqual)(i,r));n!==e.length-1&&t.push("down"),n!==0&&t.push("up")}return t}function It(){let[e,r]=nt("pinned",[]);return{pinnedEntries:e,pin:t=>r(n=>[t,...n.filter(i=>!(0,W.isDeepStrictEqual)(i,t))]),unpin:t=>r(n=>n.filter(i=>!(0,W.isDeepStrictEqual)(i,t))),unpinAll:()=>r([]),moveUp:t=>r(n=>{let i=n.findIndex(s=>(0,W.isDeepStrictEqual)(s,t));return n.splice(i-1,2,n[i],n[i-1]),n}),moveDown:t=>r(n=>{let i=n.findIndex(s=>(0,W.isDeepStrictEqual)(s,t));return n.splice(i,2,n[i+1],n[i]),n}),getAllowedMovements:t=>kr(e,t)}}var Ne=(a=>(a.Workspaces="Workspaces",a.Folders="Folders",a.RemoteFolders="Remote Folders",a.RemoteWorkspace="Remote Workspace",a.Files="Files",a.AllTypes="All Types",a))(Ne||{});var me=require("@raycast/api"),Tt=require("child_process"),Ve=x(require("fs")),ge=x(require("path")),Lt=require("url"),Ut=require("util"),xr=(0,Ut.promisify)(Tt.execFile);async function Ot(e){try{e.startsWith("file://")&&(e=(0,Lt.fileURLToPath)(e)),(await Ve.promises.stat(e)).isDirectory()||(e=ge.dirname(e));let t=ge.join(e,".git");if(!await Ve.promises.access(t).then(()=>!0).catch(()=>!1))return null;let{stdout:i}=await xr("git",["rev-parse","--abbrev-ref","HEAD"],{cwd:e,encoding:"utf-8"});return i.trim()||null}catch(r){return r instanceof Error&&!r.message.includes("not a git repository")&&!r.message.includes("ambiguous argument 'HEAD'")&&await(0,me.showToast)({style:me.Toast.Style.Failure,title:"Git Error",message:r instanceof Error?r.message:String(r)}),null}}var N=require("@raycast/api");var ye=require("react/jsx-runtime");function vr({uri:e}){return(0,ye.jsx)(N.Action,{title:"Reveal in Explorer",icon:N.Icon.Folder,onAction:()=>(0,N.open)(e)})}function _t({path:e}){return O?(0,ye.jsx)(vr,{uri:e}):(0,ye.jsx)(N.Action.ShowInFinder,{path:e})}var u=require("react/jsx-runtime");function Wt(){let{data:e,isLoading:r,error:t,...n}=St(),[i,s]=(0,X.useState)(null),{pinnedEntries:a,...l}=It();return t?((0,o.showToast)(o.Toast.Style.Failure,"Failed to load recent projects"),(0,u.jsx)(De,{actions:(0,u.jsx)(o.ActionPanel,{children:(0,u.jsx)(o.Action,{title:"Change Build",onAction:o.openExtensionPreferences})}),children:(0,u.jsx)(Pt,{title:"Failed to load recent projects",description:"Press enter to change build"})})):(0,u.jsxs)(De,{columns:6,inset:o.Grid.Inset.Medium,searchBarPlaceholder:"Search recent projects...",isLoading:r,filtering:{keepSectionOrder:dt},searchBarAccessory:(0,u.jsx)(Er,{onChange:s}),children:[(0,u.jsx)(Me,{title:"Pinned Projects",children:a.filter(Oe(i)).map((c,d)=>(0,u.jsx)(Dt,{entry:c,pinned:!0,...l,...n},`pinned-${d}`))}),(0,u.jsx)(Me,{title:"Recent Projects",children:e?.filter(bt(a))?.filter(Oe(i)).map((c,d)=>(0,u.jsx)(Dt,{entry:c,...l,...n},d))})]})}function Er(e){return(0,u.jsxs)(Rt,{tooltip:"Filter project types",defaultValue:"All Types",storeValue:!0,onChange:r=>e.onChange(r),children:[(0,u.jsx)(We,{title:"All Types",value:"All Types"}),(0,u.jsx)(Ct,{children:Object.values(Ne).filter(r=>r!=="All Types").sort().map(r=>(0,u.jsx)(We,{title:r,value:r},r))})]})}function Dt(e){return Ue(e.entry)?(0,u.jsx)(je,{...e,uri:e.entry.workspace.configPath}):fe(e.entry)?(0,u.jsx)(je,{...e,uri:e.entry.folderUri}):pe(e.entry)?(0,u.jsx)(Mt,{...e,uri:e.entry.folderUri,subtitle:e.entry.label,entry:e.entry,pinned:e.pinned}):he(e.entry)?(0,u.jsx)(Mt,{...e,uri:e.entry.workspace.configPath,subtitle:e.entry.label,entry:e.entry,pinned:e.pinned}):Le(e.entry)?(0,u.jsx)(je,{...e,uri:e.entry.fileUri}):null}function je(e){let r=decodeURIComponent((0,Q.basename)(e.uri)),t=(0,Ft.fileURLToPath)(e.uri),n=Ae(t),i=(0,Q.dirname)(n),s=t.split("/"),[a,l]=(0,X.useState)(null),{data:c}=Se(async()=>Pe(P));(0,X.useEffect)(()=>{let b=!0;async function C(){try{let w=await Ot(t);b&&l(w)}catch{}}return le&&C(),()=>{b=!1}},[t,r]);let d=(b=!1)=>`Open in ${P} ${Z!==b?"and Close Other":""}`,p=(b=!1)=>async()=>{Z!==b&&(O?await ot(`
        $AppName = "${P}"

        while (Get-Process -Name $AppName -ErrorAction SilentlyContinue | Where-Object {$_.MainWindowTitle}) {
          Get-Process -Name $AppName | Where-Object {$_.MainWindowTitle} | Select-Object -First 1 | ForEach-Object {$_.CloseMainWindow()}
        }
          `):await st(`
        tell application "System Events"
          tell process "${P}"
            repeat while window 1 exists
              click button 1 of window 1
            end repeat
          end tell
        end tell
        `)),(0,o.open)(O?t:e.uri,c)},h=[];if(le&&a){let b=q&&$t(q)?{light:q,dark:q,adjustContrast:!1}:o.Color.Green;h.push({tag:{value:a,color:b},tooltip:`Git Branch: ${a}`})}let y=le&&a&&R==="grid"?`${a} \u2022 ${i}`:i;return(0,u.jsx)(Fe,{id:e.pinned?t:void 0,title:r,subtitle:y,icon:{fileIcon:t},content:{fileIcon:t},keywords:s,accessories:h,actions:(0,u.jsxs)(o.ActionPanel,{children:[(0,u.jsxs)(o.ActionPanel.Section,{children:[(0,u.jsx)(o.Action,{title:d(),icon:c?{fileIcon:c.path}:"action-icon.png",onAction:p()}),(0,u.jsx)(_t,{path:t}),(0,u.jsx)(o.Action,{title:d(!0),icon:c?{fileIcon:c.path}:"action-icon.png",onAction:p(!0),shortcut:{modifiers:["cmd","shift"],key:"enter"}}),(0,u.jsx)(o.Action.OpenWith,{path:t,shortcut:{modifiers:["cmd"],key:"o"}}),fe(e.entry)&&G&&(0,u.jsx)(o.Action,{title:`Open with ${G.name}`,icon:{fileIcon:G.path},shortcut:{modifiers:["cmd","shift"],key:"o"},onAction:()=>(0,o.open)(t,G).catch(()=>(0,o.showToast)(o.Toast.Style.Failure,`Failed to open with ${G?.name}`))})]}),(0,u.jsxs)(o.ActionPanel.Section,{children:[(0,u.jsx)(o.Action.CopyToClipboard,{title:"Copy Name",content:r,shortcut:{modifiers:["cmd"],key:"."}}),(0,u.jsx)(o.Action.CopyToClipboard,{title:"Copy Path",content:n,shortcut:{modifiers:["cmd","shift"],key:"."}})]}),(0,u.jsx)(Vt,{...e}),(0,u.jsx)(Nt,{...e})]})})}function Mt(e){let r=decodeURI((0,Q.basename)(e.uri)),t=Te(),n=e.uri.replace("vscode-remote://",`${t}://vscode-remote/`),i=[];(pe(e.entry)||he(e.entry))&&(i=e.entry.remoteAuthority.split("+"));let s=(l=!1)=>`Open in ${P} ${Z!==l?"and Close Other":""}`,a=(l,c=!1)=>{let d=new URL(l);return Z!==c?d.searchParams.delete("windowId"):d.searchParams.set("windowId","_blank"),d.toString()};return(0,u.jsx)(Fe,{id:e.pinned?r:void 0,title:r,subtitle:e.subtitle||"/",icon:"remote.svg",content:"remote.svg",keywords:i,actions:(0,u.jsxs)(o.ActionPanel,{children:[(0,u.jsxs)(o.ActionPanel.Section,{children:[(0,u.jsx)(o.Action.OpenInBrowser,{title:s(),icon:"action-icon.png",url:a(n)}),(0,u.jsx)(o.Action.OpenInBrowser,{title:s(!0),icon:"action-icon.png",url:a(n,!0),shortcut:{modifiers:["cmd","shift"],key:"enter"}})]}),(0,u.jsx)(Vt,{...e}),(0,u.jsx)(Nt,{...e}),(0,u.jsx)(o.Action,{title:"Open Preferences",icon:o.Icon.Gear,onAction:o.openExtensionPreferences,shortcut:{modifiers:["cmd"],key:","}})]})})}function Nt(e){let r=e.getAllowedMovements(e.entry);return e.pinned?(0,u.jsxs)(o.ActionPanel.Section,{children:[(0,u.jsx)(o.Action,{title:"Unpin Entry",shortcut:{modifiers:["cmd","shift"],key:"p"},icon:o.Icon.PinDisabled,onAction:async()=>{e.unpin(e.entry),await(0,o.showToast)({title:"Unpinned entry"})}}),r.includes("left")&&(0,u.jsx)(o.Action,{title:"Move Left in Pinned Entries",shortcut:{modifiers:["cmd","opt"],key:"arrowLeft"},icon:o.Icon.ArrowLeft,onAction:async()=>{e.moveUp(e.entry),await(0,o.showToast)({title:"Moved pinned entry left"})}}),r.includes("up")&&(0,u.jsx)(o.Action,{title:"Move up in Pinned Entries",shortcut:{modifiers:["cmd","opt"],key:"arrowUp"},icon:o.Icon.ArrowUp,onAction:async()=>{e.moveUp(e.entry),await(0,o.showToast)({title:"Moved pinned entry up"})}}),r.includes("right")&&(0,u.jsx)(o.Action,{title:"Move Right in Pinned Entries",shortcut:{modifiers:["cmd","opt"],key:"arrowRight"},icon:o.Icon.ArrowRight,onAction:async()=>{e.moveDown(e.entry),await(0,o.showToast)({title:"Moved pinned entry right"})}}),r.includes("down")&&(0,u.jsx)(o.Action,{title:"Move Down in Pinned Entries",shortcut:{modifiers:["cmd","opt"],key:"arrowDown"},icon:o.Icon.ArrowDown,onAction:async()=>{e.moveDown(e.entry),await(0,o.showToast)({title:"Moved pinned entry down"})}}),(0,u.jsx)(o.Action,{title:"Unpin All Entries",icon:o.Icon.PinDisabled,shortcut:{modifiers:["ctrl","shift"],key:"x"},style:o.Action.Style.Destructive,onAction:async()=>{e.unpinAll(),await(0,o.showToast)({title:"Unpinned all entries"})}})]}):(0,u.jsx)(o.ActionPanel.Section,{children:(0,u.jsx)(o.Action,{title:"Pin Entry",icon:o.Icon.Pin,shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:async()=>{e.pin(e.entry),await(0,o.showToast)({title:"Pinned entry"})}})})}function Vt(e){return(0,u.jsxs)(o.ActionPanel.Section,{children:[(0,u.jsx)(o.Action,{icon:o.Icon.Trash,title:"Remove from Recent Projects",style:o.Action.Style.Destructive,onAction:()=>e.removeEntry(e.entry),shortcut:{modifiers:["ctrl"],key:"x"}}),(0,u.jsx)(o.Action,{icon:o.Icon.Trash,title:"Remove All Recent Projects",style:o.Action.Style.Destructive,onAction:()=>e.removeAllEntries(),shortcut:{modifiers:["ctrl","shift"],key:"x"}})]})}
