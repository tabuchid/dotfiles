"use strict";var Xa=Object.create;var Wt=Object.defineProperty;var Za=Object.getOwnPropertyDescriptor;var eu=Object.getOwnPropertyNames;var tu=Object.getPrototypeOf,ru=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),nu=(t,e)=>{for(var r in e)Wt(t,r,{get:e[r],enumerable:!0})},di=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of eu(e))!ru.call(t,i)&&i!==r&&Wt(t,i,{get:()=>e[i],enumerable:!(n=Za(e,i))||n.enumerable});return t};var iu=(t,e,r)=>(r=t!=null?Xa(tu(t)):{},di(e||!t||!t.__esModule?Wt(r,"default",{value:t,enumerable:!0}):r,t)),ou=t=>di(Wt({},"__esModule",{value:!0}),t);var Br=m((ep,Ur)=>{var mi=[],uu=mi.forEach,lu=mi.slice;Ur.exports.extend=function(t){return uu.call(lu.call(arguments,1),function(e){if(e)for(var r in e)t[r]=e[r]}),t};Ur.exports.parseJSON=function(t){try{return JSON.parse(t)}catch{return null}}});var vi=m((_i,$t)=>{var fu=require("https"),cu=require("http"),Wr=require("url"),gi=Br(),tp=$t.exports.maxRedirects=5,bi={https:fu,http:cu};for(Vt in bi)he=function(){},he.prototype=bi[Vt],he=new he,he.request=(function(t){return function(e,r,n){n=n||{};var i=typeof e=="object"&&"maxRedirects"in e?e.maxRedirects:_i.maxRedirects,o=gi.extend({count:0,max:i,clientRequest:null,userCallback:r},n);if(o.count>o.max){var s=new Error("Max redirects exceeded. To allow more redirects, pass options.maxRedirects property.");return o.clientRequest.emit("error",s),o.clientRequest}o.count++;var a;typeof e=="string"?a=e:a=Wr.format(gi.extend({protocol:Vt},e));var u=Object.getPrototypeOf(t).request(e,l(a,o));o.clientRequest||(o.clientRequest=u);function l(f,d){return function(c){if(c.statusCode<300||c.statusCode>399||!("location"in c.headers))return d.userCallback(c);var h=Wr.resolve(f,c.headers.location),g=Wr.parse(h).protocol;return g=g.substr(0,g.length-1),$t.exports[g].get(h,l(f,d),d)}}return u}})(he),he.get=(function(t){return function(e,r,n){var i=t.request(e,r,n);return i.end(),i}})(he),$t.exports[Vt]=he;var he,Vt});var Gr=m((rp,yi)=>{yi.exports=require("stream")});var ki=m((np,Ti)=>{"use strict";function Si(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Si(Object(r),!0).forEach(function(n){du(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function du(t,e,r){return e=Ci(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ci(n.key),n)}}function pu(t,e,r){return e&&Ei(t.prototype,e),r&&Ei(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ci(t){var e=mu(t,"string");return typeof e=="symbol"?e:String(e)}function mu(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gu=require("buffer"),Kt=gu.Buffer,bu=require("util"),Hr=bu.inspect,_u=Hr&&Hr.custom||"inspect";function vu(t,e,r){Kt.prototype.copy.call(t,e,r)}Ti.exports=(function(){function t(){hu(this,t),this.head=null,this.tail=null,this.length=0}return pu(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return Kt.alloc(0);for(var n=Kt.allocUnsafe(r>>>0),i=this.head,o=0;i;)vu(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=Kt.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:_u,value:function(r,n){return Hr(this,wi(wi({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var $r=m((ip,Ri)=>{"use strict";function yu(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Vr,this,t)):process.nextTick(Vr,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(zt,r):(r._writableState.errorEmitted=!0,process.nextTick(xi,r,o)):process.nextTick(xi,r,o):e?(process.nextTick(zt,r),e(o)):process.nextTick(zt,r)}),this)}function xi(t,e){Vr(t,e),zt(t)}function zt(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Su(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Vr(t,e){t.emit("error",e)}function wu(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Ri.exports={destroy:yu,undestroy:Su,errorOrDestroy:wu}});var ve=m((op,Oi)=>{"use strict";var Pi={};function te(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}class i extends r{constructor(s,a,u){super(n(s,a,u))}}i.prototype.name=r.name,i.prototype.code=t,Pi[t]=i}function Ai(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Eu(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Cu(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Tu(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}te("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);te("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&Eu(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(Cu(t," argument"))i=`The ${t} ${n} ${Ai(e,"type")}`;else{let o=Tu(t,".")?"property":"argument";i=`The "${t}" ${o} ${n} ${Ai(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);te("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");te("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});te("ERR_STREAM_PREMATURE_CLOSE","Premature close");te("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});te("ERR_MULTIPLE_CALLBACK","Callback called multiple times");te("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");te("ERR_STREAM_WRITE_AFTER_END","write after end");te("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);te("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);te("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Oi.exports.codes=Pi});var Kr=m((sp,Ii)=>{"use strict";var ku=ve().codes.ERR_INVALID_OPT_VALUE;function xu(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Ru(t,e,r,n){var i=xu(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new ku(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Ii.exports={getHighWaterMark:Ru}});var Di=m((ap,zr)=>{typeof Object.create=="function"?zr.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:zr.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Ve=m((up,Jr)=>{try{if(Yr=require("util"),typeof Yr.inherits!="function")throw"";Jr.exports=Yr.inherits}catch{Jr.exports=Di()}var Yr});var Li=m((lp,Ni)=>{Ni.exports=require("util").deprecate});var Zr=m((fp,Bi)=>{"use strict";Bi.exports=F;function Mi(t){var e=this;this.next=null,this.entry=null,this.finish=function(){tl(e,t)}}var $e;F.WritableState=pt;var Au={deprecate:Li()},Fi=Gr(),Jt=require("buffer").Buffer,Pu=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Ou(t){return Jt.from(t)}function Iu(t){return Jt.isBuffer(t)||t instanceof Pu}var Xr=$r(),Du=Kr(),Nu=Du.getHighWaterMark,ye=ve().codes,Lu=ye.ERR_INVALID_ARG_TYPE,qu=ye.ERR_METHOD_NOT_IMPLEMENTED,Mu=ye.ERR_MULTIPLE_CALLBACK,Fu=ye.ERR_STREAM_CANNOT_PIPE,ju=ye.ERR_STREAM_DESTROYED,Uu=ye.ERR_STREAM_NULL_VALUES,Bu=ye.ERR_STREAM_WRITE_AFTER_END,Wu=ye.ERR_UNKNOWN_ENCODING,Ke=Xr.errorOrDestroy;Ve()(F,Fi);function Gu(){}function pt(t,e,r){$e=$e||Oe(),t=t||{},typeof r!="boolean"&&(r=e instanceof $e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=Nu(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Ju(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Mi(this)}pt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(pt.prototype,"buffer",{get:Au.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Yt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Yt=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(e){return Yt.call(this,e)?!0:this!==F?!1:e&&e._writableState instanceof pt}})):Yt=function(e){return e instanceof this};function F(t){$e=$e||Oe();var e=this instanceof $e;if(!e&&!Yt.call(F,this))return new F(t);this._writableState=new pt(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Fi.call(this)}F.prototype.pipe=function(){Ke(this,new Fu)};function Hu(t,e){var r=new Bu;Ke(t,r),process.nextTick(e,r)}function Vu(t,e,r,n){var i;return r===null?i=new Uu:typeof r!="string"&&!e.objectMode&&(i=new Lu("chunk",["string","Buffer"],r)),i?(Ke(t,i),process.nextTick(n,i),!1):!0}F.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Iu(t);return o&&!Jt.isBuffer(t)&&(t=Ou(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Gu),n.ending?Hu(this,r):(o||Vu(this,n,t,r))&&(n.pendingcb++,i=Ku(this,n,o,t,e,r)),i};F.prototype.cork=function(){this._writableState.corked++};F.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ji(this,t))};F.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Wu(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $u(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Jt.from(e,r)),e}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ku(t,e,r,n,i,o){if(!r){var s=$u(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Qr(t,e,!1,a,n,i,o);return u}function Qr(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new ju("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function zu(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(ht,t,e),t._writableState.errorEmitted=!0,Ke(t,n)):(i(n),t._writableState.errorEmitted=!0,Ke(t,n),ht(t,e))}function Yu(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ju(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Mu;if(Yu(r),e)zu(t,r,n,e,i);else{var o=Ui(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&ji(t,r),n?process.nextTick(qi,t,r,o,i):qi(t,r,o,i)}}function qi(t,e,r,n){r||Qu(t,e),e.pendingcb--,n(),ht(t,e)}function Qu(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function ji(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,Qr(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Mi(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,f=r.callback,d=e.objectMode?1:u.length;if(Qr(t,e,!1,d,u,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}F.prototype._write=function(t,e,r){r(new qu("_write()"))};F.prototype._writev=null;F.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||el(this,n,r),this};Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ui(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Xu(t,e){t._final(function(r){e.pendingcb--,r&&Ke(t,r),e.prefinished=!0,t.emit("prefinish"),ht(t,e)})}function Zu(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Xu,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ht(t,e){var r=Ui(e);if(r&&(Zu(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function el(t,e,r){e.ending=!0,ht(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function tl(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});F.prototype.destroy=Xr.destroy;F.prototype._undestroy=Xr.undestroy;F.prototype._destroy=function(t,e){e(t)}});var Oe=m((cp,Gi)=>{"use strict";var rl=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Gi.exports=ae;var Wi=rn(),tn=Zr();Ve()(ae,Wi);for(en=rl(tn.prototype),Qt=0;Qt<en.length;Qt++)Xt=en[Qt],ae.prototype[Xt]||(ae.prototype[Xt]=tn.prototype[Xt]);var en,Xt,Qt;function ae(t){if(!(this instanceof ae))return new ae(t);Wi.call(this,t),tn.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nl)))}Object.defineProperty(ae.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ae.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ae.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nl(){this._writableState.ended||process.nextTick(il,this)}function il(t){t.end()}Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var $i=m((nn,Vi)=>{var Zt=require("buffer"),ue=Zt.Buffer;function Hi(t,e){for(var r in t)e[r]=t[r]}ue.from&&ue.alloc&&ue.allocUnsafe&&ue.allocUnsafeSlow?Vi.exports=Zt:(Hi(Zt,nn),nn.Buffer=Ie);function Ie(t,e,r){return ue(t,e,r)}Ie.prototype=Object.create(ue.prototype);Hi(ue,Ie);Ie.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ue(t,e,r)};Ie.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ue(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Ie.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ue(t)};Ie.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Zt.SlowBuffer(t)}});var an=m(zi=>{"use strict";var sn=$i().Buffer,Ki=sn.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ol(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function sl(t){var e=ol(t);if(typeof e!="string"&&(sn.isEncoding===Ki||!Ki(t)))throw new Error("Unknown encoding: "+t);return e||t}zi.StringDecoder=mt;function mt(t){this.encoding=sl(t);var e;switch(this.encoding){case"utf16le":this.text=dl,this.end=hl,e=4;break;case"utf8":this.fillLast=ll,e=4;break;case"base64":this.text=pl,this.end=ml,e=3;break;default:this.write=gl,this.end=bl;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=sn.allocUnsafe(e)}mt.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};mt.prototype.end=cl;mt.prototype.text=fl;mt.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function on(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function al(t,e,r){var n=e.length-1;if(n<r)return 0;var i=on(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=on(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=on(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function ul(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function ll(t){var e=this.lastTotal-this.lastNeed,r=ul(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function fl(t,e){var r=al(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function cl(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function dl(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function hl(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function pl(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function ml(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function gl(t){return t.toString(this.encoding)}function bl(t){return t&&t.length?this.write(t):""}});var er=m((hp,Qi)=>{"use strict";var Yi=ve().codes.ERR_STREAM_PREMATURE_CLOSE;function _l(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function vl(){}function yl(t){return t.setHeader&&typeof t.abort=="function"}function Ji(t,e,r){if(typeof e=="function")return Ji(t,null,e);e||(e={}),r=_l(r||vl);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,u=!0,i||r.call(t)},f=function(g){r.call(t,g)},d=function(){var g;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(g=new Yi),r.call(t,g);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(g=new Yi),r.call(t,g)},c=function(){t.req.on("finish",a)};return yl(t)?(t.on("complete",a),t.on("abort",d),t.req?c():t.on("request",c)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",c),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}Qi.exports=Ji});var Zi=m((pp,Xi)=>{"use strict";var tr;function Se(t,e,r){return e=Sl(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sl(t){var e=wl(t,"string");return typeof e=="symbol"?e:String(e)}function wl(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var El=er(),we=Symbol("lastResolve"),De=Symbol("lastReject"),gt=Symbol("error"),rr=Symbol("ended"),Ne=Symbol("lastPromise"),un=Symbol("handlePromise"),Le=Symbol("stream");function Ee(t,e){return{value:t,done:e}}function Cl(t){var e=t[we];if(e!==null){var r=t[Le].read();r!==null&&(t[Ne]=null,t[we]=null,t[De]=null,e(Ee(r,!1)))}}function Tl(t){process.nextTick(Cl,t)}function kl(t,e){return function(r,n){t.then(function(){if(e[rr]){r(Ee(void 0,!0));return}e[un](r,n)},n)}}var xl=Object.getPrototypeOf(function(){}),Rl=Object.setPrototypeOf((tr={get stream(){return this[Le]},next:function(){var e=this,r=this[gt];if(r!==null)return Promise.reject(r);if(this[rr])return Promise.resolve(Ee(void 0,!0));if(this[Le].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[gt]?a(e[gt]):s(Ee(void 0,!0))})});var n=this[Ne],i;if(n)i=new Promise(kl(n,this));else{var o=this[Le].read();if(o!==null)return Promise.resolve(Ee(o,!1));i=new Promise(this[un])}return this[Ne]=i,i}},Se(tr,Symbol.asyncIterator,function(){return this}),Se(tr,"return",function(){var e=this;return new Promise(function(r,n){e[Le].destroy(null,function(i){if(i){n(i);return}r(Ee(void 0,!0))})})}),tr),xl),Al=function(e){var r,n=Object.create(Rl,(r={},Se(r,Le,{value:e,writable:!0}),Se(r,we,{value:null,writable:!0}),Se(r,De,{value:null,writable:!0}),Se(r,gt,{value:null,writable:!0}),Se(r,rr,{value:e._readableState.endEmitted,writable:!0}),Se(r,un,{value:function(o,s){var a=n[Le].read();a?(n[Ne]=null,n[we]=null,n[De]=null,o(Ee(a,!1))):(n[we]=o,n[De]=s)},writable:!0}),r));return n[Ne]=null,El(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[De];o!==null&&(n[Ne]=null,n[we]=null,n[De]=null,o(i)),n[gt]=i;return}var s=n[we];s!==null&&(n[Ne]=null,n[we]=null,n[De]=null,s(Ee(void 0,!0))),n[rr]=!0}),e.on("readable",Tl.bind(null,n)),n};Xi.exports=Al});var no=m((mp,ro)=>{"use strict";function eo(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(l){r(l);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Pl(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(u){eo(o,n,i,s,a,"next",u)}function a(u){eo(o,n,i,s,a,"throw",u)}s(void 0)})}}function to(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ol(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?to(Object(r),!0).forEach(function(n){Il(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Il(t,e,r){return e=Dl(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dl(t){var e=Nl(t,"string");return typeof e=="symbol"?e:String(e)}function Nl(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ll=ve().codes.ERR_INVALID_ARG_TYPE;function ql(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Ll("iterable",["Iterable"],e);var i=new t(Ol({objectMode:!0},r)),o=!1;i._read=function(){o||(o=!0,s())};function s(){return a.apply(this,arguments)}function a(){return a=Pl(function*(){try{var u=yield n.next(),l=u.value,f=u.done;f?i.push(null):i.push(yield l)?s():o=!1}catch(d){i.destroy(d)}}),a.apply(this,arguments)}return i}ro.exports=ql});var rn=m((bp,po)=>{"use strict";po.exports=A;var ze;A.ReadableState=ao;var gp=require("events").EventEmitter,so=function(e,r){return e.listeners(r).length},_t=Gr(),nr=require("buffer").Buffer,Ml=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Fl(t){return nr.from(t)}function jl(t){return nr.isBuffer(t)||t instanceof Ml}var ln=require("util"),C;ln&&ln.debuglog?C=ln.debuglog("stream"):C=function(){};var Ul=ki(),gn=$r(),Bl=Kr(),Wl=Bl.getHighWaterMark,ir=ve().codes,Gl=ir.ERR_INVALID_ARG_TYPE,Hl=ir.ERR_STREAM_PUSH_AFTER_EOF,Vl=ir.ERR_METHOD_NOT_IMPLEMENTED,$l=ir.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ye,fn,cn;Ve()(A,_t);var bt=gn.errorOrDestroy,dn=["error","close","destroy","pause","resume"];function Kl(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ao(t,e,r){ze=ze||Oe(),t=t||{},typeof r!="boolean"&&(r=e instanceof ze),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Wl(this,t,"readableHighWaterMark",r),this.buffer=new Ul,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ye||(Ye=an().StringDecoder),this.decoder=new Ye(t.encoding),this.encoding=t.encoding)}function A(t){if(ze=ze||Oe(),!(this instanceof A))return new A(t);var e=this instanceof ze;this._readableState=new ao(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),_t.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});A.prototype.destroy=gn.destroy;A.prototype._undestroy=gn.undestroy;A.prototype._destroy=function(t,e){e(t)};A.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=nr.from(t,e),e=""),n=!0),uo(this,t,e,!1,n)};A.prototype.unshift=function(t){return uo(this,t,null,!0,!1)};function uo(t,e,r,n,i){C("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Jl(t,o);else{var s;if(i||(s=zl(o,e)),s)bt(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==nr.prototype&&(e=Fl(e)),n)o.endEmitted?bt(t,new $l):hn(t,o,e,!0);else if(o.ended)bt(t,new Hl);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?hn(t,o,e,!1):mn(t,o)):hn(t,o,e,!1)}else n||(o.reading=!1,mn(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function hn(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&or(t)),mn(t,e)}function zl(t,e){var r;return!jl(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Gl("chunk",["string","Buffer","Uint8Array"],e)),r}A.prototype.isPaused=function(){return this._readableState.flowing===!1};A.prototype.setEncoding=function(t){Ye||(Ye=an().StringDecoder);var e=new Ye(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var io=1073741824;function Yl(t){return t>=io?t=io:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function oo(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Yl(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}A.prototype.read=function(t){C("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return C("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?pn(this):or(this),null;if(t=oo(t,e),t===0&&e.ended)return e.length===0&&pn(this),null;var n=e.needReadable;C("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,C("length less than watermark",n)),e.ended||e.reading?(n=!1,C("reading or ended",n)):n&&(C("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=oo(r,e)));var i;return t>0?i=co(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&pn(this)),i!==null&&this.emit("data",i),i};function Jl(t,e){if(C("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?or(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,lo(t)))}}function or(t){var e=t._readableState;C("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(C("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(lo,t))}function lo(t){var e=t._readableState;C("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,bn(t)}function mn(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Ql,t,e))}function Ql(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(C("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}A.prototype._read=function(t){bt(this,new Vl("_read()"))};A.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,C("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:b;n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,S){C("onunpipe"),_===r&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,f())}function a(){C("onend"),t.end()}var u=Xl(r);t.on("drain",u);var l=!1;function f(){C("cleanup"),t.removeListener("close",h),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",c),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",b),r.removeListener("data",d),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(_){C("ondata");var S=t.write(_);C("dest.write",S),S===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&ho(n.pipes,t)!==-1)&&!l&&(C("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(_){C("onerror",_),b(),t.removeListener("error",c),so(t,"error")===0&&bt(t,_)}Kl(t,"error",c);function h(){t.removeListener("finish",g),b()}t.once("close",h);function g(){C("onfinish"),t.removeListener("close",h),b()}t.once("finish",g);function b(){C("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(C("pipe resume"),r.resume()),t};function Xl(t){return function(){var r=t._readableState;C("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&so(t,"data")&&(r.flowing=!0,bn(t))}}A.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=ho(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};A.prototype.on=function(t,e){var r=_t.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,C("on readable",n.length,n.reading),n.length?or(this):n.reading||process.nextTick(Zl,this)),r};A.prototype.addListener=A.prototype.on;A.prototype.removeListener=function(t,e){var r=_t.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(fo,this),r};A.prototype.removeAllListeners=function(t){var e=_t.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(fo,this),e};function fo(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Zl(t){C("readable nexttick read 0"),t.read(0)}A.prototype.resume=function(){var t=this._readableState;return t.flowing||(C("resume"),t.flowing=!t.readableListening,ef(this,t)),t.paused=!1,this};function ef(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(tf,t,e))}function tf(t,e){C("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),bn(t),e.flowing&&!e.reading&&t.read(0)}A.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function bn(t){var e=t._readableState;for(C("flow",e.flowing);e.flowing&&t.read()!==null;);}A.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(C("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(C("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var o=0;o<dn.length;o++)t.on(dn[o],this.emit.bind(this,dn[o]));return this._read=function(s){C("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return fn===void 0&&(fn=Zi()),fn(this)});Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});A._fromList=co;Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function co(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function pn(t){var e=t._readableState;C("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(rf,e,t))}function rf(t,e){if(C("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(A.from=function(t,e){return cn===void 0&&(cn=no()),cn(A,t,e)});function ho(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var _n=m((_p,go)=>{"use strict";go.exports=pe;var sr=ve().codes,nf=sr.ERR_METHOD_NOT_IMPLEMENTED,of=sr.ERR_MULTIPLE_CALLBACK,sf=sr.ERR_TRANSFORM_ALREADY_TRANSFORMING,af=sr.ERR_TRANSFORM_WITH_LENGTH_0,ar=Oe();Ve()(pe,ar);function uf(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new of);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function pe(t){if(!(this instanceof pe))return new pe(t);ar.call(this,t),this._transformState={afterTransform:uf.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",lf)}function lf(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){mo(t,e,r)}):mo(this,null,null)}pe.prototype.push=function(t,e){return this._transformState.needTransform=!1,ar.prototype.push.call(this,t,e)};pe.prototype._transform=function(t,e,r){r(new nf("_transform()"))};pe.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};pe.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};pe.prototype._destroy=function(t,e){ar.prototype._destroy.call(this,t,function(r){e(r)})};function mo(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new af;if(t._transformState.transforming)throw new sf;return t.push(null)}});var vo=m((vp,_o)=>{"use strict";_o.exports=vt;var bo=_n();Ve()(vt,bo);function vt(t){if(!(this instanceof vt))return new vt(t);bo.call(this,t)}vt.prototype._transform=function(t,e,r){r(null,t)}});var Co=m((yp,Eo)=>{"use strict";var vn;function ff(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var wo=ve().codes,cf=wo.ERR_MISSING_ARGS,df=wo.ERR_STREAM_DESTROYED;function yo(t){if(t)throw t}function hf(t){return t.setHeader&&typeof t.abort=="function"}function pf(t,e,r,n){n=ff(n);var i=!1;t.on("close",function(){i=!0}),vn===void 0&&(vn=er()),vn(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,hf(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new df("pipe"))}}}function So(t){t()}function mf(t,e){return t.pipe(e)}function gf(t){return!t.length||typeof t[t.length-1]!="function"?yo:t.pop()}function bf(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=gf(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new cf("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,l=a>0;return pf(s,u,l,function(f){i||(i=f),f&&o.forEach(So),!u&&(o.forEach(So),n(i))})});return e.reduce(mf)}Eo.exports=bf});var To=m((re,St)=>{var yt=require("stream");process.env.READABLE_STREAM==="disable"&&yt?(St.exports=yt.Readable,Object.assign(St.exports,yt),St.exports.Stream=yt):(re=St.exports=rn(),re.Stream=yt||re,re.Readable=re,re.Writable=Zr(),re.Duplex=Oe(),re.Transform=_n(),re.PassThrough=vo(),re.finished=er(),re.pipeline=Co())});var Ro=m((Sp,xo)=>{xo.exports=me;var _f=require("util"),ko=To();_f.inherits(me,ko.Duplex);function me(t,e,r){var n=this;if(!(n instanceof me))return new me(t,e,r);ko.Duplex.call(n,r),n._output=null,n.connect(t,e)}me.prototype.connect=function(t,e){var r=this;r.req=t,r._output=e,r.emit("response",e),e.on("data",function(n){r.push(n)||r._output.pause()}),e.on("end",function(){r.push(null)})};me.prototype._read=function(t){this._output&&this._output.resume()};me.prototype._write=function(t,e,r){this.req.write(t,e),r()};me.prototype.end=function(t,e,r){return this._output.socket.destroy(),this.req.end(t,e,r)};me.prototype.destroy=function(){this.req.destroy(),this._output.socket.destroy()}});var Po=m((wp,Ao)=>{var Je=1e3,Qe=Je*60,Xe=Qe*60,qe=Xe*24,vf=qe*7,yf=qe*365.25;Ao.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Sf(t);if(r==="number"&&isFinite(t))return e.long?Ef(t):wf(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Sf(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yf;case"weeks":case"week":case"w":return r*vf;case"days":case"day":case"d":return r*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Xe;case"minutes":case"minute":case"mins":case"min":case"m":return r*Qe;case"seconds":case"second":case"secs":case"sec":case"s":return r*Je;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wf(t){var e=Math.abs(t);return e>=qe?Math.round(t/qe)+"d":e>=Xe?Math.round(t/Xe)+"h":e>=Qe?Math.round(t/Qe)+"m":e>=Je?Math.round(t/Je)+"s":t+"ms"}function Ef(t){var e=Math.abs(t);return e>=qe?ur(t,e,qe,"day"):e>=Xe?ur(t,e,Xe,"hour"):e>=Qe?ur(t,e,Qe,"minute"):e>=Je?ur(t,e,Je,"second"):t+" ms"}function ur(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var yn=m((Ep,Oo)=>{function Cf(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=a,r.humanize=Po(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let d=0;for(let c=0;c<f.length;c++)d=(d<<5)-d+f.charCodeAt(c),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(f){let d,c=null,h,g;function b(..._){if(!b.enabled)return;let S=b,T=Number(new Date),k=T-(d||T);S.diff=k,S.prev=d,S.curr=T,d=T,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let v=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(D,w)=>{if(D==="%%")return"%";v++;let O=r.formatters[w];if(typeof O=="function"){let Z=_[v];D=O.call(S,Z),_.splice(v,1),v--}return D}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return b.namespace=f,b.useColors=r.useColors(),b.color=r.selectColor(f),b.extend=n,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),set:_=>{c=_}}),typeof r.init=="function"&&r.init(b),b}function n(f,d){let c=r(this.namespace+(typeof d>"u"?":":d)+f);return c.log=this.log,c}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let c of d)c[0]==="-"?r.skips.push(c.slice(1)):r.names.push(c)}function o(f,d){let c=0,h=0,g=-1,b=0;for(;c<f.length;)if(h<d.length&&(d[h]===f[c]||d[h]==="*"))d[h]==="*"?(g=h,b=c,h++):(c++,h++);else if(g!==-1)h=g+1,b++,c=b;else return!1;for(;h<d.length&&d[h]==="*";)h++;return h===d.length}function s(){let f=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),f}function a(f){for(let d of r.skips)if(o(f,d))return!1;for(let d of r.names)if(o(f,d))return!0;return!1}function u(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Oo.exports=Cf});var Io=m((J,lr)=>{J.formatArgs=kf;J.save=xf;J.load=Rf;J.useColors=Tf;J.storage=Af();J.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();J.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Tf(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function kf(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+lr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}J.log=console.debug||console.log||(()=>{});function xf(t){try{t?J.storage.setItem("debug",t):J.storage.removeItem("debug")}catch{}}function Rf(){let t;try{t=J.storage.getItem("debug")||J.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Af(){try{return localStorage}catch{}}lr.exports=yn()(J);var{formatters:Pf}=lr.exports;Pf.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var No=m((Cp,Do)=>{"use strict";Do.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Mo=m((Tp,qo)=>{"use strict";var Of=require("os"),Lo=require("tty"),ne=No(),{env:G}=process,fr;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?fr=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(fr=1);function If(){if("FORCE_COLOR"in G)return G.FORCE_COLOR==="true"?1:G.FORCE_COLOR==="false"?0:G.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(G.FORCE_COLOR,10),3)}function Df(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Nf(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=If();n!==void 0&&(fr=n);let i=r?fr:n;if(i===0)return 0;if(r){if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(G.TERM==="dumb")return o;if(process.platform==="win32"){let s=Of.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in G)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in G)||G.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in G)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(G.TEAMCITY_VERSION)?1:0;if(G.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in G){let s=Number.parseInt((G.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(G.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(G.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(G.TERM)||"COLORTERM"in G?1:o}function Sn(t,e={}){let r=Nf(t,{streamIsTTY:t&&t.isTTY,...e});return Df(r)}qo.exports={supportsColor:Sn,stdout:Sn({isTTY:Lo.isatty(1)}),stderr:Sn({isTTY:Lo.isatty(2)})}});var jo=m((H,dr)=>{var Lf=require("tty"),cr=require("util");H.init=Wf;H.log=jf;H.formatArgs=Mf;H.save=Uf;H.load=Bf;H.useColors=qf;H.destroy=cr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");H.colors=[6,2,3,4,5,1];try{let t=Mo();t&&(t.stderr||t).level>=2&&(H.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}H.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function qf(){return"colors"in H.inspectOpts?!!H.inspectOpts.colors:Lf.isatty(process.stderr.fd)}function Mf(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+dr.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Ff()+e+" "+t[0]}function Ff(){return H.inspectOpts.hideDate?"":new Date().toISOString()+" "}function jf(...t){return process.stderr.write(cr.formatWithOptions(H.inspectOpts,...t)+`
`)}function Uf(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Bf(){return process.env.DEBUG}function Wf(t){t.inspectOpts={};let e=Object.keys(H.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=H.inspectOpts[e[r]]}dr.exports=yn()(H);var{formatters:Fo}=dr.exports;Fo.o=function(t){return this.inspectOpts.colors=this.useColors,cr.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Fo.O=function(t){return this.inspectOpts.colors=this.useColors,cr.inspect(t,this.inspectOpts)}});var Uo=m((kp,wn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?wn.exports=Io():wn.exports=jo()});var Wo=m((xp,Bo)=>{var Gf=require("fs");Bo.exports=function(t,e,r){e=typeof e<"u"?e:`
`,r=typeof r<"u"?r:"utf8";var n=[],i=Gf.readFileSync(t,r);if(i.indexOf("-END CERTIFICATE-")<0||i.indexOf("-BEGIN CERTIFICATE-")<0)throw Error("File does not contain 'BEGIN CERTIFICATE' or 'END CERTIFICATE'");i=i.split(e);var o=[],s,a;for(s=0,a=i.length;s<a;s++){var u=i[s];u.length!==0&&(o.push(u),u.match(/-END CERTIFICATE-/)&&(n.push(o.join(e)),o=[]))}return n}});var Vo=m((Rp,Ho)=>{var Hf=require("querystring"),Vf=vi(),En=require("fs"),pr=require("path"),Ze=require("url"),$f=Ro(),hr=Uo()("modem"),Go=Br(),Kf=require("util"),Ze=require("url"),zf=Wo(),Yf=require("os").type()==="Windows_NT",Jf=function(){var t,e={};if(!process.env.DOCKER_HOST)e.socketPath=Yf?"//./pipe/docker_engine":"/var/run/docker.sock";else if(process.env.DOCKER_HOST.indexOf("unix://")===0)e.socketPath=process.env.DOCKER_HOST.substring(7)||"/var/run/docker.sock";else if(process.env.DOCKER_HOST.indexOf("npipe://")===0)e.socketPath=process.env.DOCKER_HOST.substring(8)||"//./pipe/docker_engine";else{var r=process.env.DOCKER_HOST;r.indexOf("//")<0&&(r="tcp://"+r);try{t=new Ze.URL(r)}catch{throw new Error("DOCKER_HOST env variable should be something like tcp://localhost:1234")}e.port=t.port,process.env.DOCKER_TLS_VERIFY==="1"||e.port==="2376"?e.protocol="https":e.protocol="http",e.host=t.hostname,process.env.DOCKER_CERT_PATH&&(e.ca=zf(pr.join(process.env.DOCKER_CERT_PATH,"ca.pem")),e.cert=En.readFileSync(pr.join(process.env.DOCKER_CERT_PATH,"cert.pem")),e.key=En.readFileSync(pr.join(process.env.DOCKER_CERT_PATH,"key.pem"))),process.env.DOCKER_CLIENT_TIMEOUT&&(e.timeout=parseInt(process.env.DOCKER_CLIENT_TIMEOUT,10))}return e},Me=function(t){var e=Jf(),r=Object.assign({},e,t);this.host=r.host,this.host||(this.socketPath=r.socketPath),this.port=r.port,this.username=r.username,this.password=r.password,this.version=r.version,this.key=r.key,this.cert=r.cert,this.ca=r.ca,this.timeout=r.timeout,this.connectionTimeout=r.connectionTimeout,this.checkServerIdentity=r.checkServerIdentity,this.agent=r.agent,this.headers=r.headers||{},this.key&&this.cert&&this.ca&&(this.protocol="https"),this.protocol=r.protocol||this.protocol||"http"};Me.prototype.dial=function(t,e){var r,n,i,o=this;if(t.options&&(r=t.options),r&&r.authconfig&&delete r.authconfig,r&&r.abortSignal&&delete r.abortSignal,this.version&&(t.path="/"+this.version+t.path),this.host){var s=Ze.parse(o.host);n=Ze.format({protocol:s.protocol||o.protocol,hostname:s.hostname||o.host,port:o.port}),n=Ze.resolve(n,t.path)}else n=t.path;t.path.indexOf("?")!==-1&&(r&&Object.keys(r).length>0?n+=this.buildQuerystring(r._query||r):n=n.substring(0,n.length-1));var a={path:n,method:t.method,headers:t.headers||Object.assign({},o.headers),key:o.key,cert:o.cert,ca:o.ca};if(this.checkServerIdentity&&(a.checkServerIdentity=this.checkServerIdentity),this.agent&&(a.agent=this.agent),t.authconfig&&(a.headers["X-Registry-Auth"]=t.authconfig.key||t.authconfig.base64||Buffer.from(JSON.stringify(t.authconfig)).toString("base64")),t.registryconfig&&(a.headers["X-Registry-Config"]=t.registryconfig.base64||Buffer.from(JSON.stringify(t.registryconfig)).toString("base64")),t.abortSignal&&(a.signal=t.abortSignal),t.file?(typeof t.file=="string"?i=En.createReadStream(pr.resolve(t.file)):i=t.file,a.headers["Content-Type"]="application/tar"):r&&t.method==="POST"&&(i=JSON.stringify(r._body||r),t.allowEmpty||i!=="{}"&&i!=='""'?a.headers["Content-Type"]="application/json":i=void 0),typeof i=="string"?a.headers["Content-Length"]=Buffer.byteLength(i):Buffer.isBuffer(i)===!0?a.headers["Content-Length"]=i.length:(a.method==="PUT"||t.hijack||t.openStdin)&&(a.headers["Transfer-Encoding"]="chunked"),t.hijack&&(a.headers.Connection="Upgrade",a.headers.Upgrade="tcp"),this.socketPath)a.socketPath=this.socketPath;else{var u=Ze.parse(n);a.hostname=u.hostname,a.port=u.port,a.path=u.path}this.buildRequest(a,t,i,e)};Me.prototype.buildRequest=function(t,e,r,n){var i=this,o,s=Vf[i.protocol].request(t,function(){});hr("Sending: %s",Kf.inspect(t,{showHidden:!0,depth:null})),i.connectionTimeout&&(o=setTimeout(function(){hr("Connection Timeout of %s ms exceeded",i.connectionTimeout),s.abort()},i.connectionTimeout)),i.timeout&&s.on("socket",function(a){a.setTimeout(i.timeout),a.on("timeout",function(){hr("Timeout of %s ms exceeded",i.timeout),s.abort()})}),e.hijack===!0&&(clearTimeout(o),s.on("upgrade",function(a,u,l){return n(null,u)})),s.on("connect",function(){clearTimeout(o)}),s.on("disconnect",function(){clearTimeout(o)}),s.on("response",function(a){if(clearTimeout(o),e.isStream===!0)i.buildPayload(null,e.isStream,e.statusCodes,e.openStdin,s,a,null,n);else{var u=[];a.on("data",function(l){u.push(l)}),a.on("end",function(){var l=Buffer.concat(u),f=l.toString();hr("Received: %s",f);var d=Go.parseJSON(f)||l;i.buildPayload(null,e.isStream,e.statusCodes,!1,s,a,d,n)})}}),s.on("error",function(a){clearTimeout(o),i.buildPayload(a,e.isStream,e.statusCodes,!1,{},{},null,n)}),typeof r=="string"||Buffer.isBuffer(r)?s.write(r):r&&(r.on("error",function(a){s.destroy(a)}),r.pipe(s)),!e.hijack&&!e.openStdin&&(typeof r=="string"||r===void 0||Buffer.isBuffer(r))&&s.end()};Me.prototype.buildPayload=function(t,e,r,n,i,o,s,a){if(t)return a(t,null);r[o.statusCode]!==!0?u(e,o,s,function(l,f){var d=new Error("(HTTP code "+o.statusCode+") "+(r[o.statusCode]||"unexpected")+" - "+(f.message||f)+" ");d.reason=r[o.statusCode],d.statusCode=o.statusCode,d.json=s,a(d,null)}):n?a(null,new $f(i,o)):e?a(null,o):a(null,s);function u(l,f,d,c){var h="";l?(f.on("data",function(g){h+=g}),f.on("end",function(){c(null,Go.parseJSON(h)||h)})):c(null,d)}};Me.prototype.demuxStream=function(t,e,r){var n=null,i=null,o=Buffer.from("");function s(u){if(u&&(o=Buffer.concat([o,u])),n){if(o.length>=i){var f=a(i);n===1?e.write(f):r.write(f),n=null,s()}}else if(o.length>=8){var l=a(8);n=l.readUInt8(0),i=l.readUInt32BE(4),s()}}function a(u){var l=o.slice(0,u);return o=Buffer.from(o.slice(u,o.length)),l}t.on("data",s)};Me.prototype.followProgress=function(t,e,r){var n="",i=[],o=!1;t.on("data",s),t.on("error",a),t.on("end",u),t.on("close",u);function s(l){n+=l.toString(),f();function f(){for(var c;(c=n.indexOf(`
`))>=0;){if(c==0){n=n.slice(1);continue}d(n.slice(0,c)),n=n.slice(c+1)}}function d(c){if(c[c.length-1]=="\r"&&(c=c.substr(0,c.length-1)),c.length>0){var h=JSON.parse(c);i.push(h),r&&r(h)}}}function a(l){o=!0,t.removeListener("data",s),t.removeListener("error",a),t.removeListener("end",u),t.removeListener("close",u),e(l,i)}function u(){o||e(null,i),o=!0}};Me.prototype.buildQuerystring=function(t){var e={};return Object.keys(t).map(function(r,n){t[r]&&typeof t[r]=="object"&&!Array.isArray(t[r])||r==="cachefrom"?e[r]=JSON.stringify(t[r]):e[r]=t[r]}),Hf.stringify(e)};Ho.exports=Me});var Ko=m((Pp,$o)=>{$o.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var Cn=m((Ip,Yo)=>{var zo=Ko();Yo.exports=class{constructor(e){this.hwm=e||16,this.head=new zo(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new zo(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var et=m((Dp,Jo)=>{function Qf(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Xf(t){return Buffer.isEncoding(t)}function Zf(t,e,r){return Buffer.alloc(t,e,r)}function ec(t){return Buffer.allocUnsafe(t)}function tc(t){return Buffer.allocUnsafeSlow(t)}function rc(t,e){return Buffer.byteLength(t,e)}function nc(t,e){return Buffer.compare(t,e)}function ic(t,e){return Buffer.concat(t,e)}function oc(t,e,r,n,i){return L(t).copy(e,r,n,i)}function sc(t,e){return L(t).equals(e)}function ac(t,e,r,n,i){return L(t).fill(e,r,n,i)}function uc(t,e,r){return Buffer.from(t,e,r)}function lc(t,e,r,n){return L(t).includes(e,r,n)}function fc(t,e,r,n){return L(t).indexOf(e,r,n)}function cc(t,e,r,n){return L(t).lastIndexOf(e,r,n)}function dc(t){return L(t).swap16()}function hc(t){return L(t).swap32()}function pc(t){return L(t).swap64()}function L(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function mc(t,e,r,n){return L(t).toString(e,r,n)}function gc(t,e,r,n,i){return L(t).write(e,r,n,i)}function bc(t,e,r){return L(t).writeDoubleLE(e,r)}function _c(t,e,r){return L(t).writeFloatLE(e,r)}function vc(t,e,r){return L(t).writeUInt32LE(e,r)}function yc(t,e,r){return L(t).writeInt32LE(e,r)}function Sc(t,e){return L(t).readDoubleLE(e)}function wc(t,e){return L(t).readFloatLE(e)}function Ec(t,e){return L(t).readUInt32LE(e)}function Cc(t,e){return L(t).readInt32LE(e)}function Tc(t,e,r){return L(t).writeDoubleBE(e,r)}function kc(t,e,r){return L(t).writeFloatBE(e,r)}function xc(t,e,r){return L(t).writeUInt32BE(e,r)}function Rc(t,e,r){return L(t).writeInt32BE(e,r)}function Ac(t,e){return L(t).readDoubleBE(e)}function Pc(t,e){return L(t).readFloatBE(e)}function Oc(t,e){return L(t).readUInt32BE(e)}function Ic(t,e){return L(t).readInt32BE(e)}Jo.exports={isBuffer:Qf,isEncoding:Xf,alloc:Zf,allocUnsafe:ec,allocUnsafeSlow:tc,byteLength:rc,compare:nc,concat:ic,copy:oc,equals:sc,fill:ac,from:uc,includes:lc,indexOf:fc,lastIndexOf:cc,swap16:dc,swap32:hc,swap64:pc,toBuffer:L,toString:mc,write:gc,writeDoubleLE:bc,writeFloatLE:_c,writeUInt32LE:vc,writeInt32LE:yc,readDoubleLE:Sc,readFloatLE:wc,readUInt32LE:Ec,readInt32LE:Cc,writeDoubleBE:Tc,writeFloatBE:kc,writeUInt32BE:xc,writeInt32BE:Rc,readDoubleBE:Ac,readFloatBE:Pc,readUInt32BE:Oc,readInt32BE:Ic}});var Xo=m((Lp,Qo)=>{var Dc=et();Qo.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Dc.toString(e,this.encoding)}flush(){return""}}});var es=m((Mp,Zo)=>{var Nc=et();Zo.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),o=e.byteLength;i<o&&n;i++)n=e[i]<=127;if(n)return Nc.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let o=e[n];if(this.bytesNeeded===0){o<=127?r+=String.fromCharCode(o):(this.bytesSeen=1,o>=194&&o<=223?(this.bytesNeeded=2,this.codePoint=o&31):o>=224&&o<=239?(o===224?this.lowerBoundary=160:o===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=o&15):o>=240&&o<=244?(o===240&&(this.lowerBoundary=144),o===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=o&7):r+="\uFFFD");continue}if(o<this.lowerBoundary||o>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|o&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var rs=m((jp,ts)=>{var Lc=Xo(),qc=es();ts.exports=class{constructor(e="utf8"){switch(this.encoding=Mc(e),this.encoding){case"utf8":this.decoder=new qc;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Lc(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function Mc(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var Un=m((Up,Ts)=>{var{EventEmitter:Fc}=require("events"),yr=new Error("Stream was destroyed"),Tn=new Error("Premature close"),us=Cn(),jc=rs(),kn=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,M=(1<<29)-1,le=1,Dn=2,Fe=4,wt=8,ls=M^le,Uc=M^Dn,xt=16,tt=32,it=64,Te=128,Rt=256,Nn=512,je=1024,xn=2048,Ln=4096,qn=8192,oe=16384,Ce=32768,Sr=65536,Ue=131072,fs=Rt|Nn,Bc=xt|Sr,Wc=it|xt,Gc=Ln|Te,Mn=Rt|Ue,Hc=M^xt,Vc=M^it,$c=M^(it|Sr),ns=M^Sr,Kc=M^Rt,zc=M^(Te|qn),Yc=M^je,is=M^fs,cs=M^Ce,Jc=M^tt,ds=M^Ue,Qc=M^Mn,ge=1<<18,nt=2<<18,At=4<<18,Be=8<<18,Pt=16<<18,ke=32<<18,Rn=64<<18,rt=128<<18,Fn=256<<18,We=512<<18,wr=1024<<18,Xc=M^(ge|Fn),hs=M^At,Zc=M^(ge|We),ed=M^Pt,td=M^Be,ps=M^rt,rd=M^nt,ms=M^wr,Et=xt|ge,gs=M^Et,jn=oe|ke,fe=Fe|wt|Dn,X=fe|le,bs=fe|jn,nd=hs&Vc,Er=rt|Ce,id=Er&gs,_s=X|id,od=X|je|oe,os=X|oe|Te,sd=X|je|Te,ad=X|Ln|Te|qn,ud=X|xt|je|oe|Sr|Ue,ld=fe|je|oe,fd=tt|X|Ce|it,cd=Ce|le,dd=X|We|ke,hd=Be|Pt,vs=Be|ge,pd=Be|Pt|X|ge,ss=X|ge|Be|wr,md=At|ge,gd=ge|Fn,bd=X|We|vs|ke,_d=Pt|fe|We|ke,vd=nt|X|rt|At,yd=We|ke|fe,mr=Symbol.asyncIterator||Symbol("asyncIterator"),gr=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:o,byteLengthWritable:s}={}){this.stream=e,this.queue=new us,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||o||Cs,this.map=i||n,this.afterWrite=Ed.bind(this),this.afterUpdateNextTick=kd.bind(this)}get ended(){return(this.stream._duplexState&ke)!==0}push(e){return(this.stream._duplexState&yd)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Be,!0):(this.stream._duplexState|=hd,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=td),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|We)&hs}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&ss)===vs;)n.push(i._writableState.shift());if((i._duplexState&X)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=nt;do{for(;(e._duplexState&ss)===Be;){let r=this.shift();e._duplexState|=gd,e._write(r,this.afterWrite)}(e._duplexState&md)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=rd}updateNonPrimary(){let e=this.stream;if((e._duplexState&bd)===We){e._duplexState=e._duplexState|ge,e._final(wd.bind(this));return}if((e._duplexState&fe)===Fe){(e._duplexState&Er)===0&&(e._duplexState|=Et,e._destroy(ys.bind(this)));return}(e._duplexState&_s)===le&&(e._duplexState=(e._duplexState|Et)&ls,e._open(Ss.bind(this)))}continueUpdate(){return(this.stream._duplexState&rt)===0?!1:(this.stream._duplexState&=ps,!0)}updateCallback(){(this.stream._duplexState&vd)===At?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&rt)===0&&(this.stream._duplexState|=rt,(this.stream._duplexState&nt)===0&&kn(this.afterUpdateNextTick))}},An=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:o,byteLengthReadable:s}={}){this.stream=e,this.queue=new us,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=s||o||Cs,this.map=i||n,this.pipeTo=null,this.afterRead=Cd.bind(this),this.afterUpdateNextTick=Td.bind(this)}get ended(){return(this.stream._duplexState&oe)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=Nn,this.pipeTo=e,this.pipeline=new On(this.stream,e,r),r&&this.stream.on("error",as),kt(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",as),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",Sd.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|je)&$c,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=ns,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|Te)&ns,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=zc),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&os)===Te){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=is),(e._duplexState&xn)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=Ue,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&os)===Te&&(e._duplexState&fs)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=is),(e._duplexState&xn)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=tt;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&ud)===Ue;)e._duplexState|=Bc,e._read(this.afterRead),this.drain();(e._duplexState&ad)===Gc&&(e._duplexState|=qn,e.emit("readable")),(e._duplexState&Wc)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Jc}updateNonPrimary(){let e=this.stream;if((e._duplexState&sd)===je&&(e._duplexState=(e._duplexState|oe)&Yc,e.emit("end"),(e._duplexState&bs)===jn&&(e._duplexState|=Fe),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&fe)===Fe){(e._duplexState&Er)===0&&(e._duplexState|=Et,e._destroy(ys.bind(this)));return}(e._duplexState&_s)===le&&(e._duplexState=(e._duplexState|Et)&ls,e._open(Ss.bind(this)))}continueUpdate(){return(this.stream._duplexState&Ce)===0?!1:(this.stream._duplexState&=cs,!0)}updateCallback(){(this.stream._duplexState&fd)===it?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&cd)===0&&(this.stream._duplexState|=Ce,(this.stream._duplexState&tt)===0&&kn(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&Ce)===0&&(this.stream._duplexState|=Ce,(this.stream._duplexState&tt)===0&&kn(this.afterUpdateNextTick))}},Pn=class{constructor(e){this.data=null,this.afterTransform=Rd.bind(e),this.afterFinal=null}},On=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&oe)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&oe)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function Sd(){this.stream._duplexState|=Nn,this.updateCallback()}function wd(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&fe)===0&&(e._duplexState|=ke,e.emit("finish")),(e._duplexState&bs)===jn&&(e._duplexState|=Fe),e._duplexState&=Zc,(e._duplexState&nt)===0?this.update():this.updateNextTick()}function ys(t){let e=this.stream;!t&&this.error!==yr&&(t=this.error),t&&e.emit("error",t),e._duplexState|=wt,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function Ed(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Xc,this.drains!==null&&xd(this.drains),(e._duplexState&pd)===Pt&&(e._duplexState&=ed,(e._duplexState&Rn)===Rn&&e.emit("drain")),this.updateCallback()}function Cd(t){t&&this.stream.destroy(t),this.stream._duplexState&=Hc,this.readAhead===!1&&(this.stream._duplexState&Rt)===0&&(this.stream._duplexState&=ds),this.updateCallback()}function Td(){(this.stream._duplexState&tt)===0&&(this.stream._duplexState&=cs,this.update())}function kd(){(this.stream._duplexState&nt)===0&&(this.stream._duplexState&=ps,this.update())}function xd(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function Ss(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Fe)===0&&((e._duplexState&od)===0&&(e._duplexState|=it),(e._duplexState&dd)===0&&(e._duplexState|=At),e.emit("open")),e._duplexState&=gs,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function Rd(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function Ad(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=xn|Mn,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=Ln,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=Rn,this._writableState.updateNextTick())}var Ct=class extends Fc{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",jd.bind(this))),this.on("newListener",Ad)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&wt)!==0}get destroying(){return(this._duplexState&fe)!==0}destroy(e){(this._duplexState&fe)===0&&(e||(e=yr),this._duplexState=(this._duplexState|Fe)&nd,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=Dn,this._predestroy(),this._duplexState&=Uc,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},br=class t extends Ct{constructor(e){super(e),this._duplexState|=le|ke|Ue,this._readableState=new An(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=ds),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new jc(e),n=this._readableState.map||Id;return this._readableState.map=i,this;function i(o){let s=r.push(o);return s===""&&(o.byteLength!==0||r.remaining>0)?null:n(s)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=Mn,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Qc:Kc,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(s){e.next().then(o).then(s.bind(null,null)).catch(s)},predestroy(){n=e.return()},destroy(s){if(!n)return s(null);n.then(s.bind(null,null)).catch(s)}});return i;function o(s){s.done?i.push(null):i.push(s.value)}}static from(e,r){if(qd(e))return e;if(e[mr])return this._fromAsyncIterator(e[mr](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&ld)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Rt)===0}[mr](){let e=this,r=null,n=null,i=null;return this.on("error",l=>{r=l}),this.on("readable",o),this.on("close",s),{[mr](){return this},next(){return new Promise(function(l,f){n=l,i=f;let d=e.read();d!==null?a(d):(e._duplexState&wt)!==0&&a(null)})},return(){return u(null)},throw(l){return u(l)}};function o(){n!==null&&a(e.read())}function s(){n!==null&&a(null)}function a(l){i!==null&&(r?i(r):l===null&&(e._duplexState&oe)===0?i(yr):n({value:l,done:l===null}),i=n=null)}function u(l){return e.destroy(l),new Promise((f,d)=>{if(e._duplexState&wt)return f({value:void 0,done:!0});e.once("close",function(){l?d(l):f({value:void 0,done:!0})})})}}},_r=class extends Ct{constructor(e){super(e),this._duplexState|=le|oe,this._writableState=new gr(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=wr}uncork(){this._duplexState&=ms,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&_d)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(Ud(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&Fn?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(o=>{r.drains.push({writes:i,resolve:o})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Tt=class extends br{constructor(e){super(e),this._duplexState=le|this._duplexState&Ue,this._writableState=new gr(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=wr}uncork(){this._duplexState&=ms,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},vr=class extends Tt{constructor(e){super(e),this._transformState=new Pn(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Pd.bind(this))}},In=class extends vr{};function Pd(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function Od(...t){return new Promise((e,r)=>ws(...t,n=>{if(n)return r(n);e()}))}function ws(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],o=null,s=null;for(let l=1;l<r.length;l++)o=r[l],kt(i)?i.pipe(o,u):(a(i,!0,l>1,u),i.pipe(o)),i=o;if(n){let l=!1,f=kt(o)||!!(o._writableState&&o._writableState.autoDestroy);o.on("error",d=>{s===null&&(s=d)}),o.on("finish",()=>{l=!0,f||n(s)}),f&&o.on("close",()=>n(s||(l?null:Tn)))}return o;function a(l,f,d,c){l.on("error",c),l.on("close",h);function h(){if(f&&l._readableState&&!l._readableState.ended||d&&l._writableState&&!l._writableState.ended)return c(Tn)}}function u(l){if(!(!l||s)){s=l;for(let f of r)f.destroy(l)}}}function Id(t){return t}function Es(t){return!!t._readableState||!!t._writableState}function kt(t){return typeof t._duplexState=="number"&&Es(t)}function Dd(t){return!!t._readableState&&t._readableState.ended}function Nd(t){return!!t._writableState&&t._writableState.ended}function Ld(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===yr?null:r}function qd(t){return kt(t)&&t.readable}function Md(t){return(t._duplexState&le)!==le||(t._duplexState&Er)!==0}function Fd(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function Cs(t){return Fd(t)?t.byteLength:1024}function as(){}function jd(){this.destroy(new Error("Stream aborted."))}function Ud(t){return t._writev!==_r.prototype._writev&&t._writev!==Tt.prototype._writev}Ts.exports={pipeline:ws,pipelinePromise:Od,isStream:Es,isStreamx:kt,isEnded:Dd,isFinished:Nd,isDisturbed:Md,getStreamError:Ld,Stream:Ct,Writable:_r,Readable:br,Duplex:Tt,Transform:vr,PassThrough:In}});var Gn=m(st=>{var x=et(),Bd="0000000000000000000",Wd="7777777777777777777",Cr=48,ks=x.from([117,115,116,97,114,0]),Gd=x.from([Cr,Cr]),Hd=x.from([117,115,116,97,114,32]),Vd=x.from([32,0]),$d=4095,Ot=257,Wn=263;st.decodeLongPath=function(e,r){return ot(e,0,e.length,r)};st.encodePax=function(e){let r="";e.name&&(r+=Bn(" path="+e.name+`
`)),e.linkname&&(r+=Bn(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=Bn(" "+i+"="+n[i]+`
`);return x.from(r)};st.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt(x.toString(e.subarray(0,n)),10);if(!i)return r;let o=x.toString(e.subarray(n+1,i-1)),s=o.indexOf("=");if(s===-1)return r;r[o.slice(0,s)]=o.slice(s+1),e=e.subarray(i)}return r};st.encode=function(e){let r=x.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),x.byteLength(n)!==n.length)return null;for(;x.byteLength(n)>100;){let o=n.indexOf("/");if(o===-1)return null;i+=i?"/"+n.slice(0,o):n.slice(0,o),n=n.slice(o+1)}return x.byteLength(n)>100||x.byteLength(i)>155||e.linkname&&x.byteLength(e.linkname)>100?null:(x.write(r,n),x.write(r,Re(e.mode&$d,6),100),x.write(r,Re(e.uid,6),108),x.write(r,Re(e.gid,6),116),Zd(e.size,r,124),x.write(r,Re(e.mtime.getTime()/1e3|0,11),136),r[156]=Cr+Qd(e.type),e.linkname&&x.write(r,e.linkname,157),x.copy(ks,r,Ot),x.copy(Gd,r,Wn),e.uname&&x.write(r,e.uname,265),e.gname&&x.write(r,e.gname,297),x.write(r,Re(e.devmajor||0,6),329),x.write(r,Re(e.devminor||0,6),337),i&&x.write(r,i,345),x.write(r,Re(Rs(r),6),148),r)};st.decode=function(e,r,n){let i=e[156]===0?0:e[156]-Cr,o=ot(e,0,100,r),s=xe(e,100,8),a=xe(e,108,8),u=xe(e,116,8),l=xe(e,124,12),f=xe(e,136,12),d=Jd(i),c=e[157]===0?null:ot(e,157,100,r),h=ot(e,265,32),g=ot(e,297,32),b=xe(e,329,8),_=xe(e,337,8),S=Rs(e);if(S===256)return null;if(S!==xe(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Kd(e))e[345]&&(o=ot(e,345,155,r)+"/"+o);else if(!zd(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&o&&o[o.length-1]==="/"&&(i=5),{name:o,mode:s,uid:a,gid:u,size:l,mtime:new Date(1e3*f),type:d,linkname:c,uname:h,gname:g,devmajor:b,devminor:_,pax:null}};function Kd(t){return x.equals(ks,t.subarray(Ot,Ot+6))}function zd(t){return x.equals(Hd,t.subarray(Ot,Ot+6))&&x.equals(Vd,t.subarray(Wn,Wn+2))}function Yd(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Jd(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Qd(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function xs(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function Rs(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function Re(t,e){return t=t.toString(8),t.length>e?Wd.slice(0,e)+" ":Bd.slice(0,e-t.length)+t+" "}function Xd(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function Zd(t,e,r){t.toString(8).length>11?Xd(t,e,r):x.write(e,Re(t,11),r)}function eh(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let s=t[n];e?r.push(s):r.push(255-s)}let i=0,o=r.length;for(n=0;n<o;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function xe(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return eh(t);{for(;e<t.length&&t[e]===32;)e++;let n=Yd(xs(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt(x.toString(t.subarray(e,n)),8)}}function ot(t,e,r,n){return x.toString(t.subarray(e,xs(t,0,e,e+r)),n)}function Bn(t){let e=x.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var Ds=m((Wp,Is)=>{var{Writable:th,Readable:rh,getStreamError:As}=Un(),nh=Cn(),Ps=et(),at=Gn(),ih=Ps.alloc(0),Vn=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new nh,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return ih;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return Ps.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},$n=class extends rh{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(As(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=Os(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},Kn=class extends th{constructor(e){super(e),e||(e={}),this._buffer=new Vn,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=Hn,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=at.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=at.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=at.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=at.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?at.decodePax(e):Object.assign({},this._paxGlobal,at.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=Os(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new $n(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=Hn,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(As(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,o=null,s=this;return this.on("entry",l),this.on("error",c=>{e=c}),this.on("close",f),{[Symbol.asyncIterator](){return this},next(){return new Promise(u)},return(){return d(null)},throw(c){return d(c)}};function a(c){if(!o)return;let h=o;o=null,h(c)}function u(c,h){if(e)return h(e);if(i){c({value:i,done:!1}),i=null;return}r=c,n=h,a(null),s._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function l(c,h,g){o=g,h.on("error",Hn),r?(r({value:h,done:!1}),r=n=null):i=h}function f(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function d(c){return s.destroy(c),a(c),new Promise((h,g)=>{if(s.destroyed)return h({value:void 0,done:!0});s.once("close",function(){c?g(c):h({value:void 0,done:!0})})})}}};Is.exports=function(e){return new Kn(e)};function Hn(){}function Os(t){return t&=511,t&&512-t}});var Ls=m((Gp,zn)=>{var Ns={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{zn.exports=require("fs").constants||Ns}catch{zn.exports=Ns}});var Us=m((Hp,js)=>{var{Readable:oh,Writable:sh,getStreamError:qs}=Un(),Ge=et(),ut=Ls(),Tr=Gn(),ah=493,uh=420,Ms=Ge.alloc(1024),Jn=class extends sh{constructor(e,r,n){super({mapWritable:fh,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?Ge.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Ge.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),Fs(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return qs(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},Qn=class extends oh{constructor(e){super(e),this._drain=Yn,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=Yn),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=lh(e.mode)),e.mode||(e.mode=e.type==="directory"?ah:uh),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=Ge.from(r));let i=new Jn(this,e,n);return Ge.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(Ms),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=Tr.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=Tr.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(Tr.encode(n)),this.push(r),Fs(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(Tr.encode(n))}_doDrain(){let e=this._drain;this._drain=Yn,e()}_predestroy(){let e=qs(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};js.exports=function(e){return new Qn(e)};function lh(t){switch(t&ut.S_IFMT){case ut.S_IFBLK:return"block-device";case ut.S_IFCHR:return"character-device";case ut.S_IFDIR:return"directory";case ut.S_IFIFO:return"fifo";case ut.S_IFLNK:return"symlink"}return"file"}function Yn(){}function Fs(t,e){e&=511,e&&t.push(Ms.subarray(0,512-e))}function fh(t){return Ge.isBuffer(t)?t:Ge.from(t)}});var Bs=m(Xn=>{Xn.extract=Ds();Xn.pack=Us()});var Hs=m(($p,Gs)=>{Gs.exports=Ws;function Ws(t,e){if(t&&e)return Ws(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=t.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var ei=m((Kp,Zn)=>{var Vs=Hs();Zn.exports=Vs(kr);Zn.exports.strict=Vs($s);kr.proto=kr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return kr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return $s(this)},configurable:!0})});function kr(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function $s(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Ys=m((zp,zs)=>{var ch=ei(),dh=function(){},hh=function(t){return t.setHeader&&typeof t.abort=="function"},ph=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},Ks=function(t,e,r){if(typeof e=="function")return Ks(t,null,e);e||(e={}),r=ch(r||dh);var n=t._writableState,i=t._readableState,o=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||l()},l=function(){s=!1,o||r.call(t)},f=function(){o=!1,s||r.call(t)},d=function(_){r.call(t,_?new Error("exited with error code: "+_):null)},c=function(_){r.call(t,_)},h=function(){process.nextTick(g)},g=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},b=function(){t.req.on("finish",l)};return hh(t)?(t.on("complete",l),t.on("abort",h),t.req?b():t.on("request",b)):s&&!n&&(t.on("end",u),t.on("close",u)),ph(t)&&t.on("exit",d),t.on("end",f),t.on("finish",l),e.error!==!1&&t.on("error",c),t.on("close",h),function(){a=!0,t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",b),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("exit",d),t.removeListener("end",f),t.removeListener("error",c),t.removeListener("close",h)}};zs.exports=Ks});var Xs=m((Yp,Qs)=>{var mh=ei(),gh=Ys(),xr;try{xr=require("fs")}catch{}var It=function(){},bh=/^v?\.0/.test(process.version),Rr=function(t){return typeof t=="function"},_h=function(t){return!bh||!xr?!1:(t instanceof(xr.ReadStream||It)||t instanceof(xr.WriteStream||It))&&Rr(t.close)},vh=function(t){return t.setHeader&&Rr(t.abort)},yh=function(t,e,r,n){n=mh(n);var i=!1;t.on("close",function(){i=!0}),gh(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,_h(t))return t.close(It);if(vh(t))return t.abort();if(Rr(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},Js=function(t){t()},Sh=function(t,e){return t.pipe(e)},wh=function(){var t=Array.prototype.slice.call(arguments),e=Rr(t[t.length-1]||It)&&t.pop()||It;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return yh(i,s,a,function(u){r||(r=u),u&&n.forEach(Js),!s&&(n.forEach(Js),e(r))})});return t.reduce(Sh)};Qs.exports=wh});var oa=m(ni=>{var Zs=Bs(),ea=Xs(),ti=require("fs"),U=require("path"),Dt=(global.Bare?global.Bare.platform:process.platform)==="win32";ni.pack=function(e,r){e||(e="."),r||(r={});let n=r.fs||ti,i=r.ignore||r.filter||Nt,o=r.mapStream||na,s=Th(n,r.dereference?n.stat:n.lstat,e,i,r.entries,r.sort),a=r.strict!==!1,u=typeof r.umask=="number"?~r.umask:~ta(),l=r.pack||Zs.pack(),f=r.finish||Nt,d=r.map||Nt,c=typeof r.dmode=="number"?r.dmode:0,h=typeof r.fmode=="number"?r.fmode:0;r.strip&&(d=ia(d,r.strip)),r.readable&&(c|=parseInt(555,8),h|=parseInt(444,8)),r.writable&&(c|=parseInt(333,8),h|=parseInt(222,8)),_();function g(S,T){n.readlink(U.join(e,S),function(k,v){if(k)return l.destroy(k);T.linkname=ri(v),l.entry(T,_)})}function b(S,T,k){if(l.destroyed)return;if(S)return l.destroy(S);if(!T)return r.finalize!==!1&&l.finalize(),f(l);if(k.isSocket())return _();let v={name:ri(T),mode:(k.mode|(k.isDirectory()?c:h))&u,mtime:k.mtime,size:k.size,type:"file",uid:k.uid,gid:k.gid};if(k.isDirectory())return v.size=0,v.type="directory",v=d(v)||v,l.entry(v,_);if(k.isSymbolicLink())return v.size=0,v.type="symlink",v=d(v)||v,g(T,v);if(v=d(v)||v,!k.isFile())return a?l.destroy(new Error("unsupported type for "+T)):_();let y=l.entry(v,_),D=o(n.createReadStream(U.join(e,T),{start:0,end:v.size>0?v.size-1:v.size}),v);D.on("error",function(w){y.destroy(w)}),ea(D,y)}function _(S){if(S)return l.destroy(S);s(b)}return l};function Eh(t){return t.length?t[t.length-1]:null}function Ch(){return!global.Bare&&process.getuid?process.getuid():-1}function ta(){return!global.Bare&&process.umask?process.umask():0}ni.extract=function(e,r){e||(e="."),r||(r={}),e=U.resolve(e);let n=r.fs||ti,i=r.ignore||r.filter||Nt,o=r.mapStream||na,s=r.chown!==!1&&!Dt&&Ch()===0,a=r.extract||Zs.extract(),u=[],l=new Date,f=typeof r.umask=="number"?~r.umask:~ta(),d=r.strict!==!1,c=r.validateSymlinks!==!1,h=r.map||Nt,g=typeof r.dmode=="number"?r.dmode:0,b=typeof r.fmode=="number"?r.fmode:0;return r.strip&&(h=ia(h,r.strip)),r.readable&&(g|=parseInt(555,8),b|=parseInt(444,8)),r.writable&&(g|=parseInt(333,8),b|=parseInt(222,8)),a.on("entry",_),r.finish&&a.on("finish",r.finish),a;function _(y,D,w){y=h(y)||y,y.name=ri(y.name);let O=U.join(e,U.join("/",y.name));if(i(O,y))return D.resume(),w();let Z=U.join(O,".")===U.join(e,".")?e:U.dirname(O);ra(n,Z,U.join(e,"."),function($,de){if($)return w($);if(!de)return w(new Error(Z+" is not a valid path"));if(y.type==="directory")return u.push([O,y.mtime]),v(O,{fs:n,own:s,uid:y.uid,gid:y.gid,mode:y.mode},_e);v(Z,{fs:n,own:s,uid:y.uid,gid:y.gid,mode:493},function(ie){if(ie)return w(ie);switch(y.type){case"file":return ci();case"link":return Bt();case"symlink":return Lr()}if(d)return w(new Error("unsupported type for "+O+" ("+y.type+")"));D.resume(),w()})});function _e($){if($)return w($);T(O,y,function(de){if(de)return w(de);if(Dt)return w();k(O,y,w)})}function Lr(){if(Dt)return w();n.unlink(O,function(){let $=U.resolve(U.dirname(O),y.linkname);if(!ct($)&&c)return w(new Error(O+" is not a valid symlink"));n.symlink(y.linkname,O,_e)})}function Bt(){if(Dt)return w();n.unlink(O,function(){let $=U.join(e,U.join("/",y.linkname));ti.realpath($,function(de,ie){if(de||!ct(ie))return w(new Error(O+" is not a valid hardlink"));n.link(ie,O,function(qr){if(qr&&qr.code==="EPERM"&&r.hardlinkAsFilesFallback)return D=n.createReadStream(ie),ci();_e(qr)})})})}function ct($){return $===e||$.startsWith(e+U.sep)}function ci(){let $=n.createWriteStream(O),de=o(D,y);$.on("error",function(ie){de.destroy(ie)}),ea(de,$,function(ie){if(ie)return w(ie);$.on("close",_e)})}}function S(y,D){let w;for(;(w=Eh(u))&&y.slice(0,w[0].length)!==w[0];)u.pop();if(!w)return D();n.utimes(w[0],l,w[1],D)}function T(y,D,w){if(r.utimes===!1)return w();if(D.type==="directory")return n.utimes(y,l,D.mtime,w);if(D.type==="symlink")return S(y,w);n.utimes(y,l,D.mtime,function(O){if(O)return w(O);S(y,w)})}function k(y,D,w){let O=D.type==="symlink",Z=O?n.lchmod:n.chmod,_e=O?n.lchown:n.chown;if(!Z)return w();let Lr=(D.mode|(D.type==="directory"?g:b))&f;_e&&s?_e.call(n,y,D.uid,D.gid,Bt):Bt(null);function Bt(ct){if(ct)return w(ct);if(!Z)return w();Z.call(n,y,Lr,w)}}function v(y,D,w){n.stat(y,function(O){if(!O)return w(null);if(O.code!=="ENOENT")return w(O);n.mkdir(y,{mode:D.mode,recursive:!0},function(Z,_e){if(Z)return w(Z);k(y,D,w)})})}};function ra(t,e,r,n){if(e===r)return n(null,!0);t.lstat(e,function(i,o){if(i&&i.code!=="ENOENT"&&i.code!=="EPERM")return n(i);if(i||o.isDirectory())return ra(t,U.join(e,".."),r,n);n(null,!1)})}function Nt(){}function na(t){return t}function ri(t){return Dt?t.replace(/\\/g,"/").replace(/[:?<>|]/g,"_"):t}function Th(t,e,r,n,i,o){i||(i=["."]);let s=i.slice(0);return function(u){if(!s.length)return u(null);let l=s.shift(),f=U.join(r,l);e.call(t,f,function(d,c){if(d)return u(i.indexOf(l)===-1&&d.code==="ENOENT"?null:d);if(!c.isDirectory())return u(null,l,c);t.readdir(f,function(h,g){if(h)return u(h);o&&g.sort();for(let b=0;b<g.length;b++)n(U.join(r,l,g[b]))||s.push(U.join(l,g[b]));u(null,l,c)})})}}function ia(t,e){return function(r){r.name=r.name.split("/").slice(e).join("/");let n=r.linkname;return n&&(r.type==="link"||U.isAbsolute(n))&&(r.linkname=n.split("/").slice(e).join("/")),t(r)}}});var Q=m((Qp,Lt)=>{var sa=[],kh=sa.forEach,xh=sa.slice;Lt.exports.extend=function(t){return kh.call(xh.call(arguments,1),function(e){if(e)for(var r in e)t[r]=e[r]}),t};Lt.exports.processArgs=function(t,e,r){return!e&&typeof t=="function"&&(e=t,t=null),{callback:e,opts:Lt.exports.extend({},r,t)}};Lt.exports.parseRepositoryTag=function(t){var e,r=t.indexOf("@"),n=t.lastIndexOf(":");if(r>=0)e=r;else if(n>=0)e=n;else return{repository:t};var i=t.slice(e+1);return i.indexOf("/")===-1?{repository:t.slice(0,e),tag:i}:{repository:t}}});var oi=m((Xp,aa)=>{var ii=Q(),qt=function(t,e){this.modem=t,this.id=e};qt.prototype[require("util").inspect.custom]=function(){return this};qt.prototype.start=function(t,e){var r=this,n=ii.processArgs(t,e),i={path:"/exec/"+this.id+"/start",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,allowEmpty:!0,hijack:n.opts.hijack,openStdin:n.opts.stdin,statusCodes:{200:!0,204:!0,404:"no such exec",409:"container stopped/paused",500:"container not running"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,s)})};qt.prototype.resize=function(t,e){var r=this,n=ii.processArgs(t,e),i={path:"/exec/"+this.id+"/resize?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such exec",500:"container not running"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,s)})};qt.prototype.inspect=function(t,e){var r=this,n=ii.processArgs(t,e),i={path:"/exec/"+this.id+"/json",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such exec",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){if(o)return e(o,s);n.callback(o,s)})};aa.exports=qt});var fa=m((em,la)=>{var Zp=Q().extend,ua=oi(),q=Q(),I=function(t,e){this.modem=t,this.id=e,this.defaultOptions={top:{},start:{},commit:{},stop:{},pause:{},unpause:{},restart:{},resize:{},attach:{},remove:{},copy:{},kill:{},exec:{},rename:{},log:{},stats:{},getArchive:{},infoArchive:{},putArchive:{},update:{},wait:{}}};I.prototype[require("util").inspect.custom]=function(){return this};I.prototype.inspect=function(t,e){var r=this,n=q.processArgs(t,e),i={path:"/containers/"+this.id+"/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.rename=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.rename),i={path:"/containers/"+this.id+"/rename?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.update=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.update),i={path:"/containers/"+this.id+"/update",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.top=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.top),i={path:"/containers/"+this.id+"/top?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.changes=function(t,e){var r=this,n=q.processArgs(t,e),i={path:"/containers/"+this.id+"/changes",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.listCheckpoint=function(t,e){var r=this,n=q.processArgs(t,e),i={path:"/containers/"+this.id+"/checkpoints?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.deleteCheckpoint=function(t,e,r){var n=this,i=q.processArgs(e,r),o={path:"/containers/"+this.id+"/checkpoints/"+t+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:i.opts};if(i.callback===void 0)return new this.modem.Promise(function(s,a){n.modem.dial(o,function(u,l){if(u)return a(u);s(l)})});this.modem.dial(o,function(s,a){i.callback(s,a)})};I.prototype.createCheckpoint=function(t,e){var r=this,n=q.processArgs(t,e),i={path:"/containers/"+this.id+"/checkpoints",method:"POST",abortSignal:n.opts.abortSignal,allowEmpty:!0,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.export=function(t,e){var r=this,n=q.processArgs(t,e),i={path:"/containers/"+this.id+"/export",method:"GET",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,404:"no such container",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.start=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.start),i={path:"/containers/"+this.id+"/start?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,304:"container already started",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.pause=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.pause),i={path:"/containers/"+this.id+"/pause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.unpause=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.unpause),i={path:"/containers/"+this.id+"/unpause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.exec=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.exec),i={path:"/containers/"+this.id+"/exec",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"no such container",409:"container stopped/paused",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(new ua(r.modem,u.Id))})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,new ua(r.modem,s.Id))})};I.prototype.commit=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.commit);n.opts.container=this.id;var i={path:"/commit?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.stop=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.stop),i={path:"/containers/"+this.id+"/stop?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,304:"container already stopped",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.restart=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.restart),i={path:"/containers/"+this.id+"/restart?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.kill=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.kill),i={path:"/containers/"+this.id+"/kill?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.resize=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.resize),i={path:"/containers/"+this.id+"/resize?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.attach=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.attach),i={path:"/containers/"+this.id+"/attach?",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,hijack:n.opts.hijack,openStdin:n.opts.stdin,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.wait=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.wait),i={path:"/containers/"+this.id+"/wait?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.remove=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.remove),i={path:"/containers/"+this.id+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.copy=function(t,e){var r=this;console.log("container.copy is deprecated since Docker v1.8.x");var n=q.processArgs(t,e,this.defaultOptions.copy),i={path:"/containers/"+this.id+"/copy",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.getArchive=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.getArchive),i={path:"/containers/"+this.id+"/archive?",method:"GET",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.infoArchive=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.infoArchive),i={path:"/containers/"+this.id+"/archive?",method:"HEAD",abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.putArchive=function(t,e,r){var n=this,i=q.processArgs(e,r,this.defaultOptions.putArchive),o={path:"/containers/"+this.id+"/archive?",method:"PUT",file:t,abortSignal:i.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"client error, bad parameters",403:"client error, permission denied",404:"no such container",500:"server error"},options:i.opts};if(i.callback===void 0)return new this.modem.Promise(function(s,a){n.modem.dial(o,function(u,l){if(u)return a(u);s(l)})});this.modem.dial(o,function(s,a){i.callback(s,a)})};I.prototype.logs=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.log),i={path:"/containers/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};I.prototype.stats=function(t,e){var r=this,n=q.processArgs(t,e,this.defaultOptions.stats),i=!0;n.opts.stream===!1&&(i=!1);var o={path:"/containers/"+this.id+"/stats?",method:"GET",abortSignal:n.opts.abortSignal,isStream:i,statusCodes:{200:!0,404:"no such container",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(s,a){r.modem.dial(o,function(u,l){if(u)return a(u);s(l)})});this.modem.dial(o,function(s,a){n.callback(s,a)})};la.exports=I});var da=m((tm,ca)=>{var si=Q(),be=function(t,e){this.modem=t,this.name=e};be.prototype[require("util").inspect.custom]=function(){return this};be.prototype.inspect=function(t){var e=this,r={path:"/images/"+this.name+"/json",method:"GET",statusCodes:{200:!0,404:"no such image",500:"server error"}};if(t===void 0)return new this.modem.Promise(function(n,i){e.modem.dial(r,function(o,s){if(o)return i(o);n(s)})});this.modem.dial(r,function(n,i){if(n)return t(n,i);t(n,i)})};be.prototype.distribution=function(t,e){var r=si.processArgs(t,e),n=this,i={path:"/distribution/"+this.name+"/json",method:"GET",statusCodes:{200:!0,401:"no such image",500:"server error"},authconfig:r.opts?r.opts.authconfig:void 0};if(r.callback===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){if(o)return r.callback(o,s);r.callback(o,s)})};be.prototype.history=function(t){var e=this,r={path:"/images/"+this.name+"/history",method:"GET",statusCodes:{200:!0,404:"no such image",500:"server error"}};if(t===void 0)return new this.modem.Promise(function(n,i){e.modem.dial(r,function(o,s){if(o)return i(o);n(s)})});this.modem.dial(r,function(n,i){if(n)return t(n,i);t(n,i)})};be.prototype.get=function(t){var e=this,r={path:"/images/"+this.name+"/get",method:"GET",isStream:!0,statusCodes:{200:!0,500:"server error"}};if(t===void 0)return new this.modem.Promise(function(n,i){e.modem.dial(r,function(o,s){if(o)return i(o);n(s)})});this.modem.dial(r,function(n,i){if(n)return t(n,i);t(n,i)})};be.prototype.push=function(t,e,r){var n=this,i=si.processArgs(t,e),o=!0;i.opts.stream===!1&&(o=!1);var s={path:"/images/"+this.name+"/push?",method:"POST",options:i.opts,authconfig:i.opts.authconfig||r,abortSignal:i.opts.abortSignal,isStream:o,statusCodes:{200:!0,404:"no such image",500:"server error"}};if(delete s.options.authconfig,e===void 0)return new this.modem.Promise(function(a,u){n.modem.dial(s,function(l,f){if(l)return u(l);a(f)})});this.modem.dial(s,function(a,u){e(a,u)})};be.prototype.tag=function(t,e){var r=this,n={path:"/images/"+this.name+"/tag?",method:"POST",options:t,abortSignal:t&&t.abortSignal,statusCodes:{200:!0,201:!0,400:"bad parameter",404:"no such image",409:"conflict",500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(a)})});this.modem.dial(n,function(i,o){e(i,o)})};be.prototype.remove=function(t,e){var r=this,n=si.processArgs(t,e),i={path:"/images/"+this.name+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such image",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};ca.exports=be});var ma=m((rm,pa)=>{var ha=Q(),Ar=function(t,e){this.modem=t,this.name=e};Ar.prototype[require("util").inspect.custom]=function(){return this};Ar.prototype.inspect=function(t,e){var r=this,n=ha.processArgs(t,e),i={path:"/volumes/"+this.name,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such volume",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ar.prototype.remove=function(t,e){var r=this,n=ha.processArgs(t,e),i={path:"/volumes/"+this.name,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{204:!0,404:"no such volume",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};pa.exports=Ar});var ba=m((nm,ga)=>{var Pr=Q(),lt=function(t,e){this.modem=t,this.id=e};lt.prototype[require("util").inspect.custom]=function(){return this};lt.prototype.inspect=function(i,e){var r=this,n=Pr.processArgs(i,e),i={path:"/networks/"+this.id+"?",method:"GET",statusCodes:{200:!0,404:"no such network",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};lt.prototype.remove=function(t,e){var r=this,n=Pr.processArgs(t,e),i={path:"/networks/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such network",409:"conflict",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};lt.prototype.connect=function(t,e){var r=this,n=Pr.processArgs(t,e),i={path:"/networks/"+this.id+"/connect",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"network or container is not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};lt.prototype.disconnect=function(t,e){var r=this,n=Pr.processArgs(t,e),i={path:"/networks/"+this.id+"/disconnect",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"network or container is not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};ga.exports=lt});var va=m((im,_a)=>{var ai=Q(),ft=function(t,e){this.modem=t,this.id=e};ft.prototype[require("util").inspect.custom]=function(){return this};ft.prototype.inspect=function(t,e){var r=this,n=ai.processArgs(t,e),i={path:"/services/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such service",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};ft.prototype.remove=function(t,e){var r=this,n=ai.processArgs(t,e),i={path:"/services/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"no such service",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};ft.prototype.update=function(t,e,r){var n=this;if(!r){var i=typeof e;i==="function"?(r=e,e=t,t=e.authconfig||void 0):i==="undefined"&&(e=t,t=e.authconfig||void 0)}var o={path:"/services/"+this.id+"/update?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:!0,404:"no such service",500:"server error"},authconfig:t,options:e};if(r===void 0)return new this.modem.Promise(function(s,a){n.modem.dial(o,function(u,l){if(u)return a(u);s(l)})});this.modem.dial(o,function(s,a){r(s,a)})};ft.prototype.logs=function(t,e){var r=this,n=ai.processArgs(t,e,{}),i={path:"/services/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{200:!0,404:"no such service",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};_a.exports=ft});var Sa=m((om,ya)=>{var Ae=Q(),se=function(t,e,r){this.modem=t,this.name=e,this.remote=r||e};se.prototype[require("util").inspect.custom]=function(){return this};se.prototype.inspect=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin is not installed",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.remove=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin is not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,s)})};se.prototype.privileges=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/privileges?",method:"GET",options:{remote:this.remote},abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.pull=function(t,e){var r=this,n=Ae.processArgs(t,e);n.opts._query&&!n.opts._query.name&&(n.opts._query.name=this.name),n.opts._query&&!n.opts._query.remote&&(n.opts._query.remote=this.remote);var i={path:"/plugins/pull?",method:"POST",abortSignal:n.opts.abortSignal,isStream:!0,options:n.opts,statusCodes:{200:!0,204:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.enable=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name+"/enable?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.disable=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name+"/disable",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.push=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name+"/push",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.configure=function(t,e){var r=this,n=Ae.processArgs(t,e),i={path:"/plugins/"+this.name+"/set",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"plugin not installed",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};se.prototype.upgrade=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=t,t=e.authconfig||void 0);var i={path:"/plugins/"+this.name+"/upgrade?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:!0,204:!0,404:"plugin not installed",500:"server error"},authconfig:t,options:e};if(r===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){r(o,s)})};ya.exports=se});var Ca=m((sm,Ea)=>{var wa=Q(),Mt=function(t,e){this.modem=t,this.id=e};Mt.prototype[require("util").inspect.custom]=function(){return this};Mt.prototype.inspect=function(t,e){var r=this,n=wa.processArgs(t,e),i={path:"/secrets/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"secret not found",406:"node is not part of a swarm",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Mt.prototype.update=function(t,e){var r=this;!e&&typeof t=="function"&&(e=t);var n={path:"/secrets/"+this.id+"/update?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:!0,404:"secret not found",500:"server error"},options:t};if(e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(a)})});this.modem.dial(n,function(i,o){e(i,o)})};Mt.prototype.remove=function(t,e){var r=this,n=wa.processArgs(t,e),i={path:"/secrets/"+this.id,method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,404:"secret not found",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ea.exports=Mt});var ka=m((am,Ta)=>{var ui=Q(),Ft=function(t,e){this.modem=t,this.id=e};Ft.prototype[require("util").inspect.custom]=function(){return this};Ft.prototype.inspect=function(t,e){var r=this,n=ui.processArgs(t,e),i={path:"/configs/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ft.prototype.update=function(t,e){var r=this,n=ui.processArgs(t,e),i={path:"/configs/"+this.id+"/update?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ft.prototype.remove=function(t,e){var r=this,n=ui.processArgs(t,e),i={path:"/configs/"+this.id,method:"DELETE",abortSignal:t.abortSignal,statusCodes:{200:!0,204:!0,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ta.exports=Ft});var Aa=m((um,Ra)=>{var xa=Q(),Or=function(t,e){this.modem=t,this.id=e,this.defaultOptions={log:{}}};Or.prototype[require("util").inspect.custom]=function(){return this};Or.prototype.inspect=function(t,e){var r=this,n=xa.processArgs(t,e),i={path:"/tasks/"+this.id,method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"unknown task",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Or.prototype.logs=function(t,e){var r=this,n=xa.processArgs(t,e,this.defaultOptions.log),i={path:"/tasks/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||!1,statusCodes:{101:!0,200:!0,404:"no such container",500:"server error",503:"node is not part of a swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Ra.exports=Or});var Ia=m((lm,Oa)=>{var Pa=Q(),jt=function(t,e){this.modem=t,this.id=e};jt.prototype[require("util").inspect.custom]=function(){return this};jt.prototype.inspect=function(t,e){var r=this,n=Pa.processArgs(t,e),i={path:"/nodes/"+this.id,method:"GET",abortSignal:n.abortSignal,statusCodes:{200:!0,404:"no such node",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};jt.prototype.update=function(t,e){var r=this;!e&&typeof t=="function"&&(e=t);var n={path:"/nodes/"+this.id+"/update?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:!0,404:"no such node",406:"node is not part of a swarm",500:"server error"},options:t};if(e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(a)})});this.modem.dial(n,function(i,o){e(i,o)})};jt.prototype.remove=function(t,e){var r=this,n=Pa.processArgs(t,e),i={path:"/nodes/"+this.id+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,404:"no such node",500:"server error"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};Oa.exports=jt});var Va=m((fm,Ha)=>{var Rh=require("events").EventEmitter,Ah=Vo(),Ph=oa(),Oh=require("zlib"),Da=fa(),Na=da(),La=ma(),qa=ba(),Ma=va(),Fa=Sa(),ja=Ca(),Ih=ka(),Ua=Aa(),Ba=Ia(),Wa=oi(),R=Q(),Ga=R.extend,p=function(t){if(!(this instanceof p))return new p(t);var e=global.Promise;t&&t.Promise&&(e=t.Promise,Object.keys(t).length===1&&(t=void 0)),this.modem=new Ah(t),this.modem.Promise=e};p.prototype.createContainer=function(t,e){var r=this,n={path:"/containers/create?",method:"POST",options:t,authconfig:t.authconfig,abortSignal:t.abortSignal,statusCodes:{200:!0,201:!0,404:"no such container",406:"impossible to attach",500:"server error"}};if(delete t.authconfig,e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(r.getContainer(a.Id))})});this.modem.dial(n,function(i,o){if(i)return e(i,o);e(i,r.getContainer(o.Id))})};p.prototype.createImage=function(t,e,r){var n=this;!r&&typeof e=="function"?(r=e,e=t,t=e.authconfig||void 0):!r&&!e&&(e=t,t=e.authconfig);var i={path:"/images/create?",method:"POST",options:e,authconfig:t,abortSignal:e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){r(o,s)})};p.prototype.loadImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=null);var i={path:"/images/load?",method:"POST",options:e,file:t,abortSignal:e&&e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){r(o,s)})};p.prototype.importImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=void 0),e||(e={}),e.fromSrc="-";var i={path:"/images/create?",method:"POST",options:e,file:t,abortSignal:e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){r(o,s)})};p.prototype.checkAuth=function(t,e){var r=this,n={path:"/auth",method:"POST",options:t,abortSignal:t.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(a)})});this.modem.dial(n,function(i,o){e(i,o)})};p.prototype.buildImage=function(t,e,r){var n=this;!r&&typeof e=="function"&&(r=e,e=null);function i(s){var a={path:"/build?",method:"POST",file:s,options:e,abortSignal:e&&e.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(e&&(e.registryconfig&&(a.registryconfig=a.options.registryconfig,delete a.options.registryconfig),e.authconfig&&(a.authconfig=a.options.authconfig,delete a.options.authconfig)),r===void 0)return new n.modem.Promise(function(u,l){n.modem.dial(a,function(f,d){if(f)return l(f);u(d)})});n.modem.dial(a,function(u,l){r(u,l)})}if(t&&t.context){var o=Ph.pack(t.context,{entries:t.src});return i(o.pipe(Oh.createGzip()))}else return i(t)};p.prototype.getContainer=function(t){return new Da(this.modem,t)};p.prototype.getImage=function(t){return new Na(this.modem,t)};p.prototype.getVolume=function(t){return new La(this.modem,t)};p.prototype.getPlugin=function(t,e){return new Fa(this.modem,t,e)};p.prototype.getService=function(t){return new Ma(this.modem,t)};p.prototype.getTask=function(t){return new Ua(this.modem,t)};p.prototype.getNode=function(t){return new Ba(this.modem,t)};p.prototype.getNetwork=function(t){return new qa(this.modem,t)};p.prototype.getSecret=function(t){return new ja(this.modem,t)};p.prototype.getConfig=function(t){return new Ih(this.modem,t)};p.prototype.getExec=function(t){return new Wa(this.modem,t)};p.prototype.listContainers=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/containers/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.listImages=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/images/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.getImages=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/images/get?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.listServices=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/services?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.listNodes=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/nodes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",404:"no such node",500:"server error",503:"node is not part of a swarm"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.listTasks=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/tasks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.createSecret=function(t,e){var r=R.processArgs(t,e),n=this,i={path:"/secrets/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:!0,201:!0,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(n.getSecret(u.ID))})});this.modem.dial(i,function(o,s){if(o)return r.callback(o,s);r.callback(o,n.getSecret(s.ID))})};p.prototype.createConfig=function(t,e){var r=R.processArgs(t,e),n=this,i={path:"/configs/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:!0,201:!0,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(n.getConfig(u.ID))})});this.modem.dial(i,function(o,s){if(o)return r.callback(o,s);r.callback(o,n.getConfig(s.ID))})};p.prototype.listSecrets=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/secrets?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.listConfigs=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/configs?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.createPlugin=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/plugins/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,204:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(r.getPlugin(n.opts.name))})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,r.getPlugin(n.opts.name))})};p.prototype.listPlugins=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/plugins?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pruneImages=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/images/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pruneBuilder=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/build/prune",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pruneContainers=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/containers/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pruneVolumes=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/volumes/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pruneNetworks=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/networks/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.createVolume=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/volumes/create?",method:"POST",allowEmpty:!0,options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(r.getVolume(u.Name))})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,r.getVolume(s.Name))})};p.prototype.createService=function(t,e,r){!r&&typeof e=="function"?(r=e,e=t,t=e.authconfig||void 0):!e&&!r&&(e=t);var n=this,i={path:"/services/create",method:"POST",options:e,authconfig:t,abortSignal:e&&e.abortSignal,statusCodes:{200:!0,201:!0,500:"server error"}};if(r===void 0)return new this.modem.Promise(function(o,s){n.modem.dial(i,function(a,u){if(a)return s(a);o(n.getService(u.ID||u.Id))})});this.modem.dial(i,function(o,s){if(o)return r(o,s);r(o,n.getService(s.ID||s.Id))})};p.prototype.listVolumes=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/volumes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.createNetwork=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/networks/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,201:!0,404:"driver not found",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(r.getNetwork(u.Id))})});this.modem.dial(i,function(o,s){if(o)return n.callback(o,s);n.callback(o,r.getNetwork(s.Id))})};p.prototype.listNetworks=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/networks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.searchImages=function(t,e){var r=this,n={path:"/images/search?",method:"GET",options:t,authconfig:t.authconfig,abortSignal:t.abortSignal,statusCodes:{200:!0,500:"server error"}};if(e===void 0)return new this.modem.Promise(function(i,o){r.modem.dial(n,function(s,a){if(s)return o(s);i(a)})});this.modem.dial(n,function(i,o){e(i,o)})};p.prototype.info=function(i,e){var r=this,n=R.processArgs(i,e),i={path:"/info",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.version=function(i,e){var r=this,n=R.processArgs(i,e),i={path:"/version",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.ping=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/_ping",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.df=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/system/df",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.getEvents=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/events?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:!0,statusCodes:{200:!0,500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.pull=function(t,e,r,n){var i=R.processArgs(e,r),o=R.parseRepositoryTag(t);i.opts.fromImage=o.repository,i.opts.tag=o.tag||"latest";var s=[i.opts,i.callback];return n&&(s=[n,i.opts,i.callback]),this.createImage.apply(this,s)};p.prototype.run=function(t,e,r,n,i,o){return typeof arguments[arguments.length-1]=="function"?this.runCallback(t,e,r,n,i,o):this.runPromise(t,e,r,n,i)};p.prototype.runCallback=function(t,e,r,n,i,o){!o&&typeof n=="function"?(o=n,n={},i={}):!o&&typeof i=="function"&&(o=i,i={});var s=new Rh;function a(l,f){if(l)return o(l,null,f);s.emit("container",f),f.attach({stream:!0,stdout:!0,stderr:!0},function(c,h){if(c)return o(c,null,f);s.emit("stream",h),r&&(r instanceof Array?(h.on("end",function(){try{r[0].end()}catch{}try{r[1].end()}catch{}}),f.modem.demuxStream(h,r[0],r[1])):(h.setEncoding("utf8"),h.pipe(r,{end:!0}))),f.start(i,function(g,b){if(g)return o(g,b,f);s.emit("start",f),f.wait(function(_,S){s.emit("data",S),o(_,S,f)})})})}var u={Hostname:"",User:"",AttachStdin:!1,AttachStdout:!0,AttachStderr:!0,Tty:!0,OpenStdin:!1,StdinOnce:!1,Env:null,Cmd:e,Image:t,Volumes:{},VolumesFrom:[]};return Ga(u,n),this.createContainer(u,a),s};p.prototype.runPromise=function(t,e,r,n,i){var o=this;n=n||{},i=i||{};var s={Hostname:"",User:"",AttachStdin:!1,AttachStdout:!0,AttachStderr:!0,Tty:!0,OpenStdin:!1,StdinOnce:!1,Env:null,Cmd:e,Image:t,Volumes:{},VolumesFrom:[]};Ga(s,n);var a;return new this.modem.Promise(function(u,l){o.createContainer(s).then(function(f){return a=f,f.attach({stream:!0,stdout:!0,stderr:!0})}).then(function(f){return r&&(r instanceof Array?(f.on("end",function(){try{r[0].end()}catch{}try{r[1].end()}catch{}}),a.modem.demuxStream(f,r[0],r[1])):(f.setEncoding("utf8"),f.pipe(r,{end:!0}))),a.start(i)}).then(function(f){return a.wait()}).then(function(f){u([f,a])}).catch(function(f){l(f)})})};p.prototype.swarmInit=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/swarm/init",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.swarmJoin=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/swarm/join",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.swarmLeave=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/swarm/leave?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,406:"node is not part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.swarmUpdate=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/swarm/update?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.prototype.swarmInspect=function(t,e){var r=this,n=R.processArgs(t,e),i={path:"/swarm",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:!0,406:"This node is not a swarm manager",500:"server error"}};if(n.callback===void 0)return new this.modem.Promise(function(o,s){r.modem.dial(i,function(a,u){if(a)return s(a);o(u)})});this.modem.dial(i,function(o,s){n.callback(o,s)})};p.Container=Da;p.Image=Na;p.Volume=La;p.Network=qa;p.Service=Ma;p.Plugin=Fa;p.Secret=ja;p.Task=Ua;p.Node=Ba;p.Exec=Wa;Ha.exports=p});var Fh={};nu(Fh,{default:()=>Qa});module.exports=ou(Fh);var K=require("@raycast/api");var P=require("@raycast/api");var E=require("@raycast/api");var hi=t=>"```\n"+t+"\n```";var Y=t=>t.State==="running",B=({Names:t,Name:e})=>t!==void 0?t.map(r=>r.replace(/^\//,"")).join(", "):e!==void 0?e.replace(/^\//,""):"-",pi=t=>t!==void 0?`# ${B(t)}

`+au(t.Config.Env)+`
`:"",au=t=>t.length===0?"":[`

## Environment`,hi(t.join(`
`))].join(`
`);var Mr=t=>t.errno===-61&&t.code==="ECONNREFUSED",ee=(t,e)=>t.message.includes("container already stopped")?`Container ${B(e)} already stopped`:t.message.includes("container already started")?`Container ${B(e)} already started`:t.message.includes("cannot remove a running container")?["Cannot remove running container",`Please stop ${B(e)} first`]:t.message;var He=require("@raycast/api"),z=({action:t,onStart:e,onSuccess:r,onFailure:n})=>async()=>{let{title:i,message:o}=Fr(e()),s=await(0,He.showToast)(He.Toast.Style.Animated,i,o);try{await t();let{title:a,message:u}=Fr(r());s.style=He.Toast.Style.Success,s.title=a,s.message=u}catch(a){if(a instanceof Error){s.style=He.Toast.Style.Failure;let{title:u,message:l}=Fr(n(a));s.title=u,s.message=l}}};function Fr(t){return Array.isArray(t)?{title:t[0],message:t[1]}:{title:t,message:void 0}}var j=require("react/jsx-runtime");function jr({docker:t,containerId:e}){let{isLoading:r,containerInfo:n,startContainer:i,restartContainer:o,stopContainer:s,removeContainer:a,stopAndRemoveContainer:u}=t.useContainerInfo(e),{pop:l}=(0,E.useNavigation)();return(0,j.jsx)(E.Detail,{isLoading:r,markdown:pi(n),metadata:n&&(0,j.jsxs)(E.Detail.Metadata,{children:[(0,j.jsx)(E.Detail.Metadata.Label,{title:"Image",text:n?.Config.Image}),(0,j.jsx)(E.Detail.Metadata.TagList,{title:"Status",children:(0,j.jsx)(E.Detail.Metadata.TagList.Item,{text:n.State.Status,color:n.State.Running?E.Color.Green:E.Color.Yellow})}),(0,j.jsx)(E.Detail.Metadata.TagList,{title:"Command",children:(0,j.jsx)(E.Detail.Metadata.TagList.Item,{text:n.Config.Cmd?.join(" ")})}),n.Config.ExposedPorts&&(0,j.jsx)(E.Detail.Metadata.TagList,{title:"Ports",children:Object.keys(n.Config.ExposedPorts).map((f,d)=>(0,j.jsx)(E.Detail.Metadata.TagList.Item,{text:f,color:E.Color.PrimaryText},d))}),n.NetworkSettings.Ports&&(0,j.jsx)(E.Detail.Metadata.TagList,{title:"Host Ports",children:Object.keys(n.NetworkSettings.Ports).map((f,d)=>(0,j.jsx)(E.Detail.Metadata.TagList.Item,{text:n.NetworkSettings.Ports[f]?.map(c=>c.HostPort).join(", ")||"None",color:E.Color.PrimaryText},d))}),(0,j.jsx)(E.Detail.Metadata.Separator,{}),n.Created&&(0,j.jsx)(E.Detail.Metadata.Label,{title:"Created at",text:new Date(n.Created).toLocaleString()})]}),actions:(0,j.jsxs)(E.ActionPanel,{children:[n?.State.Running===!0&&(0,j.jsx)(E.Action,{title:"Stop Container",shortcut:{macOS:{modifiers:["cmd","shift"],key:"w"},windows:{modifiers:["ctrl","shift"],key:"w"}},onAction:z({action:()=>s(n),onStart:()=>`Stopping container ${B(n)}`,onSuccess:()=>`Container ${B(n)} stopped`,onFailure:f=>ee(f,n)})}),n?.State.Running===!0&&(0,j.jsx)(E.Action,{title:"Restart Container",icon:E.Icon.ArrowClockwise,shortcut:{macOS:{modifiers:["opt"],key:"r"},windows:{modifiers:["alt"],key:"r"}},onAction:z({action:()=>o(n),onStart:()=>`Restarting container ${B(n)}`,onSuccess:()=>`Container ${B(n)} restarted`,onFailure:f=>ee(f,n)})}),n?.State.Running===!1&&(0,j.jsx)(E.Action,{title:"Start Container",shortcut:{macOS:{modifiers:["cmd","shift"],key:"r"},windows:{modifiers:["ctrl","shift"],key:"r"}},onAction:z({action:()=>i(n),onStart:()=>`Starting container ${B(n)}`,onSuccess:()=>`Container ${B(n)} started`,onFailure:f=>ee(f,n)})}),n?.State.Running===!1&&(0,j.jsx)(E.Action,{title:"Remove Container",icon:E.Icon.Trash,style:E.Action.Style.Destructive,shortcut:E.Keyboard.Shortcut.Common.Remove,onAction:z({action:async()=>{await a(n),l()},onStart:()=>`Removing container ${B(n)}`,onSuccess:()=>`Container ${B(n)} removed`,onFailure:f=>ee(f,n)})}),n?.State.Running===!0&&(0,j.jsx)(E.Action,{title:"Stop and Remove Container",icon:E.Icon.Trash,style:E.Action.Style.Destructive,shortcut:E.Keyboard.Shortcut.Common.Remove,onAction:z({action:async()=>{await u(n),l()},onStart:()=>`Stopping and removing container ${B(n)}`,onSuccess:()=>`Container ${B(n)} stopped and removed`,onFailure:f=>ee(f,n)})})]})},e)}var N=require("react");var Gt=t=>t.reduce((e,r)=>{let n=r.Labels["com.docker.compose.project"],i=r.Labels["com.docker.compose.config_files"],o=r.Labels["com.docker.compose.working_dir"];if(n===void 0)return e;let s=e.find(({name:a})=>a===n);return s!==void 0?(s.containers=[...s.containers,r],e):[...e,{name:n,configFiles:i,workingDir:o,containers:[r]}]},[]);var dt=1e3,Ht=t=>{let e=({Id:c})=>t.getContainer(c).stop(),r=({Id:c})=>t.getContainer(c).start(),n=({Id:c})=>t.getContainer(c).restart(),i=({Id:c})=>t.getContainer(c).remove(),o=async({Id:c})=>{await t.getContainer(c).stop(),await t.getContainer(c).remove()};return{useImages:()=>{let[c,h]=(0,N.useState)(),[g,b]=(0,N.useState)(!1),[_,S]=(0,N.useState)(),T=(0,N.useRef)(void 0);return(0,N.useEffect)(()=>{async function k(){try{let v=await t.listImages();h(v)}catch(v){v instanceof Error&&S(v)}}return W(b,k)(),T.current=setInterval(k,dt),()=>T.current&&clearInterval(T.current)},[]),{images:c,error:_,isLoading:g,removeImage:W(b,({Id:k})=>t.getImage(k).remove())}},useImageInfo:({Id:c})=>{let[h,g]=(0,N.useState)(),[b,_]=(0,N.useState)(!1),S=(0,N.useRef)(void 0);return(0,N.useEffect)(()=>{async function T(){let k=await t.getImage(c).inspect();g(k)}return W(_,T)(),S.current=setInterval(T,dt),()=>S.current&&clearInterval(S.current)},[c]),{imageInfo:h,isLoading:b}},useContainers:()=>{let[c,h]=(0,N.useState)(),[g,b]=(0,N.useState)(!1),[_,S]=(0,N.useState)(),T=(0,N.useRef)(void 0);return(0,N.useEffect)(()=>{async function k(){try{let v=await t.listContainers({all:!0});h(v)}catch(v){v instanceof Error&&S(v)}}return W(b,k)(),T.current=setInterval(k,dt),()=>T.current&&clearInterval(T.current)},[]),{containers:c,isLoading:g,error:_,startContainer:W(b,r),stopContainer:W(b,e),restartContainer:W(b,n),removeContainer:W(b,i),stopAndRemoveContainer:W(b,o)}},useContainerInfo:c=>{let[h,g]=(0,N.useState)(),[b,_]=(0,N.useState)(!1),S=(0,N.useRef)(void 0);return(0,N.useEffect)(()=>{async function T(){let k=await t.getContainer(c).inspect();g(k)}return W(_,T)(),S.current=setInterval(T,dt),()=>S.current&&clearInterval(S.current)},[c]),{containerInfo:h,isLoading:b,startContainer:W(_,r),restartContainer:W(_,n),stopContainer:W(_,e),removeContainer:W(_,i),stopAndRemoveContainer:W(_,o)}},useProjects:()=>{let[c,h]=(0,N.useState)(),[g,b]=(0,N.useState)(!1),[_,S]=(0,N.useState)(),T=(0,N.useRef)(void 0);return(0,N.useEffect)(()=>{async function k(){try{let v=await t.listContainers({all:!0});h(Gt(v))}catch(v){v instanceof Error&&S(v)}}return W(b,k)(),T.current=setInterval(k,dt),()=>T.current&&clearInterval(T.current)},[]),{projects:c,isLoading:g,error:_,startProject:W(b,async k=>{await Promise.all(k.containers.filter(y=>!Y(y)).map(y=>t.getContainer(y.Id).start()));let v=await t.listContainers({all:!0});h(Gt(v))}),stopProject:W(b,async k=>{await Promise.all(k.containers.filter(y=>Y(y)).map(y=>t.getContainer(y.Id).stop()));let v=await t.listContainers({all:!0});h(Gt(v))})}},useCreateContainer:()=>{let[c,h]=(0,N.useState)(!1),[g,b]=(0,N.useState)();return{createContainer:async S=>{h(!0);try{await(await t.createContainer(S)).start()}catch(T){T instanceof Error&&b(T)}finally{h(!1)}},isLoading:c,error:g}}}};function W(t,e){return async r=>{t(!0);try{let n=await e(r);return t(!1),n}finally{t(!1)}}}var $a=require("@raycast/api"),li=iu(Va()),Ka=require("react"),za=require("node:url"),Ir=()=>{let{socketPath:t}=(0,$a.getPreferenceValues)(),e=["http://","https://","tcp://"];return(0,Ka.useMemo)(()=>{if(e.some(r=>t?.startsWith(r))){let r=new za.URL(t);return new li.default({host:r.hostname,port:r.port||2375})}return new li.default(t?{socketPath:t}:void 0)},[t])};var Pe=require("@raycast/api"),Nr=require("react");var Dr=require("react/jsx-runtime");function Ut({error:t}){let[e,r]=(0,Nr.useState)([]);(0,Nr.useEffect)(()=>{async function i(){let o=await(0,Pe.getApplications)();r(o)}i()},[]);let n=e.find(({bundleId:i})=>i==="com.docker.docker");return(0,Dr.jsx)(Pe.Detail,{markdown:Dh(t),actions:Mr(t)&&n!==void 0?(0,Dr.jsx)(Pe.ActionPanel,{children:(0,Dr.jsx)(Pe.Action.Open,{title:"Launch Docker",target:n.path})}):null})}var Dh=t=>{let e="Error message:\n\n```\n"+t.message+"\n```";return Mr(t)?["## \u26A0\uFE0F Error connecting to Docker",e].join(`
`):`## An Error Occurred:

${e}`};var Nh=(t,e)=>t.reduce((r,n,i,o)=>{let s=e(n,i,o),a=r.get(s);return a?a.push(n):r.set(s,[n]),r},new Map),Ya=(t,e)=>Array.from(Nh(t,e));var V=require("react/jsx-runtime");function fi(t){let e=Ir(),r=Ht(e),{useContainers:n}=r,{containers:i,isLoading:o,error:s}=n(),{groupContainersByState:a}=(0,P.getPreferenceValues)();if(s)return(0,V.jsx)(Ut,{error:s});let u=Lh(i,t.projectFilter);return(0,V.jsx)(P.List,{isLoading:o,children:a?Ya(u,l=>l.State).reverse().map(([l,f])=>(0,V.jsx)(P.List.Section,{title:l,children:f.map(d=>(0,V.jsx)(Ja,{containerInfo:d,dockerState:r},d.Id))},l)):u.map(l=>(0,V.jsx)(Ja,{containerInfo:l,dockerState:r},l.Id))})}var Ja=({containerInfo:t,dockerState:e})=>{let r=B(t),{useContainers:n}=e,{startContainer:i,restartContainer:o,stopContainer:s,removeContainer:a,stopAndRemoveContainer:u}=n();return(0,V.jsx)(P.List.Item,{keywords:[t.Id,r,t.Image],title:r,accessories:[{text:{value:t.Image}}],icon:Y(t)?{source:"icon-container-running.png",tintColor:P.Color.Green}:{source:"icon-container.png",tintColor:P.Color.SecondaryText},actions:(0,V.jsxs)(P.ActionPanel,{children:[Y(t)&&(0,V.jsx)(P.Action,{title:"Stop Container",shortcut:{macOS:{modifiers:["cmd","shift"],key:"w"},windows:{modifiers:["ctrl","shift"],key:"w"}},icon:{source:"icon-stop.png",tintColor:P.Color.PrimaryText},onAction:z({action:()=>s(t),onStart:()=>`Stopping container ${r}`,onSuccess:()=>`Container ${r} stopped`,onFailure:l=>ee(l,t)})}),Y(t)&&(0,V.jsx)(P.Action,{title:"Restart Container",icon:P.Icon.ArrowClockwise,shortcut:{macOS:{modifiers:["opt"],key:"r"},windows:{modifiers:["alt"],key:"r"}},onAction:z({action:()=>o(t),onStart:()=>`Restarting container ${r}`,onSuccess:()=>`Container ${r} restarted`,onFailure:l=>ee(l,t)})}),Y(t)&&(0,V.jsx)(P.Action.CopyToClipboard,{title:"Copy Container Id",shortcut:{macOS:{modifiers:["cmd","shift"],key:"c"},windows:{modifiers:["ctrl","shift"],key:"c"}},content:t.Id}),!Y(t)&&(0,V.jsx)(P.Action,{title:"Start Container",shortcut:{macOS:{modifiers:["cmd","shift"],key:"r"},windows:{modifiers:["ctrl","shift"],key:"r"}},icon:{source:"icon-start.png",tintColor:P.Color.PrimaryText},onAction:z({action:()=>i(t),onStart:()=>`Starting container ${r}`,onSuccess:()=>`Container ${r} started`,onFailure:l=>ee(l,t)})}),(0,V.jsx)(P.Action.Push,{title:"Inspect",icon:{source:P.Icon.Binoculars},shortcut:{macOS:{modifiers:["cmd"],key:"i"},windows:{modifiers:["ctrl"],key:"i"}},target:(0,V.jsx)(jr,{docker:e,containerId:t.Id})}),!Y(t)&&(0,V.jsx)(P.Action,{title:"Remove Container",icon:P.Icon.Trash,style:P.Action.Style.Destructive,shortcut:P.Keyboard.Shortcut.Common.Remove,onAction:z({action:()=>a(t),onStart:()=>`Removing container ${r}`,onSuccess:()=>`Container ${r} removed`,onFailure:l=>ee(l,t)})}),Y(t)&&(0,V.jsx)(P.Action,{title:"Stop and Remove Container",icon:P.Icon.Trash,style:P.Action.Style.Destructive,shortcut:P.Keyboard.Shortcut.Common.Remove,onAction:z({action:()=>u(t),onStart:()=>`Stopping and removing container ${r}`,onSuccess:()=>`Container ${r} stopped and removed`,onFailure:l=>ee(l,t)})})]})},t.Id)},Lh=(t,e)=>e===void 0||t===void 0?t??[]:t.filter(r=>r.Labels["com.docker.compose.project"]===e);var ce=require("react/jsx-runtime");function Qa(){let t=Ir(),{useProjects:e}=Ht(t),{projects:r,isLoading:n,error:i,startProject:o,stopProject:s}=e();return i?(0,ce.jsx)(Ut,{error:i}):(0,ce.jsx)(K.List,{isLoading:n,children:r?.map(a=>(0,ce.jsx)(K.List.Item,{icon:{source:"icon-compose.png",tintColor:Mh(a)?K.Color.Green:K.Color.SecondaryText},title:a.name,subtitle:qh(a),actions:(0,ce.jsxs)(K.ActionPanel,{children:[(0,ce.jsx)(K.Action.Push,{title:"Show Containers",icon:{source:K.Icon.Binoculars},target:(0,ce.jsx)(fi,{projectFilter:a.name})}),(0,ce.jsx)(K.Action,{title:"Start All Containers",shortcut:{macOS:{modifiers:["cmd","shift"],key:"r"},windows:{modifiers:["ctrl","shift"],key:"r"}},icon:{source:"icon-startall.png",tintColor:K.Color.PrimaryText},onAction:z({action:()=>o(a),onStart:()=>`Starting ${a.name}`,onSuccess:()=>`Started ${a.name}`,onFailure:({message:u})=>u})}),(0,ce.jsx)(K.Action,{title:"Stop All Containers",shortcut:{macOS:{modifiers:["cmd","shift"],key:"w"},windows:{modifiers:["ctrl","shift"],key:"w"}},icon:{source:"icon-stopall.png",tintColor:K.Color.PrimaryText},onAction:z({action:()=>s(a),onStart:()=>`Stopping ${a.name}`,onSuccess:()=>`Stopped ${a.name}`,onFailure:({message:u})=>u})})]})},a.name))})}var qh=({containers:t})=>{let e=t.reduce((n,i)=>n+=Y(i)?1:0,0),r=t.length-e;return`${e} Running, ${r} Stopped`},Mh=({containers:t})=>t.every(Y);
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
