"use strict";var h=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var v=(n,i)=>{for(var o in i)h(n,o,{get:i[o],enumerable:!0})},B=(n,i,o,a)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of M(i))!N.call(n,r)&&r!==o&&h(n,r,{get:()=>i[r],enumerable:!(a=x(i,r))||a.enumerable});return n};var D=n=>B(h({},"__esModule",{value:!0}),n);var V={};v(V,{default:()=>J});module.exports=D(V);var e=require("@raycast/api"),f=require("react");var p=require("@raycast/api"),y=class{static async getLinks(){let i=await p.LocalStorage.getItem("links");return i?JSON.parse(String(i)):[]}static async setLink(i){let o=await this.getLinks();o.push(i),await p.LocalStorage.setItem("links",JSON.stringify(o))}static async updateLink(i,o){let a=await this.getLinks(),r=a.findIndex(d=>d.id===i);return r!==-1?(a[r]=o,await p.LocalStorage.setItem("links",JSON.stringify(a)),!0):!1}static async deleteLink(i){let o=await this.getLinks();return o.splice(i,1),await p.LocalStorage.setItem("links",JSON.stringify(o)),o}},k=y;var t=require("@raycast/api"),g=require("react");var l=require("react/jsx-runtime");function C(){let[n,i]=(0,g.useState)([]),[o,a]=(0,g.useState)(!0),r=async function(){let s=await k.getLinks();i([...s]),a(!1)};(0,g.useEffect)(()=>{r()},[]);function d(s){s.links.split(`
`).forEach(u=>{(0,t.open)(u,s.browser)})}async function L(s){let u={title:"Are you sure?",primaryAction:{title:"Confirm",style:t.Alert.ActionStyle.Destructive,onAction:async()=>{await k.deleteLink(s),r(),(0,t.showToast)(t.Toast.Style.Success,"Multilink deleted!")}}};await(0,t.confirmAlert)(u)}return(0,l.jsx)(t.List,{isLoading:o,actions:(0,l.jsx)(t.ActionPanel,{children:(0,l.jsx)(t.Action.Push,{title:"Create Link",target:(0,l.jsx)(w,{onCreate:r})})}),children:n.map((s,u)=>(0,l.jsx)(t.List.Item,{title:s.name,subtitle:`${s.links.split(`
`).length} links`,actions:(0,l.jsxs)(t.ActionPanel,{children:[(0,l.jsx)(t.Action,{title:"Open Links",onAction:()=>d(s),icon:{source:t.Icon.Globe}}),(0,l.jsx)(t.Action.Push,{title:"Edit",target:(0,l.jsx)(w,{data:s,onCreate:r}),icon:{source:t.Icon.Pencil}}),(0,l.jsx)(t.Action,{title:"Delete",onAction:()=>L(u),icon:{source:t.Icon.Trash}})]})},`${s.name}-${u}`))})}var m=require("react/jsx-runtime");function E(n){let[i,o]=(0,f.useState)([{name:"Google Chrome",bundleId:"com.google.Chrome",path:""}]),a=(0,f.useRef)(null),r=(0,f.useRef)(null),d=n.data??{name:"",links:"",id:"",browser:"com.google.Chrome"},[L,s]=(0,f.useState)("com.google.Chrome"),u=n.data?"edit":"create",{pop:I,push:F}=(0,e.useNavigation)(),S=!0;async function P(c){if(c.name.trim()===""){await(0,e.showToast)({style:e.Toast.Style.Failure,title:"Name is required"}),a.current?.focus();return}else if(c.links.trim()===""){await(0,e.showToast)({style:e.Toast.Style.Failure,title:"Please add links"}),r.current?.focus();return}u==="create"?(c.id=Math.random().toString(36).replace("0.",""),await k.setLink(c),(0,e.showToast)({title:"Multilink Created"}),a.current?.reset(),r.current?.reset(),n.onCreate?.(),n.onCreate?I():F((0,m.jsx)(C,{}))):await k.updateLink(d.id,{...n.data,...c})?((0,e.showToast)({title:"Multilink Updated"}),n.onCreate?.(),I()):(0,e.showToast)({title:"Update failed",style:e.Toast.Style.Failure})}return(0,f.useEffect)(()=>((async()=>{let c=await(0,e.getApplications)(),A=["com.google.Chrome","com.apple.Safari","com.brave.Browser","org.mozilla.firefox","com.microsoft.edgemac","com.operasoftware.Opera","org.chromium.Chromium","com.vivaldi.Vivaldi","company.thebrowser.Browser","com.sigmaos.sigmaos.macos"],T=c.filter(O=>A.includes(String(O.bundleId)));S&&(o(T),s(d.browser))})(),()=>{S=!1}),[]),(0,m.jsxs)(e.Form,{actions:(0,m.jsx)(e.ActionPanel,{children:(0,m.jsx)(e.Action.SubmitForm,{icon:e.Icon.Checkmark,title:`${u==="create"?"Create":"Update"} Multilink`,onSubmit:P})}),children:[(0,m.jsx)(e.Form.TextField,{id:"name",title:"Name",defaultValue:d.name,placeholder:"Multilink name",ref:a,autoFocus:!0}),(0,m.jsx)(e.Form.TextArea,{title:"Links",id:"links",placeholder:"List of links (one per line)",defaultValue:d.links,ref:r}),(0,m.jsx)(e.Form.Dropdown,{id:"browser",title:"Open with",value:L,onChange:s,children:i.map(c=>(0,m.jsx)(e.Form.Dropdown.Item,{value:String(c.bundleId),title:c.name},c.bundleId))})]})}var w=E;var b=require("react/jsx-runtime");function J(){return(0,b.jsx)(w,{})}
