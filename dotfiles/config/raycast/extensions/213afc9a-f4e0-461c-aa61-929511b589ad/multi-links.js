"use strict";var h=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var N=(i,e)=>{for(var t in e)h(i,t,{get:e[t],enumerable:!0})},J=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of O(e))!v.call(i,s)&&s!==t&&h(i,s,{get:()=>e[s],enumerable:!(r=M(e,s))||r.enumerable});return i};var V=i=>J(h({},"__esModule",{value:!0}),i);var E={};N(E,{default:()=>B});module.exports=V(E);var o=require("@raycast/api"),g=require("react");var w=require("@raycast/api"),y=class{static async getLinks(){let e=await w.LocalStorage.getItem("links");return e?JSON.parse(String(e)):[]}static async setLink(e){let t=await this.getLinks();t.push(e),await w.LocalStorage.setItem("links",JSON.stringify(t))}static async updateLink(e,t){let r=await this.getLinks(),s=r.findIndex(c=>c.id===e);return s!==-1?(r[s]=t,await w.LocalStorage.setItem("links",JSON.stringify(r)),!0):!1}static async deleteLink(e){let t=await this.getLinks();return t.splice(e,1),await w.LocalStorage.setItem("links",JSON.stringify(t)),t}},f=y;var n=require("@raycast/api"),I=require("react");var k=require("react"),F=require("@raycast/api");function P(i="com.google.Chrome"){let[e,t]=(0,k.useState)([{name:"Google Chrome",bundleId:"com.google.Chrome",path:""}]),[r,s]=(0,k.useState)(i);return(0,k.useEffect)(()=>{let c=!0;return(async()=>{let d=await(0,F.getApplications)(),a=["com.google.Chrome","com.apple.Safari","com.brave.Browser","org.mozilla.firefox","com.microsoft.edgemac","com.operasoftware.Opera","org.chromium.Chromium","com.vivaldi.Vivaldi","company.thebrowser.Browser","com.sigmaos.sigmaos.macos","company.thebrowser.dia","ai.perplexity.comet"],m=d.filter(L=>a.includes(String(L.bundleId)));c&&t(m)})(),()=>{c=!1}},[]),{browsers:e,selectedBrowser:r,setSelectedBrowser:s}}var b=require("@raycast/api"),A=require("react/jsx-runtime");function S({browsers:i,selectedBrowser:e,onBrowserChange:t}){return(0,A.jsx)(b.Form.Dropdown,{id:"browser",title:"Open with",value:e,onChange:t,children:i.map(r=>(0,A.jsx)(b.Form.Dropdown.Item,{value:String(r.bundleId),title:r.name},r.bundleId))})}var u=require("react/jsx-runtime");function $(i){let e=i.data??{name:"",links:"",id:"",browser:"com.google.Chrome"},{browsers:t,selectedBrowser:r,setSelectedBrowser:s}=P(e.browser),c=(0,I.useRef)(null),d=(0,I.useRef)(null),a=i.data?"edit":"create",{pop:m,push:L}=(0,n.useNavigation)();async function D(p){if(p.name.trim()===""){await(0,n.showToast)({style:n.Toast.Style.Failure,title:"Name is required"}),c.current?.focus();return}else if(p.links.trim()===""){await(0,n.showToast)({style:n.Toast.Style.Failure,title:"Please add links"}),d.current?.focus();return}a==="create"?(p.id=Math.random().toString(36).replace("0.",""),await f.setLink(p),(0,n.showToast)({title:"Multilink Created"}),c.current?.reset(),d.current?.reset(),i.onCreate?.(),i.onCreate?m():L((0,u.jsx)(B,{}))):await f.updateLink(e.id,{...i.data,...p})?((0,n.showToast)({title:"Multilink Updated"}),i.onCreate?.(),m()):(0,n.showToast)({title:"Update failed",style:n.Toast.Style.Failure})}return(0,u.jsxs)(n.Form,{actions:(0,u.jsx)(n.ActionPanel,{children:(0,u.jsx)(n.Action.SubmitForm,{icon:n.Icon.Checkmark,title:`${a==="create"?"Create":"Update"} Multilink`,onSubmit:D})}),children:[(0,u.jsx)(n.Form.TextField,{id:"name",title:"Name",defaultValue:e.name,placeholder:"Multilink name",ref:c,autoFocus:!0}),(0,u.jsx)(n.Form.TextArea,{title:"Links",id:"links",placeholder:"List of links (one per line)",defaultValue:e.links,ref:d}),(0,u.jsx)(S,{browsers:t,selectedBrowser:r,onBrowserChange:s})]})}var C=$;var x=require("@raycast/api");async function T(i,e){let t=i.split(`
`).filter(r=>r.trim()!=="");for(let r=0;r<t.length;r++){let s=t[r].trim();s&&await(0,x.open)(s,e)}return t.length}var l=require("react/jsx-runtime");function B(){let[i,e]=(0,g.useState)([]),[t,r]=(0,g.useState)(!0),s=async function(){let a=await f.getLinks();e([...a]),r(!1)};(0,g.useEffect)(()=>{s()},[]);async function c(a){await T(a.links,a.browser)}async function d(a){let m={title:"Are you sure?",primaryAction:{title:"Confirm",style:o.Alert.ActionStyle.Destructive,onAction:async()=>{await f.deleteLink(a),s(),(0,o.showToast)(o.Toast.Style.Success,"Multilink deleted!")}}};await(0,o.confirmAlert)(m)}return(0,l.jsx)(o.List,{isLoading:t,actions:(0,l.jsx)(o.ActionPanel,{children:(0,l.jsx)(o.Action.Push,{title:"Create Link",target:(0,l.jsx)(C,{onCreate:s})})}),children:i.map((a,m)=>(0,l.jsx)(o.List.Item,{title:a.name,subtitle:`${a.links.split(`
`).length} links`,actions:(0,l.jsxs)(o.ActionPanel,{children:[(0,l.jsx)(o.Action,{title:"Open Links",onAction:()=>c(a),icon:{source:o.Icon.Globe}}),(0,l.jsx)(o.Action.Push,{title:"Edit",target:(0,l.jsx)(C,{data:a,onCreate:s}),icon:{source:o.Icon.Pencil}}),(0,l.jsx)(o.Action,{title:"Delete",onAction:()=>d(m),icon:{source:o.Icon.Trash}})]})},`${a.name}-${m}`))})}
