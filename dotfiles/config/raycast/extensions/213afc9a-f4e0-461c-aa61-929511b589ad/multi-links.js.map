{
  "version": 3,
  "sources": ["../src/multi-links.tsx", "../src/Service.ts", "../src/Components/CreateForm.tsx"],
  "sourcesContent": ["import { ActionPanel, Action, open, List, confirmAlert, Alert, showToast, Toast, Icon } from \"@raycast/api\";\nimport { useState, useEffect } from \"react\";\nimport Service from \"./Service\";\nimport CreateForm from \"./Components/CreateForm\";\nimport { LinkItem } from \"./types\";\n\nexport default function () {\n  const [links, setLinks] = useState<LinkItem[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  const fetchLinks = async function () {\n    const links = await Service.getLinks();\n    setLinks([...links]);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchLinks();\n  }, []);\n\n  function openLinks(linkItem: LinkItem) {\n    linkItem.links.split(\"\\n\").forEach((link) => {\n      open(link, linkItem.browser);\n    });\n  }\n\n  async function deleteLink(index: number) {\n    const options: Alert.Options = {\n      title: \"Are you sure?\",\n      primaryAction: {\n        title: \"Confirm\",\n        style: Alert.ActionStyle.Destructive,\n        onAction: async () => {\n          await Service.deleteLink(index);\n          fetchLinks();\n          showToast(Toast.Style.Success, \"Multilink deleted!\");\n        },\n      },\n    };\n    await confirmAlert(options);\n  }\n\n  return (\n    <List\n      isLoading={loading}\n      actions={\n        <ActionPanel>\n          <Action.Push title=\"Create Link\" target={<CreateForm onCreate={fetchLinks} />} />\n        </ActionPanel>\n      }\n    >\n      {links.map((link, index) => (\n        <List.Item\n          key={`${link.name}-${index}`}\n          title={link.name}\n          subtitle={`${link.links.split(\"\\n\").length} links`}\n          actions={\n            <ActionPanel>\n              <Action title=\"Open Links\" onAction={() => openLinks(link)} icon={{ source: Icon.Globe }} />\n              <Action.Push\n                title=\"Edit\"\n                target={<CreateForm data={link} onCreate={fetchLinks} />}\n                icon={{ source: Icon.Pencil }}\n              />\n              <Action title=\"Delete\" onAction={() => deleteLink(index)} icon={{ source: Icon.Trash }} />\n            </ActionPanel>\n          }\n        />\n      ))}\n    </List>\n  );\n}\n", "import { LocalStorage } from \"@raycast/api\";\nimport { LinkItem } from \"./types\";\n\nclass Service {\n  static async getLinks() {\n    const links = await LocalStorage.getItem(\"links\");\n    return links ? JSON.parse(String(links)) : [];\n  }\n\n  static async setLink(item: LinkItem) {\n    const links = await this.getLinks();\n    links.push(item);\n    await LocalStorage.setItem(\"links\", JSON.stringify(links));\n  }\n\n  static async updateLink(id: string, item: LinkItem) {\n    const links = await this.getLinks();\n    const index = links.findIndex((link: LinkItem) => link.id === id);\n    if (index !== -1) {\n      links[index] = item;\n      await LocalStorage.setItem(\"links\", JSON.stringify(links));\n\n      return true;\n    }\n\n    return false;\n  }\n\n  static async deleteLink(index: number) {\n    const links = await this.getLinks();\n    links.splice(index, 1);\n    await LocalStorage.setItem(\"links\", JSON.stringify(links));\n\n    return links;\n  }\n}\n\nexport default Service;\n", "import {\n  Form,\n  ActionPanel,\n  Action,\n  showToast,\n  Toast,\n  getApplications,\n  Application,\n  useNavigation,\n  Icon,\n} from \"@raycast/api\";\nimport { useRef, useEffect, useState } from \"react\";\nimport { LinkItem } from \"../types\";\nimport Service from \"./../Service\";\nimport MultiLinks from \"../multi-links\";\n\nfunction CreateForm(props: { data?: LinkItem; onCreate?: () => void }) {\n  const [browsers, setBrowsers] = useState<Application[]>([\n    { name: \"Google Chrome\", bundleId: \"com.google.Chrome\", path: \"\" },\n  ]);\n  const nameFieldRef = useRef<Form.TextField>(null);\n  const linksFieldRef = useRef<Form.TextArea>(null);\n  const initialValues = props.data ?? { name: \"\", links: \"\", id: \"\", browser: \"com.google.Chrome\" };\n  const [selectedBrowser, setSelectedBrowser] = useState<string>(\"com.google.Chrome\");\n  const mode = props.data ? \"edit\" : \"create\";\n  const { pop, push } = useNavigation();\n  let updateBrowserList = true;\n\n  async function handleSubmit(values: LinkItem) {\n    if (values.name.trim() === \"\") {\n      await showToast({ style: Toast.Style.Failure, title: \"Name is required\" });\n      nameFieldRef.current?.focus();\n      return;\n    } else if (values.links.trim() === \"\") {\n      await showToast({ style: Toast.Style.Failure, title: \"Please add links\" });\n      linksFieldRef.current?.focus();\n      return;\n    }\n\n    if (mode === \"create\") {\n      values.id = Math.random().toString(36).replace(\"0.\", \"\");\n      await Service.setLink(values);\n      showToast({ title: \"Multilink Created\" });\n      nameFieldRef.current?.reset();\n      linksFieldRef.current?.reset();\n      props.onCreate?.();\n\n      if (props.onCreate) {\n        pop();\n      } else {\n        push(<MultiLinks />);\n      }\n    } else {\n      const success = await Service.updateLink(initialValues.id, { ...props.data, ...values });\n      if (success) {\n        showToast({ title: \"Multilink Updated\" });\n        props.onCreate?.();\n        pop();\n      } else {\n        showToast({ title: \"Update failed\", style: Toast.Style.Failure });\n      }\n    }\n  }\n\n  useEffect(() => {\n    (async () => {\n      const installedApplications = await getApplications();\n\n      const browserIds = [\n        \"com.google.Chrome\",\n        \"com.apple.Safari\",\n        \"com.brave.Browser\",\n        \"org.mozilla.firefox\",\n        \"com.microsoft.edgemac\",\n        \"com.operasoftware.Opera\",\n        \"org.chromium.Chromium\",\n        \"com.vivaldi.Vivaldi\",\n        \"company.thebrowser.Browser\",\n        \"com.sigmaos.sigmaos.macos\",\n      ];\n\n      const browsers = installedApplications.filter((app) => browserIds.includes(String(app.bundleId)));\n\n      if (updateBrowserList) {\n        setBrowsers(browsers);\n        setSelectedBrowser(initialValues.browser);\n      }\n    })();\n\n    return () => {\n      updateBrowserList = false;\n    };\n  }, []);\n\n  return (\n    <Form\n      actions={\n        <ActionPanel>\n          <Action.SubmitForm\n            icon={Icon.Checkmark}\n            title={`${mode === \"create\" ? \"Create\" : \"Update\"} Multilink`}\n            onSubmit={handleSubmit}\n          />\n        </ActionPanel>\n      }\n    >\n      <Form.TextField\n        id=\"name\"\n        title=\"Name\"\n        defaultValue={initialValues.name}\n        placeholder=\"Multilink name\"\n        ref={nameFieldRef}\n        autoFocus={true}\n      />\n\n      <Form.TextArea\n        title=\"Links\"\n        id=\"links\"\n        placeholder=\"List of links (one per line)\"\n        defaultValue={initialValues.links}\n        ref={linksFieldRef}\n      />\n\n      <Form.Dropdown id=\"browser\" title=\"Open with\" value={selectedBrowser} onChange={setSelectedBrowser}>\n        {browsers.map((app) => (\n          <Form.Dropdown.Item key={app.bundleId} value={String(app.bundleId)} title={app.name} />\n        ))}\n      </Form.Dropdown>\n    </Form>\n  );\n}\n\nexport default CreateForm;\n"],
  "mappings": "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",
  "names": ["multi_links_exports", "__export", "multi_links_default", "__toCommonJS", "import_api", "import_react", "import_api", "Service", "links", "item", "id", "index", "link", "Service_default", "import_api", "import_react", "import_jsx_runtime", "CreateForm", "props", "browsers", "setBrowsers", "nameFieldRef", "linksFieldRef", "initialValues", "selectedBrowser", "setSelectedBrowser", "mode", "pop", "push", "updateBrowserList", "handleSubmit", "values", "Service_default", "multi_links_default", "installedApplications", "browserIds", "app", "CreateForm_default", "import_jsx_runtime", "multi_links_default", "links", "setLinks", "loading", "setLoading", "fetchLinks", "Service_default", "openLinks", "linkItem", "link", "deleteLink", "index", "options", "CreateForm_default"]
}
