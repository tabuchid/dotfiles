"use strict";var Q=Object.create;var C=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Y=(e,t)=>{for(var r in t)C(e,r,{get:t[r],enumerable:!0})},F=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of q(t))!z.call(e,a)&&a!==r&&C(e,a,{get:()=>t[a],enumerable:!(o=V(t,a))||o.enumerable});return e};var x=(e,t,r)=>(r=e!=null?Q(v(e)):{},F(t||!e||!e.__esModule?C(r,"default",{value:e,enumerable:!0}):r,e)),Z=e=>F(C({},"__esModule",{value:!0}),e);var $=K((ne,_)=>{var{hasOwnProperty:P}=Object.prototype,S=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`,b=(e,t)=>{let r=[],o="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||Object.create(null),t.whitespace=t.whitespace===!0);let a=t.whitespace?" = ":"=";for(let p of Object.keys(e)){let n=e[p];if(n&&Array.isArray(n))for(let i of n)o+=y(p+"[]")+a+y(i)+S;else n&&typeof n=="object"?r.push(p):o+=y(p)+a+y(n)+S}t.section&&o.length&&(o="["+y(t.section)+"]"+S+o);for(let p of r){let n=I(p).join("\\."),i=(t.section?t.section+".":"")+n,{whitespace:s}=t,f=b(e[p],{section:i,whitespace:s});o.length&&f.length&&(o+=S),o+=f}return o},I=e=>e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(t=>t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")),R=e=>{let t=Object.create(null),r=t,o=null,a=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,p=e.split(/[\r\n]+/g);for(let i of p){if(!i||i.match(/^\s*[;#]/))continue;let s=i.match(a);if(!s)continue;if(s[1]!==void 0){if(o=A(s[1]),o==="__proto__"){r=Object.create(null);continue}r=t[o]=t[o]||Object.create(null);continue}let f=A(s[2]),u=f.length>2&&f.slice(-2)==="[]",c=u?f.slice(0,-2):f;if(c==="__proto__")continue;let m=s[3]?A(s[4]):!0,h=m==="true"||m==="false"||m==="null"?JSON.parse(m):m;u&&(P.call(r,c)?Array.isArray(r[c])||(r[c]=[r[c]]):r[c]=[]),Array.isArray(r[c])?r[c].push(h):r[c]=h}let n=[];for(let i of Object.keys(t)){if(!P.call(t,i)||typeof t[i]!="object"||Array.isArray(t[i]))continue;let s=I(i);r=t;let f=s.pop(),u=f.replace(/\\\./g,".");for(let c of s)c!=="__proto__"&&((!P.call(r,c)||typeof r[c]!="object")&&(r[c]=Object.create(null)),r=r[c]);r===t&&u===f||(r[u]=t[i],n.push(i))}for(let i of n)delete t[i];return t},j=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),y=e=>typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&j(e)||e!==e.trim()?JSON.stringify(e):e.split(";").join("\\;").split("#").join("\\#"),A=(e,t)=>{if(e=(e||"").trim(),j(e)){e.charAt(0)==="'"&&(e=e.slice(1,-1));try{e=JSON.parse(e)}catch{}}else{let r=!1,o="";for(let a=0,p=e.length;a<p;a++){let n=e.charAt(a);if(r)"\\;#".indexOf(n)!==-1?o+=n:o+="\\"+n,r=!1;else{if(";#".indexOf(n)!==-1)break;n==="\\"?r=!0:o+=n}}return r&&(o+="\\"),o.trim()}return e};_.exports={parse:R,decode:R,stringify:b,encode:b,safe:y,unsafe:A}});var oe={};Y(oe,{default:()=>W});module.exports=Z(oe);var l=require("@raycast/api");var L=x(require("fs")),H=x(require("os")),N=x($()),U=require("path");var O={chromium:[{app:"Google Chrome",type:"CHROMIUM",title:"Google Chrome",path:"/Library/Application Support/Google/Chrome",icon:"chrome.png"},{app:"Google Chrome Dev",type:"CHROMIUM",title:"Google Chrome Dev",path:"/Library/Application Support/Google/Chrome Dev",icon:"chrome-dev.png"},{app:"Google Chrome Canary",type:"CHROMIUM",title:"Google Chrome Canary",path:"/Library/Application Support/Google/Chrome Canary",icon:"canary.png"},{app:"Chromium",type:"CHROMIUM",title:"Chromium",path:"/Library/Application Support/Chromium",icon:"chromium.png"},{app:"Brave Browser",type:"CHROMIUM",title:"Brave",path:"/Library/Application Support/BraveSoftware/Brave-Browser",icon:"brave.png"},{app:"Microsoft Edge",type:"CHROMIUM",title:"Microsoft Edge",path:"/Library/Application Support/Microsoft Edge",icon:"edge.png"},{app:"Microsoft Edge Dev",type:"CHROMIUM",title:"Microsoft Edge Dev",path:"/Library/Application Support/Microsoft Edge Dev",icon:"edge-dev.png"},{app:"Microsoft Edge Canary",type:"CHROMIUM",title:"Microsoft Edge Canary",path:"/Library/Application Support/Microsoft Edge Canary",icon:"edge-canary.png"},{app:"Helium",type:"CHROMIUM",title:"Helium",path:"/Library/Application Support/net.imput.helium",icon:"helium.png"},{app:"Arc",type:"CHROMIUM",title:"Arc",path:"/Library/Application Support/Arc/User Data",icon:"arc.png"}],firefox:[{app:"/Applications/Firefox.app/Contents/MacOS/firefox",type:"FIREFOX",title:"Firefox",path:"/Library/Application Support/Firefox",icon:"firefox.png"},{app:"/Applications/Firefox Developer Edition.app/Contents/MacOS/firefox",type:"FIREFOX",title:"Firefox Developer Edition",path:"/Library/Application Support/Firefox",icon:"firefox-dev.png"},{app:"/Applications/Firefox Nightly.app/Contents/MacOS/firefox",type:"FIREFOX",title:"Firefox Nightly",path:"/Library/Application Support/Firefox",icon:"firefox-nightly.png"}]};var M=e=>{e.sort((t,r)=>t.name.toLowerCase()<r.name.toLowerCase()?-1:t.name.toLowerCase()>r.name.toLowerCase()?1:0)},w=(e,t)=>{if(!e)return!0;for(let r of e)if(t.title.includes(r)||t.type.includes(r))return!0;return!1};var k=e=>{let t=[];return O.firefox.filter(r=>L.default.existsSync(r.app)&&w(e,r)).forEach(r=>{let o=(0,U.join)(H.default.homedir(),r.path,"profiles.ini");if(!L.default.existsSync(o))return null;let p=L.default.readFileSync(o,"utf-8"),n=N.default.parse(p),i=[];Object.values(n).forEach(s=>{if(!s.Name)return null;i.push({type:r.type,browser:r.title,app:r.app,path:s.Name,name:s.Name,icon:r.icon,label:s.Name,uid:s.Name})}),M(i),t.push({name:r.title,profiles:i})}),t};var g=x(require("fs")),D=x(require("os"));var G=e=>{let t=[];return O.chromium.forEach(r=>{if(!w(e,r))return null;let o=`${D.default.homedir()}${r.path}`;if(!g.default.existsSync(o))return null;let p=`${o}/Local State`;if(!g.default.existsSync(p))return null;let i;try{let c=g.default.readFileSync(p,"utf-8");i=JSON.parse(c)}catch{return null}let s=i?.profile?.info_cache;if(!s)return null;let f=Object.keys(s),u=[];f.forEach(c=>{let m;try{let B=`${o}/${c}/Preferences`;if(!g.default.existsSync(B))return;let T=g.default.readFileSync(B,"utf-8");m=JSON.parse(T)}catch{return}let h=m?.profile?.name;if(!h)return;let X=s[c]?.name||h;u.push({type:r.type,browser:r.title,app:r.app,path:c,name:h,uid:c,label:X,icon:r.icon})}),M(u),t.push({name:r.title,profiles:u})}),t};var E=require("child_process"),J=(e,t,r)=>{e==="FIREFOX"&&re(t,r),e==="CHROMIUM"&&te(t,r)},te=(e,t)=>{(0,E.exec)(`open -n -a "${e}" --args --profile-directory="${t}"`)},re=(e,t)=>{(0,E.exec)(`"${e}" -P --no-remote ${t}`)};var d=require("react/jsx-runtime");function W(){let t=(0,l.getPreferenceValues)()["browsers.filter"].split(","),r=G(t),o=k(t),a=[...r,...o];return(0,d.jsx)(l.List,{children:a.map((p,n)=>(0,d.jsx)(l.List.Section,{title:p.name,children:p.profiles.map((i,s)=>(0,d.jsx)(l.List.Item,{icon:{source:`icons/${i.icon}`},title:i.label,accessories:[{text:"Launch this profile",icon:l.Icon.Globe}],actions:(0,d.jsx)(l.ActionPanel,{children:(0,d.jsx)(l.Action,{title:"Open Browser",onAction:async()=>{J(i.type,i.app,i.path),await(0,l.closeMainWindow)({clearRootSearch:!0})}})})},`browser-profile-${s}`))},`browser-section-${n}`))})}
