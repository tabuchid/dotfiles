"use strict";var Oe=Object.create;var M=Object.defineProperty;var De=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var je=Object.getPrototypeOf,Le=Object.prototype.hasOwnProperty;var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ne=(r,e)=>{for(var n in e)M(r,n,{get:e[n],enumerable:!0})},be=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of Fe(e))!Le.call(r,c)&&c!==n&&M(r,c,{get:()=>e[c],enumerable:!(o=De(e,c))||o.enumerable});return r};var ye=(r,e,n)=>(n=r!=null?Oe(je(r)):{},be(e||!r||!r.__esModule?M(n,"default",{value:r,enumerable:!0}):n,r)),Me=r=>be(M({},"__esModule",{value:!0}),r);var V=_(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.assertNever=ze;q.pick=We;q.isObject=Ve;function ze(r){throw new Error(`Unexpected value should never occur: ${r}`)}function We(r,e){let n=e.map(o=>[o,r?.[o]]);return Object.fromEntries(n)}function Ve(r){return typeof r=="object"&&r!==null}});var de=_(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.LogLevel=void 0;T.makeConsoleLogger=Ge;T.logLevelSeverity=He;var Be=V(),C;(function(r){r.DEBUG="debug",r.INFO="info",r.WARN="warn",r.ERROR="error"})(C||(T.LogLevel=C={}));function Ge(r){return(e,n,o)=>{console[e](`${r} ${e}:`,n,o)}}function He(r){switch(r){case C.DEBUG:return 20;case C.INFO:return 40;case C.WARN:return 60;case C.ERROR:return 80;default:return(0,Be.assertNever)(r)}}});var fe=_(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.APIResponseError=b.UnknownHTTPResponseError=b.InvalidPathParameterError=b.RequestTimeoutError=b.ClientErrorCode=b.APIErrorCode=void 0;b.isNotionClientError=ke;b.validateRequestPath=Je;b.isHTTPResponseError=Ze;b.buildRequestError=Ye;var $e=V(),h;(function(r){r.Unauthorized="unauthorized",r.RestrictedResource="restricted_resource",r.ObjectNotFound="object_not_found",r.RateLimited="rate_limited",r.InvalidJSON="invalid_json",r.InvalidRequestURL="invalid_request_url",r.InvalidRequest="invalid_request",r.ValidationError="validation_error",r.ConflictError="conflict_error",r.InternalServerError="internal_server_error",r.ServiceUnavailable="service_unavailable"})(h||(b.APIErrorCode=h={}));var v;(function(r){r.RequestTimeout="notionhq_client_request_timeout",r.ResponseError="notionhq_client_response_error",r.InvalidPathParameter="notionhq_client_invalid_path_parameter"})(v||(b.ClientErrorCode=v={}));var I=class extends Error{};function ke(r){return(0,$e.isObject)(r)&&r instanceof I}function D(r,e){return ke(r)&&r.code in e}var he=class r extends I{constructor(e="Request to Notion API has timed out"){super(e),this.code=v.RequestTimeout,this.name="RequestTimeoutError"}static isRequestTimeoutError(e){return D(e,{[v.RequestTimeout]:!0})}static rejectAfterTimeout(e,n){return new Promise((o,c)=>{let d=setTimeout(()=>{c(new r)},n);e.then(o).catch(c).then(()=>clearTimeout(d))})}};b.RequestTimeoutError=he;var O=class extends I{constructor(e="Path parameter contains invalid characters that could alter the request path"){super(e),this.code=v.InvalidPathParameter,this.name="InvalidPathParameterError"}static isInvalidPathParameterError(e){return D(e,{[v.InvalidPathParameter]:!0})}};b.InvalidPathParameterError=O;function Je(r){if(r.includes(".."))throw new O(`Request path "${r}" contains path traversal sequence ".."`);if(/%2e/i.test(r)){let e;try{e=decodeURIComponent(r)}catch{return}if(e.includes(".."))throw new O(`Request path "${r}" contains encoded path traversal sequence`)}}var B=class extends I{constructor(e){super(e.message),this.name="HTTPResponseError";let{code:n,status:o,headers:c,rawBodyText:d,additional_data:f,request_id:$}=e;this.code=n,this.status=o,this.headers=c,this.body=d,this.additional_data=f,this.request_id=$}},Ke={[v.ResponseError]:!0,[h.Unauthorized]:!0,[h.RestrictedResource]:!0,[h.ObjectNotFound]:!0,[h.RateLimited]:!0,[h.InvalidJSON]:!0,[h.InvalidRequestURL]:!0,[h.InvalidRequest]:!0,[h.ValidationError]:!0,[h.ConflictError]:!0,[h.InternalServerError]:!0,[h.ServiceUnavailable]:!0};function Ze(r){return!!D(r,Ke)}var G=class extends B{constructor(e){var n;super({...e,code:v.ResponseError,message:(n=e.message)!==null&&n!==void 0?n:`Request to Notion API failed with status: ${e.status}`,additional_data:void 0,request_id:void 0}),this.name="UnknownHTTPResponseError"}static isUnknownHTTPResponseError(e){return D(e,{[v.ResponseError]:!0})}};b.UnknownHTTPResponseError=G;var ve={[h.Unauthorized]:!0,[h.RestrictedResource]:!0,[h.ObjectNotFound]:!0,[h.RateLimited]:!0,[h.InvalidJSON]:!0,[h.InvalidRequestURL]:!0,[h.InvalidRequest]:!0,[h.ValidationError]:!0,[h.ConflictError]:!0,[h.InternalServerError]:!0,[h.ServiceUnavailable]:!0},H=class extends B{constructor(){super(...arguments),this.name="APIResponseError"}static isAPIResponseError(e){return D(e,ve)}};b.APIResponseError=H;function Ye(r,e){let n=Xe(e);return n!==void 0?new H({code:n.code,message:n.message,headers:r.headers,status:r.status,rawBodyText:e,additional_data:n.additional_data,request_id:n.request_id}):new G({message:void 0,headers:r.headers,status:r.status,rawBodyText:e})}function Xe(r){if(typeof r!="string")return;let e;try{e=JSON.parse(r)}catch{return}if(!(0,$e.isObject)(e)||typeof e.message!="string"||!Qe(e.code))return;let n=e.additional_data,o=e.request_id;return{...e,code:e.code,message:e.message,additional_data:n,request_id:o}}function Qe(r){return typeof r=="string"&&r in ve}});var we=_(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.movePage=s.oauthIntrospect=s.oauthRevoke=s.oauthToken=s.getFileUpload=s.completeFileUpload=s.sendFileUpload=s.listFileUploads=s.createFileUpload=s.getComment=s.listComments=s.createComment=s.search=s.createDatabase=s.updateDatabase=s.getDatabase=s.listDataSourceTemplates=s.createDataSource=s.queryDataSource=s.updateDataSource=s.getDataSource=s.appendBlockChildren=s.listBlockChildren=s.deleteBlock=s.updateBlock=s.getBlock=s.getPageProperty=s.updatePage=s.getPage=s.createPage=s.listUsers=s.getUser=s.getSelf=void 0;s.getSelf={method:"get",pathParams:[],queryParams:[],bodyParams:[],path:()=>"users/me"};s.getUser={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:r=>`users/${r.user_id}`};s.listUsers={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"};s.createPage={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","content","children","template","position"],path:()=>"pages"};s.getPage={method:"get",pathParams:["page_id"],queryParams:["filter_properties"],bodyParams:[],path:r=>`pages/${r.page_id}`};s.updatePage={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties","icon","cover","is_locked","template","erase_content","archived","in_trash"],path:r=>`pages/${r.page_id}`};s.getPageProperty={method:"get",pathParams:["page_id","property_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:r=>`pages/${r.page_id}/properties/${r.property_id}`};s.getBlock={method:"get",pathParams:["block_id"],queryParams:[],bodyParams:[],path:r=>`blocks/${r.block_id}`};s.updateBlock={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["embed","type","archived","in_trash","bookmark","image","video","pdf","file","audio","code","equation","divider","breadcrumb","table_of_contents","link_to_page","table_row","heading_1","heading_2","heading_3","paragraph","bulleted_list_item","numbered_list_item","quote","to_do","toggle","template","callout","synced_block","table","column"],path:r=>`blocks/${r.block_id}`};s.deleteBlock={method:"delete",pathParams:["block_id"],queryParams:[],bodyParams:[],path:r=>`blocks/${r.block_id}`};s.listBlockChildren={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:r=>`blocks/${r.block_id}/children`};s.appendBlockChildren={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children","after","position"],path:r=>`blocks/${r.block_id}/children`};s.getDataSource={method:"get",pathParams:["data_source_id"],queryParams:[],bodyParams:[],path:r=>`data_sources/${r.data_source_id}`};s.updateDataSource={method:"patch",pathParams:["data_source_id"],queryParams:[],bodyParams:["title","icon","properties","in_trash","archived","parent"],path:r=>`data_sources/${r.data_source_id}`};s.queryDataSource={method:"post",pathParams:["data_source_id"],queryParams:["filter_properties"],bodyParams:["sorts","filter","start_cursor","page_size","archived","in_trash","result_type"],path:r=>`data_sources/${r.data_source_id}/query`};s.createDataSource={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","title","icon"],path:()=>"data_sources"};s.listDataSourceTemplates={method:"get",pathParams:["data_source_id"],queryParams:["name","start_cursor","page_size"],bodyParams:[],path:r=>`data_sources/${r.data_source_id}/templates`};s.getDatabase={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:r=>`databases/${r.database_id}`};s.updateDatabase={method:"patch",pathParams:["database_id"],queryParams:[],bodyParams:["parent","title","description","is_inline","icon","cover","in_trash","is_locked"],path:r=>`databases/${r.database_id}`};s.createDatabase={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","title","description","is_inline","initial_data_source","icon","cover"],path:()=>"databases"};s.search={method:"post",pathParams:[],queryParams:[],bodyParams:["sort","query","start_cursor","page_size","filter"],path:()=>"search"};s.createComment={method:"post",pathParams:[],queryParams:[],bodyParams:["rich_text","attachments","display_name","parent","discussion_id"],path:()=>"comments"};s.listComments={method:"get",pathParams:[],queryParams:["block_id","start_cursor","page_size"],bodyParams:[],path:()=>"comments"};s.getComment={method:"get",pathParams:["comment_id"],queryParams:[],bodyParams:[],path:r=>`comments/${r.comment_id}`};s.createFileUpload={method:"post",pathParams:[],queryParams:[],bodyParams:["mode","filename","content_type","number_of_parts","external_url"],path:()=>"file_uploads"};s.listFileUploads={method:"get",pathParams:[],queryParams:["status","start_cursor","page_size"],bodyParams:[],path:()=>"file_uploads"};s.sendFileUpload={method:"post",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],formDataParams:["file","part_number"],path:r=>`file_uploads/${r.file_upload_id}/send`};s.completeFileUpload={method:"post",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],path:r=>`file_uploads/${r.file_upload_id}/complete`};s.getFileUpload={method:"get",pathParams:["file_upload_id"],queryParams:[],bodyParams:[],path:r=>`file_uploads/${r.file_upload_id}`};s.oauthToken={method:"post",pathParams:[],queryParams:[],bodyParams:["grant_type","code","redirect_uri","external_account","refresh_token"],path:()=>"oauth/token"};s.oauthRevoke={method:"post",pathParams:[],queryParams:[],bodyParams:["token"],path:()=>"oauth/revoke"};s.oauthIntrospect={method:"post",pathParams:[],queryParams:[],bodyParams:["token"],path:()=>"oauth/introspect"};s.movePage={method:"post",pathParams:["page_id"],queryParams:[],bodyParams:["parent"],path:r=>`pages/${r.page_id}/move`}});var Pe=_((Ut,et)=>{et.exports={name:"@notionhq/client",version:"5.9.0",description:"A simple and easy to use client for the Notion API",engines:{node:">=18"},homepage:"https://developers.notion.com/docs/getting-started",bugs:{url:"https://github.com/makenotion/notion-sdk-js/issues"},repository:{type:"git",url:"https://github.com/makenotion/notion-sdk-js/"},keywords:["notion","notionapi","rest","notion-api"],main:"./build/src",types:"./build/src/index.d.ts",scripts:{prepare:"husky && npm run build",prepublishOnly:"npm run checkLoggedIn && npm run lint && npm run test",build:"tsc",prettier:"prettier --write .",lint:"prettier --check . && eslint . --ext .ts && cspell '**/*' ",test:"jest ./test","check-links":"git ls-files | grep md$ | xargs -n 1 markdown-link-check",prebuild:"npm run clean",clean:"rm -rf ./build",checkLoggedIn:"./scripts/verifyLoggedIn.sh"},"lint-staged":{"*.{ts,js,json,md}":"prettier --write","*.ts":"eslint --fix"},author:"",license:"MIT",files:["build/package.json","build/src/**"],devDependencies:{"@types/jest":"28.1.4","@typescript-eslint/eslint-plugin":"5.39.0","@typescript-eslint/parser":"5.39.0",cspell:"5.4.1",eslint:"7.24.0",husky:"^9.1.7",jest:"28.1.2","lint-staged":"^16.2.6","markdown-link-check":"3.13.7",prettier:"2.8.8","ts-jest":"28.0.5",typescript:"5.9.2"}}});var xe=_(S=>{"use strict";var w=S&&S.__classPrivateFieldSet||function(r,e,n,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!c:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(r,n):c?c.value=n:e.set(r,n),n},P=S&&S.__classPrivateFieldGet||function(r,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:e.get(r)},J,K,Z,Y,X,Q,ee,te,re;Object.defineProperty(S,"__esModule",{value:!0});var x=de(),F=fe(),i=V(),a=we(),_e=Pe(),ae=class r{constructor(e){var n,o,c,d,f,$;J.set(this,void 0),K.set(this,void 0),Z.set(this,void 0),Y.set(this,void 0),X.set(this,void 0),Q.set(this,void 0),ee.set(this,void 0),te.set(this,void 0),re.set(this,void 0),this.blocks={retrieve:t=>this.request({path:a.getBlock.path(t),method:a.getBlock.method,query:(0,i.pick)(t,a.getBlock.queryParams),body:(0,i.pick)(t,a.getBlock.bodyParams),auth:t?.auth}),update:t=>this.request({path:a.updateBlock.path(t),method:a.updateBlock.method,query:(0,i.pick)(t,a.updateBlock.queryParams),body:(0,i.pick)(t,a.updateBlock.bodyParams),auth:t?.auth}),delete:t=>this.request({path:a.deleteBlock.path(t),method:a.deleteBlock.method,query:(0,i.pick)(t,a.deleteBlock.queryParams),body:(0,i.pick)(t,a.deleteBlock.bodyParams),auth:t?.auth}),children:{append:t=>this.request({path:a.appendBlockChildren.path(t),method:a.appendBlockChildren.method,query:(0,i.pick)(t,a.appendBlockChildren.queryParams),body:(0,i.pick)(t,a.appendBlockChildren.bodyParams),auth:t?.auth}),list:t=>this.request({path:a.listBlockChildren.path(t),method:a.listBlockChildren.method,query:(0,i.pick)(t,a.listBlockChildren.queryParams),body:(0,i.pick)(t,a.listBlockChildren.bodyParams),auth:t?.auth})}},this.databases={retrieve:t=>this.request({path:a.getDatabase.path(t),method:a.getDatabase.method,query:(0,i.pick)(t,a.getDatabase.queryParams),body:(0,i.pick)(t,a.getDatabase.bodyParams),auth:t?.auth}),create:t=>this.request({path:a.createDatabase.path(),method:a.createDatabase.method,query:(0,i.pick)(t,a.createDatabase.queryParams),body:(0,i.pick)(t,a.createDatabase.bodyParams),auth:t?.auth}),update:t=>this.request({path:a.updateDatabase.path(t),method:a.updateDatabase.method,query:(0,i.pick)(t,a.updateDatabase.queryParams),body:(0,i.pick)(t,a.updateDatabase.bodyParams),auth:t?.auth})},this.dataSources={retrieve:t=>this.request({path:a.getDataSource.path(t),method:a.getDataSource.method,query:(0,i.pick)(t,a.getDataSource.queryParams),body:(0,i.pick)(t,a.getDataSource.bodyParams),auth:t?.auth}),query:t=>this.request({path:a.queryDataSource.path(t),method:a.queryDataSource.method,query:(0,i.pick)(t,a.queryDataSource.queryParams),body:(0,i.pick)(t,a.queryDataSource.bodyParams),auth:t?.auth}),create:t=>this.request({path:a.createDataSource.path(),method:a.createDataSource.method,query:(0,i.pick)(t,a.createDataSource.queryParams),body:(0,i.pick)(t,a.createDataSource.bodyParams),auth:t?.auth}),update:t=>this.request({path:a.updateDataSource.path(t),method:a.updateDataSource.method,query:(0,i.pick)(t,a.updateDataSource.queryParams),body:(0,i.pick)(t,a.updateDataSource.bodyParams),auth:t?.auth}),listTemplates:t=>this.request({path:a.listDataSourceTemplates.path(t),method:a.listDataSourceTemplates.method,query:(0,i.pick)(t,a.listDataSourceTemplates.queryParams),body:(0,i.pick)(t,a.listDataSourceTemplates.bodyParams),auth:t?.auth})},this.pages={create:t=>this.request({path:a.createPage.path(),method:a.createPage.method,query:(0,i.pick)(t,a.createPage.queryParams),body:(0,i.pick)(t,a.createPage.bodyParams),auth:t?.auth}),retrieve:t=>this.request({path:a.getPage.path(t),method:a.getPage.method,query:(0,i.pick)(t,a.getPage.queryParams),body:(0,i.pick)(t,a.getPage.bodyParams),auth:t?.auth}),update:t=>this.request({path:a.updatePage.path(t),method:a.updatePage.method,query:(0,i.pick)(t,a.updatePage.queryParams),body:(0,i.pick)(t,a.updatePage.bodyParams),auth:t?.auth}),move:t=>this.request({path:a.movePage.path(t),method:a.movePage.method,query:(0,i.pick)(t,a.movePage.queryParams),body:(0,i.pick)(t,a.movePage.bodyParams),auth:t?.auth}),properties:{retrieve:t=>this.request({path:a.getPageProperty.path(t),method:a.getPageProperty.method,query:(0,i.pick)(t,a.getPageProperty.queryParams),body:(0,i.pick)(t,a.getPageProperty.bodyParams),auth:t?.auth})}},this.users={retrieve:t=>this.request({path:a.getUser.path(t),method:a.getUser.method,query:(0,i.pick)(t,a.getUser.queryParams),body:(0,i.pick)(t,a.getUser.bodyParams),auth:t?.auth}),list:t=>this.request({path:a.listUsers.path(),method:a.listUsers.method,query:(0,i.pick)(t,a.listUsers.queryParams),body:(0,i.pick)(t,a.listUsers.bodyParams),auth:t?.auth}),me:t=>this.request({path:a.getSelf.path(),method:a.getSelf.method,query:(0,i.pick)(t,a.getSelf.queryParams),body:(0,i.pick)(t,a.getSelf.bodyParams),auth:t?.auth})},this.comments={create:t=>this.request({path:a.createComment.path(),method:a.createComment.method,query:(0,i.pick)(t,a.createComment.queryParams),body:(0,i.pick)(t,a.createComment.bodyParams),auth:t?.auth}),list:t=>this.request({path:a.listComments.path(),method:a.listComments.method,query:(0,i.pick)(t,a.listComments.queryParams),body:(0,i.pick)(t,a.listComments.bodyParams),auth:t?.auth}),retrieve:t=>this.request({path:a.getComment.path(t),method:a.getComment.method,query:(0,i.pick)(t,a.getComment.queryParams),body:(0,i.pick)(t,a.getComment.bodyParams),auth:t?.auth})},this.fileUploads={create:t=>this.request({path:a.createFileUpload.path(),method:a.createFileUpload.method,query:(0,i.pick)(t,a.createFileUpload.queryParams),body:(0,i.pick)(t,a.createFileUpload.bodyParams),auth:t?.auth}),retrieve:t=>this.request({path:a.getFileUpload.path(t),method:a.getFileUpload.method,query:(0,i.pick)(t,a.getFileUpload.queryParams),auth:t?.auth}),list:t=>this.request({path:a.listFileUploads.path(),method:a.listFileUploads.method,query:(0,i.pick)(t,a.listFileUploads.queryParams),auth:t?.auth}),send:t=>this.request({path:a.sendFileUpload.path(t),method:a.sendFileUpload.method,query:(0,i.pick)(t,a.sendFileUpload.queryParams),formDataParams:(0,i.pick)(t,a.sendFileUpload.formDataParams),auth:t?.auth}),complete:t=>this.request({path:a.completeFileUpload.path(t),method:a.completeFileUpload.method,query:(0,i.pick)(t,a.completeFileUpload.queryParams),auth:t?.auth})},this.search=t=>this.request({path:a.search.path(),method:a.search.method,query:(0,i.pick)(t,a.search.queryParams),body:(0,i.pick)(t,a.search.bodyParams),auth:t?.auth}),this.oauth={token:t=>this.request({path:a.oauthToken.path(),method:a.oauthToken.method,query:(0,i.pick)(t,a.oauthToken.queryParams),body:(0,i.pick)(t,a.oauthToken.bodyParams),auth:{client_id:t.client_id,client_secret:t.client_secret}}),introspect:t=>this.request({path:a.oauthIntrospect.path(),method:a.oauthIntrospect.method,query:(0,i.pick)(t,a.oauthIntrospect.queryParams),body:(0,i.pick)(t,a.oauthIntrospect.bodyParams),auth:{client_id:t.client_id,client_secret:t.client_secret}}),revoke:t=>this.request({path:a.oauthRevoke.path(),method:a.oauthRevoke.method,query:(0,i.pick)(t,a.oauthRevoke.queryParams),body:(0,i.pick)(t,a.oauthRevoke.bodyParams),auth:{client_id:t.client_id,client_secret:t.client_secret}})},w(this,J,e?.auth,"f"),w(this,K,(n=e?.logLevel)!==null&&n!==void 0?n:x.LogLevel.WARN,"f"),w(this,Z,(o=e?.logger)!==null&&o!==void 0?o:(0,x.makeConsoleLogger)(_e.name),"f"),w(this,Y,`${(c=e?.baseUrl)!==null&&c!==void 0?c:"https://api.notion.com"}/v1/`,"f"),w(this,X,(d=e?.timeoutMs)!==null&&d!==void 0?d:6e4,"f"),w(this,Q,(f=e?.notionVersion)!==null&&f!==void 0?f:r.defaultNotionVersion,"f"),w(this,ee,($=e?.fetch)!==null&&$!==void 0?$:fetch,"f"),w(this,te,e?.agent,"f"),w(this,re,`notionhq-client/${_e.version}`,"f")}async request(e){let{path:n,method:o,query:c,body:d,formDataParams:f,auth:$}=e;(0,F.validateRequestPath)(n),this.log(x.LogLevel.INFO,"request start",{method:o,path:n});let t=!d||Object.entries(d).length===0?void 0:JSON.stringify(d),ne=new URL(`${P(this,Y,"f")}${n}`);if(c){for(let[p,y]of Object.entries(c))if(y!==void 0)if(Array.isArray(y))for(let R of y)ne.searchParams.append(p,decodeURIComponent(R));else ne.searchParams.append(p,String(y))}let se;if(typeof $=="object"){let p=`${$.client_id}:${$.client_secret}`;se={authorization:`Basic ${Buffer.from(p).toString("base64")}`}}else se=this.authAsHeaders($);let ie={...e.headers,...se,"Notion-Version":P(this,Q,"f"),"user-agent":P(this,re,"f")};t!==void 0&&(ie["content-type"]="application/json");let N;if(f){delete ie["content-type"],N=new FormData;for(let[p,y]of Object.entries(f))typeof y=="string"?N.append(p,y):typeof y=="object"&&N.append(p,typeof y.data=="object"?y.data:new Blob([y.data]),y.filename)}try{let p=await F.RequestTimeoutError.rejectAfterTimeout(P(this,ee,"f").call(this,ne.toString(),{method:o.toUpperCase(),headers:ie,body:t??N,agent:P(this,te,"f")}),P(this,X,"f")),y=await p.text();if(!p.ok)throw(0,F.buildRequestError)(p,y);let R=JSON.parse(y);return this.log(x.LogLevel.INFO,"request success",{method:o,path:n,..."request_id"in R&&R.request_id?{requestId:R.request_id}:{}}),R}catch(p){throw(0,F.isNotionClientError)(p)&&(this.log(x.LogLevel.WARN,"request fail",{code:p.code,message:p.message,..."request_id"in p&&p.request_id?{requestId:p.request_id}:{}}),(0,F.isHTTPResponseError)(p)&&this.log(x.LogLevel.DEBUG,"failed response body",{body:p.body})),p}}log(e,n,o){(0,x.logLevelSeverity)(e)>=(0,x.logLevelSeverity)(P(this,K,"f"))&&P(this,Z,"f").call(this,e,n,o)}authAsHeaders(e){let n={},o=e??P(this,J,"f");return o!==void 0&&(n.authorization=`Bearer ${o}`),n}};J=new WeakMap,K=new WeakMap,Z=new WeakMap,Y=new WeakMap,X=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap;ae.defaultNotionVersion="2025-09-03";S.default=ae});var Ce=_(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.iteratePaginatedAPI=Se;m.collectPaginatedAPI=tt;m.iterateDataSourceTemplates=Ee;m.collectDataSourceTemplates=rt;m.isFullBlock=at;m.isFullPage=Re;m.isFullDataSource=Ue;m.isFullDatabase=nt;m.isFullPageOrDataSource=st;m.isFullUser=it;m.isFullComment=ot;m.isTextRichTextItemResponse=ct;m.isEquationRichTextItemResponse=ut;m.isMentionRichTextItemResponse=lt;m.extractNotionId=pe;m.extractDatabaseId=dt;m.extractPageId=ht;m.extractBlockId=ft;async function*Se(r,e){let n=e.start_cursor;do{let o=await r({...e,start_cursor:n});yield*o.results,n=o.next_cursor}while(n)}async function tt(r,e){let n=[];for await(let o of Se(r,e))n.push(o);return n}async function*Ee(r,e){let n=e.start_cursor;do{let o=await r.dataSources.listTemplates({...e,start_cursor:n});yield*o.templates,n=o.next_cursor}while(n)}async function rt(r,e){let n=[];for await(let o of Ee(r,e))n.push(o);return n}function at(r){return r.object==="block"&&"type"in r}function Re(r){return r.object==="page"&&"url"in r}function Ue(r){return r.object==="data_source"}function nt(r){return r.object==="database"}function st(r){return r.object==="data_source"?Ue(r):Re(r)}function it(r){return"type"in r}function ot(r){return"created_by"in r}function ct(r){return r.type==="text"}function ut(r){return r.type==="equation"}function lt(r){return r.type==="mention"}function pe(r){if(!r||typeof r!="string")return null;let e=r.trim();if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))return e.toLowerCase();if(/^[0-9a-f]{32}$/i.test(e))return j(e);let c=e.match(/\/[^/?#]*-([0-9a-f]{32})(?:[/?#]|$)/i);if(c&&c[1])return j(c[1]);let d=e.match(/[?&](?:p|page_id|database_id)=([0-9a-f]{32})/i);if(d&&d[1])return j(d[1]);let f=e.match(/([0-9a-f]{32})/i);return f&&f[1]?j(f[1]):null}function j(r){let e=r.toLowerCase();return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20,32)}`}function dt(r){return pe(r)}function ht(r){return pe(r)}function ft(r){if(!r||typeof r!="string")return null;let e=r.match(/#(?:block-)?([0-9a-f]{32})/i);return e&&e[1]?j(e[1]):null}});var Te=_(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.extractBlockId=u.extractPageId=u.extractDatabaseId=u.extractNotionId=u.isFullPageOrDataSource=u.isFullComment=u.isFullUser=u.isFullPage=u.isFullDatabase=u.isFullDataSource=u.isFullBlock=u.iterateDataSourceTemplates=u.collectDataSourceTemplates=u.iteratePaginatedAPI=u.collectPaginatedAPI=u.isNotionClientError=u.InvalidPathParameterError=u.RequestTimeoutError=u.UnknownHTTPResponseError=u.APIResponseError=u.ClientErrorCode=u.APIErrorCode=u.LogLevel=u.Client=void 0;var pt=xe();Object.defineProperty(u,"Client",{enumerable:!0,get:function(){return pt.default}});var mt=de();Object.defineProperty(u,"LogLevel",{enumerable:!0,get:function(){return mt.LogLevel}});var E=fe();Object.defineProperty(u,"APIErrorCode",{enumerable:!0,get:function(){return E.APIErrorCode}});Object.defineProperty(u,"ClientErrorCode",{enumerable:!0,get:function(){return E.ClientErrorCode}});Object.defineProperty(u,"APIResponseError",{enumerable:!0,get:function(){return E.APIResponseError}});Object.defineProperty(u,"UnknownHTTPResponseError",{enumerable:!0,get:function(){return E.UnknownHTTPResponseError}});Object.defineProperty(u,"RequestTimeoutError",{enumerable:!0,get:function(){return E.RequestTimeoutError}});Object.defineProperty(u,"InvalidPathParameterError",{enumerable:!0,get:function(){return E.InvalidPathParameterError}});Object.defineProperty(u,"isNotionClientError",{enumerable:!0,get:function(){return E.isNotionClientError}});var g=Ce();Object.defineProperty(u,"collectPaginatedAPI",{enumerable:!0,get:function(){return g.collectPaginatedAPI}});Object.defineProperty(u,"iteratePaginatedAPI",{enumerable:!0,get:function(){return g.iteratePaginatedAPI}});Object.defineProperty(u,"collectDataSourceTemplates",{enumerable:!0,get:function(){return g.collectDataSourceTemplates}});Object.defineProperty(u,"iterateDataSourceTemplates",{enumerable:!0,get:function(){return g.iterateDataSourceTemplates}});Object.defineProperty(u,"isFullBlock",{enumerable:!0,get:function(){return g.isFullBlock}});Object.defineProperty(u,"isFullDataSource",{enumerable:!0,get:function(){return g.isFullDataSource}});Object.defineProperty(u,"isFullDatabase",{enumerable:!0,get:function(){return g.isFullDatabase}});Object.defineProperty(u,"isFullPage",{enumerable:!0,get:function(){return g.isFullPage}});Object.defineProperty(u,"isFullUser",{enumerable:!0,get:function(){return g.isFullUser}});Object.defineProperty(u,"isFullComment",{enumerable:!0,get:function(){return g.isFullComment}});Object.defineProperty(u,"isFullPageOrDataSource",{enumerable:!0,get:function(){return g.isFullPageOrDataSource}});Object.defineProperty(u,"extractNotionId",{enumerable:!0,get:function(){return g.extractNotionId}});Object.defineProperty(u,"extractDatabaseId",{enumerable:!0,get:function(){return g.extractDatabaseId}});Object.defineProperty(u,"extractPageId",{enumerable:!0,get:function(){return g.extractPageId}});Object.defineProperty(u,"extractBlockId",{enumerable:!0,get:function(){return g.extractBlockId}})});var $t={};Ne($t,{default:()=>gt});module.exports=Me($t);var k=ye(require("react")),l=require("@raycast/api");var le=require("react/jsx-runtime");var z={asana:"1191201745684312",github:"7235fe8d42157f1f38c0",linear:"c8ff37b9225c3c9aefd7d66ea0e5b6f1",slack:"851756884692.5546927290212"},W=class r{constructor(e){this.clientId=e.clientId,this.scope=Array.isArray(e.scope)?e.scope.join(" "):e.scope,this.personalAccessToken=e.personalAccessToken,this.bodyEncoding=e.bodyEncoding,this.client=e.client,this.extraParameters=e.extraParameters,this.authorizeUrl=e.authorizeUrl,this.tokenUrl=e.tokenUrl,this.refreshTokenUrl=e.refreshTokenUrl,this.onAuthorize=e.onAuthorize,this.tokenResponseParser=e.tokenResponseParser??(n=>n),this.tokenRefreshResponseParser=e.tokenRefreshResponseParser??(n=>n),this.authorize=this.authorize.bind(this)}static asana(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Asana",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="251" height="232" fill="none"><path fill="#F06A6A" d="M179.383 54.373c0 30.017-24.337 54.374-54.354 54.374-30.035 0-54.373-24.338-54.373-54.374C70.656 24.338 94.993 0 125.029 0c30.017 0 54.354 24.338 54.354 54.373ZM54.393 122.33C24.376 122.33.02 146.668.02 176.685c0 30.017 24.337 54.373 54.373 54.373 30.035 0 54.373-24.338 54.373-54.373 0-30.017-24.338-54.355-54.373-54.355Zm141.253 0c-30.035 0-54.373 24.338-54.373 54.374 0 30.035 24.338 54.373 54.373 54.373 30.017 0 54.374-24.338 54.374-54.373 0-30.036-24.338-54.374-54.374-54.374Z"/></svg>')}`,providerId:"asana",description:"Connect your Asana account"}),clientId:e.clientId??z.asana,authorizeUrl:e.authorizeUrl??"https://asana.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://asana.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://asana.oauth.raycast.com/refresh-token",scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static github(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"GitHub",providerIcon:{source:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>')}`,tintColor:l.Color.PrimaryText},providerId:"github",description:"Connect your GitHub account"}),clientId:e.clientId??z.github,authorizeUrl:e.authorizeUrl??"https://github.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://github.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://github.oauth.raycast.com/refresh-token",scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static google(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.AppURI,providerName:"Google",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" style="display:block" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')}`,providerId:"google",description:"Connect your Google account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:e.tokenUrl??"https://oauth2.googleapis.com/token",refreshTokenUrl:e.tokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,bodyEncoding:e.bodyEncoding??"url-encoded",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static jira(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Jira",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2361" height="2500" viewBox="2.59 0 214.091 224"><linearGradient id="a" x1="102.4" x2="56.15" y1="218.63" y2="172.39" gradientTransform="matrix(1 0 0 -1 0 264)" gradientUnits="userSpaceOnUse"><stop offset=".18" stop-color="#0052cc"/><stop offset="1" stop-color="#2684ff"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="114.65" x2="160.81" y1="85.77" y2="131.92"/><path fill="#2684ff" d="M214.06 105.73 117.67 9.34 108.33 0 35.77 72.56 2.59 105.73a8.89 8.89 0 0 0 0 12.54l66.29 66.29L108.33 224l72.55-72.56 1.13-1.12 32.05-32a8.87 8.87 0 0 0 0-12.59zm-105.73 39.39L75.21 112l33.12-33.12L141.44 112z"/><path fill="url(#a)" d="M108.33 78.88a55.75 55.75 0 0 1-.24-78.61L35.62 72.71l39.44 39.44z"/><path fill="url(#b)" d="m141.53 111.91-33.2 33.21a55.77 55.77 0 0 1 0 78.86L181 151.35z"/></svg>')}`,providerId:"jira",description:"Connect your Jira account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://auth.atlassian.com/authorize",tokenUrl:e.tokenUrl??"https://auth.atlassian.com/oauth/token",refreshTokenUrl:e.refreshTokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static linear(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Linear",providerIcon:{source:{light:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#222326" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/></svg>')}`,dark:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z" /></svg>')}`}},providerId:"linear",description:"Connect your Linear account"}),clientId:e.clientId??z.linear,authorizeUrl:e.authorizeUrl??"https://linear.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://linear.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://linear.oauth.raycast.com/refresh-token",scope:e.scope,extraParameters:{actor:"user"},onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static slack(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Slack",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="73 73 124 124"><style>.st0{fill:#e01e5a}.st1{fill:#36c5f0}.st2{fill:#2eb67d}.st3{fill:#ecb22e}</style><path d="M99.4 151.2c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zM105.9 151.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9v-32.3z" class="st0"/><path d="M118.8 99.4c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v12.9h-12.9zM118.8 105.9c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H86.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3z" class="st1"/><path d="M170.6 118.8c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9h-12.9v-12.9zM164.1 118.8c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V86.5c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3z" class="st2"/><path d="M151.2 170.6c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9v-12.9h12.9zM151.2 164.1c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9h-32.3z" class="st3"/></svg>')}`,providerId:"slack",description:"Connect your Slack account"}),clientId:e.clientId??z.slack,authorizeUrl:e.authorizeUrl??"https://slack.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://slack.oauth.raycast.com/token",refreshTokenUrl:e.tokenUrl??"https://slack.oauth.raycast.com/refresh-token",scope:"",extraParameters:{user_scope:e.scope},personalAccessToken:e.personalAccessToken,bodyEncoding:e.tokenUrl?e.bodyEncoding??"url-encoded":"json",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser??(n=>({access_token:n.authed_user.access_token,scope:n.authed_user.scope}))})}static zoom(e){return new r({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Zoom",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.845 80"><path d="M73.786 78.835H10.88A10.842 10.842 0 0 1 .833 72.122a10.841 10.841 0 0 1 2.357-11.85L46.764 16.7h-31.23C6.954 16.699 0 9.744 0 1.165h58.014c4.414 0 8.357 2.634 10.046 6.712a10.843 10.843 0 0 1-2.356 11.85L22.13 63.302h36.122c8.58 0 15.534 6.955 15.534 15.534Zm278.059-48.544C351.845 13.588 338.256 0 321.553 0c-8.934 0-16.975 3.89-22.524 10.063C293.48 3.89 285.44 0 276.505 0c-16.703 0-30.291 13.588-30.291 30.291v48.544c8.579 0 15.534-6.955 15.534-15.534v-33.01c0-8.137 6.62-14.757 14.757-14.757s14.757 6.62 14.757 14.757v33.01c0 8.58 6.955 15.534 15.534 15.534V30.291c0-8.137 6.62-14.757 14.757-14.757s14.758 6.62 14.758 14.757v33.01c0 8.58 6.954 15.534 15.534 15.534V30.291ZM238.447 40c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.908-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S173.98 26.488 173.98 40s10.953 24.466 24.466 24.466S222.913 53.512 222.913 40Zm-70.68 0c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S87.767 26.488 87.767 40s10.954 24.466 24.466 24.466S136.699 53.512 136.699 40Z" style="fill:#0b5cff"/></svg>')}`,providerId:"zoom",description:"Connect your Zoom account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://zoom.us/oauth/authorize",tokenUrl:e.tokenUrl??"https://zoom.us/oauth/token",refreshTokenUrl:e.refreshTokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,bodyEncoding:e.bodyEncoding??"url-encoded",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}async authorize(){let e=await this.client.getTokens();if(e?.accessToken){if(e.refreshToken&&e.isExpired()){let d=await this.refreshTokens({token:e.refreshToken});if(d)return await this.client.setTokens(d),d.access_token}return e.accessToken}let n=await this.client.authorizationRequest({endpoint:this.authorizeUrl,clientId:this.clientId,scope:this.scope,extraParameters:this.extraParameters}),{authorizationCode:o}=await this.client.authorize(n),c=await this.fetchTokens({authRequest:n,authorizationCode:o});return await this.client.setTokens(c),c.access_token}async fetchTokens({authRequest:e,authorizationCode:n}){let o;if(this.bodyEncoding==="url-encoded"){let f=new URLSearchParams;f.append("client_id",this.clientId),f.append("code",n),f.append("code_verifier",e.codeVerifier),f.append("grant_type","authorization_code"),f.append("redirect_uri",e.redirectURI),o={body:f}}else o={body:JSON.stringify({client_id:this.clientId,code:n,code_verifier:e.codeVerifier,grant_type:"authorization_code",redirect_uri:e.redirectURI}),headers:{"Content-Type":"application/json"}};let c=await fetch(this.tokenUrl,{method:"POST",...o});if(!c.ok){let f=await c.text();throw console.error("fetch tokens error:",f),new Error(`Error while fetching tokens: ${c.status} (${c.statusText})
${f}`)}let d=this.tokenResponseParser(await c.json());return Array.isArray(d.scope)?{...d,scope:d.scope.join(" ")}:d}async refreshTokens({token:e}){let n;if(this.bodyEncoding==="url-encoded"){let c=new URLSearchParams;c.append("client_id",this.clientId),c.append("refresh_token",e),c.append("grant_type","refresh_token"),n={body:c}}else n={body:JSON.stringify({client_id:this.clientId,refresh_token:e,grant_type:"refresh_token"}),headers:{"Content-Type":"application/json"}};let o=await fetch(this.refreshTokenUrl??this.tokenUrl,{method:"POST",...n});if(o.ok){let c=this.tokenRefreshResponseParser(await o.json());return c.refresh_token=c.refresh_token??e,c}else{let c=await o.text();console.error("refresh tokens error:",c),this.client.description=`${this.client.providerName} needs you to sign-in again. Press \u23CE or click the button below to continue.`,await this.client.removeTokens(),await this.authorize()}}},U=null,A=null,oe=null,ce=null,ue=null;function ge(r){return l.environment.commandMode==="no-view"?e=>async o=>{if(!U){U=r.personalAccessToken??await r.authorize(),A=r.personalAccessToken?"personal":"oauth";let c=(await r.client?.getTokens())?.idToken;r.onAuthorize&&await Promise.resolve(r.onAuthorize({token:U,type:A,idToken:c}))}return e(o)}:e=>{let n=o=>{r.personalAccessToken?(U=r.personalAccessToken,A="personal"):(oe||(oe=r.authorize()),U=k.default.use(oe),A="oauth");let c;return r.client&&(ce||(ce=r.client?.getTokens().then(d=>d?.idToken)),c=k.default.use(ce)),r.onAuthorize&&(ue||(ue=Promise.resolve(r.onAuthorize({token:U,type:A,idToken:c}))),k.default.use(ue)),(0,le.jsx)(e,{...o})};return n.displayName=`withAccessToken(${e.displayName||e.name})`,n}}var Ie=ye(Te()),L=require("@raycast/api");var bt=new L.OAuth.PKCEClient({redirectMethod:L.OAuth.RedirectMethod.Web,providerName:"Notion",providerIcon:"notion-logo.png",providerId:"notion",description:"Connect your Notion account"}),{notion_token:yt}=(0,L.getPreferenceValues)(),me=null,Ae=new W({client:bt,clientId:"c843219a-d93c-403c-8e4d-e8aa9a987494",scope:"",authorizeUrl:"https://notion.oauth.raycast.com/authorize",tokenUrl:"https://notion.oauth.raycast.com/token",personalAccessToken:yt,extraParameters:{owner:"user"},onAuthorize({token:r}){me=new Ie.Client({auth:r})}});function qe(){if(!me)throw new Error("No Notion client initialized");return me}var gt=ge(Ae)(async({pageId:r})=>{try{let e=qe(),{results:n}=await e.blocks.children.list({block_id:r,page_size:100});return n.length===0?{status:"empty",content:"Page is empty"}:{status:"success",content:JSON.stringify(n)}}catch(e){return{status:"error",content:JSON.stringify(e)}}});
