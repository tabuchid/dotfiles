{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["import { Clipboard, open, showToast, Toast, getPreferenceValues, showHUD, LaunchProps } from \"@raycast/api\";\n\nexport default async function main(props: LaunchProps<{ arguments: Arguments.Index }>) {\n  const preferences = getPreferenceValues<Preferences>();\n  const ttl = parseInt(props.arguments.ttl || preferences.ttl) || null;\n  const title = props.arguments.title || \"Untitled\";\n\n  const toast = await showToast(Toast.Style.Animated, \"Reading from Clipboard\");\n  try {\n    const text = await Clipboard.readText();\n    if (!text) throw new Error(\"No text found in Clipboard\");\n    const json = JSON.parse(text);\n\n    toast.title = \"Uploading JSON\";\n    const document = await createNewDocument(title, json, ttl);\n\n    await toast.hide();\n    await showHUD(\"\u2705 Uploaded\");\n    await open(document.location);\n  } catch (error) {\n    const message = error instanceof Error ? error.message : \"Unknown error\";\n    toast.style = Toast.Style.Failure;\n    toast.title = \"Something went wrong\";\n    toast.message = message;\n  }\n}\n\nconst getEndpoint = () => {\n  const preferences = getPreferenceValues<Preferences>();\n  const domain = preferences.domain || \"https://jsonhero.io\";\n\n  const endpoint = new URL(domain);\n  endpoint.pathname = \"/api/create.json\";\n  endpoint.searchParams.append(\"utm_source\", \"raycast\");\n\n  return endpoint.toString();\n};\n\nasync function createNewDocument(\n  title: string,\n  json: unknown,\n  ttl: number | null,\n): Promise<{ id: string; location: string }> {\n  const options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      title,\n      content: json,\n      ttl,\n    }),\n  };\n\n  const endpoint = getEndpoint();\n\n  const response = await fetch(endpoint, options);\n  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n\n  const jsonResponse = (await response.json()) as { id: string; location: string };\n  if (!jsonResponse.id || !jsonResponse.location) throw new Error(\"Invalid response format\");\n\n  return jsonResponse;\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA6F,wBAE7F,eAAOF,EAA4BG,EAAoD,CACrF,IAAMC,KAAc,uBAAiC,EAC/CC,EAAM,SAASF,EAAM,UAAU,KAAOC,EAAY,GAAG,GAAK,KAC1DE,EAAQH,EAAM,UAAU,OAAS,WAEjCI,EAAQ,QAAM,aAAU,QAAM,MAAM,SAAU,wBAAwB,EAC5E,GAAI,CACF,IAAMC,EAAO,MAAM,YAAU,SAAS,EACtC,GAAI,CAACA,EAAM,MAAM,IAAI,MAAM,4BAA4B,EACvD,IAAMC,EAAO,KAAK,MAAMD,CAAI,EAE5BD,EAAM,MAAQ,iBACd,IAAMG,EAAW,MAAMC,EAAkBL,EAAOG,EAAMJ,CAAG,EAEzD,MAAME,EAAM,KAAK,EACjB,QAAM,WAAQ,iBAAY,EAC1B,QAAM,QAAKG,EAAS,QAAQ,CAC9B,OAASE,EAAO,CACd,IAAMC,EAAUD,aAAiB,MAAQA,EAAM,QAAU,gBACzDL,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,uBACdA,EAAM,QAAUM,CAClB,CACF,CAEA,IAAMC,EAAc,IAAM,CAExB,IAAMC,KADc,uBAAiC,EAC1B,QAAU,sBAE/BC,EAAW,IAAI,IAAID,CAAM,EAC/B,OAAAC,EAAS,SAAW,mBACpBA,EAAS,aAAa,OAAO,aAAc,SAAS,EAE7CA,EAAS,SAAS,CAC3B,EAEA,eAAeL,EACbL,EACAG,EACAJ,EAC2C,CAC3C,IAAMY,EAAU,CACd,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,CACnB,MAAAX,EACA,QAASG,EACT,IAAAJ,CACF,CAAC,CACH,EAEMW,EAAWF,EAAY,EAEvBI,EAAW,MAAM,MAAMF,EAAUC,CAAO,EAC9C,GAAI,CAACC,EAAS,GAAI,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1E,IAAMC,EAAgB,MAAMD,EAAS,KAAK,EAC1C,GAAI,CAACC,EAAa,IAAM,CAACA,EAAa,SAAU,MAAM,IAAI,MAAM,yBAAyB,EAEzF,OAAOA,CACT",
  "names": ["index_exports", "__export", "main", "__toCommonJS", "import_api", "props", "preferences", "ttl", "title", "toast", "text", "json", "document", "createNewDocument", "error", "message", "getEndpoint", "domain", "endpoint", "options", "response", "jsonResponse"]
}
