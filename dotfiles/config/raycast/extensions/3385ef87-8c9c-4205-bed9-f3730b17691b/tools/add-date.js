"use strict";var i=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})},b=(e,t,r,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let m of x(t))!y.call(e,m)&&m!==r&&i(e,m,{get:()=>t[m],enumerable:!(c=w(t,m))||c.enumerable});return e};var C=e=>b(i({},"__esModule",{value:!0}),e);var P={};A(P,{default:()=>g});module.exports=C(P);var l=require("@raycast/api");var s=require("node:crypto");var f="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var L=128,n,a;function O(e){!n||n.length<e?(n=Buffer.allocUnsafe(e*L),s.webcrypto.getRandomValues(n),a=0):a+e>n.length&&(s.webcrypto.getRandomValues(n),a=0),a+=e}function p(e=21){O(e|=0);let t="";for(let r=a-e;r<a;r++)t+=f[n[r]&63];return t}var u=require("@raycast/api");async function d(){let{items:e}=await u.LocalStorage.allItems();return e?JSON.parse(e):[]}async function h(e){await u.LocalStorage.setItem("items",JSON.stringify(e))}var o=require("@raycast/api");async function I(){try{await(0,o.launchCommand)({name:"menu-bar",type:o.LaunchType.Background})}catch(e){console.error("An error occurred while updating the menu bar",e)}try{await(0,o.launchCommand)({name:"up-next",type:o.LaunchType.Background})}catch(e){console.error("An error occurred while updating the up-next command",e)}}async function g(e){let t=await d(),r={id:p(),name:e.name,subtitle:e.subtitle||"",date:e.date,icon:l.Icon.Calendar,color:l.Color.Blue};return t.push(r),await h(t),await I(),{success:!0,message:`Added "${e.name}" on ${e.date}${e.subtitle?` (${e.subtitle})`:""}`}}
