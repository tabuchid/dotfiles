"use strict";var m=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var j=(e,t)=>{for(var o in t)m(e,o,{get:t[o],enumerable:!0})},b=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of g(t))!w.call(e,r)&&r!==o&&m(e,r,{get:()=>t[r],enumerable:!(s=v(t,r))||s.enumerable});return e};var E=e=>b(m({},"__esModule",{value:!0}),e);var $={};j($,{default:()=>f});module.exports=E($);var c=require("react"),n=require("@raycast/api");var a=require("@raycast/api"),F=(0,a.getPreferenceValues)().accessToken,d={Authorization:"Bearer "+F},V=Object.entries(d),p="https://api.vercel.com/";async function h(){try{return(await(await fetch(p+"www/user",{method:"get",headers:d})).json()).user}catch(e){throw console.error(e),(0,a.showToast)({style:a.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function u(e){let t=await fetch(p+`v1/registrar/domains/${e}/availability`,{method:"get",headers:d});return t.ok?{available:(await t.json()).available}:{available:!1,error:(await t.json()).message||"Check domain availability failed. Please verify that the domain is valid or try again later."}}var P=async()=>{if(!await h())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},y=P;var l=require("react/jsx-runtime");function f({arguments:{domain:e}}){let[t,o]=(0,c.useState)(!0),[s,r]=(0,c.useState)(null);return(0,c.useEffect)(()=>{(async()=>{try{y();let i=await u(e);i.error&&console.error("Error checking domain availability:",i.error),r(i.available)}catch(i){console.error("Error checking domain availability:",i),r(!1)}finally{o(!1)}})()},[e]),(0,l.jsx)(n.List,{isLoading:t,children:s?(0,l.jsx)(n.List.EmptyView,{icon:{source:n.Icon.CheckCircle,tintColor:n.Color.Green},title:"Available",description:`${e} is available.`}):(0,l.jsx)(n.List.EmptyView,{icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},title:"Not Available",description:`${e} is not available.`})})}
