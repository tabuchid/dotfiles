"use strict";var Gr=Object.create;var ze=Object.defineProperty;var Hr=Object.getOwnPropertyDescriptor;var Kr=Object.getOwnPropertyNames;var Jr=Object.getPrototypeOf,qr=Object.prototype.hasOwnProperty;var bt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Bt=(e,r)=>{for(var t in r)ze(e,t,{get:r[t],enumerable:!0})},Gt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Kr(r))!qr.call(e,a)&&a!==t&&ze(e,a,{get:()=>r[a],enumerable:!(n=Hr(r,a))||n.enumerable});return e};var ge=(e,r,t)=>(t=e!=null?Gr(Jr(e)):{},Gt(r||!e||!e.__esModule?ze(t,"default",{value:e,enumerable:!0}):t,e)),Zr=e=>Gt(ze({},"__esModule",{value:!0}),e);var rr=bt(tr=>{"use strict";var Re=require("react");function nn(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var an=typeof Object.is=="function"?Object.is:nn,sn=Re.useState,on=Re.useEffect,cn=Re.useLayoutEffect,ln=Re.useDebugValue;function un(e,r){var t=r(),n=sn({inst:{value:t,getSnapshot:r}}),a=n[0].inst,o=n[1];return cn(function(){a.value=t,a.getSnapshot=r,yt(a)&&o({inst:a})},[e,t,r]),on(function(){return yt(a)&&o({inst:a}),e(function(){yt(a)&&o({inst:a})})},[e]),ln(t),t}function yt(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!an(e,t)}catch{return!0}}function fn(e,r){return r()}var dn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fn:un;tr.useSyncExternalStore=Re.useSyncExternalStore!==void 0?Re.useSyncExternalStore:dn});var ar=bt(nr=>{"use strict";process.env.NODE_ENV!=="production"&&(function(){function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}function r(d,h){i||a.startTransition===void 0||(i=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var p=h();if(!f){var k=h();o(p,k)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}k=s({inst:{value:p,getSnapshot:h}});var u=k[0].inst,V=k[1];return c(function(){u.value=p,u.getSnapshot=h,t(u)&&V({inst:u})},[d,p,h]),l(function(){return t(u)&&V({inst:u}),d(function(){t(u)&&V({inst:u})})},[d]),g(p),p}function t(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!o(d,p)}catch{return!0}}function n(d,h){return h()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var a=require("react"),o=typeof Object.is=="function"?Object.is:e,s=a.useState,l=a.useEffect,c=a.useLayoutEffect,g=a.useDebugValue,i=!1,f=!1,b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:r;nr.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()});var sr=bt((pa,$t)=>{"use strict";process.env.NODE_ENV==="production"?$t.exports=rr():$t.exports=ar()});var ca={};Bt(ca,{default:()=>ia});module.exports=Zr(ca);var D=require("@raycast/api");var Yr=e=>{let r=new Intl.PluralRules("en-US",{type:"ordinal"}).select(e),t={one:"st",two:"nd",few:"rd",other:"th"}[r];return`${e}${t}`},Xr=(e,r,t=void 0)=>{let n=()=>{throw new Error("getTimeSince requires 1-2 arguments, of type date or date-string")};(typeof e>"u"||isNaN(Number(e))||typeof r<"u"&&isNaN(Number(r)))&&n();let a=r===void 0||Math.abs(Number(r)-Number(new Date))<50,o=Number(new Date(e)),s=Number(r===void 0?new Date:new Date(r??null));(isNaN(o)||isNaN(s))&&n();let l=new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",style:"long",numeric:"auto"}),c=o-s;if(t&&!isNaN(t)&&Math.abs(c)>=Number(t)){let[g,i,f,b]=new Date(o).toLocaleString("en-us",{weekday:"short",month:"short",day:"numeric",year:"numeric"}).replace(/,/g,"").split(" ");return`${g} ${i} ${Yr(Number(f))}, ${b}`}if(Math.abs(c)<1e3)return a?"now":"simultaneously";for(let[g,i]of[["year",31536e6],["month",26784e5],["week",6048e5],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]])if(Math.abs(c)>=i){let{sign:f,floor:b,ceil:d}=Math,h=l.format((f(c)===1?b:d)(c/i),g);return a||(h=Math.sign(c)===1?h.replace("in ","")+" later":h.replace("ago","prior")),h}return"just now"},xe=Xr;var ot=require("@raycast/api"),Ot=require("@raycast/api");var kr=require("react"),st=require("@raycast/api");var K=require("@raycast/api"),Qr=(0,K.getPreferenceValues)().accessToken,be={Authorization:"Bearer "+Qr},Te=Object.entries(be),he="https://api.vercel.com/";async function Be(){try{return(await(await fetch(he+"www/user",{method:"get",headers:be})).json()).user}catch(e){throw console.error(e),(0,K.showToast)({style:K.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function Ht(){let r=await(await fetch(he+"v1/teams",{method:"get",headers:be})).json(),t=[];for(let n of r.teams)t.push(n);return t}async function Kt(e,r){try{return(await(await fetch(he+`v8/projects/${e}/env/${r}`,{method:"delete",headers:be})).json()).environment}catch(t){throw console.error(t),(0,K.showToast)({style:K.Toast.Style.Failure,title:"Failed to delete environment variable"}),new Error("Failed to delete environment variable")}}function Jt(e,r,t=100){let n=he+"v6/deployments",a=`?limit=${t}&teamId=${e??""}`;return r&&(a+=`&projectId=${r}`),n+a}function qt(e,r,t=100){return he+`v11/deployments/${e}/builds?limit=${t}&teamId=${r??""}`}async function Zt(e,r){return[...await en(e,r)].sort((n,a)=>a.updatedAt-n.updatedAt)}function Yt(e,r=100){return he+`v8/projects?teamId=${e??""}&limit=${r}`}async function en(e,r){try{return(await(await fetch(he+`v8/projects/${e}/env?teamId=${r??""}`,{method:"get",headers:be})).json()).envs}catch(t){throw console.error(t),(0,K.showToast)({style:K.Toast.Style.Failure,title:"Failed to fetch environment variable"}),new Error("Failed to fetch environment variable")}}async function Xt(e,r,t){return await tn(e,r,t)}async function Qt(e,r,t){r.type="encrypted";try{return await(await fetch(he+`v9/projects/${e}/env?teamId=${t||""}`,{method:"post",headers:be,body:JSON.stringify(r)})).json()}catch(n){throw console.error(n),(0,K.showToast)({style:K.Toast.Style.Failure,title:"Failed to create environment variable"}),new Error("Failed to create environment variable")}}async function tn(e,r,t){try{return await(await fetch(he+`v8/projects/${e}/env/${r}`,{method:"patch",headers:be,body:JSON.stringify(t)})).json()}catch(n){throw console.error(n),(0,K.showToast)({style:K.Toast.Style.Failure,title:"Failed to fetch environment variable"}),new Error("Failed to fetch environment variable")}}function rn(e){let r="";return[].slice.call(new Uint8Array(e)).forEach(n=>r+=String.fromCharCode(n)),btoa(r)}async function er(e,r){try{let t=K.environment.appearance==="light"?"0":"1",n=await fetch(`https://vercel.com/api/screenshot?dark=${t}&deploymentId=${e}&withStatus=false&teamId=${r??""}`,{method:"get",headers:be});if(n.status!==200)return null;let a=await n.arrayBuffer();return"data:image/png;base64,"+rn(a)}catch(t){return console.error(t),null}}function Ge(e,r,t){return t.startsWith("dpl_")&&(t=t.substring(4)),`https://vercel.com/${e}/${r}/${t}`}var j=ge(require("react"),1),vr=ge(sr(),1);var B=ge(require("react"),1);var ye={};Bt(ye,{ERROR_REVALIDATE_EVENT:()=>hn,FOCUS_EVENT:()=>or,MUTATE_EVENT:()=>cr,RECONNECT_EVENT:()=>ir});var or=0,ir=1,cr=2,hn=3;var lr=Object.prototype.hasOwnProperty;function Ae(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&Ae(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(lr.call(e,t)&&++n&&!lr.call(r,t)||!(t in r)||!Ae(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var se=new WeakMap,me=()=>{},M=me(),Ce=Object,E=e=>e===M,ee=e=>typeof e=="function",oe=(e,r)=>({...e,...r}),Ye=e=>ee(e.then),wt={},He={},Rt="undefined",Pe=typeof window!=Rt,Je=typeof document!=Rt,fr=Pe&&"Deno"in window,dr=()=>Pe&&typeof window.requestAnimationFrame!=Rt,Xe=(e,r)=>{let t=se.get(e);return[()=>!E(r)&&e.get(r)||wt,n=>{if(!E(r)){let a=e.get(r);r in He||(He[r]=a),t[5](r,oe(a,n),a||wt)}},t[6],()=>!E(r)&&r in He?He[r]:!E(r)&&e.get(r)||wt]},kt=!0,mn=()=>kt,[St,xt]=Pe&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[me,me],pn=()=>{let e=Je&&document.visibilityState;return E(e)||e!=="hidden"},gn=e=>(Je&&document.addEventListener("visibilitychange",e),St("focus",e),()=>{Je&&document.removeEventListener("visibilitychange",e),xt("focus",e)}),bn=e=>{let r=()=>{kt=!0,e()},t=()=>{kt=!1};return St("online",r),St("offline",t),()=>{xt("online",r),xt("offline",t)}},hr={isOnline:mn,isVisible:pn},mr={initFocus:gn,initReconnect:bn},Qe=!B.default.useId,we=!Pe||fr,At=e=>dr()?window.requestAnimationFrame(e):setTimeout(e,1),_e=we?B.useEffect:B.useLayoutEffect,vt=typeof navigator<"u"&&navigator.connection,Tt=!we&&vt&&(["slow-2g","2g"].includes(vt.effectiveType)||vt.saveData),Ke=new WeakMap,yn=e=>Ce.prototype.toString.call(e),Et=(e,r)=>e===`[object ${r}]`,$n=0,qe=e=>{let r=typeof e,t=yn(e),n=Et(t,"Date"),a=Et(t,"RegExp"),o=Et(t,"Object"),s,l;if(Ce(e)===e&&!n&&!a){if(s=Ke.get(e),s)return s;if(s=++$n+"~",Ke.set(e,s),Array.isArray(e)){for(s="@",l=0;l<e.length;l++)s+=qe(e[l])+",";Ke.set(e,s)}if(o){s="#";let c=Ce.keys(e).sort();for(;!E(l=c.pop());)E(e[l])||(s+=l+":"+qe(e[l])+",");Ke.set(e,s)}}else s=n?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return s},Ne=e=>{if(ee(e))try{e=e()}catch{e=""}let r=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?qe(e):"",[e,r]},wn=0,Ve=()=>++wn;async function et(...e){let[r,t,n,a]=e,o=oe({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{}),s=o.populateCache,l=o.rollbackOnError,c=o.optimisticData,g=b=>typeof l=="function"?l(b):l!==!1,i=o.throwOnError;if(ee(t)){let b=t,d=[],h=r.keys();for(let p of h)!/^\$(inf|sub)\$/.test(p)&&b(r.get(p)._k)&&d.push(p);return Promise.all(d.map(f))}return f(t);async function f(b){let[d]=Ne(b);if(!d)return;let[h,p]=Xe(r,d),[k,u,V,P]=se.get(r),y=()=>{let U=k[d];return(ee(o.revalidate)?o.revalidate(h().data,b):o.revalidate!==!1)&&(delete V[d],delete P[d],U&&U[0])?U[0](2).then(()=>h().data):h().data};if(e.length<3)return y();let m=n,T,O=!1,S=Ve();u[d]=[S,0];let J=!E(c),I=h(),q=I.data,F=I._c,Y=E(F)?q:F;if(J&&(c=ee(c)?c(Y,q):c,p({data:c,_c:Y})),ee(m))try{m=m(Y)}catch(U){T=U,O=!0}if(m&&Ye(m))if(m=await m.catch(U=>{T=U,O=!0}),S!==u[d][0]){if(O)throw T;return m}else O&&J&&g(T)&&(s=!0,p({data:Y,_c:M}));if(s&&!O)if(ee(s)){let U=s(m,Y);p({data:U,error:M,_c:M})}else p({data:m,error:M,_c:M});if(u[d][1]=Ve(),Promise.resolve(y()).then(()=>{p({_c:M})}),O){if(i)throw T;return}return m}}var ur=(e,r)=>{for(let t in e)e[t][0]&&e[t][0](r)},Ct=(e,r)=>{if(!se.has(e)){let t=oe(mr,r),n=Object.create(null),a=et.bind(M,e),o=me,s=Object.create(null),l=(i,f)=>{let b=s[i]||[];return s[i]=b,b.push(f),()=>b.splice(b.indexOf(f),1)},c=(i,f,b)=>{e.set(i,f);let d=s[i];if(d)for(let h of d)h(f,b)},g=()=>{if(!se.has(e)&&(se.set(e,[n,Object.create(null),Object.create(null),Object.create(null),a,c,l]),!we)){let i=t.initFocus(setTimeout.bind(M,ur.bind(M,n,0))),f=t.initReconnect(setTimeout.bind(M,ur.bind(M,n,1)));o=()=>{i&&i(),f&&f(),se.delete(e)}}};return g(),[e,a,g,o]}return[e,se.get(e)[4]]},vn=(e,r,t,n,a)=>{let o=t.errorRetryCount,s=a.retryCount,l=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!E(o)&&s>o||setTimeout(n,l,a)},pr=Ae,[tt,gr]=Ct(new Map),rt=oe({onLoadingSlow:me,onSuccess:me,onError:me,onErrorRetry:vn,onDiscarded:me,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Tt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Tt?5e3:3e3,compare:pr,isPaused:()=>!1,cache:tt,mutate:gr,fallback:{}},hr),Pt=(e,r)=>{let t=oe(e,r);if(r){let{use:n,fallback:a}=e,{use:o,fallback:s}=r;n&&o&&(t.use=n.concat(o)),a&&s&&(t.fallback=oe(a,s))}return t},Ze=(0,B.createContext)({}),_t=e=>{let{value:r}=e,t=(0,B.useContext)(Ze),n=ee(r),a=(0,B.useMemo)(()=>n?r(t):r,[n,t,r]),o=(0,B.useMemo)(()=>n?a:Pt(t,a),[n,t,a]),s=a&&a.provider,l=(0,B.useRef)(M);s&&!l.current&&(l.current=Ct(s(o.cache||tt),a));let c=l.current;return c&&(o.cache=c[0],o.mutate=c[1]),_e(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,B.createElement)(Ze.Provider,oe(e,{value:o}))};var br="$inf$";var nt=ge(require("react"),1);var yr=Pe&&window.__SWR_DEVTOOLS_USE__,En=yr?window.__SWR_DEVTOOLS_USE__:[],kn=()=>{yr&&(window.__SWR_DEVTOOLS_REACT__=nt.default)},Sn=e=>ee(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],xn=()=>oe(rt,(0,nt.useContext)(Ze));var Tn=e=>(r,t,n)=>e(r,t&&((...o)=>{let[s]=Ne(r),[,,,l]=se.get(tt);if(s.startsWith(br))return t(...o);let c=l[s];return E(c)?t(...o):(delete l[s],c)}),n),Rn=En.concat(Tn),$r=e=>function(...t){let n=xn(),[a,o,s]=Sn(t),l=Pt(n,s),c=e,{use:g}=l,i=(g||[]).concat(Rn);for(let f=i.length;f--;)c=i[f](c);return c(a,o||l.fetcher||null,l)},wr=(e,r,t)=>{let n=r[e]||(r[e]=[]);return n.push(t),()=>{let a=n.indexOf(t);a>=0&&(n[a]=n[n.length-1],n.pop())}};kn();var An=()=>{},Ta=An();var Dt=j.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}}),It={dedupe:!0},Cn=(e,r,t)=>{let{cache:n,compare:a,suspense:o,fallbackData:s,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:g,refreshWhenHidden:i,refreshWhenOffline:f,keepPreviousData:b}=t,[d,h,p,k]=se.get(n),[u,V]=Ne(e),P=(0,j.useRef)(!1),y=(0,j.useRef)(!1),m=(0,j.useRef)(u),T=(0,j.useRef)(r),O=(0,j.useRef)(t),S=()=>O.current,J=()=>S().isVisible()&&S().isOnline(),[I,q,F,Y]=Xe(n,u),U=(0,j.useRef)({}).current,v=E(s)?E(t.fallback)?M:t.fallback[u]:s,le=(_,A)=>{for(let H in U){let L=H;if(L==="data"){if(!a(_[L],A[L])&&(!E(_[L])||!a(We,A[L])))return!1}else if(A[L]!==_[L])return!1}return!0},Me=(0,j.useMemo)(()=>{let _=!u||!r?!1:E(l)?S().isPaused()||o?!1:c!==!1:l,A=Z=>{let fe=oe(Z);return delete fe._k,_?{isValidating:!0,isLoading:!0,...fe}:fe},H=I(),L=Y(),ae=A(H),Se=H===L?ae:A(L),z=ae;return[()=>{let Z=A(I());return le(Z,z)?(z.data=Z.data,z.isLoading=Z.isLoading,z.isValidating=Z.isValidating,z.error=Z.error,z):(z=Z,Z)},()=>Se]},[n,u]),pe=(0,vr.useSyncExternalStore)((0,j.useCallback)(_=>F(u,(A,H)=>{le(H,A)||_()}),[n,u]),Me[0],Me[1]),Vt=!P.current,jr=d[u]&&d[u].length>0,ke=pe.data,$e=E(ke)?v&&Ye(v)?Dt(v):v:ke,je=pe.error,mt=(0,j.useRef)($e),We=b?E(ke)?E(mt.current)?$e:mt.current:ke:$e,Nt=jr&&!E(je)?!1:Vt&&!E(l)?l:S().isPaused()?!1:o?E($e)?!1:c:E($e)||c,Ft=!!(u&&r&&Vt&&Nt),Wr=E(pe.isValidating)?Ft:pe.isValidating,zr=E(pe.isLoading)?Ft:pe.isLoading,Le=(0,j.useCallback)(async _=>{let A=T.current;if(!u||!A||y.current||S().isPaused())return!1;let H,L,ae=!0,Se=_||{},z=!p[u]||!Se.dedupe,Z=()=>Qe?!y.current&&u===m.current&&P.current:u===m.current,fe={isValidating:!1,isLoading:!1},jt=()=>{q(fe)},Wt=()=>{let te=p[u];te&&te[1]===L&&delete p[u]},zt={isValidating:!0};E(I().data)&&(zt.isLoading=!0);try{if(z&&(q(zt),t.loadingTimeout&&E(I().data)&&setTimeout(()=>{ae&&Z()&&S().onLoadingSlow(u,t)},t.loadingTimeout),p[u]=[A(V),Ve()]),[H,L]=p[u],H=await H,z&&setTimeout(Wt,t.dedupingInterval),!p[u]||p[u][1]!==L)return z&&Z()&&S().onDiscarded(u),!1;fe.error=M;let te=h[u];if(!E(te)&&(L<=te[0]||L<=te[1]||te[1]===0))return jt(),z&&Z()&&S().onDiscarded(u),!1;let de=I().data;fe.data=a(de,H)?de:H,z&&Z()&&S().onSuccess(H,u,t)}catch(te){Wt();let de=S(),{shouldRetryOnError:pt}=de;de.isPaused()||(fe.error=te,z&&Z()&&(de.onError(te,u,de),(pt===!0||ee(pt)&&pt(te))&&(!S().revalidateOnFocus||!S().revalidateOnReconnect||J())&&de.onErrorRetry(te,u,de,Br=>{let gt=d[u];gt&&gt[0]&&gt[0](ye.ERROR_REVALIDATE_EVENT,Br)},{retryCount:(Se.retryCount||0)+1,dedupe:!0})))}return ae=!1,jt(),!0},[u,n]),Mt=(0,j.useCallback)((..._)=>et(n,m.current,..._),[]);if(_e(()=>{T.current=r,O.current=t,E(ke)||(mt.current=ke)}),_e(()=>{if(!u)return;let _=Le.bind(M,It),A=0;S().revalidateOnFocus&&(A=Date.now()+S().focusThrottleInterval);let L=wr(u,d,(ae,Se={})=>{if(ae==ye.FOCUS_EVENT){let z=Date.now();S().revalidateOnFocus&&z>A&&J()&&(A=z+S().focusThrottleInterval,_())}else if(ae==ye.RECONNECT_EVENT)S().revalidateOnReconnect&&J()&&_();else{if(ae==ye.MUTATE_EVENT)return Le();if(ae==ye.ERROR_REVALIDATE_EVENT)return Le(Se)}});return y.current=!1,m.current=u,P.current=!0,q({_k:V}),Nt&&(p[u]||(E($e)||we?_():At(_))),()=>{y.current=!0,L()}},[u]),_e(()=>{let _;function A(){let L=ee(g)?g(I().data):g;L&&_!==-1&&(_=setTimeout(H,L))}function H(){!I().error&&(i||S().isVisible())&&(f||S().isOnline())?Le(It).then(A):A()}return A(),()=>{_&&(clearTimeout(_),_=-1)}},[g,i,f,u]),(0,j.useDebugValue)(We),o&&E($e)&&u){if(!Qe&&we)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=r,O.current=t,y.current=!1;let _=k[u];if(!E(_)){let A=Mt(_);Dt(A)}if(E(je)){let A=Le(It);E(We)||(A.status="fulfilled",A.value=!0),Dt(A)}else throw je}return{mutate:Mt,get data(){return U.data=!0,We},get error(){return U.error=!0,je},get isValidating(){return U.isValidating=!0,Wr},get isLoading(){return U.isLoading=!0,zr}}},Ra=Ce.defineProperty(_t,"defaultValue",{value:rt}),Er=$r(Cn);var Pn=(e,r)=>{let{data:t,mutate:n}=Er(e,{fallbackData:r});return[t,n]},at=Pn;var _n=()=>{let[e,r]=at("user"),[t,n]=at("teams"),[a,o]=at("selectedTeamId");return(0,kr.useEffect)(()=>{(async()=>{if(!e||!t){let c=await st.LocalStorage.getItem("selectedTeamId");c&&o(c);let[g,i]=await Promise.all([Be(),Ht()]);r(g),n(i),c&&(i.find(b=>b.id===c)||o(void 0))}})()},[]),{user:e,selectedTeam:a,teams:t,updateSelectedTeam:async l=>{let c=t?.find(g=>g.id===l);c?(o(c.id),await st.LocalStorage.setItem("selectedTeamId",c.id)):(o(void 0),await st.LocalStorage.removeItem("selectedTeamId"))}}},De=_n;var Fe=require("react/jsx-runtime"),Dn=({onTeamChange:e})=>{let{selectedTeam:r,teams:t,updateSelectedTeam:n}=De(),a=async s=>{s&&(await n(s),e())},o=t?.find(s=>s.id===r);return(0,Fe.jsxs)(ot.List.Dropdown,{value:r,tooltip:"Switch Team",onChange:async s=>await a(s),children:[o&&(0,Fe.jsx)(ot.List.Dropdown.Item,{title:o.name,value:o.id,icon:Ot.Icon.TwoPeople}),t?.length&&t.filter(s=>s.id!==r).map(s=>(0,Fe.jsx)(ot.List.Dropdown.Item,{title:s.name,value:s.id,icon:Ot.Icon.TwoPeople},s.id))]})},it=Dn;var $=ge(require("react")),R=require("@raycast/api");var ve=ge(require("node:fs")),lt=ge(require("node:path")),Rr=ge(require("node:crypto"));var Ar=require("react/jsx-runtime");function In(e){let r=(0,$.useRef)(e),t=(0,$.useRef)(0);return Ae(e,r.current)||(r.current=e,t.current+=1),(0,$.useMemo)(()=>r.current,[t.current])}function X(e){let r=(0,$.useRef)(e);return r.current=e,r}function On(e,r){let t=e instanceof Error?e.message:String(e);return(0,R.showToast)({style:R.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??Sr(e),secondaryAction:r?.primaryAction?Sr(e):void 0})}var Sr=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,ve.readFileSync)((0,lt.join)(R.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=R.environment.isDevelopment||r,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?R.Clipboard.copy(o):(0,R.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function Ut(e,r,t){let n=(0,$.useRef)(0),[a,o]=(0,$.useState)({isLoading:!0}),s=X(e),l=X(t?.abortable),c=X(r||[]),g=X(t?.onError),i=X(t?.onData),f=X(t?.onWillExecute),b=X(t?.failureToastOptions),d=X(a.data),h=(0,$.useRef)(null),p=(0,$.useRef)({page:0}),k=(0,$.useRef)(!1),u=(0,$.useRef)(!0),V=(0,$.useRef)(50),P=(0,$.useCallback)(()=>(l.current&&(l.current.current?.abort(),l.current.current=new AbortController),++n.current),[l]),y=(0,$.useCallback)((...q)=>{let F=P();f.current?.(q),o(v=>({...v,isLoading:!0}));let Y=Un(s.current)(...q);function U(v){return v.name=="AbortError"||F===n.current&&(g.current?g.current(v):R.environment.launchType!==R.LaunchType.Background&&On(v,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(le){le.hide(),h.current?.(...c.current||[])}},...b.current}),o({error:v,isLoading:!1})),v}return typeof Y=="function"?(k.current=!0,Y(p.current).then(({data:v,hasMore:le,cursor:Me})=>(F===n.current&&(p.current&&(p.current.cursor=Me,p.current.lastItem=v?.[v.length-1]),i.current&&i.current(v,p.current),le&&(V.current=v.length),u.current=le,o(pe=>p.current.page===0?{data:v,isLoading:!1}:{data:(pe.data||[])?.concat(v),isLoading:!1})),v),v=>(u.current=!1,U(v)))):(k.current=!1,Y.then(v=>(F===n.current&&(i.current&&i.current(v),o({data:v,isLoading:!1})),v),U))},[i,g,c,s,o,h,f,p,b,P]);h.current=y;let m=(0,$.useCallback)(()=>{p.current={page:0};let q=c.current||[];return y(...q)},[y,c]),T=(0,$.useCallback)(async(q,F)=>{let Y;try{if(F?.optimisticUpdate){P(),typeof F?.rollbackOnError!="function"&&F?.rollbackOnError!==!1&&(Y=structuredClone(d.current?.value));let U=F.optimisticUpdate;o(v=>({...v,data:U(v.data)}))}return await q}catch(U){if(typeof F?.rollbackOnError=="function"){let v=F.rollbackOnError;o(le=>({...le,data:v(le.data)}))}else F?.optimisticUpdate&&F?.rollbackOnError!==!1&&o(v=>({...v,data:Y}));throw U}finally{F?.shouldRevalidateAfter!==!1&&(R.environment.launchType===R.LaunchType.Background||R.environment.commandMode==="menu-bar"?await m():m())}},[m,d,o,P]),O=(0,$.useCallback)(()=>{p.current.page+=1;let q=c.current||[];y(...q)},[p,c,y]);(0,$.useEffect)(()=>{p.current={page:0},t?.execute!==!1?y(...r||[]):P()},[In([r,t?.execute,y]),l,p]),(0,$.useEffect)(()=>()=>{P()},[P]);let S=t?.execute!==!1?a.isLoading:!1,J={...a,isLoading:S},I=k.current?{pageSize:V.current,hasMore:u.current,onLoadMore:O}:void 0;return{...J,revalidate:m,mutate:T,pagination:I}}function Un(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function xr(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Ln(e){return e instanceof URLSearchParams?e.toString():e}function Cr(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=Ln(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let l=null;if((l=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+l+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(n);c=c.sort(),xr(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let g=this;return c.forEach(function(i){g.dispatch(i),t(":"),g.dispatch(n[i]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){o.dispatch(c)});return}let s=[],l=n.map(function(c){let g=Vn(),i=r.slice();return Cr(g,i).dispatch(c),s=s.concat(i.slice(r.length)),g.read().toString()});r=r.concat(s),l.sort(),this._array(l,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),xr(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function Vn(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Nn(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function Fn(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function ct(e){let r=Rr.default.createHash("sha1");return Cr(r).dispatch(e),r.digest("hex")}var Mn=Symbol("cache without namespace"),Tr=new Map;function jn(e,r,t){let n=t?.cacheNamespace||Mn,a=Tr.get(n)||Tr.set(n,new R.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=X(e),s=X(r),l=(0,$.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(f){console.error("Could not get Cache data:",f);return}}),c=(0,$.useMemo)(()=>{if(typeof l<"u"){if(l==="undefined")return;try{return JSON.parse(l,Fn)}catch(f){return console.warn("The cached data is corrupted",f),s.current}}else return s.current},[l,s]),g=X(c),i=(0,$.useCallback)(f=>{let b=typeof f=="function"?f(g.current):f;if(typeof b>"u")a.set(o.current,"undefined");else{let d=JSON.stringify(b,Nn);a.set(o.current,d)}return b},[a,o,g]);return[c,i]}var Ie=Symbol();function Wn(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},l=(0,$.useRef)(null),[c,g]=jn(ct(r||[])+o,Ie,{cacheNamespace:ct(e)}),i=(0,$.useRef)(c!==Ie?c:n),f=(0,$.useRef)(void 0),{mutate:b,revalidate:d,...h}=Ut(e,r||[],{...s,onData(P,y){f.current=y,s.onData&&s.onData(P,y),!(y&&y.page>0)&&(l.current="promise",i.current=P,g(P))}}),p,k=h.pagination;f.current&&f.current.page>0&&h.data?p=h.data:l.current==="promise"?p=i.current:a&&c!==Ie?(p=c,k&&(k.hasMore=!0,k.pageSize=c.length)):a&&c===Ie?p=i.current:c!==Ie?(p=c,k&&(k.hasMore=!0,k.pageSize=c.length)):p=n;let u=X(p),V=(0,$.useCallback)(async(P,y)=>{let m;try{if(y?.optimisticUpdate){typeof y?.rollbackOnError!="function"&&y?.rollbackOnError!==!1&&(m=structuredClone(u.current));let T=y.optimisticUpdate(u.current);l.current="cache",i.current=T,g(T)}return await b(P,{shouldRevalidateAfter:y?.shouldRevalidateAfter})}catch(T){if(typeof y?.rollbackOnError=="function"){let O=y.rollbackOnError(u.current);l.current="cache",i.current=O,g(O)}else y?.optimisticUpdate&&y?.rollbackOnError!==!1&&(l.current="cache",i.current=m,g(m));throw T}},[g,b,u,i,l]);return(0,$.useEffect)(()=>{c!==Ie&&(l.current="cache",i.current=c)},[c]),{data:p,isLoading:h.isLoading,error:h.error,mutate:f.current&&f.current.page>0?b:V,pagination:k,revalidate:d}}function zn(e){if(e){let r=Gn(e);if(!r)return!1;if(r.subtype==="json"||r.suffix==="json"||r.suffix&&/\bjson\b/i.test(r.suffix)||r.subtype&&/\bjson\b/i.test(r.subtype))return!0}return!1}var Bn=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Gn(e){let r=e.indexOf(";"),t=r!==-1?e.slice(0,r).trim():e.trim(),n=Bn.exec(t.toLowerCase().toLowerCase());if(!n)return;let a=n[1],o=n[2],s,l=o.lastIndexOf("+");return l!==-1&&(s=o.substring(l+1),o=o.substring(0,l)),{type:a,subtype:o,suffix:s}}async function Hn(e){if(!e.ok)throw new Error(e.statusText);let r=e.headers.get("content-type");return r&&zn(r)?await e.json():await e.text()}function Kn(e){return{data:e,hasMore:!1}}function Oe(e,r){let{parseResponse:t,mapResult:n,initialData:a,execute:o,keepPreviousData:s,onError:l,onData:c,onWillExecute:g,failureToastOptions:i,...f}=r||{},b={initialData:a,execute:o,keepPreviousData:s,onError:l,onData:c,onWillExecute:g,failureToastOptions:i},d=X(t||Hn),h=X(n||Kn),p=(0,$.useRef)(null),k=(0,$.useRef)(null),u=typeof e=="function"?e({page:0}):void 0;(!p.current||typeof k.current>"u"||k.current!==u)&&(p.current=e),k.current=u;let V=(0,$.useRef)(null),P=(0,$.useCallback)((T,O)=>async S=>{let J=await fetch(T(S),{signal:V.current?.signal,...O}),I=await d.current(J);return h.current?.(I)},[d,h]),y=(0,$.useCallback)(async(T,O)=>{let S=await fetch(T,{signal:V.current?.signal,...O}),J=await d.current(S);return h.current(J)?.data},[d,h]),m=(0,$.useMemo)(()=>k.current?P:y,[k,y,P]);return Wn(m,[p.current,f],{...b,internal_cacheKeySuffix:k.current+ct(h.current)+ct(d.current),abortable:V})}var C=require("@raycast/api"),ut=require("react");var Jn=async(e,r)=>{let t,n,a;t=`# ${e.name}
`,n=a="";let o=e.readyState||e.state,s=l=>`**${l}**`;switch(o){case"READY":{let l=await er(e.uid||e.id,r?.id);l?n+=`[![A screenshot of the deployment](${l})](https://${e.url})`:n+="No screenshot available";break}case"BUILDING":case"INITIALIZING":t+=s`Deployment is still building...`;break;case"FAILED":t+=s`Deployment failed.`;break;case"CANCELED":t+=s`Deployment was canceled.`;break;case"ERROR":{t+=s`Deployment had an error.`;break}default:t+=s`Deployment is in an unknown state...`}return`${t}

${n}

${a}`},Pr=Jn;var W=require("react/jsx-runtime"),qn=({deployment:e,selectedTeam:r,username:t})=>{let[n,a]=(0,ut.useState)();(0,ut.useEffect)(()=>{n||Pr(e,r).then(a)},[n,e,r]);let o=qt(e.uid||e.id,r?.id,1),{isLoading:s,data:l}=Oe(o,{headers:Te}),c=l?.builds?.[0],g=h=>h.meta.githubCommitMessage?h.meta.githubCommitMessage:"No commit message",f=(h=>h.meta.githubCommitRef??null)(e),b=()=>c?.readyState?c.readyState.toLowerCase().replace(/\b[a-z]/g,h=>h.toUpperCase()):"",d=()=>{if(e.inspectorURL)return e.inspectorURL;let h=r?.slug||t;return h?Ge(h,e.name,e.uid||e.id):((0,C.showToast)({title:"Error",message:"Could not determine team or user name"}),"")};return(0,W.jsx)(C.Detail,{navigationTitle:g(e),isLoading:s||!n||!t,markdown:n,actions:(0,W.jsxs)(C.ActionPanel,{children:[(0,W.jsx)(C.Action.OpenInBrowser,{title:"Visit on Vercel",url:d(),icon:C.Icon.Link}),(0,W.jsx)(C.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${e.url}`,icon:C.Icon.Link})]}),metadata:(0,W.jsxs)(C.Detail.Metadata,{children:[(0,W.jsx)(C.Detail.Metadata.Label,{title:"State",text:b()}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Name",text:e.name}),(0,W.jsx)(C.Detail.Metadata.Link,{title:"Preview URL",text:e.url,target:`https://${e.url}`}),e.inspectorURL&&(0,W.jsx)(C.Detail.Metadata.Link,{title:"Visit on Vercel",text:e.url,target:d()}),f&&(0,W.jsx)(C.Detail.Metadata.Label,{title:"Git Branch",text:f,icon:{source:"boxicon-git-branch.svg",tintColor:C.Color.SecondaryText}}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Commit Message",text:g(e)}),(0,W.jsx)(C.Detail.Metadata.Separator,{}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Created",text:e.createdAt?xe(e.createdAt,new Date):""}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Creator",text:e.creator?.username||"Unknown"}),(0,W.jsx)(C.Detail.Metadata.Separator,{}),(0,W.jsx)(C.Detail.Metadata.Link,{title:"",text:"Inspect on Vercel",target:d()})]})})},ft=qn;var x=require("@raycast/api");var Q=require("react/jsx-runtime"),Zn=({projectId:e})=>{let{user:r,teams:t,selectedTeam:n}=De(),a=Jt(n,e),{isLoading:o,data:s,revalidate:l}=Oe(a,{headers:Te,mapResult(i){return{data:i.deployments}},initialData:[]}),c=()=>{l()},g=t?.find(i=>i.id===n);return(0,Q.jsx)(x.List,{throttle:!0,searchBarPlaceholder:"Search Deployments...",navigationTitle:"Results",isLoading:o||!r,searchBarAccessory:(0,Q.jsx)(Q.Fragment,{children:r&&(0,Q.jsx)(it,{onTeamChange:c})}),children:s.map(i=>{let f=Yn(i);return(0,Q.jsx)(x.List.Item,{title:`${_r(i)}`,icon:Xn(i.readyState?i.readyState:i.state),subtitle:`${e?"":` ${i.name}`}`,keywords:[i.name,_r(i)||"",f||""],actions:(0,Q.jsxs)(x.ActionPanel,{children:[(0,Q.jsx)(x.Action.Push,{title:"Show Details",icon:x.Icon.Binoculars,target:(0,Q.jsx)(ft,{username:r?.username,deployment:i,selectedTeam:g})}),(0,Q.jsx)(x.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${i.url}`,icon:x.Icon.Link}),r&&(0,Q.jsx)(x.Action.OpenInBrowser,{title:"Visit on Vercel",url:Ge(g?.slug||r.username,i.name,i.id||i.uid),icon:x.Icon.Link,shortcut:{macOS:{modifiers:["cmd","opt"],key:"v"},Windows:{modifiers:["ctrl","opt"],key:"v"}}}),(0,Q.jsx)(x.Action.CopyToClipboard,{title:"Copy URL",content:`https://${i.url}`,icon:x.Icon.CopyClipboard,shortcut:{macOS:{modifiers:["cmd","opt"],key:"c"},Windows:{modifiers:["ctrl","opt"],key:"c"}}})]}),accessories:[{text:f,icon:f?{source:"boxicon-git-branch.svg",tintColor:x.Color.SecondaryText}:null},{text:i.createdAt?xe(i.createdAt,new Date):"",tooltip:i.createdAt?new Date(i.createdAt).toLocaleString():""}]},i.uid)})})},Dr=Zn,_r=e=>e.meta.githubCommitMessage?e.meta.githubCommitMessage:"No commit message",Yn=e=>e.meta.githubCommitRef??null,Xn=e=>{switch(e){case"READY":return{source:x.Icon.Dot,tintColor:x.Color.Green};case"BUILDING":case"INITIALIZING":return{source:x.Icon.Dot,tintColor:x.Color.Blue};case"FAILED":return{source:x.Icon.Dot,tintColor:x.Color.Red};case"CANCELED":return{source:x.Icon.Dot,tintColor:x.Color.PrimaryText};case"ERROR":return{source:x.Icon.ExclamationMark,tintColor:x.Color.Red};case"QUEUED":return{source:x.Icon.Dot,tintColor:x.Color.SecondaryText};default:return x.Icon.QuestionMark}};var w=require("@raycast/api"),Ee=require("react");var re=require("@raycast/api"),ie=require("react/jsx-runtime"),Qn=({updateEnvVar:e,envVar:r})=>{let t=n=>{let o={target:(()=>{let s=[];return n["edit-form-development"]&&s.push("development"),n["edit-form-preview"]&&s.push("preview"),n["edit-form-production"]&&s.push("production"),s})(),key:n.key,value:n.value};e(r.id,o)};return(0,ie.jsxs)(re.Form,{actions:(0,ie.jsx)(re.ActionPanel,{children:(0,ie.jsx)(re.Action.SubmitForm,{title:"Submit",onSubmit:t})}),children:[(0,ie.jsx)(re.Form.TextField,{id:"key",defaultValue:r.key,title:"Environment variable key"}),(0,ie.jsx)(re.Form.TextField,{id:"value",defaultValue:r.value,title:"Environment variable value"}),(0,ie.jsx)(re.Form.Separator,{}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-production",label:"Production",defaultValue:r.target?.includes("production")}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-preview",label:"Preview",defaultValue:r.target?.includes("preview")}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-development",label:"Development",defaultValue:r.target?.includes("development")})]})},Ir=Qn;var ne=require("@raycast/api"),ce=require("react/jsx-runtime"),ea=({createEnvVar:e})=>{let r=t=>{let a={target:(()=>{let o=[];return t["edit-form-development"]&&o.push("development"),t["edit-form-preview"]&&o.push("preview"),t["edit-form-production"]&&o.push("production"),o})(),key:t.key,value:t.value};e(a)};return(0,ce.jsxs)(ne.Form,{navigationTitle:"New Environment Variable",actions:(0,ce.jsx)(ne.ActionPanel,{children:(0,ce.jsx)(ne.Action.SubmitForm,{title:"Submit",onSubmit:r})}),children:[(0,ce.jsx)(ne.Form.TextField,{id:"key",title:"Environment variable key",placeholder:"YOUR_KEY"}),(0,ce.jsx)(ne.Form.TextField,{id:"value",title:"Environment variable value",placeholder:"your_value"}),(0,ce.jsx)(ne.Form.Separator,{}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-production",label:"Production"}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-preview",label:"Preview"}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-development",label:"Development"})]})},Or=ea;var N=require("react/jsx-runtime"),ta=({project:e,team:r})=>{let[t,n]=(0,Ee.useState)(),[a,o]=(0,Ee.useState)(),[s,l]=(0,Ee.useState)(),[c,g]=(0,Ee.useState)(),{push:i,pop:f}=(0,w.useNavigation)();async function b(){let m=await Zt(e.id,r),T=[],O=[],S=[],J=[];m.forEach(I=>{I.type==="system"?T.push(I):I.type==="plain"?O.push(I):I.type==="encrypted"?S.push(I):I.type==="secret"&&J.push(I)}),n(T),o(O),l(S),g(J)}(0,Ee.useEffect)(()=>{b()},[]);let d=async(m,T)=>{(await Xt(e.id,m,T)).key?((0,w.showToast)({style:w.Toast.Style.Success,title:"Environment variable updated"}),f(),await b()):(0,w.showToast)({style:w.Toast.Style.Failure,title:"Failed to update environment variable"})},h=async m=>{let T=await Qt(e.id,m,r);T.error?(0,w.showToast)({style:w.Toast.Style.Failure,title:"Failed to create environment variable"}):T&&(await b(),(0,w.showToast)({style:w.Toast.Style.Success,title:"Environment variable created"}),f())},p=!!(t&&a&&s&&c),k=!!t&&t.length>0,u=!!a&&a.length>0,V=!!s&&s.length>0,P=!!c&&c.length>0,y=m=>(0,N.jsxs)(w.ActionPanel,{children:[(0,N.jsx)(w.Action.Push,{title:"Edit",icon:w.Icon.Pencil,target:(0,N.jsx)(Ir,{envVar:m,updateEnvVar:d})}),(0,N.jsx)(w.Action,{title:"Delete",onAction:async()=>{await(0,w.confirmAlert)({title:`Are you sure you want to delete ${m.key}?`})&&Promise.all([Kt(e.id,m.id),b()])},icon:w.Icon.Trash})]});return(0,N.jsxs)(w.List,{navigationTitle:`Environment variables for ${e.name}`,isLoading:!p,children:[(0,N.jsx)(w.List.Item,{title:"New Environment Variable",icon:w.Icon.Plus,actions:(0,N.jsx)(w.ActionPanel,{children:(0,N.jsx)(w.Action,{title:"Add",onAction:()=>{i((0,N.jsx)(Or,{createEnvVar:h}))}})})}),k&&(0,N.jsx)(w.List.Section,{title:"System Environment Variables"}),k&&t.map(m=>(0,N.jsx)(dt,{type:m.type,envVar:m,actions:y(m)},m.id)),u&&(0,N.jsx)(w.List.Section,{title:"Plain Environment Variables"}),u&&a.map(m=>(0,N.jsx)(dt,{type:m.type,envVar:m,actions:y(m)},m.id)),V&&(0,N.jsx)(w.List.Section,{title:"Encrypted Environment Variables"}),V&&s.map(m=>(0,N.jsx)(dt,{type:m.type,envVar:m,actions:y(m)},m.id)),P&&(0,N.jsx)(w.List.Section,{title:"Secret Environment Variables"}),P&&c.map(m=>(0,N.jsx)(dt,{type:m.type,envVar:m,actions:y(m)},m.id))]})},dt=({envVar:e,actions:r})=>{let t=n=>{switch(n){case"system":return w.Icon.Desktop;case"secret":return w.Icon.EyeDisabled;case"encrypted":return w.Icon.BlankDocument;case"plain":return w.Icon.BlankDocument;default:return w.Icon.BlankDocument}};return(0,N.jsx)(w.List.Item,{title:e.key,subtitle:e.value,icon:t(e.type),actions:r,id:e.id},e.id)},Ur=ta;var G=require("react/jsx-runtime"),ra=()=>{let{selectedTeam:e,teams:r,user:t}=De(),n=Yt(e),{isLoading:a,data:o,revalidate:s}=Oe(n,{headers:Te,mapResult(i){return{data:i.projects}},initialData:[]}),l=()=>{s()},{push:c}=(0,D.useNavigation)(),g=i=>`https://vercel.com/${r?.find(d=>d.id===e)?.slug||t?.username}/${i}`;return(0,G.jsx)(D.List,{searchBarPlaceholder:"Search Projects...",navigationTitle:"Results",isLoading:a,searchBarAccessory:(0,G.jsx)(G.Fragment,{children:t&&(0,G.jsx)(it,{onTeamChange:l})}),children:o.map(i=>(0,G.jsx)(D.List.Item,{id:i.id,title:i.name,subtitle:i.framework??"",keywords:[i.framework||""],actions:(0,G.jsxs)(D.ActionPanel,{children:[(0,G.jsx)(D.Action.Push,{title:"Search Deployments",icon:D.Icon.MagnifyingGlass,target:(0,G.jsx)(Dr,{projectId:i.id})}),(0,G.jsx)(D.Action,{title:"Inspect Most Recent Deployment",icon:D.Icon.ArrowRight,onAction:async()=>{i.latestDeployments?.length?c((0,G.jsx)(ft,{username:t?.username,deployment:i.latestDeployments[0],selectedTeam:r?.find(f=>f.id===e)})):(0,D.showToast)({style:D.Toast.Style.Failure,title:"No deployments found"})}}),!!i.latestDeployments?.length&&(0,G.jsx)(D.Action,{title:"Visit Most Recent Deployment",icon:D.Icon.Link,onAction:async()=>{(0,D.open)("https://"+i.latestDeployments?.[0].url||"")}}),(0,G.jsx)(D.Action,{title:"Inspect Environment Variables",icon:D.Icon.ArrowRight,onAction:async()=>{c((0,G.jsx)(Ur,{team:e,project:i}))}}),(0,G.jsx)(D.Action.OpenInBrowser,{title:"Visit on Vercel",url:g(i.name),icon:D.Icon.Globe,shortcut:{macOS:{modifiers:["cmd","opt"],key:"v"},Windows:{modifiers:["ctrl","opt"],key:"v"}}})]}),accessories:[{text:i.latestDeployments?.length&&i.latestDeployments[0].createdAt?xe(i.latestDeployments[0].createdAt,new Date):"never",tooltip:i.latestDeployments?.length&&i.latestDeployments[0].createdAt?new Date(i.latestDeployments[0].createdAt).toLocaleString():""}]},i.id))})},Lr=ra;var na=async()=>{if(!await Be())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},Vr=na;var ue=require("@raycast/api"),ht=require("react/jsx-runtime"),aa=()=>(0,ht.jsx)(ue.Detail,{markdown:`# ERROR 

 Invalid token detected. Please set one in the settings.`,actions:(0,ht.jsx)(ue.ActionPanel,{children:(0,ht.jsx)(ue.Action,{icon:ue.Icon.Gear,title:"Open Extension Preferences",onAction:ue.openExtensionPreferences})})}),Nr=aa;var Fr=require("@raycast/api"),Ue=require("react/jsx-runtime"),sa=({children:e})=>{let{isLoading:r,error:t}=Ut(Vr,[],{failureToastOptions:{title:"Invalid token detected. Please set one in the settings."}});return r?(0,Ue.jsx)(Fr.Detail,{isLoading:!0}):t?(0,Ue.jsx)(Nr,{}):(0,Ue.jsx)(Ue.Fragment,{children:e})},Mr=sa;var Lt=require("react/jsx-runtime");function oa(){return(0,Lt.jsx)(Mr,{children:(0,Lt.jsx)(Lr,{})})}var ia=oa;
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
