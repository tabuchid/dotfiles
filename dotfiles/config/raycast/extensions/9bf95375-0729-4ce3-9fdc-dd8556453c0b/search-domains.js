"use strict";var yr=Object.create;var Te=Object.defineProperty;var $r=Object.getOwnPropertyDescriptor;var wr=Object.getOwnPropertyNames;var vr=Object.getPrototypeOf,Er=Object.prototype.hasOwnProperty;var Ze=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),St=(e,t)=>{for(var r in t)Te(e,r,{get:t[r],enumerable:!0})},Tt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of wr(t))!Er.call(e,s)&&s!==r&&Te(e,s,{get:()=>t[s],enumerable:!(n=$r(t,s))||n.enumerable});return e};var ae=(e,t,r)=>(r=e!=null?yr(vr(e)):{},Tt(t||!e||!e.__esModule?Te(r,"default",{value:e,enumerable:!0}):r,e)),kr=e=>Tt(Te({},"__esModule",{value:!0}),e);var Ot=Ze(Ct=>{"use strict";var de=require("react");function Sr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tr=typeof Object.is=="function"?Object.is:Sr,Rr=de.useState,_r=de.useEffect,Ar=de.useLayoutEffect,Cr=de.useDebugValue;function Or(e,t){var r=t(),n=Rr({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return Ar(function(){s.value=r,s.getSnapshot=t,Qe(s)&&o({inst:s})},[e,r,t]),_r(function(){return Qe(s)&&o({inst:s}),e(function(){Qe(s)&&o({inst:s})})},[e]),Cr(r),r}function Qe(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Tr(e,r)}catch{return!0}}function Ir(e,t){return t()}var Pr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ir:Or;Ct.useSyncExternalStore=de.useSyncExternalStore!==void 0?de.useSyncExternalStore:Pr});var Pt=Ze(It=>{"use strict";process.env.NODE_ENV!=="production"&&(function(){function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}function t(h,m){d||s.startTransition===void 0||(d=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var f=m();if(!p){var E=m();o(f,E)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),p=!0)}E=a({inst:{value:f,getSnapshot:m}});var l=E[0].inst,D=E[1];return i(function(){l.value=f,l.getSnapshot=m,r(l)&&D({inst:l})},[h,f,m]),c(function(){return r(l)&&D({inst:l}),h(function(){r(l)&&D({inst:l})})},[h]),u(f),f}function r(h){var m=h.getSnapshot;h=h.value;try{var f=m();return!o(h,f)}catch{return!0}}function n(h,m){return m()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var s=require("react"),o=typeof Object.is=="function"?Object.is:e,a=s.useState,c=s.useEffect,i=s.useLayoutEffect,u=s.useDebugValue,d=!1,p=!1,$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:t;It.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:$,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()});var Ut=Ze((_n,et)=>{"use strict";process.env.NODE_ENV==="production"?et.exports=Ot():et.exports=Pt()});var En={};St(En,{default:()=>vn});module.exports=kr(En);var Y=require("@raycast/api");var ze=require("@raycast/api"),mt=require("@raycast/api");var Xt=require("react"),We=require("@raycast/api");var ie=require("@raycast/api"),xr=(0,ie.getPreferenceValues)().accessToken,Ye={Authorization:"Bearer "+xr},Rt=Object.entries(Ye),Xe="https://api.vercel.com/";async function Re(){try{return(await(await fetch(Xe+"www/user",{method:"get",headers:Ye})).json()).user}catch(e){throw console.error(e),(0,ie.showToast)({style:ie.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function _t(){let t=await(await fetch(Xe+"v1/teams",{method:"get",headers:Ye})).json(),r=[];for(let n of t.teams)r.push(n);return r}function At(e,t=100){return Xe+`v5/domains?teamId=${e??""}&limit=${t}`}var U=ae(require("react"),1),Zt=ae(Ut(),1);var V=ae(require("react"),1);var se={};St(se,{ERROR_REVALIDATE_EVENT:()=>Ur,FOCUS_EVENT:()=>Dt,MUTATE_EVENT:()=>Vt,RECONNECT_EVENT:()=>Lt});var Dt=0,Lt=1,Vt=2,Ur=3;var jt=Object.prototype.hasOwnProperty;function he(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&he(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(jt.call(e,r)&&++n&&!jt.call(t,r)||!(r in t)||!he(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var J=new WeakMap,re=()=>{},P=re(),pe=Object,y=e=>e===P,B=e=>typeof e=="function",q=(e,t)=>({...e,...t}),Pe=e=>B(e.then),tt={},_e={},ct="undefined",me=typeof window!=ct,Ce=typeof document!=ct,Nt=me&&"Deno"in window,Wt=()=>me&&typeof window.requestAnimationFrame!=ct,Ue=(e,t)=>{let r=J.get(e);return[()=>!y(t)&&e.get(t)||tt,n=>{if(!y(t)){let s=e.get(t);t in _e||(_e[t]=s),r[5](t,q(s,n),s||tt)}},r[6],()=>!y(t)&&t in _e?_e[t]:!y(t)&&e.get(t)||tt]},at=!0,Dr=()=>at,[st,ot]=me&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[re,re],Lr=()=>{let e=Ce&&document.visibilityState;return y(e)||e!=="hidden"},Vr=e=>(Ce&&document.addEventListener("visibilitychange",e),st("focus",e),()=>{Ce&&document.removeEventListener("visibilitychange",e),ot("focus",e)}),jr=e=>{let t=()=>{at=!0,e()},r=()=>{at=!1};return st("online",t),st("offline",r),()=>{ot("online",t),ot("offline",r)}},Mt={isOnline:Dr,isVisible:Lr},zt={initFocus:Vr,initReconnect:jr},De=!V.default.useId,ce=!me||Nt,lt=e=>Wt()?window.requestAnimationFrame(e):setTimeout(e,1),ge=ce?V.useEffect:V.useLayoutEffect,rt=typeof navigator<"u"&&navigator.connection,it=!ce&&rt&&(["slow-2g","2g"].includes(rt.effectiveType)||rt.saveData),Ae=new WeakMap,Fr=e=>pe.prototype.toString.call(e),nt=(e,t)=>e===`[object ${t}]`,Nr=0,Oe=e=>{let t=typeof e,r=Fr(e),n=nt(r,"Date"),s=nt(r,"RegExp"),o=nt(r,"Object"),a,c;if(pe(e)===e&&!n&&!s){if(a=Ae.get(e),a)return a;if(a=++Nr+"~",Ae.set(e,a),Array.isArray(e)){for(a="@",c=0;c<e.length;c++)a+=Oe(e[c])+",";Ae.set(e,a)}if(o){a="#";let i=pe.keys(e).sort();for(;!y(c=i.pop());)y(e[c])||(a+=c+":"+Oe(e[c])+",");Ae.set(e,a)}}else a=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return a},ve=e=>{if(B(e))try{e=e()}catch{e=""}let t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Oe(e):"",[e,t]},Wr=0,we=()=>++Wr;async function Le(...e){let[t,r,n,s]=e,o=q({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{}),a=o.populateCache,c=o.rollbackOnError,i=o.optimisticData,u=$=>typeof c=="function"?c($):c!==!1,d=o.throwOnError;if(B(r)){let $=r,h=[],m=t.keys();for(let f of m)!/^\$(inf|sub)\$/.test(f)&&$(t.get(f)._k)&&h.push(f);return Promise.all(h.map(p))}return p(r);async function p($){let[h]=ve($);if(!h)return;let[m,f]=Ue(t,h),[E,l,D,R]=J.get(t),w=()=>{let _=E[h];return(B(o.revalidate)?o.revalidate(m().data,$):o.revalidate!==!1)&&(delete D[h],delete R[h],_&&_[0])?_[0](2).then(()=>m().data):m().data};if(e.length<3)return w();let x=n,C,O=!1,k=we();l[h]=[k,0];let G=!y(i),F=m(),N=F.data,I=F._c,M=y(I)?N:I;if(G&&(i=B(i)?i(M,N):i,f({data:i,_c:M})),B(x))try{x=x(M)}catch(_){C=_,O=!0}if(x&&Pe(x))if(x=await x.catch(_=>{C=_,O=!0}),k!==l[h][0]){if(O)throw C;return x}else O&&G&&u(C)&&(a=!0,f({data:M,_c:P}));if(a&&!O)if(B(a)){let _=a(x,M);f({data:_,error:P,_c:P})}else f({data:x,error:P,_c:P});if(l[h][1]=we(),Promise.resolve(w()).then(()=>{f({_c:P})}),O){if(d)throw C;return}return x}}var Ft=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},ut=(e,t)=>{if(!J.has(e)){let r=q(zt,t),n=Object.create(null),s=Le.bind(P,e),o=re,a=Object.create(null),c=(d,p)=>{let $=a[d]||[];return a[d]=$,$.push(p),()=>$.splice($.indexOf(p),1)},i=(d,p,$)=>{e.set(d,p);let h=a[d];if(h)for(let m of h)m(p,$)},u=()=>{if(!J.has(e)&&(J.set(e,[n,Object.create(null),Object.create(null),Object.create(null),s,i,c]),!ce)){let d=r.initFocus(setTimeout.bind(P,Ft.bind(P,n,0))),p=r.initReconnect(setTimeout.bind(P,Ft.bind(P,n,1)));o=()=>{d&&d(),p&&p(),J.delete(e)}}};return u(),[e,s,u,o]}return[e,J.get(e)[4]]},Mr=(e,t,r,n,s)=>{let o=r.errorRetryCount,a=s.retryCount,c=~~((Math.random()+.5)*(1<<(a<8?a:8)))*r.errorRetryInterval;!y(o)&&a>o||setTimeout(n,c,s)},Bt=he,[Ve,Gt]=ut(new Map),je=q({onLoadingSlow:re,onSuccess:re,onError:re,onErrorRetry:Mr,onDiscarded:re,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:it?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:it?5e3:3e3,compare:Bt,isPaused:()=>!1,cache:Ve,mutate:Gt,fallback:{}},Mt),ft=(e,t)=>{let r=q(e,t);if(t){let{use:n,fallback:s}=e,{use:o,fallback:a}=t;n&&o&&(r.use=n.concat(o)),s&&a&&(r.fallback=q(s,a))}return r},Ie=(0,V.createContext)({}),dt=e=>{let{value:t}=e,r=(0,V.useContext)(Ie),n=B(t),s=(0,V.useMemo)(()=>n?t(r):t,[n,r,t]),o=(0,V.useMemo)(()=>n?s:ft(r,s),[n,r,s]),a=s&&s.provider,c=(0,V.useRef)(P);a&&!c.current&&(c.current=ut(a(o.cache||Ve),s));let i=c.current;return i&&(o.cache=i[0],o.mutate=i[1]),ge(()=>{if(i)return i[2]&&i[2](),i[3]},[]),(0,V.createElement)(Ie.Provider,q(e,{value:o}))};var Ht="$inf$";var Fe=ae(require("react"),1);var Kt=me&&window.__SWR_DEVTOOLS_USE__,zr=Kt?window.__SWR_DEVTOOLS_USE__:[],Br=()=>{Kt&&(window.__SWR_DEVTOOLS_REACT__=Fe.default)},Gr=e=>B(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Hr=()=>q(je,(0,Fe.useContext)(Ie));var Kr=e=>(t,r,n)=>e(t,r&&((...o)=>{let[a]=ve(t),[,,,c]=J.get(Ve);if(a.startsWith(Ht))return r(...o);let i=c[a];return y(i)?r(...o):(delete c[a],i)}),n),Jr=zr.concat(Kr),Jt=e=>function(...r){let n=Hr(),[s,o,a]=Gr(r),c=ft(n,a),i=e,{use:u}=c,d=(u||[]).concat(Jr);for(let p=d.length;p--;)i=d[p](i);return i(s,o||c.fetcher||null,c)},qt=(e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let s=n.indexOf(r);s>=0&&(n[s]=n[n.length-1],n.pop())}};Br();var qr=()=>{},Fn=qr();var ht=U.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),pt={dedupe:!0},Zr=(e,t,r)=>{let{cache:n,compare:s,suspense:o,fallbackData:a,revalidateOnMount:c,revalidateIfStale:i,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:p,keepPreviousData:$}=r,[h,m,f,E]=J.get(n),[l,D]=ve(e),R=(0,U.useRef)(!1),w=(0,U.useRef)(!1),x=(0,U.useRef)(l),C=(0,U.useRef)(t),O=(0,U.useRef)(r),k=()=>O.current,G=()=>k().isVisible()&&k().isOnline(),[F,N,I,M]=Ue(n,l),_=(0,U.useRef)({}).current,b=y(a)?y(r.fallback)?P:r.fallback[l]:a,X=(T,S)=>{for(let j in _){let A=j;if(A==="data"){if(!s(T[A],S[A])&&(!y(T[A])||!s(Se,S[A])))return!1}else if(S[A]!==T[A])return!1}return!0},ke=(0,U.useMemo)(()=>{let T=!l||!t?!1:y(c)?k().isPaused()||o?!1:i!==!1:c,S=W=>{let ee=q(W);return delete ee._k,T?{isValidating:!0,isLoading:!0,...ee}:ee},j=F(),A=M(),K=S(j),fe=j===A?K:S(A),L=K;return[()=>{let W=S(F());return X(W,L)?(L.data=W.data,L.isLoading=W.isLoading,L.isValidating=W.isValidating,L.error=W.error,L):(L=W,W)},()=>fe]},[n,l]),ne=(0,Zt.useSyncExternalStore)((0,U.useCallback)(T=>I(l,(S,j)=>{X(j,S)||T()}),[n,l]),ke[0],ke[1]),yt=!R.current,pr=h[l]&&h[l].length>0,ue=ne.data,oe=y(ue)?b&&Pe(b)?ht(b):b:ue,xe=ne.error,Ke=(0,U.useRef)(oe),Se=$?y(ue)?y(Ke.current)?oe:Ke.current:ue:oe,$t=pr&&!y(xe)?!1:yt&&!y(c)?c:k().isPaused()?!1:o?y(oe)?!1:i:y(oe)||i,wt=!!(l&&t&&yt&&$t),mr=y(ne.isValidating)?wt:ne.isValidating,gr=y(ne.isLoading)?wt:ne.isLoading,$e=(0,U.useCallback)(async T=>{let S=C.current;if(!l||!S||w.current||k().isPaused())return!1;let j,A,K=!0,fe=T||{},L=!f[l]||!fe.dedupe,W=()=>De?!w.current&&l===x.current&&R.current:l===x.current,ee={isValidating:!1,isLoading:!1},Et=()=>{N(ee)},kt=()=>{let H=f[l];H&&H[1]===A&&delete f[l]},xt={isValidating:!0};y(F().data)&&(xt.isLoading=!0);try{if(L&&(N(xt),r.loadingTimeout&&y(F().data)&&setTimeout(()=>{K&&W()&&k().onLoadingSlow(l,r)},r.loadingTimeout),f[l]=[S(D),we()]),[j,A]=f[l],j=await j,L&&setTimeout(kt,r.dedupingInterval),!f[l]||f[l][1]!==A)return L&&W()&&k().onDiscarded(l),!1;ee.error=P;let H=m[l];if(!y(H)&&(A<=H[0]||A<=H[1]||H[1]===0))return Et(),L&&W()&&k().onDiscarded(l),!1;let te=F().data;ee.data=s(te,j)?te:j,L&&W()&&k().onSuccess(j,l,r)}catch(H){kt();let te=k(),{shouldRetryOnError:Je}=te;te.isPaused()||(ee.error=H,L&&W()&&(te.onError(H,l,te),(Je===!0||B(Je)&&Je(H))&&(!k().revalidateOnFocus||!k().revalidateOnReconnect||G())&&te.onErrorRetry(H,l,te,br=>{let qe=h[l];qe&&qe[0]&&qe[0](se.ERROR_REVALIDATE_EVENT,br)},{retryCount:(fe.retryCount||0)+1,dedupe:!0})))}return K=!1,Et(),!0},[l,n]),vt=(0,U.useCallback)((...T)=>Le(n,x.current,...T),[]);if(ge(()=>{C.current=t,O.current=r,y(ue)||(Ke.current=ue)}),ge(()=>{if(!l)return;let T=$e.bind(P,pt),S=0;k().revalidateOnFocus&&(S=Date.now()+k().focusThrottleInterval);let A=qt(l,h,(K,fe={})=>{if(K==se.FOCUS_EVENT){let L=Date.now();k().revalidateOnFocus&&L>S&&G()&&(S=L+k().focusThrottleInterval,T())}else if(K==se.RECONNECT_EVENT)k().revalidateOnReconnect&&G()&&T();else{if(K==se.MUTATE_EVENT)return $e();if(K==se.ERROR_REVALIDATE_EVENT)return $e(fe)}});return w.current=!1,x.current=l,R.current=!0,N({_k:D}),$t&&(f[l]||(y(oe)||ce?T():lt(T))),()=>{w.current=!0,A()}},[l]),ge(()=>{let T;function S(){let A=B(u)?u(F().data):u;A&&T!==-1&&(T=setTimeout(j,A))}function j(){!F().error&&(d||k().isVisible())&&(p||k().isOnline())?$e(pt).then(S):S()}return S(),()=>{T&&(clearTimeout(T),T=-1)}},[u,d,p,l]),(0,U.useDebugValue)(Se),o&&y(oe)&&l){if(!De&&ce)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=t,O.current=r,w.current=!1;let T=E[l];if(!y(T)){let S=vt(T);ht(S)}if(y(xe)){let S=$e(pt);y(Se)||(S.status="fulfilled",S.value=!0),ht(S)}else throw xe}return{mutate:vt,get data(){return _.data=!0,Se},get error(){return _.error=!0,xe},get isValidating(){return _.isValidating=!0,mr},get isLoading(){return _.isLoading=!0,gr}}},Nn=pe.defineProperty(dt,"defaultValue",{value:je}),Yt=Jt(Zr);var Yr=(e,t)=>{let{data:r,mutate:n}=Yt(e,{fallbackData:t});return[r,n]},Ne=Yr;var Xr=()=>{let[e,t]=Ne("user"),[r,n]=Ne("teams"),[s,o]=Ne("selectedTeamId");return(0,Xt.useEffect)(()=>{(async()=>{if(!e||!r){let i=await We.LocalStorage.getItem("selectedTeamId");i&&o(i);let[u,d]=await Promise.all([Re(),_t()]);t(u),n(d),i&&(d.find($=>$.id===i)||o(void 0))}})()},[]),{user:e,selectedTeam:s,teams:r,updateSelectedTeam:async c=>{let i=r?.find(u=>u.id===c);i?(o(i.id),await We.LocalStorage.setItem("selectedTeamId",i.id)):(o(void 0),await We.LocalStorage.removeItem("selectedTeamId"))}}},Me=Xr;var Ee=require("react/jsx-runtime"),Qr=({onTeamChange:e})=>{let{selectedTeam:t,teams:r,updateSelectedTeam:n}=Me(),s=async a=>{a&&(await n(a),e())},o=r?.find(a=>a.id===t);return(0,Ee.jsxs)(ze.List.Dropdown,{value:t,tooltip:"Switch Team",onChange:async a=>await s(a),children:[o&&(0,Ee.jsx)(ze.List.Dropdown.Item,{title:o.name,value:o.id,icon:mt.Icon.TwoPeople}),r?.length&&r.filter(a=>a.id!==t).map(a=>(0,Ee.jsx)(ze.List.Dropdown.Item,{title:a.name,value:a.id,icon:mt.Icon.TwoPeople},a.id))]})},Qt=Qr;var g=ae(require("react")),v=require("@raycast/api");var le=ae(require("node:fs")),Ge=ae(require("node:path")),nr=ae(require("node:crypto"));var ar=require("react/jsx-runtime");var sr=require("node:url");function en(e){let t=(0,g.useRef)(e),r=(0,g.useRef)(0);return he(e,t.current)||(t.current=e,r.current+=1),(0,g.useMemo)(()=>t.current,[r.current])}function z(e){let t=(0,g.useRef)(e);return t.current=e,t}function tn(e,t){let r=e instanceof Error?e.message:String(e);return(0,v.showToast)({style:v.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??er(e),secondaryAction:t?.primaryAction?er(e):void 0})}var er=e=>{let t=!0,r="[Extension Name]...",n="";try{let a=JSON.parse((0,le.readFileSync)((0,Ge.join)(v.environment.assetsPath,"..","package.json"),"utf8"));r=`[${a.title}]...`,n=`https://raycast.com/${a.owner||a.author}/${a.name}`,(!a.owner||a.access==="public")&&(t=!1)}catch{}let s=v.environment.isDevelopment||t,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:s?"Copy Logs":"Report Error",onAction(a){a.hide(),s?v.Clipboard.copy(o):(0,v.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function gt(e,t,r){let n=(0,g.useRef)(0),[s,o]=(0,g.useState)({isLoading:!0}),a=z(e),c=z(r?.abortable),i=z(t||[]),u=z(r?.onError),d=z(r?.onData),p=z(r?.onWillExecute),$=z(r?.failureToastOptions),h=z(s.data),m=(0,g.useRef)(null),f=(0,g.useRef)({page:0}),E=(0,g.useRef)(!1),l=(0,g.useRef)(!0),D=(0,g.useRef)(50),R=(0,g.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),w=(0,g.useCallback)((...N)=>{let I=R();p.current?.(N),o(b=>({...b,isLoading:!0}));let M=rn(a.current)(...N);function _(b){return b.name=="AbortError"||I===n.current&&(u.current?u.current(b):v.environment.launchType!==v.LaunchType.Background&&tn(b,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(X){X.hide(),m.current?.(...i.current||[])}},...$.current}),o({error:b,isLoading:!1})),b}return typeof M=="function"?(E.current=!0,M(f.current).then(({data:b,hasMore:X,cursor:ke})=>(I===n.current&&(f.current&&(f.current.cursor=ke,f.current.lastItem=b?.[b.length-1]),d.current&&d.current(b,f.current),X&&(D.current=b.length),l.current=X,o(ne=>f.current.page===0?{data:b,isLoading:!1}:{data:(ne.data||[])?.concat(b),isLoading:!1})),b),b=>(l.current=!1,_(b)))):(E.current=!1,M.then(b=>(I===n.current&&(d.current&&d.current(b),o({data:b,isLoading:!1})),b),_))},[d,u,i,a,o,m,p,f,$,R]);m.current=w;let x=(0,g.useCallback)(()=>{f.current={page:0};let N=i.current||[];return w(...N)},[w,i]),C=(0,g.useCallback)(async(N,I)=>{let M;try{if(I?.optimisticUpdate){R(),typeof I?.rollbackOnError!="function"&&I?.rollbackOnError!==!1&&(M=structuredClone(h.current?.value));let _=I.optimisticUpdate;o(b=>({...b,data:_(b.data)}))}return await N}catch(_){if(typeof I?.rollbackOnError=="function"){let b=I.rollbackOnError;o(X=>({...X,data:b(X.data)}))}else I?.optimisticUpdate&&I?.rollbackOnError!==!1&&o(b=>({...b,data:M}));throw _}finally{I?.shouldRevalidateAfter!==!1&&(v.environment.launchType===v.LaunchType.Background||v.environment.commandMode==="menu-bar"?await x():x())}},[x,h,o,R]),O=(0,g.useCallback)(()=>{f.current.page+=1;let N=i.current||[];w(...N)},[f,i,w]);(0,g.useEffect)(()=>{f.current={page:0},r?.execute!==!1?w(...t||[]):R()},[en([t,r?.execute,w]),c,f]),(0,g.useEffect)(()=>()=>{R()},[R]);let k=r?.execute!==!1?s.isLoading:!1,G={...s,isLoading:k},F=E.current?{pageSize:D.current,hasMore:l.current,onLoadMore:O}:void 0;return{...G,revalidate:x,mutate:C,pagination:F}}function rn(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function tr(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function nn(e){return e instanceof URLSearchParams?e.toString():e}function or(e,t=[]){function r(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=nn(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let s=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),a=s.exec(o)?.[1]??"unknown:["+o+"]";a=a.toLowerCase();let c=null;if((c=t.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else t.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(a!=="object"&&a!=="function"&&a!=="asyncfunction")if(this["_"+a])this["_"+a](n);else throw new Error('Unknown object type "'+a+'"');else{let i=Object.keys(n);i=i.sort(),tr(n)||i.splice(0,0,"prototype","__proto__","constructor"),r("object:"+i.length+":");let u=this;return i.forEach(function(d){u.dispatch(d),r(":"),u.dispatch(n[d]),r(",")})}},_array:function(n,s){s=typeof s<"u"?s:!1;let o=this;if(r("array:"+n.length+":"),!s||n.length<=1){n.forEach(function(i){o.dispatch(i)});return}let a=[],c=n.map(function(i){let u=an(),d=t.slice();return or(u,d).dispatch(i),a=a.concat(d.slice(t.length)),u.read().toString()});t=t.concat(a),c.sort(),this._array(c,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),tr(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let s=Array.from(n);this._array(s,!0)},_set:function(n){r("set:");let s=Array.from(n);this._array(s,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function an(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function sn(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function on(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function Be(e){let t=nr.default.createHash("sha1");return or(t).dispatch(e),t.digest("hex")}var cn=Symbol("cache without namespace"),rr=new Map;function ln(e,t,r){let n=r?.cacheNamespace||cn,s=rr.get(n)||rr.set(n,new v.Cache({namespace:r?.cacheNamespace})).get(n);if(!s)throw new Error("Missing cache");let o=z(e),a=z(t),c=(0,g.useSyncExternalStore)(s.subscribe,()=>{try{return s.get(o.current)}catch(p){console.error("Could not get Cache data:",p);return}}),i=(0,g.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,on)}catch(p){return console.warn("The cached data is corrupted",p),a.current}}else return a.current},[c,a]),u=z(i),d=(0,g.useCallback)(p=>{let $=typeof p=="function"?p(u.current):p;if(typeof $>"u")s.set(o.current,"undefined");else{let h=JSON.stringify($,sn);s.set(o.current,h)}return $},[s,o,u]);return[i,d]}var be=Symbol();function un(e,t,r){let{initialData:n,keepPreviousData:s,internal_cacheKeySuffix:o,...a}=r||{},c=(0,g.useRef)(null),[i,u]=ln(Be(t||[])+o,be,{cacheNamespace:Be(e)}),d=(0,g.useRef)(i!==be?i:n),p=(0,g.useRef)(void 0),{mutate:$,revalidate:h,...m}=gt(e,t||[],{...a,onData(R,w){p.current=w,a.onData&&a.onData(R,w),!(w&&w.page>0)&&(c.current="promise",d.current=R,u(R))}}),f,E=m.pagination;p.current&&p.current.page>0&&m.data?f=m.data:c.current==="promise"?f=d.current:s&&i!==be?(f=i,E&&(E.hasMore=!0,E.pageSize=i.length)):s&&i===be?f=d.current:i!==be?(f=i,E&&(E.hasMore=!0,E.pageSize=i.length)):f=n;let l=z(f),D=(0,g.useCallback)(async(R,w)=>{let x;try{if(w?.optimisticUpdate){typeof w?.rollbackOnError!="function"&&w?.rollbackOnError!==!1&&(x=structuredClone(l.current));let C=w.optimisticUpdate(l.current);c.current="cache",d.current=C,u(C)}return await $(R,{shouldRevalidateAfter:w?.shouldRevalidateAfter})}catch(C){if(typeof w?.rollbackOnError=="function"){let O=w.rollbackOnError(l.current);c.current="cache",d.current=O,u(O)}else w?.optimisticUpdate&&w?.rollbackOnError!==!1&&(c.current="cache",d.current=x,u(x));throw C}},[u,$,l,d,c]);return(0,g.useEffect)(()=>{i!==be&&(c.current="cache",d.current=i)},[i]),{data:f,isLoading:m.isLoading,error:m.error,mutate:p.current&&p.current.page>0?$:D,pagination:E,revalidate:h}}function fn(e){if(e){let t=hn(e);if(!t)return!1;if(t.subtype==="json"||t.suffix==="json"||t.suffix&&/\bjson\b/i.test(t.suffix)||t.subtype&&/\bjson\b/i.test(t.subtype))return!0}return!1}var dn=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function hn(e){let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim(),n=dn.exec(r.toLowerCase().toLowerCase());if(!n)return;let s=n[1],o=n[2],a,c=o.lastIndexOf("+");return c!==-1&&(a=o.substring(c+1),o=o.substring(0,c)),{type:s,subtype:o,suffix:a}}async function pn(e){if(!e.ok)throw new Error(e.statusText);let t=e.headers.get("content-type");return t&&fn(t)?await e.json():await e.text()}function mn(e){return{data:e,hasMore:!1}}function ir(e,t){let{parseResponse:r,mapResult:n,initialData:s,execute:o,keepPreviousData:a,onError:c,onData:i,onWillExecute:u,failureToastOptions:d,...p}=t||{},$={initialData:s,execute:o,keepPreviousData:a,onError:c,onData:i,onWillExecute:u,failureToastOptions:d},h=z(r||pn),m=z(n||mn),f=(0,g.useRef)(null),E=(0,g.useRef)(null),l=typeof e=="function"?e({page:0}):void 0;(!f.current||typeof E.current>"u"||E.current!==l)&&(f.current=e),E.current=l;let D=(0,g.useRef)(null),R=(0,g.useCallback)((C,O)=>async k=>{let G=await fetch(C(k),{signal:D.current?.signal,...O}),F=await h.current(G);return m.current?.(F)},[h,m]),w=(0,g.useCallback)(async(C,O)=>{let k=await fetch(C,{signal:D.current?.signal,...O}),G=await h.current(k);return m.current(G)?.data},[h,m]),x=(0,g.useMemo)(()=>E.current?R:w,[E,w,R]);return un(x,[f.current,p],{...$,internal_cacheKeySuffix:E.current+Be(m.current)+Be(h.current),abortable:D})}function cr(e,t){let r=n=>n.startsWith("http")?n:`https://${n}`;try{let n=c=>c.startsWith("http")?c:`https://${c}`,o=(typeof e=="string"?new sr.URL(n(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:t?.fallback??v.Icon.Link,mask:t?.mask};case"apple":return{source:t?.fallback??v.Icon.Link,mask:t?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${o}.ico`,fallback:t?.fallback??v.Icon.Link,mask:t?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${t?.size??64}&domain=${o}`,fallback:t?.fallback??v.Icon.Link,mask:t?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${o}&size=${t?.size??64}`,fallback:t?.fallback??v.Icon.Link,mask:t?.mask}}}catch(n){return console.error(n),v.Icon.Link}}var Z=require("react/jsx-runtime"),gn=()=>{let{selectedTeam:e,user:t,teams:r}=Me(),n=At(e),{isLoading:s,data:o,revalidate:a}=ir(n,{headers:Rt,mapResult(u){return{data:u.domains}},initialData:[]}),c=()=>{a()},i=u=>`https://vercel.com/${r?.find($=>$.id===e)?.slug||t?.username}/~/domains/${u}`;return(0,Z.jsx)(Y.List,{searchBarPlaceholder:"Search Domains...",navigationTitle:"Results",isLoading:s,searchBarAccessory:(0,Z.jsx)(Z.Fragment,{children:t&&(0,Z.jsx)(Qt,{onTeamChange:c})}),children:o.map(u=>(0,Z.jsx)(Y.List.Item,{id:u.id,icon:cr(`https://${u.name}`,{fallback:Y.Icon.Dot}),title:u.name,subtitle:u.serviceType==="external"?"Third Party":u.serviceType,actions:(0,Z.jsxs)(Y.ActionPanel,{children:[(0,Z.jsx)(Y.Action.OpenInBrowser,{title:`Visit ${u.name}`,url:`https://${u.name}`}),u.serviceType==="zeit.world"&&(0,Z.jsx)(Y.Action.OpenInBrowser,{title:"Visit on Vercel",url:i(u.name),icon:Y.Icon.Globe,shortcut:{macOS:{modifiers:["cmd","opt"],key:"v"},Windows:{modifiers:["ctrl","opt"],key:"v"}}})]}),accessories:[{date:new Date(u.createdAt)}]},u.id))})},lr=gn;var bn=async()=>{if(!await Re())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},ur=bn;var Q=require("@raycast/api"),He=require("react/jsx-runtime"),yn=()=>(0,He.jsx)(Q.Detail,{markdown:`# ERROR 

 Invalid token detected. Please set one in the settings.`,actions:(0,He.jsx)(Q.ActionPanel,{children:(0,He.jsx)(Q.Action,{icon:Q.Icon.Gear,title:"Open Extension Preferences",onAction:Q.openExtensionPreferences})})}),fr=yn;var dr=require("@raycast/api"),ye=require("react/jsx-runtime"),$n=({children:e})=>{let{isLoading:t,error:r}=gt(ur,[],{failureToastOptions:{title:"Invalid token detected. Please set one in the settings."}});return t?(0,ye.jsx)(dr.Detail,{isLoading:!0}):r?(0,ye.jsx)(fr,{}):(0,ye.jsx)(ye.Fragment,{children:e})},hr=$n;var bt=require("react/jsx-runtime");function wn(){return(0,bt.jsx)(hr,{children:(0,bt.jsx)(lr,{})})}var vn=wn;
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
