"use strict";var er=Object.create;var ve=Object.defineProperty;var tr=Object.getOwnPropertyDescriptor;var rr=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,ar=Object.prototype.hasOwnProperty;var sr=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ht=(e,r)=>{for(var t in r)ve(e,t,{get:r[t],enumerable:!0})},pt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of rr(r))!ar.call(e,a)&&a!==t&&ve(e,a,{get:()=>r[a],enumerable:!(n=tr(r,a))||n.enumerable});return e};var ne=(e,r,t)=>(t=e!=null?er(nr(e)):{},pt(r||!e||!e.__esModule?ve(t,"default",{value:e,enumerable:!0}):t,e)),ir=e=>pt(ve({},"__esModule",{value:!0}),e);var it=sr((at,st)=>{(function(e,r){typeof at=="object"&&typeof st<"u"?st.exports=r():typeof define=="function"&&define.amd?define(r):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=r()})(at,(function(){"use strict";var e=1e3,r=6e4,t=36e5,n="millisecond",a="second",i="minute",s="hour",o="day",u="week",y="month",w="quarter",p="year",P="date",v="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var m=["th","st","nd","rd"],f=$%100;return"["+$+(m[(f-20)%10]||m[f]||m[0])+"]"}},l=function($,m,f){var d=String($);return!d||d.length>=m?$:""+Array(m+1-d.length).join(f)+$},b={s:l,z:function($){var m=-$.utcOffset(),f=Math.abs(m),d=Math.floor(f/60),h=f%60;return(m<=0?"+":"-")+l(d,2,"0")+":"+l(h,2,"0")},m:function $(m,f){if(m.date()<f.date())return-$(f,m);var d=12*(f.year()-m.year())+(f.month()-m.month()),h=m.clone().add(d,y),x=f-h<0,S=m.clone().add(d+(x?-1:1),y);return+(-(d+(f-h)/(x?h-S:S-h))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:y,y:p,w:u,d:o,D:P,h:s,m:i,s:a,ms:n,Q:w}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",A={};A[E]=_;var M="$isDayjsObject",W=function($){return $ instanceof de||!(!$||!$[M])},J=function $(m,f,d){var h;if(!m)return E;if(typeof m=="string"){var x=m.toLowerCase();A[x]&&(h=x),f&&(A[x]=f,h=x);var S=m.split("-");if(!h&&S.length>1)return $(S[0])}else{var L=m.name;A[L]=m,h=L}return!d&&h&&(E=h),h||!d&&E},j=function($,m){if(W($))return $.clone();var f=typeof m=="object"?m:{};return f.date=$,f.args=arguments,new de(f)},O=b;O.l=J,O.i=W,O.w=function($,m){return j($,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var de=(function(){function $(f){this.$L=J(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[M]=!0}var m=$.prototype;return m.parse=function(f){this.$d=(function(d){var h=d.date,x=d.utc;if(h===null)return new Date(NaN);if(O.u(h))return new Date;if(h instanceof Date)return new Date(h);if(typeof h=="string"&&!/Z$/i.test(h)){var S=h.match(I);if(S){var L=S[2]-1||0,N=(S[7]||"0").substring(0,3);return x?new Date(Date.UTC(S[1],L,S[3]||1,S[4]||0,S[5]||0,S[6]||0,N)):new Date(S[1],L,S[3]||1,S[4]||0,S[5]||0,S[6]||0,N)}}return new Date(h)})(f),this.init()},m.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return this.$d.toString()!==v},m.isSame=function(f,d){var h=j(f);return this.startOf(d)<=h&&h<=this.endOf(d)},m.isAfter=function(f,d){return j(f)<this.startOf(d)},m.isBefore=function(f,d){return this.endOf(d)<j(f)},m.$g=function(f,d,h){return O.u(f)?this[d]:this.set(h,f)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(f,d){var h=this,x=!!O.u(d)||d,S=O.p(f),L=function(se,B){var re=O.w(h.$u?Date.UTC(h.$y,B,se):new Date(h.$y,B,se),h);return x?re:re.endOf(o)},N=function(se,B){return O.w(h.toDate()[se].apply(h.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(B)),h)},V=this.$W,z=this.$M,Y=this.$D,fe="set"+(this.$u?"UTC":"");switch(S){case p:return x?L(1,0):L(31,11);case y:return x?L(1,z):L(0,z+1);case u:var ae=this.$locale().weekStart||0,ge=(V<ae?V+7:V)-ae;return L(x?Y-ge:Y+(6-ge),z);case o:case P:return N(fe+"Hours",0);case s:return N(fe+"Minutes",1);case i:return N(fe+"Seconds",2);case a:return N(fe+"Milliseconds",3);default:return this.clone()}},m.endOf=function(f){return this.startOf(f,!1)},m.$set=function(f,d){var h,x=O.p(f),S="set"+(this.$u?"UTC":""),L=(h={},h[o]=S+"Date",h[P]=S+"Date",h[y]=S+"Month",h[p]=S+"FullYear",h[s]=S+"Hours",h[i]=S+"Minutes",h[a]=S+"Seconds",h[n]=S+"Milliseconds",h)[x],N=x===o?this.$D+(d-this.$W):d;if(x===y||x===p){var V=this.clone().set(P,1);V.$d[L](N),V.init(),this.$d=V.set(P,Math.min(this.$D,V.daysInMonth())).$d}else L&&this.$d[L](N);return this.init(),this},m.set=function(f,d){return this.clone().$set(f,d)},m.get=function(f){return this[O.p(f)]()},m.add=function(f,d){var h,x=this;f=Number(f);var S=O.p(d),L=function(z){var Y=j(x);return O.w(Y.date(Y.date()+Math.round(z*f)),x)};if(S===y)return this.set(y,this.$M+f);if(S===p)return this.set(p,this.$y+f);if(S===o)return L(1);if(S===u)return L(7);var N=(h={},h[i]=r,h[s]=t,h[a]=e,h)[S]||1,V=this.$d.getTime()+f*N;return O.w(V,this)},m.subtract=function(f,d){return this.add(-1*f,d)},m.format=function(f){var d=this,h=this.$locale();if(!this.isValid())return h.invalidDate||v;var x=f||"YYYY-MM-DDTHH:mm:ssZ",S=O.z(this),L=this.$H,N=this.$m,V=this.$M,z=h.weekdays,Y=h.months,fe=h.meridiem,ae=function(B,re,ye,Ae){return B&&(B[re]||B(d,x))||ye[re].slice(0,Ae)},ge=function(B){return O.s(L%12||12,B,"0")},se=fe||function(B,re,ye){var Ae=B<12?"AM":"PM";return ye?Ae.toLowerCase():Ae};return x.replace(R,(function(B,re){return re||(function(ye){switch(ye){case"YY":return String(d.$y).slice(-2);case"YYYY":return O.s(d.$y,4,"0");case"M":return V+1;case"MM":return O.s(V+1,2,"0");case"MMM":return ae(h.monthsShort,V,Y,3);case"MMMM":return ae(Y,V);case"D":return d.$D;case"DD":return O.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return ae(h.weekdaysMin,d.$W,z,2);case"ddd":return ae(h.weekdaysShort,d.$W,z,3);case"dddd":return z[d.$W];case"H":return String(L);case"HH":return O.s(L,2,"0");case"h":return ge(1);case"hh":return ge(2);case"a":return se(L,N,!0);case"A":return se(L,N,!1);case"m":return String(N);case"mm":return O.s(N,2,"0");case"s":return String(d.$s);case"ss":return O.s(d.$s,2,"0");case"SSS":return O.s(d.$ms,3,"0");case"Z":return S}return null})(B)||S.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(f,d,h){var x,S=this,L=O.p(d),N=j(f),V=(N.utcOffset()-this.utcOffset())*r,z=this-N,Y=function(){return O.m(S,N)};switch(L){case p:x=Y()/12;break;case y:x=Y();break;case w:x=Y()/3;break;case u:x=(z-V)/6048e5;break;case o:x=(z-V)/864e5;break;case s:x=z/t;break;case i:x=z/r;break;case a:x=z/e;break;default:x=z}return h?x:O.a(x)},m.daysInMonth=function(){return this.endOf(y).$D},m.$locale=function(){return A[this.$L]},m.locale=function(f,d){if(!f)return this.$L;var h=this.clone(),x=J(f,d,!0);return x&&(h.$L=x),h},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},$})(),Z=de.prototype;return j.prototype=Z,[["$ms",n],["$s",a],["$m",i],["$H",s],["$W",o],["$M",y],["$y",p],["$D",P]].forEach((function($){Z[$[1]]=function(m){return this.$g(m,$[0],$[1])}})),j.extend=function($,m){return $.$i||($(m,de,j),$.$i=!0),j},j.locale=J,j.isDayjs=W,j.unix=function($){return j(1e3*$)},j.en=A[E],j.Ls=A,j.p={},j}))});var Gr={};ht(Gr,{default:()=>Br});module.exports=ir(Gr);var Te=require("@raycast/api");var T=ne(require("react")),U=require("@raycast/api");var mt=Object.prototype.hasOwnProperty;function Ee(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&Ee(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(mt.call(e,t)&&++n&&!mt.call(r,t)||!(t in r)||!Ee(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var ie=ne(require("node:fs")),Ce=ne(require("node:path")),St=ne(require("node:crypto")),Tt=ne(require("node:child_process")),At=require("node:buffer"),pe=ne(require("node:stream")),vt=require("node:util");var Et=require("react/jsx-runtime");var We=globalThis;function or(e){let r=(0,T.useRef)(e),t=(0,T.useRef)(0);return Ee(e,r.current)||(r.current=e,t.current+=1),(0,T.useMemo)(()=>r.current,[t.current])}function G(e){let r=(0,T.useRef)(e);return r.current=e,r}function cr(e,r){let t=e instanceof Error?e.message:String(e);return(0,U.showToast)({style:U.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??gt(e),secondaryAction:r?.primaryAction?gt(e):void 0})}var gt=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,ie.readFileSync)((0,Ce.join)(U.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=U.environment.isDevelopment||r,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?U.Clipboard.copy(i):(0,U.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function lr(e,r,t){let n=(0,T.useRef)(0),[a,i]=(0,T.useState)({isLoading:!0}),s=G(e),o=G(t?.abortable),u=G(r||[]),y=G(t?.onError),w=G(t?.onData),p=G(t?.onWillExecute),P=G(t?.failureToastOptions),v=G(a.data),I=(0,T.useRef)(null),R=(0,T.useRef)({page:0}),_=(0,T.useRef)(!1),l=(0,T.useRef)(!0),b=(0,T.useRef)(50),E=(0,T.useCallback)(()=>(o.current&&(o.current.current?.abort(),o.current.current=new AbortController),++n.current),[o]),A=(0,T.useCallback)((...Z)=>{let $=E();p.current?.(Z),i(d=>({...d,isLoading:!0}));let m=ur(s.current)(...Z);function f(d){return d.name=="AbortError"||$===n.current&&(y.current?y.current(d):U.environment.launchType!==U.LaunchType.Background&&cr(d,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(h){h.hide(),I.current?.(...u.current||[])}},...P.current}),i({error:d,isLoading:!1})),d}return typeof m=="function"?(_.current=!0,m(R.current).then(({data:d,hasMore:h,cursor:x})=>($===n.current&&(R.current&&(R.current.cursor=x,R.current.lastItem=d?.[d.length-1]),w.current&&w.current(d,R.current),h&&(b.current=d.length),l.current=h,i(S=>R.current.page===0?{data:d,isLoading:!1}:{data:(S.data||[])?.concat(d),isLoading:!1})),d),d=>(l.current=!1,f(d)))):(_.current=!1,m.then(d=>($===n.current&&(w.current&&w.current(d),i({data:d,isLoading:!1})),d),f))},[w,y,u,s,i,I,p,R,P,E]);I.current=A;let M=(0,T.useCallback)(()=>{R.current={page:0};let Z=u.current||[];return A(...Z)},[A,u]),W=(0,T.useCallback)(async(Z,$)=>{let m;try{if($?.optimisticUpdate){E(),typeof $?.rollbackOnError!="function"&&$?.rollbackOnError!==!1&&(m=structuredClone(v.current?.value));let f=$.optimisticUpdate;i(d=>({...d,data:f(d.data)}))}return await Z}catch(f){if(typeof $?.rollbackOnError=="function"){let d=$.rollbackOnError;i(h=>({...h,data:d(h.data)}))}else $?.optimisticUpdate&&$?.rollbackOnError!==!1&&i(d=>({...d,data:m}));throw f}finally{$?.shouldRevalidateAfter!==!1&&(U.environment.launchType===U.LaunchType.Background||U.environment.commandMode==="menu-bar"?await M():M())}},[M,v,i,E]),J=(0,T.useCallback)(()=>{R.current.page+=1;let Z=u.current||[];A(...Z)},[R,u,A]);(0,T.useEffect)(()=>{R.current={page:0},t?.execute!==!1?A(...r||[]):E()},[or([r,t?.execute,A]),o,R]),(0,T.useEffect)(()=>()=>{E()},[E]);let j=t?.execute!==!1?a.isLoading:!1,O={...a,isLoading:j},de=_.current?{pageSize:b.current,hasMore:l.current,onLoadMore:J}:void 0;return{...O,revalidate:M,mutate:W,pagination:de}}function ur(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function yt(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function dr(e){return e instanceof URLSearchParams?e.toString():e}function Pt(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=dr(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(n),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let o=null;if((o=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+o+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let u=Object.keys(n);u=u.sort(),yt(n)||u.splice(0,0,"prototype","__proto__","constructor"),t("object:"+u.length+":");let y=this;return u.forEach(function(w){y.dispatch(w),t(":"),y.dispatch(n[w]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let i=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(u){i.dispatch(u)});return}let s=[],o=n.map(function(u){let y=fr(),w=r.slice();return Pt(y,w).dispatch(u),s=s.concat(w.slice(r.length)),y.read().toString()});r=r.concat(s),o.sort(),this._array(o,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),yt(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function fr(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function hr(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function pr(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function bt(e){let r=St.default.createHash("sha1");return Pt(r).dispatch(e),r.digest("hex")}var mr=Symbol("cache without namespace"),$t=new Map;function gr(e,r,t){let n=t?.cacheNamespace||mr,a=$t.get(n)||$t.set(n,new U.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let i=G(e),s=G(r),o=(0,T.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(i.current)}catch(p){console.error("Could not get Cache data:",p);return}}),u=(0,T.useMemo)(()=>{if(typeof o<"u"){if(o==="undefined")return;try{return JSON.parse(o,pr)}catch(p){return console.warn("The cached data is corrupted",p),s.current}}else return s.current},[o,s]),y=G(u),w=(0,T.useCallback)(p=>{let P=typeof p=="function"?p(y.current):p;if(typeof P>"u")a.set(i.current,"undefined");else{let v=JSON.stringify(P,hr);a.set(i.current,v)}return P},[a,i,y]);return[u,w]}var he=Symbol();function be(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:i,...s}=t||{},o=(0,T.useRef)(null),[u,y]=gr(bt(r||[])+i,he,{cacheNamespace:bt(e)}),w=(0,T.useRef)(u!==he?u:n),p=(0,T.useRef)(void 0),{mutate:P,revalidate:v,...I}=lr(e,r||[],{...s,onData(E,A){p.current=A,s.onData&&s.onData(E,A),!(A&&A.page>0)&&(o.current="promise",w.current=E,y(E))}}),R,_=I.pagination;p.current&&p.current.page>0&&I.data?R=I.data:o.current==="promise"?R=w.current:a&&u!==he?(R=u,_&&(_.hasMore=!0,_.pageSize=u.length)):a&&u===he?R=w.current:u!==he?(R=u,_&&(_.hasMore=!0,_.pageSize=u.length)):R=n;let l=G(R),b=(0,T.useCallback)(async(E,A)=>{let M;try{if(A?.optimisticUpdate){typeof A?.rollbackOnError!="function"&&A?.rollbackOnError!==!1&&(M=structuredClone(l.current));let W=A.optimisticUpdate(l.current);o.current="cache",w.current=W,y(W)}return await P(E,{shouldRevalidateAfter:A?.shouldRevalidateAfter})}catch(W){if(typeof A?.rollbackOnError=="function"){let J=A.rollbackOnError(l.current);o.current="cache",w.current=J,y(J)}else A?.optimisticUpdate&&A?.rollbackOnError!==!1&&(o.current="cache",w.current=M,y(M));throw W}},[y,P,l,w,o]);return(0,T.useEffect)(()=>{u!==he&&(o.current="cache",w.current=u)},[u]),{data:R,isLoading:I.isLoading,error:I.error,mutate:p.current&&p.current.page>0?P:b,pagination:_,revalidate:v}}var Pe=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Ve=Symbol.for("signal-exit emitter"),Ge=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),We[Ve])return We[Ve];Object.defineProperty(We,Ve,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let i of this.listeners[r])a=i(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},He=class{onExit(){return()=>{}}load(){}unload(){}},Ye=class{#o;#t;#e;#s;#i;#a;#n;#r;constructor(r){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new Ge,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,i=r;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(a+=i.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,t),o=t==="SIGHUP"?this.#o:t;s||r.kill(r.pid,o)}};this.#i=r.reallyExit,this.#s=r.emit}onExit(r,t){if(!Pe(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#l(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(r){return Pe(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#l(r,...t){let n=this.#s;if(r==="exit"&&Pe(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},ze=null,yr=(e,r)=>(ze||(ze=Pe(process)?new Ye(process):new He),ze.onExit(e,r));function br(e,{timeout:r}={}){let t=new Promise((o,u)=>{e.on("exit",(y,w)=>{o({exitCode:y,signal:w,timedOut:!1})}),e.on("error",y=>{u(y)}),e.stdin&&e.stdin.on("error",y=>{u(y)})}),n=yr(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,i=new Promise((o,u)=>{a=setTimeout(()=>{e.kill("SIGTERM"),u(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=t.finally(()=>{clearTimeout(a)});return Promise.race([i,s]).finally(()=>n())}var Ke=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function $r(e){let{encoding:r}=e,t=r==="buffer",n=new pe.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,i=[];return n.on("data",s=>{i.push(s),a+=s.length}),n.getBufferedValue=()=>t?Buffer.concat(i,a):i.join(""),n.getBufferedLength=()=>a,n}async function wt(e,r){let t=$r(r);return await new Promise((n,a)=>{let i=s=>{s&&t.getBufferedLength()<=At.constants.MAX_LENGTH&&(s.bufferedData=t.getBufferedValue()),a(s)};(async()=>{try{await(0,vt.promisify)(pe.default.pipeline)(e,t),n()}catch(s){i(s)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&i(new Ke)})}),t.getBufferedValue()}async function kt(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function wr({stdout:e,stderr:r},{encoding:t},n){let a=wt(e,{encoding:t}),i=wt(r,{encoding:t});try{return await Promise.all([n,a,i])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},kt(e,a),kt(r,i)])}}function kr(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function xt(e,r){return e.stripFinalNewline?kr(r):r}function xr({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function Sr({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:i,timedOut:s,options:o,parentError:u}){let w=`Command ${xr({timedOut:s,timeout:o?.timeout,signal:n,exitCode:a})}: ${i}`,p=t?`${w}
${t.message}`:w,P=[p,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=u,t.message=P,t.shortMessage=p,t.command=i,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function Tr({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:i,command:s,options:o,parentError:u}){if(t||n!==0||a!==null)throw Sr({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:s,timedOut:i,options:o,parentError:u});return e}var De=(function(e){return e.Required="required",e})({});function Be(e,r){if(e){if(typeof e=="function")return e(r);if(e==="required"){let t=typeof r<"u"&&r!==null;if(t)switch(typeof r){case"string":t=r.length>0;break;case"object":Array.isArray(r)?t=r.length>0:r instanceof Date&&(t=r.getTime()>0);break;default:break}if(!t)return"The item is required"}}}function Ie(e){let{onSubmit:r,validation:t,initialValues:n={}}=e,[a,i]=(0,T.useState)(n),[s,o]=(0,T.useState)({}),u=(0,T.useRef)({}),y=G(t||{}),w=G(r),p=(0,T.useCallback)(l=>{u.current[l]?.focus()},[u]),P=(0,T.useCallback)(async l=>{let b=!1;for(let[A,M]of Object.entries(y.current)){let W=Be(M,l[A]);W&&(b||(b={},p(A)),b[A]=W)}if(b)return o(b),!1;let E=await w.current(l);return typeof E=="boolean"?E:!0},[y,w,p]),v=(0,T.useCallback)((l,b)=>{o(E=>({...E,[l]:b}))},[o]),I=(0,T.useCallback)(function(l,b){i(E=>({...E,[l]:typeof b=="function"?b(E[l]):b}))},[i]),R=(0,T.useMemo)(()=>new Proxy({},{get(l,b){let E=y.current[b],A=a[b];return{onChange(M){s[b]&&(Be(E,M)||v(b,void 0)),I(b,M)},onBlur(M){let W=Be(E,M.target.value);W&&v(b,W)},error:s[b],id:b,value:typeof A>"u"?null:A,ref:M=>{u.current[b]=M}}}}),[s,y,v,a,u,I]),_=(0,T.useCallback)(l=>{o({}),Object.entries(u.current).forEach(([b,E])=>{l?.[b]||E?.reset()}),l&&i(l)},[i,o,u]);return{handleSubmit:P,setValidationError:v,setValue:I,values:a,itemProps:R,focus:p,reset:_}}async function Ct(e,r,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:i,...s}=Array.isArray(r)?t||{}:r||{},o=n!==!1?[]:["-ss"];a==="JavaScript"&&o.push("-l","JavaScript"),Array.isArray(r)&&o.push("-",...r);let u=Tt.default.spawn("osascript",o,{...s,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),y=br(u,{timeout:i??1e4});u.stdin.end(e);let[{error:w,exitCode:p,signal:P,timedOut:v},I,R]=await wr(u,{encoding:"utf8"},y),_=xt({stripFinalNewline:!0},I),l=xt({stripFinalNewline:!0},R);return Tr({stdout:_,stderr:l,error:w,exitCode:p,signal:P,timedOut:v,command:"osascript",options:t,parentError:new Error})}var Xt=require("react");var zt=require("child_process"),Bt=require("util"),K=require("@raycast/api");var et={};ht(et,{exclude:()=>Rr,extract:()=>Xe,parse:()=>Qe,parseUrl:()=>jt,pick:()=>Wt,stringify:()=>Nt,stringifyUrl:()=>Ft});var Rt="%[a-f0-9]{2}",Dt=new RegExp("("+Rt+")|([^%]+?)","gi"),It=new RegExp("("+Rt+")+","gi");function Je(e,r){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;r=r||1;let t=e.slice(0,r),n=e.slice(r);return Array.prototype.concat.call([],Je(t),Je(n))}function Ar(e){try{return decodeURIComponent(e)}catch{let r=e.match(Dt)||[];for(let t=1;t<r.length;t++)e=Je(r,t).join(""),r=e.match(Dt)||[];return e}}function vr(e){let r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=It.exec(e);for(;t;){try{r[t[0]]=decodeURIComponent(t[0])}catch{let a=Ar(t[0]);a!==t[0]&&(r[t[0]]=a)}t=It.exec(e)}r["%C2"]="\uFFFD";let n=Object.keys(r);for(let a of n)e=e.replace(new RegExp(a,"g"),r[a]);return e}function Ze(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return vr(e)}}function Ot(e,r){let t={};if(Array.isArray(r))for(let n of r){let a=Object.getOwnPropertyDescriptor(e,n);a?.enumerable&&Object.defineProperty(t,n,a)}else for(let n of Reflect.ownKeys(e)){let a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){let i=e[n];r(n,i,e)&&Object.defineProperty(t,n,a)}}return t}function Re(e,r){if(!(typeof e=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||r==="")return[];let t=e.indexOf(r);return t===-1?[]:[e.slice(0,t),e.slice(t+r.length)]}var Er=e=>e==null,Pr=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`),qe=Symbol("encodeFragmentIdentifier");function Cr(e){switch(e.arrayFormat){case"index":return r=>(t,n)=>{let a=t.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[F(r,e),"[",a,"]"].join("")]:[...t,[F(r,e),"[",F(a,e),"]=",F(n,e)].join("")]};case"bracket":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[F(r,e),"[]"].join("")]:[...t,[F(r,e),"[]=",F(n,e)].join("")];case"colon-list-separator":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[F(r,e),":list="].join("")]:[...t,[F(r,e),":list=",F(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let r=e.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[F(t,e),r,F(a,e)].join("")]:[[n,F(a,e)].join(e.arrayFormatSeparator)])}default:return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,F(r,e)]:[...t,[F(r,e),"=",F(n,e)].join("")]}}function Dr(e){let r;switch(e.arrayFormat){case"index":return(t,n,a)=>{if(r=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),!r){a[t]=n;return}a[t]===void 0&&(a[t]={}),a[t][r[1]]=n};case"bracket":return(t,n,a)=>{if(r=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"colon-list-separator":return(t,n,a)=>{if(r=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"comma":case"separator":return(t,n,a)=>{let s=typeof n=="string"&&n.includes(e.arrayFormatSeparator)?n.split(e.arrayFormatSeparator).map(o=>oe(o,e)):n===null?n:oe(n,e);a[t]=s};case"bracket-separator":return(t,n,a)=>{let i=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!i){a[t]=n&&oe(n,e);return}let s=n===null?[]:oe(n,e).split(e.arrayFormatSeparator);if(a[t]===void 0){a[t]=s;return}a[t]=[...a[t],...s]};default:return(t,n,a)=>{if(a[t]===void 0){a[t]=n;return}a[t]=[...[a[t]].flat(),n]}}}function Lt(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function F(e,r){return r.encode?r.strict?Pr(e):encodeURIComponent(e):e}function oe(e,r){return r.decode?Ze(e):e}function _t(e){return Array.isArray(e)?e.sort():typeof e=="object"?_t(Object.keys(e)).sort((r,t)=>Number(r)-Number(t)).map(r=>e[r]):e}function Mt(e){let r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function Ir(e){let r="",t=e.indexOf("#");return t!==-1&&(r=e.slice(t)),r}function Ut(e,r,t){return t==="string"&&typeof e=="string"?e:typeof t=="function"&&typeof e=="string"?t(e):t==="boolean"&&e===null?!0:t==="boolean"&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":t==="boolean"&&e!==null&&(e.toLowerCase()==="1"||e.toLowerCase()==="0")?e.toLowerCase()==="1":t==="string[]"&&r.arrayFormat!=="none"&&typeof e=="string"?[e]:t==="number[]"&&r.arrayFormat!=="none"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?[Number(e)]:t==="number"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):e}function Xe(e){e=Mt(e);let r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function Qe(e,r){r={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...r},Lt(r.arrayFormatSeparator);let t=Dr(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let a of e.split("&")){if(a==="")continue;let i=r.decode?a.replaceAll("+"," "):a,[s,o]=Re(i,"=");s===void 0&&(s=i),o=o===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?o:oe(o,r),t(oe(s,r),o,n)}for(let[a,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&r.types[a]!=="string")for(let[s,o]of Object.entries(i)){let u=r.types[a],y=typeof u=="function"?u:u?u.replace("[]",""):void 0;i[s]=Ut(o,r,y)}else typeof i=="object"&&i!==null&&r.types[a]==="string"?n[a]=Object.values(i).join(r.arrayFormatSeparator):n[a]=Ut(i,r,r.types[a]);return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce((a,i)=>{let s=n[i];return a[i]=s&&typeof s=="object"&&!Array.isArray(s)?_t(s):s,a},Object.create(null))}function Nt(e,r){if(!e)return"";r={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...r},Lt(r.arrayFormatSeparator);let t=s=>r.skipNull&&Er(e[s])||r.skipEmptyString&&e[s]==="",n=Cr(r),a={};for(let[s,o]of Object.entries(e))t(s)||(a[s]=o);let i=Object.keys(a);return r.sort!==!1&&i.sort(r.sort),i.map(s=>{let o=e[s];if(r.replacer&&(o=r.replacer(s,o),o===void 0)||o===void 0)return"";if(o===null)return F(s,r);if(Array.isArray(o)){if(o.length===0&&r.arrayFormat==="bracket-separator")return F(s,r)+"[]";let u=o;return r.replacer&&(u=o.map((y,w)=>r.replacer(`${s}[${w}]`,y)).filter(y=>y!==void 0)),u.reduce(n(s),[]).join("&")}return F(s,r)+"="+F(o,r)}).filter(s=>s.length>0).join("&")}function jt(e,r){r={decode:!0,...r};let[t,n]=Re(e,"#");return t===void 0&&(t=e),{url:t?.split("?")?.[0]??"",query:Qe(Xe(e),r),...r&&r.parseFragmentIdentifier&&n?{fragmentIdentifier:oe(n,r)}:{}}}function Ft(e,r){r={encode:!0,strict:!0,[qe]:!0,...r};let t=Mt(e.url).split("?")[0]||"",n=Xe(e.url),a={...Qe(n,{sort:!1,...r}),...e.query},i=Nt(a,r);i&&=`?${i}`;let s=Ir(e.url);if(typeof e.fragmentIdentifier=="string"){let o=new URL(t);o.hash=e.fragmentIdentifier,s=r[qe]?o.hash:`#${e.fragmentIdentifier}`}return`${t}${i}${s}`}function Wt(e,r,t){t={parseFragmentIdentifier:!0,[qe]:!1,...t};let{url:n,query:a,fragmentIdentifier:i}=jt(e,t);return Ft({url:n,query:Ot(a,r),fragmentIdentifier:i},t)}function Rr(e,r,t){let n=Array.isArray(r)?a=>!r.includes(a):(a,i)=>!r(a,i);return Wt(e,n,t)}var Vt=et;var $e=(0,K.getPreferenceValues)(),q=class extends Error{constructor(t,n,a,i){super(i?`${i}: ${t}`:t);this.type=n;this.originalError=a;this.operation=i;this.name="ThingsError"}},we=async(e,r)=>{try{let t=await Ct(`(function(){${e}})()`,{humanReadableOutput:!1,language:"JavaScript",timeout:6e4});return t?JSON.parse(t.replace(/:\s*undefined/g,": null")):void 0}catch(t){let a=(typeof t=="string"?t:t instanceof Error?t.message:String(t)).replace("execution error: Error: ","");throw a.match(/Application can't be found/i)?new q("Things application not found. Please make sure Things is installed and running.","APP_NOT_FOUND",a,r):a.match(/not allowed assistive access/i)||a.match(/permission/i)||a.match(/-1743/)?new q("Permission denied. Please grant Raycast access to Things in System Settings > Privacy & Security > Automation > Raycast > Things.","PERMISSION_DENIED",a,r):a.match(/doesn't understand/i)||a.match(/can't get/i)?new q("Things automation interface error. This might be due to a Things version incompatibility or the app not being ready.","EXECUTION_ERROR",a,r):a.match(/timed out/i)?new q("Command timed out. Things may be unresponsive or not running.","EXECUTION_ERROR",a,r):new q(`Unexpected error: ${a}`,"UNKNOWN_ERROR",a,r)}},Or={inbox:"TMInboxListSource",today:"TMTodayListSource",anytime:"TMNextListSource",upcoming:"TMCalendarListSource",someday:"TMSomedayListSource",logbook:"TMLogbookListSource",trash:"TMTrashListSource"},Gt=e=>we(`
  const things = Application('${$e.thingsAppIdentifier}');
  const todos = things.lists.byId('${Or[e]}').toDos();

  return todos.map(todo => {
    const props = todo.properties();

    let project = null;
    const projectRef = props.project;
    if (projectRef) {
      const projectProps = projectRef.properties();
      let projectArea = null;
      const projectAreaRef = projectProps.area;
      if (projectAreaRef) {
        const areaProps = projectAreaRef.properties();
        projectArea = { id: areaProps.id, name: areaProps.name };
      }
      project = {
        id: projectProps.id,
        name: projectProps.name,
        status: projectProps.status,
        tags: projectRef.tagNames(),
        dueDate: projectProps.dueDate ? projectProps.dueDate.toISOString() : null,
        activationDate: projectProps.activationDate ? projectProps.activationDate.toISOString() : null,
        area: projectArea,
      };
    }

    let area = null;
    const areaRef = props.area;
    if (areaRef && !projectRef) {
      const areaProps = areaRef.properties();
      area = { id: areaProps.id, name: areaProps.name };
    }

    return {
      id: props.id,
      name: props.name,
      status: props.status,
      notes: props.notes,
      tags: todo.tagNames(),
      dueDate: props.dueDate ? props.dueDate.toISOString() : null,
      activationDate: props.activationDate ? props.activationDate.toISOString() : null,
      isProject: props.pcls === "project",
      project,
      area,
    };
  });
`,`Get ${e} list`);var tt=(e,r,t)=>we(`
  const things = Application('${$e.thingsAppIdentifier}');
  things.toDos.byId('${e}').${r} = '${t}';
`,"Set todo property"),Ht=e=>we(`
  const things = Application('${$e.thingsAppIdentifier}');
  things.delete(things.toDos.byId('${e}'));
`,"Delete todo"),Yt=e=>we(`
  const things = Application('${$e.thingsAppIdentifier}');
  things.delete(things.projects.byId('${e}'));
`,"Delete project"),Ur="tag => tag.name()",Lr=`todo => {
  const props = todo.properties();
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: todo.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
  };
}`,_r=`project => {
  const props = project.properties();
  const areaRef = props.area;
  let area = null;
  if (areaRef) {
    const areaProps = areaRef.properties();
    area = { id: areaProps.id, name: areaProps.name, tags: areaRef.tagNames() };
  }
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: project.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
    area,
    todos: project.toDos().map(${Lr})
  };
}`,Mr=`todo => {
  const props = todo.properties();
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: todo.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
    isProject: props.pcls === "project",
  };
}`,Nr=`area => {
  const props = area.properties();
  return {
    id: props.id,
    name: props.name,
    tags: area.tagNames(),
    todos: area.toDos().map(${Mr})
  };
}`,jr=[{name:"tags",needs:["tags"],expr:`things.tags().map(${Ur})`},{name:"projects",needs:["projects","lists"],expr:`things.projects().map(${_r})`},{name:"areas",needs:["areas","lists"],expr:`things.areas().map(${Nr})`}];async function Oe(...e){let r=new Set(e),t=[`const things = Application('${$e.thingsAppIdentifier}');`,"const result = {};",...jr.filter(({needs:a})=>a.some(i=>r.has(i))).map(({name:a,expr:i})=>`result.${a} = ${i};`),"return result;"].join(`
`),n=await we(t,`Get ${e.join(", ")}`);return Object.fromEntries(e.map(a=>[a,a==="lists"?Fr(n.projects,n.areas):n[a]]))}function Fr(e=[],r=[]){let t=e.filter(a=>!a.area).map(a=>({...a,type:"project"})),n=[];return r.forEach(a=>{n.push({...a,type:"area"});let i=e.filter(s=>s.area&&s.area.id===a.id).map(s=>({...s,type:"project"}));n.push(...i)}),[...t,...n]}async function rt(e){await(0,Bt.promisify)(zt.exec)(`open -g "${e}"`)}function nt(e){return Vt.stringify(e,{skipNull:!0,skipEmptyString:!0})}async function Ue(e,r){let{authToken:t}=(0,K.getPreferenceValues)();if(!t)throw new Error("unauthorized");await rt(`things:///update?${nt({"auth-token":t,id:e,...r})}`)}async function Le(e,r){let{authToken:t}=(0,K.getPreferenceValues)();if(!t)throw new Error("unauthorized");await rt(`things:///update-project?${nt({"auth-token":t,id:e,...r})}`)}async function Kt(e){await rt(`things:///add?${nt(e)}`)}function _e(e,r){if(e instanceof Error&&e.message==="unauthorized"){(0,K.showToast)({style:K.Toast.Style.Failure,title:"This action needs an authentication token.",message:`Please set it in the extension preferences.
You can find your unique token in Things\u2019 settings. go to Things \u2192 Settings \u2192 General \u2192 Enable Things URLs \u2192 Manage`,primaryAction:{title:"Open Extension Preferences",onAction(t){(0,K.openExtensionPreferences)(),t.hide()}}});return}(0,K.showToast)({style:K.Toast.Style.Failure,title:r??"Something went wrong",message:e instanceof Error?e.message:String(e)})}var Jt=ne(it()),Zt=(e,r)=>`${e} ${r}${e>1?"s":""}`,ot=e=>e.charAt(0).toUpperCase()+e.slice(1),ct=e=>(0,Jt.default)(e).format("YYYY-MM-DD");var X=require("@raycast/api");var g=require("@raycast/api");var me=require("@raycast/api");var Me=require("react/jsx-runtime");function ke({error:e,onRetry:r}){let t=s=>{if(s instanceof q)switch(s.type){case"APP_NOT_FOUND":return{title:"Application Not Found",description:"The Things app is not running or not installed.",solutions:["**Start Things**: Open the Things app and make sure it's running","**Check Installation**: Verify Things is properly installed","**Restart**: Try quitting and restarting both Things and Raycast"],errorType:"Application Not Found"};case"PERMISSION_DENIED":return{title:"Permission Denied",description:"Raycast doesn't have permission to control Things.",solutions:["Open **System Settings** \u2192 **Privacy & Security** \u2192 **Automation**","Find **Raycast** in the list","Make sure **Things** is checked \u2705"],errorType:"Permission Denied"};case"EXECUTION_ERROR":return{title:"Things Communication Error",description:"There was an error communicating with Things.",solutions:["**Restart Things**: Quit and restart the Things app","**Wait and Retry**: If Things was just started, wait a moment and try again"],errorType:"Execution Error"};case"UNKNOWN_ERROR":return{title:"Unknown Error",description:"An unexpected error occurred while trying to communicate with Things.",solutions:["**Restart Both Apps**: Quit and restart both Things and Raycast","**Update**: Make sure both Things and Raycast are up to date"],errorType:"Unknown Error"}}return{title:"Error",description:"An error occurred while loading data from Things.",solutions:["Make sure Things is running","Check that Raycast has automation permissions","Try restarting both applications"],errorType:s.constructor.name}},n=(s,o)=>{let u=o instanceof q?o.originalError:o.message,y=o instanceof q?o.operation:void 0;return`# ${s.title}

${s.description}

## Solutions

${s.solutions.map((w,p)=>`${p+1}. ${w}`).join(`
`)}

## Technical Details

- Error Type: \`${s.errorType}\`${y?`
- Operation: \`${y}\``:""}
- Original Error: \`${u||"N/A"}\``},a=t(e),i=n(a,e);return(0,Me.jsx)(me.Detail,{markdown:i,actions:r?(0,Me.jsx)(me.ActionPanel,{children:(0,Me.jsx)(me.Action,{title:"Try Again",onAction:r})}):void 0})}var D=require("@raycast/api"),H={inbox:{title:"Inbox",icon:{source:D.Icon.Tray,tintColor:D.Color.Blue}},today:{title:"Today",icon:{source:D.Icon.Star,tintColor:D.Color.Yellow}},evening:{title:"This Evening",icon:{source:D.Icon.Moon,tintColor:D.Color.Purple}},tomorrow:{title:"Tomorrow",icon:{source:D.Icon.ArrowClockwise,tintColor:D.Color.Orange}},upcoming:{title:"Upcoming",icon:{source:D.Icon.Calendar,tintColor:D.Color.Red}},anytime:{title:"Anytime",icon:{source:D.Icon.Layers,tintColor:D.Color.Green}},someday:{title:"Someday",icon:{source:D.Icon.Folder,tintColor:D.Color.SecondaryText}},logbook:{title:"Logbook",icon:{source:D.Icon.CheckCircle,tintColor:D.Color.Green}},list:e=>({title:e.name,icon:e.type==="area"?{source:D.Icon.Folder,tintColor:D.Color.Green}:{source:D.Icon.Circle,tintColor:D.Color.Blue}})},xe={open:D.Icon.Circle,completed:{source:D.Icon.CheckCircle,tintColor:D.Color.Blue},canceled:{source:D.Icon.XMarkCircle,tintColor:D.Color.SecondaryText}},dn={open:D.Icon.Circle,completed:D.Icon.CheckCircle,canceled:D.Icon.XMarkCircle};function Ne(e,r){return D.AI.ask(`Break down a task into sub-tasks. The sub-tasks should be actionable. Each item should be separated by a new line. Return the sub-tasks in the same language as the task's title language.

Note that each task doesn't start with a hyphen or a number. This is important.

For example, for a task named "Fix bug", you could write:
Find the root cause
Fix the bug
Write tests to prevent regressions
Ship the fix.

Here's the task you need to break-down: "${e}"
${r.length>0?`For additional context, here are the task's notes: "${r}"`:""}

Sub-tasks:`)}var C=require("react/jsx-runtime");function je({title:e,commandListName:r,draftValues:t}){let{push:n}=(0,g.useNavigation)(),{data:a,isLoading:i,error:s}=be(()=>Oe("tags","lists")),o=a?.tags,u=a?.lists,{handleSubmit:y,itemProps:w,values:p,reset:P,focus:v,setValue:I}=Ie({async onSubmit(){let l={title:p.title,notes:p.notes,when:p.when==="upcoming"&&p.date?ct(p.date):p.when,"list-id":p.listId,deadline:p.deadline?ct(p.deadline):"",...p.tags.length>0&&{tags:p.tags.join(",")},"checklist-items":p["checklist-items"]};await Kt(l),await(0,g.showToast)({style:g.Toast.Style.Success,title:"Added new to-do",primaryAction:{title:"Go to list",shortcut:{modifiers:["cmd"],key:"g"},onAction(){let b;p.when==="today"||p.when==="evening"?b="today":p.when==="tomorrow"||p.when==="upcoming"?b="upcoming":p.when==="anytime"?b="anytime":p.when==="someday"?b="someday":p.when==="logbook"?b="logbook":p.when==="trash"?b="trash":b="inbox",n((0,C.jsx)(Se,{commandListName:b}))}}}),P({title:"",notes:"",tags:[],when:"",listId:"","checklist-items":"",deadline:null}),v("title")},initialValues:{title:e??t?.title??"",notes:t?.notes??"",tags:t?.tags??[],when:r??t?.when??null,"checklist-items":t?.["checklist-items"]??"",deadline:t?.deadline??null},validation:{title:De.Required}});async function R(){try{if(!p.title){await(0,g.showToast)({style:g.Toast.Style.Failure,title:"The to-do should have a title"});return}let l=await(0,g.showToast)({style:g.Toast.Style.Animated,title:"Generating checklist"}),b=await Ne(p.title,p.notes);I("checklist-items",b.trim()),v("checklist-items"),await l.hide()}catch(l){let b=typeof l=="string"?l:l instanceof Error?l.message:String(l);await(0,g.showToast)({style:g.Toast.Style.Failure,title:"Failed to generate check-list",message:b})}}if(s)return(0,C.jsx)(ke,{error:s});let _=new Date;return(0,C.jsxs)(g.Form,{isLoading:i,actions:(0,C.jsxs)(g.ActionPanel,{children:[(0,C.jsx)(g.Action.SubmitForm,{title:"Add New To-Do",onSubmit:y,icon:g.Icon.Plus}),g.environment.canAccess(g.AI)&&(0,C.jsx)(g.Action,{title:"Generate Checklist with AI",icon:g.Icon.BulletPoints,onAction:R}),(0,C.jsxs)(g.ActionPanel.Section,{children:[(0,C.jsx)(g.Action,{title:"Focus Title",icon:g.Icon.TextInput,onAction:()=>v("title"),shortcut:{modifiers:["cmd"],key:"1"}}),(0,C.jsx)(g.Action,{title:"Focus Notes",icon:g.Icon.TextInput,onAction:()=>v("notes"),shortcut:{modifiers:["cmd"],key:"2"}}),(0,C.jsx)(g.Action,{title:"Focus When",icon:g.Icon.TextInput,onAction:()=>v("when"),shortcut:{modifiers:["cmd"],key:"s"}}),(0,C.jsx)(g.Action,{title:"Focus List",icon:g.Icon.TextInput,onAction:()=>v("listId"),shortcut:{modifiers:["cmd","shift"],key:"m"}}),(0,C.jsx)(g.Action,{title:"Focus Tags",icon:g.Icon.TextInput,onAction:()=>v("tags"),shortcut:{modifiers:["cmd","shift"],key:"t"}}),(0,C.jsx)(g.Action,{title:"Focus Checklist",icon:g.Icon.TextInput,onAction:()=>v("checklist-items"),shortcut:{modifiers:["cmd","shift"],key:"c"}}),(0,C.jsx)(g.Action,{title:"Focus Deadline",icon:g.Icon.TextInput,onAction:()=>v("deadline"),shortcut:{modifiers:["cmd","shift"],key:"d"}})]})]}),enableDrafts:!e&&!r,children:[(0,C.jsx)(g.Form.TextField,{...w.title,title:"Title",placeholder:"New to-do"}),(0,C.jsx)(g.Form.TextArea,{...w.notes,title:"Notes",placeholder:"Write some notes (Markdown enabled)",enableMarkdown:!0}),(0,C.jsx)(g.Form.Separator,{}),(0,C.jsxs)(g.Form.Dropdown,{...w.when,title:"When",children:[(0,C.jsx)(g.Form.Dropdown.Item,{value:"",title:"No date"}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"today",...H.today}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"evening",...H.evening}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"tomorrow",...H.tomorrow}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"upcoming",...H.upcoming}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"anytime",...H.anytime}),(0,C.jsx)(g.Form.Dropdown.Item,{value:"someday",...H.someday})]}),p.when==="upcoming"&&(0,C.jsx)(g.Form.DatePicker,{...w.date,title:"Start Date",min:_}),u&&u.length>0?(0,C.jsxs)(g.Form.Dropdown,{...w.listId,title:"List",children:[(0,C.jsx)(g.Form.Dropdown.Item,{value:"",title:"Inbox",icon:{source:g.Icon.Tray,tintColor:g.Color.Blue}}),u.map(l=>(0,C.jsx)(g.Form.Dropdown.Item,{value:l.id,...H.list(l)},l.id))]}):null,o&&o.length>0?(0,C.jsx)(g.Form.TagPicker,{...w.tags,title:"Tags",children:o.map(l=>(0,C.jsx)(g.Form.TagPicker.Item,{value:l,title:l},l))}):null,(0,C.jsx)(g.Form.TextArea,{...w["checklist-items"],title:"Checklist Items",placeholder:"Items separated by new lines"}),(0,C.jsx)(g.Form.DatePicker,{...w.deadline,title:"Deadline",type:g.Form.DatePicker.Type.Date,min:_})]})}var ce=require("react/jsx-runtime");function lt({searchText:e,commandListName:r}){return(0,ce.jsx)(X.List.EmptyView,{title:"No to-dos found.",description:"Press \u2318 + K to create a new to-do or search in Things",actions:(0,ce.jsxs)(X.ActionPanel,{children:[(0,ce.jsx)(X.Action.Push,{icon:X.Icon.Plus,title:"Add New To-Do",target:(0,ce.jsx)(je,{title:e,commandListName:r})}),(0,ce.jsx)(X.Action.OpenInBrowser,{title:"Search in Things",icon:X.Icon.MagnifyingGlass,url:`things:///search?query=${e}`})]})})}var ee=require("@raycast/api"),ue=ne(it());var c=require("@raycast/api");var Q=require("@raycast/api");var le=require("react/jsx-runtime");function ut({todo:e,refreshTodos:r}){let{pop:t}=(0,Q.useNavigation)(),{handleSubmit:n,itemProps:a}=Ie({async onSubmit(i){try{e.isProject?await Le(e.id,{notes:i.notes,title:i.title}):await Ue(e.id,{notes:i.notes,title:i.title}),r(),t()}catch(s){_e(s)}},initialValues:{title:e.name,notes:e.notes},validation:{title:De.Required}});return(0,le.jsxs)(Q.Form,{navigationTitle:`Edit "${e.name}"`,actions:(0,le.jsx)(Q.ActionPanel,{children:(0,le.jsx)(Q.Action.SubmitForm,{title:"Edit To-Do",onSubmit:n})}),children:[(0,le.jsx)(Q.Form.TextField,{...a.title,title:"Title",placeholder:"New to-do"}),(0,le.jsx)(Q.Form.TextArea,{...a.notes,title:"Notes",placeholder:"Write some notes (Markdown enabled)",enableMarkdown:!0})]})}var k=require("react/jsx-runtime"),qt=require("react"),Wr=/([a-zA-Z][a-zA-Z0-9.+-]+):(?:\/\/\S+|%\S+)/;function dt({todo:e,refreshTodos:r,commandListName:t,tags:n,lists:a}){let i=n?.filter(l=>!e.tags?.includes(l))??[],s=e.area||e.project?.area,o=e.notes.match(Wr)?.[0];async function u(l,b){try{e.isProject?await Le(e.id,l):await Ue(e.id,l),await(0,c.showToast)({style:c.Toast.Style.Success,title:b.title,message:b.message??e.name}),r()}catch(E){_e(E)}}async function y(){let l=await(0,c.showToast)({style:c.Toast.Style.Animated,title:"Generating checklist",message:e.name}),b=await Ne(e.name,e.notes);await(0,c.confirmAlert)({title:"Add these items to the checklist?",message:b.trim(),icon:{source:c.Icon.Stars,tintColor:c.Color.Yellow}})?await u({"append-checklist-items":b.trim()},{title:"Added checklist items"}):await l.hide()}async function w(){let l=await(0,c.showToast)({style:c.Toast.Style.Animated,title:"Making to-do actionable",message:e.name}),b=(await c.AI.ask(`Make a task title more actionable. Here are some examples:
Yoga \u2192 Do a yoga session
Fix bug \u2192 Investigate and fix the bug
Write post \u2192 Write a blog post about \u2026

Return the result in the same language than the task's title (e.g if the task title is written in French, the checklist should be written in French as well)
Here's the task title you need to make actionable: "${e.name}
${e.notes?`For additional context, here are the task's notes: "${e.notes}"`:""}

New title:
        `,{creativity:.2})).trim();await(0,c.confirmAlert)({title:"Change to-do's title?",message:`The new title will be: "${b}"`,icon:{source:c.Icon.Stars,tintColor:c.Color.Yellow}})?await u({title:b},{title:"Made to-do title actionable",message:b}):l.hide()}async function p(l){await u({when:l},{title:l==="anytime"?"Removed date":"Scheduled to-do"})}async function P(l){await u({"list-id":l},{title:"Made to-do title actionable",message:"Moved to-do"})}async function v(l){await u({"add-tags":l},{title:"Added tag"})}async function I(l){await u({deadline:l===null?"":l},{title:l===null?"Removed deadline":"Set deadline"})}async function R(){let l=e.isProject,b=l?"Delete Project":"Delete To-Do",E=l?"Are you sure you want to delete this project?":"Are you sure you want to delete this to-do?",A=l?Yt:Ht;await(0,c.confirmAlert)({title:b,message:E,icon:{source:c.Icon.Trash,tintColor:c.Color.Red}})&&(await A(e.id),b=l?"Deleted project":"Deleted to-do",await(0,c.showToast)({style:c.Toast.Style.Success,title:b,message:e.name}),r())}function _(l){let b=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),A=String(l.getDate()).padStart(2,"0"),M=`${b}-${E}-${A}`;if(c.Action.PickDate.isFullDay(l))return M;let W=String(l.getHours()).padStart(2,"0"),J=String(l.getMinutes()).padStart(2,"0");return`${M}@${W}:${J}`}return(0,k.jsxs)(c.ActionPanel,{children:[(0,k.jsxs)(c.ActionPanel.Section,{title:e.name,children:[(0,k.jsx)(c.Action.OpenInBrowser,{title:"Open in Things",icon:"things-flat.png",url:`things:///show?id=${e.id}`}),e.status!=="completed"&&(0,k.jsx)(c.Action,{title:"Mark as Completed",icon:xe.completed,onAction:async()=>{await tt(e.id,"status","completed"),await(0,c.showToast)({style:c.Toast.Style.Success,title:"Marked as Completed",message:e.name}),r()}}),e.status!=="canceled"&&(0,k.jsx)(c.Action,{title:"Mark as Canceled",icon:xe.canceled,shortcut:{modifiers:["opt","cmd"],key:"k"},onAction:async()=>{await tt(e.id,"status","canceled"),await(0,c.showToast)({style:c.Toast.Style.Success,title:"Marked as Canceled",message:e.name}),r()}})]}),(0,k.jsxs)(c.ActionPanel.Section,{children:[(0,k.jsxs)(c.ActionPanel.Submenu,{title:"Schedule",icon:c.Icon.Calendar,shortcut:{modifiers:["cmd"],key:"s"},children:[(0,k.jsx)(c.Action,{...H.today,onAction:()=>p("today")}),(0,k.jsx)(c.Action,{...H.evening,onAction:()=>p("evening")}),(0,k.jsx)(c.Action,{...H.tomorrow,onAction:()=>p("tomorrow")}),(0,k.jsx)(c.Action.PickDate,{title:"Date\u2026",icon:c.Icon.Calendar,min:new Date,onChange:l=>p(l?_(l):"anytime"),type:c.Action.PickDate.Type.DateTime}),(0,k.jsx)(c.Action,{...H.someday,onAction:()=>p("someday")})]}),a&&a.length>0?(0,k.jsx)(c.ActionPanel.Submenu,{title:"Move to",icon:c.Icon.ArrowRight,shortcut:{modifiers:["cmd","shift"],key:"m"},children:a.map(l=>(0,qt.createElement)(c.Action,{...H.list(l),key:l.id,onAction:()=>P(l.id)}))}):null,(0,k.jsx)(c.Action.Push,{title:"Edit To-Do",icon:c.Icon.Pencil,shortcut:c.Keyboard.Shortcut.Common.Edit,target:(0,k.jsx)(ut,{todo:e,refreshTodos:r})}),i&&i.length>0?(0,k.jsx)(c.ActionPanel.Submenu,{title:"Add Tag",icon:c.Icon.Tag,shortcut:{modifiers:["cmd","shift"],key:"t"},children:i.map(l=>(0,k.jsx)(c.Action,{title:l,onAction:()=>v(l)},l))}):null,(0,k.jsx)(c.Action.PickDate,{title:"Set Deadline",icon:c.Icon.Flag,shortcut:{modifiers:["cmd","shift"],key:"d"},min:new Date,onChange:l=>I(l?_(l):null),type:c.Action.PickDate.Type.Date}),c.environment.canAccess(c.AI)&&(0,k.jsx)(c.Action,{title:"Generate Checklist with AI",icon:c.Icon.BulletPoints,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:y}),(0,k.jsx)(c.Action,{title:"Make To-Do Actionable with AI",icon:c.Icon.Text,shortcut:{modifiers:["cmd","shift"],key:"a"},onAction:w}),(0,k.jsx)(c.Action,{title:"Delete",icon:c.Icon.Trash,style:c.Action.Style.Destructive,shortcut:c.Keyboard.Shortcut.Common.Remove,onAction:R})]}),o&&(0,k.jsxs)(c.ActionPanel.Section,{children:[(0,k.jsx)(c.Action.OpenInBrowser,{title:"Open URL from Notes",url:o,shortcut:{modifiers:["cmd","shift"],key:"o"}}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy URL from Notes",content:o})]}),(0,k.jsxs)(c.ActionPanel.Section,{children:[(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy Formatted To-Do URL",content:{html:`<a href="things:///show?id=${e.id}" title="${e.name}">${e.name}</a>`,text:e.name},shortcut:c.Keyboard.Shortcut.Common.CopyPath}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy To-Do URL",content:`things:///show?id=${e.id}`}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy To-Do Title",content:e.name,shortcut:c.Keyboard.Shortcut.Common.CopyName}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy To-Do Notes",content:e.notes})]}),e.project&&(0,k.jsxs)(c.ActionPanel.Section,{title:e.project.name,children:[(0,k.jsx)(c.Action.OpenInBrowser,{title:"Open Project in Things",icon:"things-flat.png",shortcut:{modifiers:["cmd"],key:"o"},url:`things:///show?id=${e.project.id}`}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy Project URL",content:`things:///show?id=${e.project.id}`})]}),s&&(0,k.jsxs)(c.ActionPanel.Section,{title:s.name,children:[(0,k.jsx)(c.Action.OpenInBrowser,{title:"Open Area in Things",icon:"things-flat.png",shortcut:{modifiers:["opt"],key:"o"},url:`things:///show?id=${s.id.replace("THMAreaParentSource/","")}`}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy Area URL",content:`things:///show?id=${s.id.replace("THMAreaParentSource/","")}`})]}),(0,k.jsxs)(c.ActionPanel.Section,{title:`${ot(t)} List`,children:[(0,k.jsx)(c.Action.OpenInBrowser,{title:`Open ${ot(t)} List in Things`,icon:"things-flat.png",shortcut:{modifiers:["ctrl"],key:"o"},url:`things:///show?id=${t.toLowerCase()}`}),(0,k.jsx)(c.Action.Push,{title:"Add New To-Do",icon:c.Icon.Plus,shortcut:{modifiers:["cmd"],key:"n"},target:(0,k.jsx)(je,{commandListName:t})}),(0,k.jsx)(c.Action.CopyToClipboard,{title:"Copy List URL",content:`things:///show?id=${t.toLowerCase()}`})]}),(0,k.jsx)(c.ActionPanel.Section,{children:(0,k.jsx)(c.Action,{title:"Refresh",icon:c.Icon.ArrowClockwise,shortcut:{modifiers:["cmd"],key:"r"},onAction:r})})]})}var ft=require("react/jsx-runtime"),Vr=e=>{let r=(0,ue.default)((0,ue.default)().format("YYYY-MM-DD")).toISOString(),t=(0,ue.default)(e).diff(r,"day"),n,a;return Math.abs(t)>=15?n=(0,ue.default)(e).format("D MMM"):t===0?(n="Due today",a=ee.Color.Red):t>0&&t<=7?(n=`${t} day${t===1?"":"s"} left`,a=ee.Color.Orange):t<0&&(n=`${-t} day${t===-1?"":"s"} ago`,a=ee.Color.Red),{text:{value:n,color:a},icon:{source:ee.Icon.Flag,tintColor:a},tooltip:`Due date: ${(0,ue.default)(e).format("dddd DD MMMM YYYY")}`}};function Fe({todo:e,refreshTodos:r,commandListName:t,displayActivationDates:n,tags:a,lists:i}){let s=[e.name,...e.notes.split(" "),e.tags,e.project?.name??"",e.project?.tags??"",e.area?.name??"",e.project?.area?.name??""],o=[];if(e.tags&&o.push({icon:ee.Icon.Tag,text:e.tags}),e.activationDate&&n){let u=new Date(e.activationDate);o.push({icon:ee.Icon.Calendar,date:u,tooltip:`Start date: ${(0,ue.default)(e.activationDate).format("dddd DD MMMM YYYY")}`})}return e.dueDate&&o.push(Vr(e.dueDate)),(0,ft.jsx)(ee.List.Item,{title:e.name,subtitle:e.notes,icon:xe[e.status],keywords:s,accessories:o,actions:(0,ft.jsx)(dt,{todo:e,refreshTodos:r,commandListName:t,lists:i,tags:a})},e.id)}var te=require("react/jsx-runtime");function Se({commandListName:e,displayActivationDates:r}){let{data:t}=be(()=>Oe("tags","lists")),n=t?.tags,a=t?.lists,[i,s]=(0,Xt.useState)(""),{data:o,isLoading:u,error:y,mutate:w}=be(P=>Gt(P),[e]);if(y)return(0,te.jsx)(ke,{error:y,onRetry:()=>w()});if(!o&&!u)return(0,te.jsx)(Te.Detail,{markdown:"## No Data\\n\\nNo to-dos found and no error occurred. This might indicate an issue with the Things connection."});let p=o?.reduce((P,v)=>{let I=v.project?.id||v.area?.id||"no-project-or-area";return P[I]||(P[I]={title:v.project?.name||v.area?.name,todos:[]}),P[I].todos.push(v),P},{})??{};return(0,te.jsxs)(Te.List,{isLoading:u,searchBarPlaceholder:"Filter by name, notes, tags, project or area",onSearchTextChange:s,filtering:!0,children:[Object.entries(p).map(([P,v])=>P==="no-project-or-area"?v.todos.map(I=>(0,te.jsx)(Fe,{todo:I,refreshTodos:w,commandListName:e,displayActivationDates:r,tags:n,lists:a},I.id)):(0,te.jsx)(Te.List.Section,{title:v.title,subtitle:Zt(v.todos.length,"to-do"),children:v.todos.map(I=>(0,te.jsx)(Fe,{todo:I,refreshTodos:w,commandListName:e,tags:n,lists:a},I.id))},P)),(0,te.jsx)(lt,{searchText:i,commandListName:e})]})}var Qt=require("react/jsx-runtime"),zr=()=>(0,Qt.jsx)(Se,{commandListName:"anytime"}),Br=zr;
