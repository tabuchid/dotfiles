"use strict";var kt=Object.create;var le=Object.defineProperty;var xt=Object.getOwnPropertyDescriptor;var St=Object.getOwnPropertyNames;var vt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var Tt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),_e=(e,r)=>{for(var t in r)le(e,t,{get:r[t],enumerable:!0})},Ue=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of St(r))!Et.call(e,a)&&a!==t&&le(e,a,{get:()=>r[a],enumerable:!(n=xt(r,a))||n.enumerable});return e};var q=(e,r,t)=>(t=e!=null?kt(vt(e)):{},Ue(r||!e||!e.__esModule?le(t,"default",{value:e,enumerable:!0}):t,e)),At=e=>Ue(le({},"__esModule",{value:!0}),e);var bt=Tt((De,Ce)=>{(function(e,r){typeof De=="object"&&typeof Ce<"u"?Ce.exports=r():typeof define=="function"&&define.amd?define(r):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=r()})(De,(function(){"use strict";var e=1e3,r=6e4,t=36e5,n="millisecond",a="second",i="minute",s="hour",o="day",f="week",m="month",g="quarter",k="year",C="date",M="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(p){var d=["th","st","nd","rd"],u=p%100;return"["+p+(d[(u-20)%10]||d[u]||d[0])+"]"}},R=function(p,d,u){var c=String(p);return!c||c.length>=d?p:""+Array(d+1-c.length).join(u)+p},A={s:R,z:function(p){var d=-p.utcOffset(),u=Math.abs(d),c=Math.floor(u/60),l=u%60;return(d<=0?"+":"-")+R(c,2,"0")+":"+R(l,2,"0")},m:function p(d,u){if(d.date()<u.date())return-p(u,d);var c=12*(u.year()-d.year())+(u.month()-d.month()),l=d.clone().add(c,m),y=u-l<0,$=d.clone().add(c+(y?-1:1),m);return+(-(c+(u-l)/(y?l-$:$-l))||0)},a:function(p){return p<0?Math.ceil(p)||0:Math.floor(p)},p:function(p){return{M:m,y:k,w:f,d:o,D:C,h:s,m:i,s:a,ms:n,Q:g}[p]||String(p||"").toLowerCase().replace(/s$/,"")},u:function(p){return p===void 0}},E="en",x={};x[E]=N;var _="$isDayjsObject",L=function(p){return p instanceof te||!(!p||!p[_])},K=function p(d,u,c){var l;if(!d)return E;if(typeof d=="string"){var y=d.toLowerCase();x[y]&&(l=y),u&&(x[y]=u,l=y);var $=d.split("-");if(!l&&$.length>1)return p($[0])}else{var D=d.name;x[D]=d,l=D}return!c&&l&&(E=l),l||!c&&E},U=function(p,d){if(L(p))return p.clone();var u=typeof d=="object"?d:{};return u.date=p,u.args=arguments,new te(u)},P=A;P.l=K,P.i=L,P.w=function(p,d){return U(p,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var te=(function(){function p(u){this.$L=K(u.locale,null,!0),this.parse(u),this.$x=this.$x||u.x||{},this[_]=!0}var d=p.prototype;return d.parse=function(u){this.$d=(function(c){var l=c.date,y=c.utc;if(l===null)return new Date(NaN);if(P.u(l))return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){var $=l.match(b);if($){var D=$[2]-1||0,O=($[7]||"0").substring(0,3);return y?new Date(Date.UTC($[1],D,$[3]||1,$[4]||0,$[5]||0,$[6]||0,O)):new Date($[1],D,$[3]||1,$[4]||0,$[5]||0,$[6]||0,O)}}return new Date(l)})(u),this.init()},d.init=function(){var u=this.$d;this.$y=u.getFullYear(),this.$M=u.getMonth(),this.$D=u.getDate(),this.$W=u.getDay(),this.$H=u.getHours(),this.$m=u.getMinutes(),this.$s=u.getSeconds(),this.$ms=u.getMilliseconds()},d.$utils=function(){return P},d.isValid=function(){return this.$d.toString()!==M},d.isSame=function(u,c){var l=U(u);return this.startOf(c)<=l&&l<=this.endOf(c)},d.isAfter=function(u,c){return U(u)<this.startOf(c)},d.isBefore=function(u,c){return this.endOf(c)<U(u)},d.$g=function(u,c,l){return P.u(u)?this[c]:this.set(l,u)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(u,c){var l=this,y=!!P.u(c)||c,$=P.p(u),D=function(Z,V){var J=P.w(l.$u?Date.UTC(l.$y,V,Z):new Date(l.$y,V,Z),l);return y?J:J.endOf(o)},O=function(Z,V){return P.w(l.toDate()[Z].apply(l.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(V)),l)},F=this.$W,W=this.$M,B=this.$D,re="set"+(this.$u?"UTC":"");switch($){case k:return y?D(1,0):D(31,11);case m:return y?D(1,W):D(0,W+1);case f:var Y=this.$locale().weekStart||0,ie=(F<Y?F+7:F)-Y;return D(y?B-ie:B+(6-ie),W);case o:case C:return O(re+"Hours",0);case s:return O(re+"Minutes",1);case i:return O(re+"Seconds",2);case a:return O(re+"Milliseconds",3);default:return this.clone()}},d.endOf=function(u){return this.startOf(u,!1)},d.$set=function(u,c){var l,y=P.p(u),$="set"+(this.$u?"UTC":""),D=(l={},l[o]=$+"Date",l[C]=$+"Date",l[m]=$+"Month",l[k]=$+"FullYear",l[s]=$+"Hours",l[i]=$+"Minutes",l[a]=$+"Seconds",l[n]=$+"Milliseconds",l)[y],O=y===o?this.$D+(c-this.$W):c;if(y===m||y===k){var F=this.clone().set(C,1);F.$d[D](O),F.init(),this.$d=F.set(C,Math.min(this.$D,F.daysInMonth())).$d}else D&&this.$d[D](O);return this.init(),this},d.set=function(u,c){return this.clone().$set(u,c)},d.get=function(u){return this[P.p(u)]()},d.add=function(u,c){var l,y=this;u=Number(u);var $=P.p(c),D=function(W){var B=U(y);return P.w(B.date(B.date()+Math.round(W*u)),y)};if($===m)return this.set(m,this.$M+u);if($===k)return this.set(k,this.$y+u);if($===o)return D(1);if($===f)return D(7);var O=(l={},l[i]=r,l[s]=t,l[a]=e,l)[$]||1,F=this.$d.getTime()+u*O;return P.w(F,this)},d.subtract=function(u,c){return this.add(-1*u,c)},d.format=function(u){var c=this,l=this.$locale();if(!this.isValid())return l.invalidDate||M;var y=u||"YYYY-MM-DDTHH:mm:ssZ",$=P.z(this),D=this.$H,O=this.$m,F=this.$M,W=l.weekdays,B=l.months,re=l.meridiem,Y=function(V,J,oe,ue){return V&&(V[J]||V(c,y))||oe[J].slice(0,ue)},ie=function(V){return P.s(D%12||12,V,"0")},Z=re||function(V,J,oe){var ue=V<12?"AM":"PM";return oe?ue.toLowerCase():ue};return y.replace(v,(function(V,J){return J||(function(oe){switch(oe){case"YY":return String(c.$y).slice(-2);case"YYYY":return P.s(c.$y,4,"0");case"M":return F+1;case"MM":return P.s(F+1,2,"0");case"MMM":return Y(l.monthsShort,F,B,3);case"MMMM":return Y(B,F);case"D":return c.$D;case"DD":return P.s(c.$D,2,"0");case"d":return String(c.$W);case"dd":return Y(l.weekdaysMin,c.$W,W,2);case"ddd":return Y(l.weekdaysShort,c.$W,W,3);case"dddd":return W[c.$W];case"H":return String(D);case"HH":return P.s(D,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return Z(D,O,!0);case"A":return Z(D,O,!1);case"m":return String(O);case"mm":return P.s(O,2,"0");case"s":return String(c.$s);case"ss":return P.s(c.$s,2,"0");case"SSS":return P.s(c.$ms,3,"0");case"Z":return $}return null})(V)||$.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(u,c,l){var y,$=this,D=P.p(c),O=U(u),F=(O.utcOffset()-this.utcOffset())*r,W=this-O,B=function(){return P.m($,O)};switch(D){case k:y=B()/12;break;case m:y=B();break;case g:y=B()/3;break;case f:y=(W-F)/6048e5;break;case o:y=(W-F)/864e5;break;case s:y=W/t;break;case i:y=W/r;break;case a:y=W/e;break;default:y=W}return l?y:P.a(y)},d.daysInMonth=function(){return this.endOf(m).$D},d.$locale=function(){return x[this.$L]},d.locale=function(u,c){if(!u)return this.$L;var l=this.clone(),y=K(u,c,!0);return y&&(l.$L=y),l},d.clone=function(){return P.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},p})(),G=te.prototype;return U.prototype=G,[["$ms",n],["$s",a],["$m",i],["$H",s],["$W",o],["$M",m],["$y",k],["$D",C]].forEach((function(p){G[p[1]]=function(d){return this.$g(d,p[0],p[1])}})),U.extend=function(p,d){return p.$i||(p(d,te,U),p.$i=!0),U},U.locale=K,U.isDayjs=L,U.unix=function(p){return U(1e3*p)},U.en=x[E],U.Ls=x,U.p={},U}))});var fr={};_e(fr,{AddNewProject:()=>$t,default:()=>wt});module.exports=At(fr);var h=require("@raycast/api");var w=q(require("react")),I=require("@raycast/api");var je=Object.prototype.hasOwnProperty;function fe(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&fe(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(je.call(e,t)&&++n&&!je.call(r,t)||!(t in r)||!fe(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var X=q(require("node:fs")),he=q(require("node:path")),Be=q(require("node:crypto")),Ge=q(require("node:child_process")),He=require("node:buffer"),ae=q(require("node:stream")),Ke=require("node:util");var Je=require("react/jsx-runtime");var ge=globalThis;function Pt(e){let r=(0,w.useRef)(e),t=(0,w.useRef)(0);return fe(e,r.current)||(r.current=e,t.current+=1),(0,w.useMemo)(()=>r.current,[t.current])}function z(e){let r=(0,w.useRef)(e);return r.current=e,r}function Rt(e,r){let t=e instanceof Error?e.message:String(e);return(0,I.showToast)({style:I.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??Me(e),secondaryAction:r?.primaryAction?Me(e):void 0})}var Me=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,X.readFileSync)((0,he.join)(I.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=I.environment.isDevelopment||r,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?I.Clipboard.copy(i):(0,I.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function It(e,r,t){let n=(0,w.useRef)(0),[a,i]=(0,w.useState)({isLoading:!0}),s=z(e),o=z(t?.abortable),f=z(r||[]),m=z(t?.onError),g=z(t?.onData),k=z(t?.onWillExecute),C=z(t?.failureToastOptions),M=z(a.data),b=(0,w.useRef)(null),v=(0,w.useRef)({page:0}),N=(0,w.useRef)(!1),R=(0,w.useRef)(!0),A=(0,w.useRef)(50),E=(0,w.useCallback)(()=>(o.current&&(o.current.current?.abort(),o.current.current=new AbortController),++n.current),[o]),x=(0,w.useCallback)((...G)=>{let p=E();k.current?.(G),i(c=>({...c,isLoading:!0}));let d=Dt(s.current)(...G);function u(c){return c.name=="AbortError"||p===n.current&&(m.current?m.current(c):I.environment.launchType!==I.LaunchType.Background&&Rt(c,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(l){l.hide(),b.current?.(...f.current||[])}},...C.current}),i({error:c,isLoading:!1})),c}return typeof d=="function"?(N.current=!0,d(v.current).then(({data:c,hasMore:l,cursor:y})=>(p===n.current&&(v.current&&(v.current.cursor=y,v.current.lastItem=c?.[c.length-1]),g.current&&g.current(c,v.current),l&&(A.current=c.length),R.current=l,i($=>v.current.page===0?{data:c,isLoading:!1}:{data:($.data||[])?.concat(c),isLoading:!1})),c),c=>(R.current=!1,u(c)))):(N.current=!1,d.then(c=>(p===n.current&&(g.current&&g.current(c),i({data:c,isLoading:!1})),c),u))},[g,m,f,s,i,b,k,v,C,E]);b.current=x;let _=(0,w.useCallback)(()=>{v.current={page:0};let G=f.current||[];return x(...G)},[x,f]),L=(0,w.useCallback)(async(G,p)=>{let d;try{if(p?.optimisticUpdate){E(),typeof p?.rollbackOnError!="function"&&p?.rollbackOnError!==!1&&(d=structuredClone(M.current?.value));let u=p.optimisticUpdate;i(c=>({...c,data:u(c.data)}))}return await G}catch(u){if(typeof p?.rollbackOnError=="function"){let c=p.rollbackOnError;i(l=>({...l,data:c(l.data)}))}else p?.optimisticUpdate&&p?.rollbackOnError!==!1&&i(c=>({...c,data:d}));throw u}finally{p?.shouldRevalidateAfter!==!1&&(I.environment.launchType===I.LaunchType.Background||I.environment.commandMode==="menu-bar"?await _():_())}},[_,M,i,E]),K=(0,w.useCallback)(()=>{v.current.page+=1;let G=f.current||[];x(...G)},[v,f,x]);(0,w.useEffect)(()=>{v.current={page:0},t?.execute!==!1?x(...r||[]):E()},[Pt([r,t?.execute,x]),o,v]),(0,w.useEffect)(()=>()=>{E()},[E]);let U=t?.execute!==!1?a.isLoading:!1,P={...a,isLoading:U},te=N.current?{pageSize:A.current,hasMore:R.current,onLoadMore:K}:void 0;return{...P,revalidate:_,mutate:L,pagination:te}}function Dt(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Fe(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Ct(e){return e instanceof URLSearchParams?e.toString():e}function Ye(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=Ct(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(n),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let o=null;if((o=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+o+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let f=Object.keys(n);f=f.sort(),Fe(n)||f.splice(0,0,"prototype","__proto__","constructor"),t("object:"+f.length+":");let m=this;return f.forEach(function(g){m.dispatch(g),t(":"),m.dispatch(n[g]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let i=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(f){i.dispatch(f)});return}let s=[],o=n.map(function(f){let m=Ot(),g=r.slice();return Ye(m,g).dispatch(f),s=s.concat(g.slice(r.length)),m.read().toString()});r=r.concat(s),o.sort(),this._array(o,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Fe(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function Ot(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function _t(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function Ut(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Ne(e){let r=Be.default.createHash("sha1");return Ye(r).dispatch(e),r.digest("hex")}var jt=Symbol("cache without namespace"),Le=new Map;function Mt(e,r,t){let n=t?.cacheNamespace||jt,a=Le.get(n)||Le.set(n,new I.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let i=z(e),s=z(r),o=(0,w.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(i.current)}catch(k){console.error("Could not get Cache data:",k);return}}),f=(0,w.useMemo)(()=>{if(typeof o<"u"){if(o==="undefined")return;try{return JSON.parse(o,Ut)}catch(k){return console.warn("The cached data is corrupted",k),s.current}}else return s.current},[o,s]),m=z(f),g=(0,w.useCallback)(k=>{let C=typeof k=="function"?k(m.current):k;if(typeof C>"u")a.set(i.current,"undefined");else{let M=JSON.stringify(C,_t);a.set(i.current,M)}return C},[a,i,m]);return[f,g]}var ne=Symbol();function Ze(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:i,...s}=t||{},o=(0,w.useRef)(null),[f,m]=Mt(Ne(r||[])+i,ne,{cacheNamespace:Ne(e)}),g=(0,w.useRef)(f!==ne?f:n),k=(0,w.useRef)(void 0),{mutate:C,revalidate:M,...b}=It(e,r||[],{...s,onData(E,x){k.current=x,s.onData&&s.onData(E,x),!(x&&x.page>0)&&(o.current="promise",g.current=E,m(E))}}),v,N=b.pagination;k.current&&k.current.page>0&&b.data?v=b.data:o.current==="promise"?v=g.current:a&&f!==ne?(v=f,N&&(N.hasMore=!0,N.pageSize=f.length)):a&&f===ne?v=g.current:f!==ne?(v=f,N&&(N.hasMore=!0,N.pageSize=f.length)):v=n;let R=z(v),A=(0,w.useCallback)(async(E,x)=>{let _;try{if(x?.optimisticUpdate){typeof x?.rollbackOnError!="function"&&x?.rollbackOnError!==!1&&(_=structuredClone(R.current));let L=x.optimisticUpdate(R.current);o.current="cache",g.current=L,m(L)}return await C(E,{shouldRevalidateAfter:x?.shouldRevalidateAfter})}catch(L){if(typeof x?.rollbackOnError=="function"){let K=x.rollbackOnError(R.current);o.current="cache",g.current=K,m(K)}else x?.optimisticUpdate&&x?.rollbackOnError!==!1&&(o.current="cache",g.current=_,m(_));throw L}},[m,C,R,g,o]);return(0,w.useEffect)(()=>{f!==ne&&(o.current="cache",g.current=f)},[f]),{data:v,isLoading:b.isLoading,error:b.error,mutate:k.current&&k.current.page>0?C:A,pagination:N,revalidate:M}}var de=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",be=Symbol.for("signal-exit emitter"),we=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),ge[be])return ge[be];Object.defineProperty(ge,be,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let i of this.listeners[r])a=i(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},ke=class{onExit(){return()=>{}}load(){}unload(){}},xe=class{#o;#t;#e;#s;#i;#a;#n;#r;constructor(r){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new we,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,i=r;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(a+=i.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,t),o=t==="SIGHUP"?this.#o:t;s||r.kill(r.pid,o)}};this.#i=r.reallyExit,this.#s=r.emit}onExit(r,t){if(!de(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#u(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(r){return de(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#u(r,...t){let n=this.#s;if(r==="exit"&&de(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},ye=null,Ft=(e,r)=>(ye||(ye=de(process)?new xe(process):new ke),ye.onExit(e,r));function Nt(e,{timeout:r}={}){let t=new Promise((o,f)=>{e.on("exit",(m,g)=>{o({exitCode:m,signal:g,timedOut:!1})}),e.on("error",m=>{f(m)}),e.stdin&&e.stdin.on("error",m=>{f(m)})}),n=Ft(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,i=new Promise((o,f)=>{a=setTimeout(()=>{e.kill("SIGTERM"),f(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=t.finally(()=>{clearTimeout(a)});return Promise.race([i,s]).finally(()=>n())}var Se=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Lt(e){let{encoding:r}=e,t=r==="buffer",n=new ae.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,i=[];return n.on("data",s=>{i.push(s),a+=s.length}),n.getBufferedValue=()=>t?Buffer.concat(i,a):i.join(""),n.getBufferedLength=()=>a,n}async function We(e,r){let t=Lt(r);return await new Promise((n,a)=>{let i=s=>{s&&t.getBufferedLength()<=He.constants.MAX_LENGTH&&(s.bufferedData=t.getBufferedValue()),a(s)};(async()=>{try{await(0,Ke.promisify)(ae.default.pipeline)(e,t),n()}catch(s){i(s)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&i(new Se)})}),t.getBufferedValue()}async function Ve(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function Wt({stdout:e,stderr:r},{encoding:t},n){let a=We(e,{encoding:t}),i=We(r,{encoding:t});try{return await Promise.all([n,a,i])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},Ve(e,a),Ve(r,i)])}}function Vt(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function ze(e,r){return e.stripFinalNewline?Vt(r):r}function zt({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function Bt({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:i,timedOut:s,options:o,parentError:f}){let g=`Command ${zt({timedOut:s,timeout:o?.timeout,signal:n,exitCode:a})}: ${i}`,k=t?`${g}
${t.message}`:g,C=[k,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=f,t.message=C,t.shortMessage=k,t.command=i,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function Gt({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:i,command:s,options:o,parentError:f}){if(t||n!==0||a!==null)throw Bt({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:s,timedOut:i,options:o,parentError:f});return e}var qe=(function(e){return e.Required="required",e})({});function $e(e,r){if(e){if(typeof e=="function")return e(r);if(e==="required"){let t=typeof r<"u"&&r!==null;if(t)switch(typeof r){case"string":t=r.length>0;break;case"object":Array.isArray(r)?t=r.length>0:r instanceof Date&&(t=r.getTime()>0);break;default:break}if(!t)return"The item is required"}}}function Xe(e){let{onSubmit:r,validation:t,initialValues:n={}}=e,[a,i]=(0,w.useState)(n),[s,o]=(0,w.useState)({}),f=(0,w.useRef)({}),m=z(t||{}),g=z(r),k=(0,w.useCallback)(R=>{f.current[R]?.focus()},[f]),C=(0,w.useCallback)(async R=>{let A=!1;for(let[x,_]of Object.entries(m.current)){let L=$e(_,R[x]);L&&(A||(A={},k(x)),A[x]=L)}if(A)return o(A),!1;let E=await g.current(R);return typeof E=="boolean"?E:!0},[m,g,k]),M=(0,w.useCallback)((R,A)=>{o(E=>({...E,[R]:A}))},[o]),b=(0,w.useCallback)(function(R,A){i(E=>({...E,[R]:typeof A=="function"?A(E[R]):A}))},[i]),v=(0,w.useMemo)(()=>new Proxy({},{get(R,A){let E=m.current[A],x=a[A];return{onChange(_){s[A]&&($e(E,_)||M(A,void 0)),b(A,_)},onBlur(_){let L=$e(E,_.target.value);L&&M(A,L)},error:s[A],id:A,value:typeof x>"u"?null:x,ref:_=>{f.current[A]=_}}}}),[s,m,M,a,f,b]),N=(0,w.useCallback)(R=>{o({}),Object.entries(f.current).forEach(([A,E])=>{R?.[A]||E?.reset()}),R&&i(R)},[i,o,f]);return{handleSubmit:C,setValidationError:M,setValue:b,values:a,itemProps:v,focus:k,reset:N}}async function Qe(e,r,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:i,...s}=Array.isArray(r)?t||{}:r||{},o=n!==!1?[]:["-ss"];a==="JavaScript"&&o.push("-l","JavaScript"),Array.isArray(r)&&o.push("-",...r);let f=Ge.default.spawn("osascript",o,{...s,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),m=Nt(f,{timeout:i??1e4});f.stdin.end(e);let[{error:g,exitCode:k,signal:C,timedOut:M},b,v]=await Wt(f,{encoding:"utf8"},m),N=ze({stripFinalNewline:!0},b),R=ze({stripFinalNewline:!0},v);return Gt({stdout:N,stderr:R,error:g,exitCode:k,signal:C,timedOut:M,command:"osascript",options:t,parentError:new Error})}var ht=require("child_process"),pt=require("util"),ce=require("@raycast/api");var Re={};_e(Re,{exclude:()=>Qt,extract:()=>Ae,parse:()=>Pe,parseUrl:()=>ut,pick:()=>ft,stringify:()=>ct,stringifyUrl:()=>lt});var rt="%[a-f0-9]{2}",et=new RegExp("("+rt+")|([^%]+?)","gi"),tt=new RegExp("("+rt+")+","gi");function ve(e,r){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;r=r||1;let t=e.slice(0,r),n=e.slice(r);return Array.prototype.concat.call([],ve(t),ve(n))}function Ht(e){try{return decodeURIComponent(e)}catch{let r=e.match(et)||[];for(let t=1;t<r.length;t++)e=ve(r,t).join(""),r=e.match(et)||[];return e}}function Kt(e){let r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=tt.exec(e);for(;t;){try{r[t[0]]=decodeURIComponent(t[0])}catch{let a=Ht(t[0]);a!==t[0]&&(r[t[0]]=a)}t=tt.exec(e)}r["%C2"]="\uFFFD";let n=Object.keys(r);for(let a of n)e=e.replace(new RegExp(a,"g"),r[a]);return e}function Ee(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return Kt(e)}}function nt(e,r){let t={};if(Array.isArray(r))for(let n of r){let a=Object.getOwnPropertyDescriptor(e,n);a?.enumerable&&Object.defineProperty(t,n,a)}else for(let n of Reflect.ownKeys(e)){let a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){let i=e[n];r(n,i,e)&&Object.defineProperty(t,n,a)}}return t}function pe(e,r){if(!(typeof e=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||r==="")return[];let t=e.indexOf(r);return t===-1?[]:[e.slice(0,t),e.slice(t+r.length)]}var Jt=e=>e==null,Yt=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`),Te=Symbol("encodeFragmentIdentifier");function Zt(e){switch(e.arrayFormat){case"index":return r=>(t,n)=>{let a=t.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[j(r,e),"[",a,"]"].join("")]:[...t,[j(r,e),"[",j(a,e),"]=",j(n,e)].join("")]};case"bracket":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[j(r,e),"[]"].join("")]:[...t,[j(r,e),"[]=",j(n,e)].join("")];case"colon-list-separator":return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,[j(r,e),":list="].join("")]:[...t,[j(r,e),":list=",j(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let r=e.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[j(t,e),r,j(a,e)].join("")]:[[n,j(a,e)].join(e.arrayFormatSeparator)])}default:return r=>(t,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?t:n===null?[...t,j(r,e)]:[...t,[j(r,e),"=",j(n,e)].join("")]}}function qt(e){let r;switch(e.arrayFormat){case"index":return(t,n,a)=>{if(r=/\[(\d*)]$/.exec(t),t=t.replace(/\[\d*]$/,""),!r){a[t]=n;return}a[t]===void 0&&(a[t]={}),a[t][r[1]]=n};case"bracket":return(t,n,a)=>{if(r=/(\[])$/.exec(t),t=t.replace(/\[]$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"colon-list-separator":return(t,n,a)=>{if(r=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!r){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[...a[t],n]};case"comma":case"separator":return(t,n,a)=>{let s=typeof n=="string"&&n.includes(e.arrayFormatSeparator)?n.split(e.arrayFormatSeparator).map(o=>Q(o,e)):n===null?n:Q(n,e);a[t]=s};case"bracket-separator":return(t,n,a)=>{let i=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!i){a[t]=n&&Q(n,e);return}let s=n===null?[]:Q(n,e).split(e.arrayFormatSeparator);if(a[t]===void 0){a[t]=s;return}a[t]=[...a[t],...s]};default:return(t,n,a)=>{if(a[t]===void 0){a[t]=n;return}a[t]=[...[a[t]].flat(),n]}}}function st(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function j(e,r){return r.encode?r.strict?Yt(e):encodeURIComponent(e):e}function Q(e,r){return r.decode?Ee(e):e}function it(e){return Array.isArray(e)?e.sort():typeof e=="object"?it(Object.keys(e)).sort((r,t)=>Number(r)-Number(t)).map(r=>e[r]):e}function ot(e){let r=e.indexOf("#");return r!==-1&&(e=e.slice(0,r)),e}function Xt(e){let r="",t=e.indexOf("#");return t!==-1&&(r=e.slice(t)),r}function at(e,r,t){return t==="string"&&typeof e=="string"?e:typeof t=="function"&&typeof e=="string"?t(e):t==="boolean"&&e===null?!0:t==="boolean"&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":t==="boolean"&&e!==null&&(e.toLowerCase()==="1"||e.toLowerCase()==="0")?e.toLowerCase()==="1":t==="string[]"&&r.arrayFormat!=="none"&&typeof e=="string"?[e]:t==="number[]"&&r.arrayFormat!=="none"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?[Number(e)]:t==="number"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):r.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":r.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):e}function Ae(e){e=ot(e);let r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function Pe(e,r){r={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...r},st(r.arrayFormatSeparator);let t=qt(r),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let a of e.split("&")){if(a==="")continue;let i=r.decode?a.replaceAll("+"," "):a,[s,o]=pe(i,"=");s===void 0&&(s=i),o=o===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?o:Q(o,r),t(Q(s,r),o,n)}for(let[a,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&r.types[a]!=="string")for(let[s,o]of Object.entries(i)){let f=r.types[a],m=typeof f=="function"?f:f?f.replace("[]",""):void 0;i[s]=at(o,r,m)}else typeof i=="object"&&i!==null&&r.types[a]==="string"?n[a]=Object.values(i).join(r.arrayFormatSeparator):n[a]=at(i,r,r.types[a]);return r.sort===!1?n:(r.sort===!0?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce((a,i)=>{let s=n[i];return a[i]=s&&typeof s=="object"&&!Array.isArray(s)?it(s):s,a},Object.create(null))}function ct(e,r){if(!e)return"";r={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...r},st(r.arrayFormatSeparator);let t=s=>r.skipNull&&Jt(e[s])||r.skipEmptyString&&e[s]==="",n=Zt(r),a={};for(let[s,o]of Object.entries(e))t(s)||(a[s]=o);let i=Object.keys(a);return r.sort!==!1&&i.sort(r.sort),i.map(s=>{let o=e[s];if(r.replacer&&(o=r.replacer(s,o),o===void 0)||o===void 0)return"";if(o===null)return j(s,r);if(Array.isArray(o)){if(o.length===0&&r.arrayFormat==="bracket-separator")return j(s,r)+"[]";let f=o;return r.replacer&&(f=o.map((m,g)=>r.replacer(`${s}[${g}]`,m)).filter(m=>m!==void 0)),f.reduce(n(s),[]).join("&")}return j(s,r)+"="+j(o,r)}).filter(s=>s.length>0).join("&")}function ut(e,r){r={decode:!0,...r};let[t,n]=pe(e,"#");return t===void 0&&(t=e),{url:t?.split("?")?.[0]??"",query:Pe(Ae(e),r),...r&&r.parseFragmentIdentifier&&n?{fragmentIdentifier:Q(n,r)}:{}}}function lt(e,r){r={encode:!0,strict:!0,[Te]:!0,...r};let t=ot(e.url).split("?")[0]||"",n=Ae(e.url),a={...Pe(n,{sort:!1,...r}),...e.query},i=ct(a,r);i&&=`?${i}`;let s=Xt(e.url);if(typeof e.fragmentIdentifier=="string"){let o=new URL(t);o.hash=e.fragmentIdentifier,s=r[Te]?o.hash:`#${e.fragmentIdentifier}`}return`${t}${i}${s}`}function ft(e,r,t){t={parseFragmentIdentifier:!0,[Te]:!1,...t};let{url:n,query:a,fragmentIdentifier:i}=ut(e,t);return lt({url:n,query:nt(a,r),fragmentIdentifier:i},t)}function Qt(e,r,t){let n=Array.isArray(r)?a=>!r.includes(a):(a,i)=>!r(a,i);return ft(e,n,t)}var dt=Re;var er=(0,ce.getPreferenceValues)(),H=class extends Error{constructor(t,n,a,i){super(i?`${i}: ${t}`:t);this.type=n;this.originalError=a;this.operation=i;this.name="ThingsError"}},tr=async(e,r)=>{try{let t=await Qe(`(function(){${e}})()`,{humanReadableOutput:!1,language:"JavaScript",timeout:6e4});return t?JSON.parse(t.replace(/:\s*undefined/g,": null")):void 0}catch(t){let a=(typeof t=="string"?t:t instanceof Error?t.message:String(t)).replace("execution error: Error: ","");throw a.match(/Application can't be found/i)?new H("Things application not found. Please make sure Things is installed and running.","APP_NOT_FOUND",a,r):a.match(/not allowed assistive access/i)||a.match(/permission/i)||a.match(/-1743/)?new H("Permission denied. Please grant Raycast access to Things in System Settings > Privacy & Security > Automation > Raycast > Things.","PERMISSION_DENIED",a,r):a.match(/doesn't understand/i)||a.match(/can't get/i)?new H("Things automation interface error. This might be due to a Things version incompatibility or the app not being ready.","EXECUTION_ERROR",a,r):a.match(/timed out/i)?new H("Command timed out. Things may be unresponsive or not running.","EXECUTION_ERROR",a,r):new H(`Unexpected error: ${a}`,"UNKNOWN_ERROR",a,r)}};var rr="tag => tag.name()",nr=`todo => {
  const props = todo.properties();
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: todo.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
  };
}`,ar=`project => {
  const props = project.properties();
  const areaRef = props.area;
  let area = null;
  if (areaRef) {
    const areaProps = areaRef.properties();
    area = { id: areaProps.id, name: areaProps.name, tags: areaRef.tagNames() };
  }
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: project.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
    area,
    todos: project.toDos().map(${nr})
  };
}`,sr=`todo => {
  const props = todo.properties();
  return {
    id: props.id,
    name: props.name,
    status: props.status,
    notes: props.notes,
    tags: todo.tagNames(),
    dueDate: props.dueDate ? props.dueDate.toISOString() : null,
    activationDate: props.activationDate ? props.activationDate.toISOString() : null,
    isProject: props.pcls === "project",
  };
}`,ir=`area => {
  const props = area.properties();
  return {
    id: props.id,
    name: props.name,
    tags: area.tagNames(),
    todos: area.toDos().map(${sr})
  };
}`,or=[{name:"tags",needs:["tags"],expr:`things.tags().map(${rr})`},{name:"projects",needs:["projects","lists"],expr:`things.projects().map(${ar})`},{name:"areas",needs:["areas","lists"],expr:`things.areas().map(${ir})`}];async function mt(...e){let r=new Set(e),t=[`const things = Application('${er.thingsAppIdentifier}');`,"const result = {};",...or.filter(({needs:a})=>a.some(i=>r.has(i))).map(({name:a,expr:i})=>`result.${a} = ${i};`),"return result;"].join(`
`),n=await tr(t,`Get ${e.join(", ")}`);return Object.fromEntries(e.map(a=>[a,a==="lists"?cr(n.projects,n.areas):n[a]]))}function cr(e=[],r=[]){let t=e.filter(a=>!a.area).map(a=>({...a,type:"project"})),n=[];return r.forEach(a=>{n.push({...a,type:"area"});let i=e.filter(s=>s.area&&s.area.id===a.id).map(s=>({...s,type:"project"}));n.push(...i)}),[...t,...n]}async function ur(e){await(0,pt.promisify)(ht.exec)(`open -g "${e}"`)}function lr(e){return dt.stringify(e,{skipNull:!0,skipEmptyString:!0})}async function gt(e){await ur(`things:///add-project?${lr(e)}`)}var se=require("@raycast/api");var me=require("react/jsx-runtime");function Ie({error:e,onRetry:r}){let t=s=>{if(s instanceof H)switch(s.type){case"APP_NOT_FOUND":return{title:"Application Not Found",description:"The Things app is not running or not installed.",solutions:["**Start Things**: Open the Things app and make sure it's running","**Check Installation**: Verify Things is properly installed","**Restart**: Try quitting and restarting both Things and Raycast"],errorType:"Application Not Found"};case"PERMISSION_DENIED":return{title:"Permission Denied",description:"Raycast doesn't have permission to control Things.",solutions:["Open **System Settings** \u2192 **Privacy & Security** \u2192 **Automation**","Find **Raycast** in the list","Make sure **Things** is checked \u2705"],errorType:"Permission Denied"};case"EXECUTION_ERROR":return{title:"Things Communication Error",description:"There was an error communicating with Things.",solutions:["**Restart Things**: Quit and restart the Things app","**Wait and Retry**: If Things was just started, wait a moment and try again"],errorType:"Execution Error"};case"UNKNOWN_ERROR":return{title:"Unknown Error",description:"An unexpected error occurred while trying to communicate with Things.",solutions:["**Restart Both Apps**: Quit and restart both Things and Raycast","**Update**: Make sure both Things and Raycast are up to date"],errorType:"Unknown Error"}}return{title:"Error",description:"An error occurred while loading data from Things.",solutions:["Make sure Things is running","Check that Raycast has automation permissions","Try restarting both applications"],errorType:s.constructor.name}},n=(s,o)=>{let f=o instanceof H?o.originalError:o.message,m=o instanceof H?o.operation:void 0;return`# ${s.title}

${s.description}

## Solutions

${s.solutions.map((g,k)=>`${k+1}. ${g}`).join(`
`)}

## Technical Details

- Error Type: \`${s.errorType}\`${m?`
- Operation: \`${m}\``:""}
- Original Error: \`${f||"N/A"}\``},a=t(e),i=n(a,e);return(0,me.jsx)(se.Detail,{markdown:i,actions:r?(0,me.jsx)(se.ActionPanel,{children:(0,me.jsx)(se.Action,{title:"Try Again",onAction:r})}):void 0})}var T=require("@raycast/api"),ee={inbox:{title:"Inbox",icon:{source:T.Icon.Tray,tintColor:T.Color.Blue}},today:{title:"Today",icon:{source:T.Icon.Star,tintColor:T.Color.Yellow}},evening:{title:"This Evening",icon:{source:T.Icon.Moon,tintColor:T.Color.Purple}},tomorrow:{title:"Tomorrow",icon:{source:T.Icon.ArrowClockwise,tintColor:T.Color.Orange}},upcoming:{title:"Upcoming",icon:{source:T.Icon.Calendar,tintColor:T.Color.Red}},anytime:{title:"Anytime",icon:{source:T.Icon.Layers,tintColor:T.Color.Green}},someday:{title:"Someday",icon:{source:T.Icon.Folder,tintColor:T.Color.SecondaryText}},logbook:{title:"Logbook",icon:{source:T.Icon.CheckCircle,tintColor:T.Color.Green}},list:e=>({title:e.name,icon:e.type==="area"?{source:T.Icon.Folder,tintColor:T.Color.Green}:{source:T.Icon.Circle,tintColor:T.Color.Blue}})},Rr={open:T.Icon.Circle,completed:{source:T.Icon.CheckCircle,tintColor:T.Color.Blue},canceled:{source:T.Icon.XMarkCircle,tintColor:T.Color.SecondaryText}},Ir={open:T.Icon.Circle,completed:T.Icon.CheckCircle,canceled:T.Icon.XMarkCircle};var yt=q(bt());var Oe=e=>(0,yt.default)(e).format("YYYY-MM-DD");var S=require("react/jsx-runtime");function $t({draftValues:e}){let{data:r,isLoading:t,error:n}=Ze(()=>mt("tags","areas")),a=r?.tags,i=r?.areas,{handleSubmit:s,itemProps:o,values:f,reset:m,focus:g,setValue:k}=Xe({async onSubmit(b){let v={title:b.title,notes:b.notes,when:b.when==="upcoming"&&b.date?Oe(b.date):b.when,"area-id":b.areaId,deadline:b.deadline?Oe(b.deadline):"",...b.tags.length>0&&{tags:b.tags.join(",")},"to-dos":b.toDos};await gt(v),(0,h.showToast)({style:h.Toast.Style.Success,title:"Added new project",message:b.title}),m({title:"",notes:"",tags:[],when:"",areaId:"",toDos:"",deadline:null}),g("title")},initialValues:{title:e?.title??"",notes:e?.notes??"",tags:e?.tags??[],when:e?.when??null,toDos:e?.toDos??"",deadline:e?.deadline??null},validation:{title:qe.Required}});async function C(){try{if(!f.title){await(0,h.showToast)({style:h.Toast.Style.Failure,title:"The project should have a title"});return}let b=await(0,h.showToast)({style:h.Toast.Style.Animated,title:"Generating to-dos"}),v=await h.AI.ask(`Break down a project into tasks. The tasks should be actionable. Each item should be separated by a new line. Return the tasks in the same language than the projects's title (e.g if the project title is written in French, the tasks should be written in French as well).

For example, for a project named "Vacation in Rome", you could write:
Research hotels in Rome and book one
Book flights
Find the best activities to do in Rome
...

Note that each task doesn't start with a hyphen or a number. This is important.
Here's the project you need to break-down: "${f.title}"
${f.notes.length>0?`For additional context, here are the task's notes: "${f.notes}"`:""}

Tasks:`);b.hide(),k("toDos",v.trim()),g("toDos")}catch(b){let v=typeof b=="string"?b:b instanceof Error?b.message:String(b);await(0,h.showToast)({style:h.Toast.Style.Failure,title:"Failed to generate to-dos",message:v})}}if(n)return(0,S.jsx)(Ie,{error:n});let M=new Date;return(0,S.jsxs)(h.Form,{isLoading:t,enableDrafts:!0,actions:(0,S.jsxs)(h.ActionPanel,{children:[(0,S.jsx)(h.Action.SubmitForm,{title:"Add New Project",onSubmit:s,icon:h.Icon.Plus}),(0,S.jsx)(h.Action,{title:"Generate To-Dos with AI",icon:h.Icon.BulletPoints,onAction:C}),(0,S.jsxs)(h.ActionPanel.Section,{children:[(0,S.jsx)(h.Action,{title:"Focus Title",icon:h.Icon.TextInput,onAction:()=>g("title"),shortcut:{modifiers:["cmd"],key:"1"}}),(0,S.jsx)(h.Action,{title:"Focus Notes",icon:h.Icon.TextInput,onAction:()=>g("notes"),shortcut:{modifiers:["cmd"],key:"2"}}),(0,S.jsx)(h.Action,{title:"Focus When",icon:h.Icon.TextInput,onAction:()=>g("when"),shortcut:{modifiers:["cmd"],key:"s"}}),(0,S.jsx)(h.Action,{title:"Focus List",icon:h.Icon.TextInput,onAction:()=>g("areaId"),shortcut:{modifiers:["cmd","shift"],key:"m"}}),(0,S.jsx)(h.Action,{title:"Focus Tags",icon:h.Icon.TextInput,onAction:()=>g("tags"),shortcut:{modifiers:["cmd","shift"],key:"t"}}),(0,S.jsx)(h.Action,{title:"Focus Checklist",icon:h.Icon.TextInput,onAction:()=>g("toDos"),shortcut:{modifiers:["cmd","shift"],key:"c"}}),(0,S.jsx)(h.Action,{title:"Focus Deadline",icon:h.Icon.TextInput,onAction:()=>g("deadline"),shortcut:{modifiers:["cmd","shift"],key:"d"}})]})]}),children:[(0,S.jsx)(h.Form.TextField,{...o.title,title:"Title",placeholder:"New project"}),(0,S.jsx)(h.Form.TextArea,{...o.notes,title:"Notes",placeholder:"Write some notes (Markdown enabled)",enableMarkdown:!0}),(0,S.jsx)(h.Form.Separator,{}),(0,S.jsxs)(h.Form.Dropdown,{...o.when,title:"When",children:[(0,S.jsx)(h.Form.Dropdown.Item,{value:"",title:"No date"}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"today",...ee.today}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"evening",...ee.evening}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"tomorrow",...ee.tomorrow}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"upcoming",...ee.upcoming}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"anytime",...ee.anytime}),(0,S.jsx)(h.Form.Dropdown.Item,{value:"someday",...ee.someday})]}),f.when==="upcoming"&&(0,S.jsx)(h.Form.DatePicker,{...o.date,title:"Start Date",min:M}),i&&i.length>0?(0,S.jsxs)(h.Form.Dropdown,{...o.areaId,title:"Area",children:[(0,S.jsx)(h.Form.Dropdown.Item,{value:"",title:"No area"}),i.map(b=>(0,S.jsx)(h.Form.Dropdown.Item,{value:b.id,title:b.name,icon:{source:h.Icon.Folder,tintColor:h.Color.Green}},b.id))]}):null,a&&a.length>0?(0,S.jsx)(h.Form.TagPicker,{...o.tags,title:"Tags",children:a.map(b=>(0,S.jsx)(h.Form.TagPicker.Item,{value:b,title:b},b))}):null,(0,S.jsx)(h.Form.TextArea,{...o.toDos,title:"To-Dos",placeholder:"To-Dos separated by new lines"}),(0,S.jsx)(h.Form.DatePicker,{...o.deadline,title:"Deadline",type:h.Form.DatePicker.Type.Date,min:M})]})}function wt({draftValues:e}){return(0,S.jsx)($t,{draftValues:e})}0&&(module.exports={AddNewProject});
