"use strict";var Tt=Object.create;var ne=Object.defineProperty;var Pt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var _t=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var Oe=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ue=(t,e)=>{for(var r in e)ne(t,r,{get:e[r],enumerable:!0})},Le=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Ct(e))!Rt.call(t,a)&&a!==r&&ne(t,a,{get:()=>e[a],enumerable:!(n=Pt(e,a))||n.enumerable});return t};var ae=(t,e,r)=>(r=t!=null?Tt(_t(t)):{},Le(e||!t||!t.__esModule?ne(r,"default",{value:t,enumerable:!0}):r,t)),It=t=>Le(ne({},"__esModule",{value:!0}),t);async function G(t){let e=await le.LocalStorage.getItem(t.storageKey);if(e)try{let r=JSON.parse(e);return Array.isArray(r)?r:[]}catch{return[]}return[]}async function Y(t,e){let r=JSON.stringify(e);await le.LocalStorage.setItem(t.storageKey,r)}async function Wt(t,e){let n=(await G(t)).filter(i=>i.key!==e.key),a=[e,...n].slice(0,t.maxItems);await Y(t,a)}async function Bt(t,e){let n=(await G(t)).filter(a=>a.key!==e.key);await Y(t,n)}async function qe(){return await le.LocalStorage.removeItem(ve.storageKey)}async function Ye(){return await G(xe)}async function Ze(t){return await Wt(xe,t)}async function Xe(t){return await Bt(xe,t)}var le,xe,ve,ue,N=Oe(()=>{"use strict";le=require("@raycast/api"),xe={storageKey:"starred-files",maxItems:10,cacheKey:"starredFiles",displayName:"starred"},ve={storageKey:"VISITED_FIGMA_FILES",maxItems:5,cacheKey:"visitedFiles",displayName:"visited"},ue={storageKey:"PROJECT_FILES",maxItems:1,cacheKey:"projectFiles",displayName:"project files"}});var de={};Ue(de,{clearFiles:()=>Ae,getProjectsNeedingRefresh:()=>Se,loadFiles:()=>Zt,storeFiles:()=>Yt,updateProjectTTLs:()=>fe});async function et(){let t=await U.LocalStorage.getItem(Qe);if(t)try{return JSON.parse(t)}catch{return{}}return{}}async function Jt(t){let e=JSON.stringify(t);await U.LocalStorage.setItem(Qe,e)}function Ht(t,e){let r=e[t];return r?Date.now()>r.expiresAt:!0}function qt(t,e){let r=Date.now();e[t]={lastFetched:r,expiresAt:r+Gt*60*1e3}}async function Se(t){let e=await et();return t.filter(r=>Ht(r,e))}async function fe(t){let e=await et();t.forEach(r=>qt(r,e)),await Jt(e)}async function Yt(t){let e=JSON.stringify(t);await U.LocalStorage.setItem(ue.storageKey,e)}async function Zt(){let t=await U.LocalStorage.getItem(ue.storageKey);if(t)try{let e=JSON.parse(t);return Array.isArray(e)?e:void 0}catch{return}}async function Xt(){try{let t=await U.LocalStorage.allItems(),e=Object.keys(t).filter(r=>r.startsWith(`${Kt}-`)).map(r=>U.LocalStorage.removeItem(r));await Promise.all(e)}catch(t){console.error("Error clearing pages cache:",t)}}async function Ae(){await U.LocalStorage.removeItem(ue.storageKey),await Xt()}var U,Gt,Qe,Kt,K=Oe(()=>{"use strict";U=require("@raycast/api");N();Gt=30,Qe="PROJECT_TTLS",Kt="PAGES"});var or={};Ue(or,{default:()=>sr});module.exports=It(or);var A=require("@raycast/api");var d=ae(require("react")),l=require("@raycast/api");var De=Object.prototype.hasOwnProperty;function ie(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&ie(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(De.call(t,r)&&++n&&!De.call(e,r)||!(r in e)||!ie(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}var j=ae(require("node:fs")),ce=ae(require("node:path")),ze=ae(require("node:crypto"));var we=require("react/jsx-runtime");function Ot(t){let e=(0,d.useRef)(t),r=(0,d.useRef)(0);return ie(t,e.current)||(e.current=t,r.current+=1),(0,d.useMemo)(()=>e.current,[r.current])}function P(t){let e=(0,d.useRef)(t);return e.current=t,e}function Ut(t,e){let r=t instanceof Error?t.message:String(t);return(0,l.showToast)({style:l.Toast.Style.Failure,title:e?.title??"Something went wrong",message:e?.message??r,primaryAction:e?.primaryAction??Ve(t),secondaryAction:e?.primaryAction?Ve(t):void 0})}var Ve=t=>{let e=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,j.readFileSync)((0,ce.join)(l.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(e=!1)}catch{}let a=l.environment.isDevelopment||e,i=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?l.Clipboard.copy(i):(0,l.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function Lt(t,e,r){let n=(0,d.useRef)(0),[a,i]=(0,d.useState)({isLoading:!0}),s=P(t),o=P(r?.abortable),c=P(e||[]),u=P(r?.onError),f=P(r?.onData),m=P(r?.onWillExecute),$=P(r?.failureToastOptions),_=P(a.data),S=(0,d.useRef)(null),y=(0,d.useRef)({page:0}),E=(0,d.useRef)(!1),R=(0,d.useRef)(!0),M=(0,d.useRef)(50),x=(0,d.useCallback)(()=>(o.current&&(o.current.current?.abort(),o.current.current=new AbortController),++n.current),[o]),b=(0,d.useCallback)((...I)=>{let F=x();m.current?.(I),i(p=>({...p,isLoading:!0}));let z=Dt(s.current)(...I);function W(p){return p.name=="AbortError"||F===n.current&&(u.current?u.current(p):l.environment.launchType!==l.LaunchType.Background&&Ut(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(D){D.hide(),S.current?.(...c.current||[])}},...$.current}),i({error:p,isLoading:!1})),p}return typeof z=="function"?(E.current=!0,z(y.current).then(({data:p,hasMore:D,cursor:Et})=>(F===n.current&&(y.current&&(y.current.cursor=Et,y.current.lastItem=p?.[p.length-1]),f.current&&f.current(p,y.current),D&&(M.current=p.length),R.current=D,i(Ft=>y.current.page===0?{data:p,isLoading:!1}:{data:(Ft.data||[])?.concat(p),isLoading:!1})),p),p=>(R.current=!1,W(p)))):(E.current=!1,z.then(p=>(F===n.current&&(f.current&&f.current(p),i({data:p,isLoading:!1})),p),W))},[f,u,c,s,i,S,m,y,$,x]);S.current=b;let h=(0,d.useCallback)(()=>{y.current={page:0};let I=c.current||[];return b(...I)},[b,c]),g=(0,d.useCallback)(async(I,F)=>{let z;try{if(F?.optimisticUpdate){x(),typeof F?.rollbackOnError!="function"&&F?.rollbackOnError!==!1&&(z=structuredClone(_.current?.value));let W=F.optimisticUpdate;i(p=>({...p,data:W(p.data)}))}return await I}catch(W){if(typeof F?.rollbackOnError=="function"){let p=F.rollbackOnError;i(D=>({...D,data:p(D.data)}))}else F?.optimisticUpdate&&F?.rollbackOnError!==!1&&i(p=>({...p,data:z}));throw W}finally{F?.shouldRevalidateAfter!==!1&&(l.environment.launchType===l.LaunchType.Background||l.environment.commandMode==="menu-bar"?await h():h())}},[h,_,i,x]),L=(0,d.useCallback)(()=>{y.current.page+=1;let I=c.current||[];b(...I)},[y,c,b]);(0,d.useEffect)(()=>{y.current={page:0},r?.execute!==!1?b(...e||[]):x()},[Ot([e,r?.execute,b]),o,y]),(0,d.useEffect)(()=>()=>{x()},[x]);let vt=r?.execute!==!1?a.isLoading:!1,St={...a,isLoading:vt},At=E.current?{pageSize:M.current,hasMore:R.current,onLoadMore:L}:void 0;return{...St,revalidate:h,mutate:g,pagination:At}}function Dt(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function je(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function Vt(t){return t instanceof URLSearchParams?t.toString():t}function We(t,e=[]){function r(n){return"update"in t?t.update(n,"utf8"):t.write(n)}return{dispatch:function(n){n=Vt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(n),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let o=null;if((o=e.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+o+"]");return}else e.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(n);c=c.sort(),je(n)||c.splice(0,0,"prototype","__proto__","constructor"),r("object:"+c.length+":");let u=this;return c.forEach(function(f){u.dispatch(f),r(":"),u.dispatch(n[f]),r(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let i=this;if(r("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){i.dispatch(c)});return}let s=[],o=n.map(function(c){let u=jt(),f=e.slice();return We(u,f).dispatch(c),s=s.concat(f.slice(e.length)),u.read().toString()});e=e.concat(s),o.sort(),this._array(o,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),je(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){r("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function jt(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function Nt(t,e){let r=this[t];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:e}function Mt(t,e){return typeof e=="string"&&e.startsWith("__raycast_cached_date__")?new Date(e.replace("__raycast_cached_date__","")):typeof e=="string"&&e.startsWith("__raycast_cached_buffer__")?Buffer.from(e.replace("__raycast_cached_buffer__",""),"base64"):e}function Ne(t){let e=ze.default.createHash("sha1");return We(e).dispatch(t),e.digest("hex")}var zt=Symbol("cache without namespace"),Me=new Map;function ke(t,e,r){let n=r?.cacheNamespace||zt,a=Me.get(n)||Me.set(n,new l.Cache({namespace:r?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let i=P(t),s=P(e),o=(0,d.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(i.current)}catch(m){console.error("Could not get Cache data:",m);return}}),c=(0,d.useMemo)(()=>{if(typeof o<"u"){if(o==="undefined")return;try{return JSON.parse(o,Mt)}catch(m){return console.warn("The cached data is corrupted",m),s.current}}else return s.current},[o,s]),u=P(c),f=(0,d.useCallback)(m=>{let $=typeof m=="function"?m(u.current):m;if(typeof $>"u")a.set(i.current,"undefined");else{let _=JSON.stringify($,Nt);a.set(i.current,_)}return $},[a,i,u]);return[c,f]}var B=Symbol();function q(t,e,r){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:i,...s}=r||{},o=(0,d.useRef)(null),[c,u]=ke(Ne(e||[])+i,B,{cacheNamespace:Ne(t)}),f=(0,d.useRef)(c!==B?c:n),m=(0,d.useRef)(void 0),{mutate:$,revalidate:_,...S}=Lt(t,e||[],{...s,onData(x,b){m.current=b,s.onData&&s.onData(x,b),!(b&&b.page>0)&&(o.current="promise",f.current=x,u(x))}}),y,E=S.pagination;m.current&&m.current.page>0&&S.data?y=S.data:o.current==="promise"?y=f.current:a&&c!==B?(y=c,E&&(E.hasMore=!0,E.pageSize=c.length)):a&&c===B?y=f.current:c!==B?(y=c,E&&(E.hasMore=!0,E.pageSize=c.length)):y=n;let R=P(y),M=(0,d.useCallback)(async(x,b)=>{let h;try{if(b?.optimisticUpdate){typeof b?.rollbackOnError!="function"&&b?.rollbackOnError!==!1&&(h=structuredClone(R.current));let g=b.optimisticUpdate(R.current);o.current="cache",f.current=g,u(g)}return await $(x,{shouldRevalidateAfter:b?.shouldRevalidateAfter})}catch(g){if(typeof b?.rollbackOnError=="function"){let L=b.rollbackOnError(R.current);o.current="cache",f.current=L,u(L)}else b?.optimisticUpdate&&b?.rollbackOnError!==!1&&(o.current="cache",f.current=h,u(h));throw g}},[u,$,R,f,o]);return(0,d.useEffect)(()=>{c!==B&&(o.current="cache",f.current=c)},[c]),{data:y,isLoading:S.isLoading,error:S.error,mutate:m.current&&m.current.page>0?$:M,pagination:E,revalidate:_}}var se={asana:"1191201745684312",github:"7235fe8d42157f1f38c0",linear:"c8ff37b9225c3c9aefd7d66ea0e5b6f1",slack:"851756884692.5546927290212"},oe=class t{constructor(e){this.clientId=e.clientId,this.scope=Array.isArray(e.scope)?e.scope.join(" "):e.scope,this.personalAccessToken=e.personalAccessToken,this.bodyEncoding=e.bodyEncoding,this.client=e.client,this.extraParameters=e.extraParameters,this.authorizeUrl=e.authorizeUrl,this.tokenUrl=e.tokenUrl,this.refreshTokenUrl=e.refreshTokenUrl,this.onAuthorize=e.onAuthorize,this.tokenResponseParser=e.tokenResponseParser??(r=>r),this.tokenRefreshResponseParser=e.tokenRefreshResponseParser??(r=>r),this.authorize=this.authorize.bind(this)}static asana(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Asana",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="251" height="232" fill="none"><path fill="#F06A6A" d="M179.383 54.373c0 30.017-24.337 54.374-54.354 54.374-30.035 0-54.373-24.338-54.373-54.374C70.656 24.338 94.993 0 125.029 0c30.017 0 54.354 24.338 54.354 54.373ZM54.393 122.33C24.376 122.33.02 146.668.02 176.685c0 30.017 24.337 54.373 54.373 54.373 30.035 0 54.373-24.338 54.373-54.373 0-30.017-24.338-54.355-54.373-54.355Zm141.253 0c-30.035 0-54.373 24.338-54.373 54.374 0 30.035 24.338 54.373 54.373 54.373 30.017 0 54.374-24.338 54.374-54.373 0-30.036-24.338-54.374-54.374-54.374Z"/></svg>')}`,providerId:"asana",description:"Connect your Asana account"}),clientId:e.clientId??se.asana,authorizeUrl:e.authorizeUrl??"https://asana.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://asana.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://asana.oauth.raycast.com/refresh-token",scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static github(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"GitHub",providerIcon:{source:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>')}`,tintColor:l.Color.PrimaryText},providerId:"github",description:"Connect your GitHub account"}),clientId:e.clientId??se.github,authorizeUrl:e.authorizeUrl??"https://github.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://github.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://github.oauth.raycast.com/refresh-token",scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static google(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.AppURI,providerName:"Google",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" style="display:block" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')}`,providerId:"google",description:"Connect your Google account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:e.tokenUrl??"https://oauth2.googleapis.com/token",refreshTokenUrl:e.tokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,bodyEncoding:e.bodyEncoding??"url-encoded",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static jira(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Jira",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2361" height="2500" viewBox="2.59 0 214.091 224"><linearGradient id="a" x1="102.4" x2="56.15" y1="218.63" y2="172.39" gradientTransform="matrix(1 0 0 -1 0 264)" gradientUnits="userSpaceOnUse"><stop offset=".18" stop-color="#0052cc"/><stop offset="1" stop-color="#2684ff"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="114.65" x2="160.81" y1="85.77" y2="131.92"/><path fill="#2684ff" d="M214.06 105.73 117.67 9.34 108.33 0 35.77 72.56 2.59 105.73a8.89 8.89 0 0 0 0 12.54l66.29 66.29L108.33 224l72.55-72.56 1.13-1.12 32.05-32a8.87 8.87 0 0 0 0-12.59zm-105.73 39.39L75.21 112l33.12-33.12L141.44 112z"/><path fill="url(#a)" d="M108.33 78.88a55.75 55.75 0 0 1-.24-78.61L35.62 72.71l39.44 39.44z"/><path fill="url(#b)" d="m141.53 111.91-33.2 33.21a55.77 55.77 0 0 1 0 78.86L181 151.35z"/></svg>')}`,providerId:"jira",description:"Connect your Jira account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://auth.atlassian.com/authorize",tokenUrl:e.tokenUrl??"https://auth.atlassian.com/oauth/token",refreshTokenUrl:e.refreshTokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static linear(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Linear",providerIcon:{source:{light:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#222326" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/></svg>')}`,dark:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z" /></svg>')}`}},providerId:"linear",description:"Connect your Linear account"}),clientId:e.clientId??se.linear,authorizeUrl:e.authorizeUrl??"https://linear.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://linear.oauth.raycast.com/token",refreshTokenUrl:e.refreshTokenUrl??"https://linear.oauth.raycast.com/refresh-token",scope:e.scope,extraParameters:{actor:"user"},onAuthorize:e.onAuthorize,bodyEncoding:e.bodyEncoding,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}static slack(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Slack",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="73 73 124 124"><style>.st0{fill:#e01e5a}.st1{fill:#36c5f0}.st2{fill:#2eb67d}.st3{fill:#ecb22e}</style><path d="M99.4 151.2c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zM105.9 151.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9v-32.3z" class="st0"/><path d="M118.8 99.4c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v12.9h-12.9zM118.8 105.9c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H86.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3z" class="st1"/><path d="M170.6 118.8c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9h-12.9v-12.9zM164.1 118.8c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V86.5c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3z" class="st2"/><path d="M151.2 170.6c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9v-12.9h12.9zM151.2 164.1c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9h-32.3z" class="st3"/></svg>')}`,providerId:"slack",description:"Connect your Slack account"}),clientId:e.clientId??se.slack,authorizeUrl:e.authorizeUrl??"https://slack.oauth.raycast.com/authorize",tokenUrl:e.tokenUrl??"https://slack.oauth.raycast.com/token",refreshTokenUrl:e.tokenUrl??"https://slack.oauth.raycast.com/refresh-token",scope:"",extraParameters:{user_scope:e.scope},personalAccessToken:e.personalAccessToken,bodyEncoding:e.tokenUrl?e.bodyEncoding??"url-encoded":"json",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser??(r=>({access_token:r.authed_user.access_token,scope:r.authed_user.scope}))})}static zoom(e){return new t({client:new l.OAuth.PKCEClient({redirectMethod:l.OAuth.RedirectMethod.Web,providerName:"Zoom",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.845 80"><path d="M73.786 78.835H10.88A10.842 10.842 0 0 1 .833 72.122a10.841 10.841 0 0 1 2.357-11.85L46.764 16.7h-31.23C6.954 16.699 0 9.744 0 1.165h58.014c4.414 0 8.357 2.634 10.046 6.712a10.843 10.843 0 0 1-2.356 11.85L22.13 63.302h36.122c8.58 0 15.534 6.955 15.534 15.534Zm278.059-48.544C351.845 13.588 338.256 0 321.553 0c-8.934 0-16.975 3.89-22.524 10.063C293.48 3.89 285.44 0 276.505 0c-16.703 0-30.291 13.588-30.291 30.291v48.544c8.579 0 15.534-6.955 15.534-15.534v-33.01c0-8.137 6.62-14.757 14.757-14.757s14.757 6.62 14.757 14.757v33.01c0 8.58 6.955 15.534 15.534 15.534V30.291c0-8.137 6.62-14.757 14.757-14.757s14.758 6.62 14.758 14.757v33.01c0 8.58 6.954 15.534 15.534 15.534V30.291ZM238.447 40c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.908-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S173.98 26.488 173.98 40s10.953 24.466 24.466 24.466S222.913 53.512 222.913 40Zm-70.68 0c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S87.767 26.488 87.767 40s10.954 24.466 24.466 24.466S136.699 53.512 136.699 40Z" style="fill:#0b5cff"/></svg>')}`,providerId:"zoom",description:"Connect your Zoom account"}),clientId:e.clientId,authorizeUrl:e.authorizeUrl??"https://zoom.us/oauth/authorize",tokenUrl:e.tokenUrl??"https://zoom.us/oauth/token",refreshTokenUrl:e.refreshTokenUrl,scope:e.scope,personalAccessToken:e.personalAccessToken,bodyEncoding:e.bodyEncoding??"url-encoded",onAuthorize:e.onAuthorize,tokenRefreshResponseParser:e.tokenRefreshResponseParser,tokenResponseParser:e.tokenResponseParser})}async authorize(){let e=await this.client.getTokens();if(e?.accessToken){if(e.refreshToken&&e.isExpired()){let i=await this.refreshTokens({token:e.refreshToken});if(i)return await this.client.setTokens(i),i.access_token}return e.accessToken}let r=await this.client.authorizationRequest({endpoint:this.authorizeUrl,clientId:this.clientId,scope:this.scope,extraParameters:this.extraParameters}),{authorizationCode:n}=await this.client.authorize(r),a=await this.fetchTokens({authRequest:r,authorizationCode:n});return await this.client.setTokens(a),a.access_token}async fetchTokens({authRequest:e,authorizationCode:r}){let n;if(this.bodyEncoding==="url-encoded"){let s=new URLSearchParams;s.append("client_id",this.clientId),s.append("code",r),s.append("code_verifier",e.codeVerifier),s.append("grant_type","authorization_code"),s.append("redirect_uri",e.redirectURI),n={body:s}}else n={body:JSON.stringify({client_id:this.clientId,code:r,code_verifier:e.codeVerifier,grant_type:"authorization_code",redirect_uri:e.redirectURI}),headers:{"Content-Type":"application/json"}};let a=await fetch(this.tokenUrl,{method:"POST",...n});if(!a.ok){let s=await a.text();throw console.error("fetch tokens error:",s),new Error(`Error while fetching tokens: ${a.status} (${a.statusText})
${s}`)}let i=this.tokenResponseParser(await a.json());return Array.isArray(i.scope)?{...i,scope:i.scope.join(" ")}:i}async refreshTokens({token:e}){let r;if(this.bodyEncoding==="url-encoded"){let a=new URLSearchParams;a.append("client_id",this.clientId),a.append("refresh_token",e),a.append("grant_type","refresh_token"),r={body:a}}else r={body:JSON.stringify({client_id:this.clientId,refresh_token:e,grant_type:"refresh_token"}),headers:{"Content-Type":"application/json"}};let n=await fetch(this.refreshTokenUrl??this.tokenUrl,{method:"POST",...r});if(n.ok){let a=this.tokenRefreshResponseParser(await n.json());return a.refresh_token=a.refresh_token??e,a}else{let a=await n.text();console.error("refresh tokens error:",a),this.client.description=`${this.client.providerName} needs you to sign-in again. Press \u23CE or click the button below to continue.`,await this.client.removeTokens(),await this.authorize()}}},O=null,V=null,ye=null,be=null,$e=null;function Be(t){return l.environment.commandMode==="no-view"?e=>async n=>{if(!O){O=t.personalAccessToken??await t.authorize(),V=t.personalAccessToken?"personal":"oauth";let a=(await t.client?.getTokens())?.idToken;t.onAuthorize&&await Promise.resolve(t.onAuthorize({token:O,type:V,idToken:a}))}return e(n)}:e=>{let r=n=>{t.personalAccessToken?(O=t.personalAccessToken,V="personal"):(ye||(ye=t.authorize()),O=d.default.use(ye),V="oauth");let a;return t.client&&(be||(be=t.client?.getTokens().then(i=>i?.idToken)),a=d.default.use(be)),t.onAuthorize&&($e||($e=Promise.resolve(t.onAuthorize({token:O,type:V,idToken:a}))),d.default.use($e)),(0,we.jsx)(e,{...n})};return r.displayName=`withAccessToken(${e.displayName||e.name})`,r}}function Ge(){if(!O||!V)throw new Error("getAccessToken must be used when authenticated (eg. used inside `withAccessToken`)");return{token:O,type:V}}var H=require("react");var Ke=require("@raycast/api"),He=require("react/jsx-runtime");function Je(){return(0,He.jsx)(Ke.Detail,{markdown:`
  # Error
  Please check your access token and team ID.  

  ## Access Token
  You can find the Figma access token in your Account Settings > Personal Access Token section

  ## Team ID
  You can extract the team ID by navigating to your team page in Figma and then looking at the URL in the browser, for example:
  https://www.figma.com/files/team/<TEAM_ID>/

  Update the value for <TEAM_ID> in Raycast Preferences > Extensions > Figma...  
  then reopen the command.
  `})}var C=require("@raycast/api");var w=require("@raycast/api");K();N();var Z=require("react/jsx-runtime");function Ee(t){let{revalidateVisitedFiles:e,revalidateAllFiles:r}=t;async function n(){let i=await(0,w.showToast)(w.Toast.Style.Animated,"Clearing cache");try{await Ae(),r(),i.style=w.Toast.Style.Success,i.title="Cleared cache"}catch(s){i.style=w.Toast.Style.Failure,i.title="Failed clearing cache",i.message=s instanceof Error?s.message:void 0}}async function a(){let i=await(0,w.showToast)(w.Toast.Style.Animated,"Clearing recent files");try{await qe(),e(),i.style=w.Toast.Style.Success,i.title="Cleared recent files"}catch(s){i.style=w.Toast.Style.Failure,i.title="Failed clearing recent files",i.message=s instanceof Error?s.message:void 0}}return(0,Z.jsxs)(w.ActionPanel.Section,{title:"Advanced",children:[(0,Z.jsx)(w.Action,{icon:w.Icon.DeleteDocument,title:"Clear Recent Files",onAction:a}),(0,Z.jsx)(w.Action,{icon:w.Icon.RotateAntiClockwise,title:"Reload Files",onAction:n})]})}var rt=require("@raycast/api");var Fe=require("@raycast/api"),Te=require("react/jsx-runtime");function tt(t){let{branch:e,file:r,desktopApp:n}=t;return n?(0,Te.jsx)(Fe.Action.Open,{target:`figma://file/${r.key}/branch/${e.key}`,application:n,title:e.name,icon:"branch.svg"}):(0,Te.jsx)(Fe.Action.Open,{target:`https://figma.com/file/${r.key}/branch/${e.key}`,title:e.name,icon:"branch.svg"})}var Pe=require("react/jsx-runtime");function nt(t){let{file:e,desktopApp:r}=t;return(0,Pe.jsx)(rt.ActionPanel.Submenu,{icon:"branch.svg",title:"Open Branch",shortcut:{modifiers:["cmd"],key:"d"},children:e.branches.map(n=>(0,Pe.jsx)(tt,{branch:n,file:e,desktopApp:r},n.key))})}var pe=require("@raycast/api");var ot=require("react");var k=require("@raycast/api");K();var Qt=t=>new Promise(e=>setTimeout(e,t));async function he(t,e,{maxRetries:r=2}={}){let{PERSONAL_ACCESS_TOKEN:n}=(0,k.getPreferenceValues)(),{token:a,type:i}=Ge(),s=0;for(;;){let o=await fetch(`https://api.figma.com/v1${t}`,{headers:{...e?.headers,"Content-Type":"application/json",...i==="oauth"?{Authorization:`Bearer ${a}`}:{"X-Figma-Token":n}},...e});if(o.ok)return o.json();if(o.status===429){if(s++>=r){let f=new Error(`Rate limit exceeded after ${s} attempts.`);return f.response=o,Promise.reject(f)}let u=Number(o.headers.get("retry-after"))||Math.min(2**s,60);await Qt(u*1e3);continue}if(o.status===403){let u=new Error("Auth failed: Your Figma access token has expired.");return u.response=o,Promise.reject(u)}let c=new Error(`Request failed: ${o.status}: ${o.statusText}`);return c.response=o,Promise.reject(c)}}async function er(){let{TEAM_ID:t}=(0,k.getPreferenceValues)(),e=t.split(",").map(r=>r.toString().trim());try{return Promise.all(e.map(r=>he(`/teams/${r}/projects`,{method:"GET"})))}catch(r){return console.error(r),k.environment.launchType!=="background"&&(0,k.showToast)(k.Toast.Style.Failure,"Could not load team projects"),Promise.resolve([])}}async function tr(){try{let t=await er(),e=t.map(o=>o.name).join(",");await k.LocalStorage.setItem("teamNames",e);let{loadFiles:r}=await Promise.resolve().then(()=>(K(),de)),n=await r();if(!n||n.length===0)return await Promise.all(t.map(async c=>await Promise.all((c.projects||[]).map(async f=>{let m=await he(`/projects/${f.id}/files?branch_data=false`,{method:"GET"});return await fe([f.id]),{name:f.name,files:m.files??[]}}))));let a=new Set;t.forEach(o=>{(o.projects||[]).forEach(c=>{a.add(c.id)})});let i=await Se(Array.from(a));return i.length===0?[]:await Promise.all(t.map(async o=>await Promise.all((o.projects||[]).filter(u=>i.includes(u.id)).map(async u=>{let f=await he(`/projects/${u.id}/files?branch_data=false`,{method:"GET"});return await fe([u.id]),{name:u.name,files:f.files??[]}}))))}catch(t){return console.error(t),k.environment.launchType!=="background"&&(0,k.showToast)(k.Toast.Style.Failure,"Could not load files"),[]}}async function at(){let t=await tr(),e=(await k.LocalStorage.getItem("teamNames")??"").split(",");if(t.length===0||t.every(n=>n.length===0)){let{loadFiles:n}=await Promise.resolve().then(()=>(K(),de)),a=await n();if(a&&a.length>0)return a}let r=t.map((n,a)=>({name:e[a],files:n}));if(r.length>0){let{storeFiles:n}=await Promise.resolve().then(()=>(K(),de));await n(r)}return r}async function it(t){try{return(await he(`/files/${t}?depth=1`,{method:"GET"})).document.children}catch(e){return console.error(e),k.environment.launchType!=="background"&&(0,k.showToast)(k.Toast.Style.Failure,"Could not load pages (Figma Slides not supported)"),Promise.resolve([])}}var X=require("@raycast/api"),Ce=require("react/jsx-runtime");function st(t){let{file:e,node:r,desktopApp:n,onVisit:a}=t;return n?(0,Ce.jsx)(X.Action.Open,{title:r.name,icon:X.Icon.Document,target:`figma://file/${e.key}?node-id=${r.id}`,application:n,onOpen:()=>a(e)}):(0,Ce.jsx)(X.Action.OpenInBrowser,{title:r.name,url:`https://figma.com/file/${e.key}?node-id=${r.id}`,onOpen:()=>a(e)})}var _e=require("react/jsx-runtime");function ct(t){let[e,r]=(0,ot.useState)(!1),{data:n,isLoading:a}=q(i=>it(i),[t.file.key],{execute:e});return(0,_e.jsx)(pe.ActionPanel.Submenu,{icon:pe.Icon.Document,title:"Open Page",shortcut:{modifiers:["cmd"],key:"g"},isLoading:a,onOpen:()=>r(!0),children:n?.map(i=>(0,_e.jsx)(st,{file:t.file,desktopApp:t.desktopApp,node:i,onVisit:()=>t.onVisit(t.file)},i.id))})}var Re=require("@raycast/api"),Ie=require("react/jsx-runtime");function lt(t){return t.desktopApp?(0,Ie.jsx)(Re.Action.Open,{icon:"command-icon.png",title:"Open in Figma",target:`figma://file/${t.file.key}`,application:t.desktopApp,onOpen:()=>t.onVisit(t.file)}):(0,Ie.jsx)(Re.Action.OpenInBrowser,{url:`https://figma.com/file/${t.file.key}`,onOpen:()=>t.onVisit(t.file)})}var Q=require("@raycast/api");N();var ft=require("react/jsx-runtime");function ut(t){let{file:e}=t;return(0,ft.jsx)(Q.Action,{title:t.isStarred===!1?"Star This File":"Unstar This File",icon:t.isStarred?Q.Icon.StarDisabled:Q.Icon.Star,shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:async()=>{t.isStarred===!0?await Xe(e):await Ze(e),t.revalidate()}})}var T=require("react/jsx-runtime");function ee(t){let{file:e,extraKey:r,desktopApp:n,onVisit:a,revalidateStarredFiles:i,revalidateVisitedFiles:s,revalidateAllFiles:o,searchkeywords:c}=t,u=r?`${e.key}-${r}`:e.key,f=t.starredFiles.some($=>$.name===e.name),m={};return m.icon="branch.svg",m.tooltip="File has branches",(0,T.jsx)(C.Grid.Item,{id:u,title:e.name,subtitle:rr(Date.parse(e.last_modified)),keywords:[c??""],content:{tooltip:e.name,value:e.thumbnail_url??"Missing thumbnail"},accessory:e.branches&&m,actions:(0,T.jsxs)(C.ActionPanel,{children:[(0,T.jsxs)(C.ActionPanel.Section,{children:[(0,T.jsx)(lt,{file:t.file,desktopApp:n,onVisit:a}),(0,T.jsx)(C.Action.CopyToClipboard,{content:`https://figma.com/file/${e.key}`}),t.starredFilesCount>=10&&!f?(0,T.jsx)(C.Action,{icon:C.Icon.ExclamationMark,title:"Reached 10 Starred Files Limit"}):(0,T.jsx)(ut,{file:t.file,isStarred:f,revalidate:i})]}),(0,T.jsxs)(C.ActionPanel.Section,{children:[e.branches&&(0,T.jsx)(nt,{file:t.file,desktopApp:n}),(0,T.jsx)(ct,{file:t.file,desktopApp:n,onVisit:a})]}),(0,T.jsx)(Ee,{revalidateVisitedFiles:s,revalidateAllFiles:o})]})})}function rr(t){let r=Date.now()-t,n=Math.floor(r/1e3),a=Math.floor(n/60),i=Math.floor(a/60),s=Math.floor(i/24),o=Math.floor(s/30),c=Math.floor(s/365);return n<60?"Edited just now":a<60?`Edited ${a} ${a===1?"minute":"minutes"} ago`:i<24?`Edited ${i} ${i===1?"hour":"hours"} ago`:s<30?`Edited ${s} ${s===1?"day":"days"} ago`:o<12?`Edited ${o} ${o===1?"month":"months"} ago`:`Edited ${c} ${c===1?"year":"years"} ago`}var me=require("react");N();function dt(t){let[e,r]=ke(t.cacheKey),n=(0,me.useCallback)(async()=>{let o=await G(t);r(o)},[t.storageKey,r]);(0,me.useEffect)(()=>{n()},[n]);async function a(o){if(!e)return;let c=e.filter(f=>f.key!==o.key),u=[o,...c].slice(0,t.maxItems);r(u),await Y(t,u)}async function i(o){if(!e)return;let c=e.filter(u=>u.key!==o.key);r(c),await Y(t,c)}async function s(){let o=await G(t);r(o)}return{files:e||[],addFile:a,removeFile:i,isLoading:!e,revalidate:s}}N();function ht(){let{files:t,addFile:e,isLoading:r,revalidate:n}=dt(ve);async function a(i){await e(i)}return{files:t,visitFile:a,isLoading:r,revalidate:n}}N();var ge=require("react"),pt=require("@raycast/api");function mt(){let[t,e]=(0,ge.useState)();return(0,ge.useEffect)(()=>{(0,pt.getApplications)().then(r=>r.find(n=>n.bundleId==="com.figma.Desktop")).then(e)},[]),t}function gt(){let{data:t,isLoading:e,error:r,revalidate:n}=q(async()=>await at(),[],{keepPreviousData:!0}),{data:a,isLoading:i,error:s,revalidate:o}=q(async()=>await Ye(),[]),{files:c,visitFile:u,isLoading:f,revalidate:m}=ht(),$=mt();return{allFiles:t,starredFiles:a,visitedFiles:c,isLoading:e||f||i,isLoadingAllFiles:e,isLoadingStarredFiles:i,isLoadingVisitedFiles:f,error:r||s,allFilesError:r,starredFilesError:s,revalidateAllFiles:n,revalidateStarredFiles:o,revalidateVisitedFiles:m,visitFile:u,desktopApp:$}}var te=require("@raycast/api");var nr=new te.OAuth.PKCEClient({redirectMethod:te.OAuth.RedirectMethod.Web,providerName:"Figma",providerIcon:"command-icon.png",description:"Connect your Figma account"}),{PERSONAL_ACCESS_TOKEN:ar}=(0,te.getPreferenceValues)(),yt=new oe({client:nr,clientId:"dkY6v4uzFHoH4RaK7mB7Uw",authorizeUrl:"https://oauth.raycast.com/v1/authorize/F7SnNEtLc3w2AFfhwdtXwpE-rW2l2OOtG3h0z76VKM6YJVtkU17gAmgJgqzIn6lO3X9SCv_iv3_3BS8a1Jq0gc14HUxILPg8wQNB8zBaX4-OjUj2ixG0",tokenUrl:"https://oauth.raycast.com/v1/token/rsuQtsavqnjuxmA3vCYSGa3E-D8_ruhzY4OqJIOA7aB4_wGaFh2WE0mQc_uMZ7E5Nk8-pAeW3JXE3WlUfgqu_-zNiM4yWU7i_z2-u0pO8HJFh7_H6ohVBh8fcDpk64nT",refreshTokenUrl:"https://oauth.raycast.com/v1/refresh-token/qJfyXOqhjDouaj06_54vl2O3NoIfY36R_-OOExXZNAS073Bih0aeNaHLO9xEpW6lbooqWCpT6zO7zLvbTx1MtXF2dU5d4B_of5d05Yxh27JIAPHG0uBw7fINhej_ViQ-sbE",scope:"file_content:read,file_metadata:read,file_versions:read,projects:read",personalAccessToken:ar});var re={ALL:"All",TEAM:"team",PROJECT:"project"},J={KEY_VALUE:"=",TEAM_PROJECT:"&$%"};function bt(t){return`${re.TEAM}${J.KEY_VALUE}${t}`}function $t(t,e){return`${t}${J.TEAM_PROJECT}${e}`}function wt(t){if(t===re.ALL)return{type:"all"};if(t.includes(J.KEY_VALUE)){let[e,r]=t.split(J.KEY_VALUE);if(e===re.TEAM)return{type:"team",teamName:r}}if(t.includes(J.TEAM_PROJECT)){let[e,r]=t.split(J.TEAM_PROJECT);return{type:"project",teamName:e,projectName:r}}return{type:"all"}}function kt(t,e){return t.filter(r=>r.name===e)}function xt(t,e,r){let n=t.find(i=>i.name===e);if(!n)return[];let a=n.files.find(i=>i.name===r);return a?[{name:e,files:[a]}]:[]}var v=require("react/jsx-runtime");function ir({launchContext:t}){let{allFiles:e,starredFiles:r,visitedFiles:n,isLoading:a,error:i,revalidateAllFiles:s,revalidateStarredFiles:o,revalidateVisitedFiles:c,visitFile:u,desktopApp:f}=gt(),[m,$]=(0,H.useState)(e),[_,S]=(0,H.useState)(!1),[y,E]=(0,H.useState)(t?.query??"");if((0,H.useEffect)(()=>{$(e)},[e]),i)return(0,v.jsx)(Je,{});function R(h){if(e&&!a){let g=wt(h);switch(g.type){case"all":$(e),S(!1);break;case"team":$(kt(e,g.teamName)),S(!0);break;case"project":$(xt(e,g.teamName,g.projectName)),S(!0);break}}}let{TEAM_ID:M}=(0,A.getPreferenceValues)(),x=M.split(",").map(h=>h.toString().trim());return(0,v.jsxs)(A.Grid,{isLoading:a,searchBarPlaceholder:"Filter files by name...",searchText:y,onSearchTextChange:E,filtering:!0,searchBarAccessory:(0,v.jsxs)(A.Grid.Dropdown,{tooltip:x.length>1?"Teams":"Projects",defaultValue:"All",onChange:R,children:[(0,v.jsx)(A.Grid.Dropdown.Item,{title:x.length>1?"All teams":"All projects",value:re.ALL},"all"),x.length>1&&e?.map(h=>(0,v.jsx)(A.Grid.Dropdown.Item,{title:h.name,value:bt(h.name),icon:"team.svg"},h.name)),e?.map(h=>(0,v.jsx)(A.Grid.Dropdown.Section,{title:h.name,children:h.files.map(g=>(0,v.jsx)(A.Grid.Dropdown.Item,{title:g.name,value:$t(h.name,g.name),icon:"project.svg"},g.name))},h.name))]}),children:[!_&&(0,v.jsx)(A.Grid.Section,{title:"Starred Files",children:r?.map(h=>(0,v.jsx)(ee,{file:h,desktopApp:f,extraKey:h.key+"-starred-file-item",revalidateStarredFiles:o,revalidateVisitedFiles:c,revalidateAllFiles:s,onVisit:u,starredFiles:r||[],starredFilesCount:r.length||0},h.key+"-starred-file"))},"starred-files"),!_&&(0,v.jsx)(A.Grid.Section,{title:"Recent Files",children:n?.map(h=>(0,v.jsx)(ee,{file:h,desktopApp:f,extraKey:h.key+"-recent-file-item",revalidateStarredFiles:o,revalidateVisitedFiles:c,revalidateAllFiles:s,onVisit:u,starredFiles:r??[],starredFilesCount:r?.length??0},h.key+"-recent-file"))},"recent-files"),m?.map(h=>h.files.map(g=>g.files?.length!=0?(0,v.jsx)(A.Grid.Section,{title:`${g.name} ${g.files?.length!=0?`(${g.files?.length} File${g.files?.length===1?"":"s"})`:""}`,subtitle:h.name,children:g.files?.map(L=>(0,v.jsx)(ee,{searchkeywords:g.name,revalidateStarredFiles:o,revalidateVisitedFiles:c,revalidateAllFiles:s,file:L,desktopApp:f,onVisit:u,starredFiles:r??[],starredFilesCount:r?.length??0},L.key+"-file"))},h.name+g.name+"-project"):(0,v.jsx)(A.Grid.Section,{title:g.name,subtitle:h.name,aspectRatio:"16/9",children:(0,v.jsx)(A.Grid.Item,{content:"emptyProject.svg",title:"Empty project"},g.name+"-file-empty")},h.name+g.name+"-project")))]})}var sr=Be(yt)(ir);
